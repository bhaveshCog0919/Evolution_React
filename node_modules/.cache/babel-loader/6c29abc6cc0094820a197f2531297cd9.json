{"ast":null,"code":"var _jsxFileName = \"/Users/bhavik/Downloads/Cognisun/Evolution/Evolution_React/evolution_new/src/views/Binder/AddUdateBinder/SubBinder.js\";\nimport React, { Component } from 'react';\nimport 'primereact/resources/themes/nova-light/theme.css';\nimport 'primereact/resources/primereact.min.css';\nimport 'primeicons/primeicons.css';\nimport 'react-toastify/dist/ReactToastify.css';\nimport { Col, Row, Modal, ModalBody, ModalHeader, ModalFooter, Button as BTN, Input } from 'reactstrap';\nimport { withTranslation } from 'react-i18next';\nimport { DataTable } from 'primereact/datatable';\nimport { Column } from 'primereact/column';\nimport { MultiSelect } from 'primereact/multiselect';\nimport { InputText } from 'primereact/inputtext';\nimport { Button } from 'primereact/button';\nimport { CommonConfig } from '../../../utils/constants';\nimport api from '../../../utils/apiClient';\nimport APIConstant from '../../../utils/constants';\n\nclass SubBinder extends Component {\n  constructor(props) {\n    super(props);\n\n    this.getPageString = e => {\n      let firstPage = e.first + 1;\n      let l = e.rows * (e.page + 1);\n      let lastPage = l < this.state.subBinderArray.length ? l : this.state.subBinderArray.length;\n      var str = firstPage + ' to ' + lastPage + ' out of ' + this.state.subBinderArray.length + ' records';\n      this.setState({\n        selectedPage: e.first,\n        str: str,\n        rowsPerPage: e.rows\n      });\n    };\n\n    let columns = [{\n      field: \"Id\",\n      header: \"Id\",\n      sortable: true,\n      filter: true,\n      id: 0\n    }, {\n      field: \"Type\",\n      header: \"Type\",\n      sortable: true,\n      filter: true,\n      id: 1\n    }, {\n      field: \"AgentName\",\n      header: \"Agent Name\",\n      sortable: true,\n      filter: true,\n      id: 2\n    }, {\n      field: \"Title\",\n      header: \"Title\",\n      sortable: true,\n      filter: true,\n      id: 3\n    }, {\n      field: \"RefID\",\n      header: \"Ref ID\",\n      sortable: true,\n      filter: true,\n      id: 4\n    }, {\n      field: \"ActiveFrom\",\n      header: \"Active From\",\n      sortable: true,\n      filter: true,\n      id: 5\n    }, {\n      field: \"ActiveTo\",\n      header: \"Active To\",\n      sortable: true,\n      filter: true,\n      id: 6\n    }, {\n      field: \"LastUpdated\",\n      header: \"Last Updated\",\n      sortable: true,\n      filter: true,\n      id: 7\n    }, {\n      field: \"UpdatedBy\",\n      header: \"Updated By\",\n      sortable: true,\n      filter: true,\n      id: 8\n    }, {\n      field: \"Status\",\n      header: \"Status\",\n      sortable: true,\n      filter: true,\n      id: 9\n    }, {\n      body: this.actionTemplate.bind(this),\n      header: \"Action\",\n      sortable: false,\n      filter: false,\n      id: 10\n    }];\n    this.state = {\n      selectedLanguage: props.i18n.language === 'en' ? 'en-GB' : props.i18n.language === 'es' ? 'es-ES' : props.i18n.language === 'ie' ? 'en-IE' : props.i18n.language,\n      cols: columns,\n      subBinderArray: [],\n      selectedPage: 0,\n      rowsPerPageOptions: CommonConfig.dataTableConfig.rowsPerPageOptions,\n      rowsPerPage: CommonConfig.dataTableConfig.rowsPerPage,\n      globalFilter: null,\n      paginatorTemplate: \"CurrentPageReport FirstPageLink PrevPageLink PageLinks NextPageLink LastPageLink RowsPerPageDropdown\"\n    };\n    this.colOptions = [];\n\n    for (let col of columns) {\n      this.colOptions.push({\n        label: col.header,\n        value: col\n      });\n    }\n\n    this.onColumnToggle = this.onColumnToggle.bind(this);\n    this.actionTemplate = this.actionTemplate.bind(this);\n    this.export = this.export.bind(this);\n  }\n\n  onColumnToggle(event) {\n    let valueInOrder = event.value.sort((x, y) => {\n      return x.id - y.id;\n    });\n    this.setState({\n      cols: valueInOrder\n    });\n  }\n\n  export() {\n    this.dt.exportCSV();\n  }\n\n  actionTemplate(rowData, column) {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 74,\n        columnNumber: 16\n      }\n    }, /*#__PURE__*/React.createElement(Button, {\n      type: \"button\",\n      icon: \"pi pi-eye\",\n      className: \"p-button-warning\",\n      onClick: () => this.edit(rowData),\n      style: {\n        marginRight: '.5em'\n      },\n      tooltip: \"View\",\n      tooltipOptions: {\n        position: 'bottom'\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 75,\n        columnNumber: 13\n      }\n    }), /*#__PURE__*/React.createElement(Button, {\n      type: \"button\",\n      icon: \"pi pi-trash\",\n      className: \"p-button-danger\",\n      tooltip: \"Delete\",\n      tooltipOptions: {\n        position: 'bottom'\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 78,\n        columnNumber: 13\n      }\n    }));\n  }\n\n  componentWillMount() {}\n\n  componentDidMount() {\n    var splitData = this.props.location.pathname.split(\"/\"); // if (splitData[3] !== undefined) {\n\n    if (!CommonConfig.isEmpty(splitData[3])) {\n      this.setState({\n        BinderId: splitData[3]\n      });\n      this.getSubBinders(splitData[3]);\n    } // if (this.props.match.params.constructor === Object && Object.keys(this.props.match.params).length !== 0) {\n    //     this.setState({ BinderId: this.props.match.params.Id })\n    //     this.getSubBinders(this.props.match.params.Id)\n    // }\n\n  }\n\n  getSubBinders(BinderId) {\n    let data = {\n      \"BinderId\": BinderId,\n      \"UserId\": CommonConfig.loggedInUserId()\n    };\n    api.post(APIConstant.path.getSubBinders, data).then(res => {\n      console.log(res.data[0]);\n\n      if (res.success) {\n        var getSubBinders = res.data[0];\n        this.setState({\n          subBinderArray: getSubBinders.map(obj => {\n            console.log(obj);\n            return {\n              \"Id\": obj.SubBinderId,\n              \"Type\": obj.SubBinderType,\n              \"AgentName\": obj.NAME,\n              \"Title\": obj.SubBinderTitle,\n              \"RefID\": obj.ContactCode,\n              \"ActiveFrom\": obj.LiveStartDate,\n              \"ActiveTo\": obj.LiveEndDate,\n              \"LastUpdated\": obj.UpdatedOn,\n              \"UpdatedBy\": obj.UpdatedByName,\n              \"Status\": obj.Status\n            };\n          })\n        });\n      }\n    }).catch(err => {\n      console.log(err);\n    });\n  }\n\n  addBinder() {\n    this.props.history.push('/AddUpdateBinder');\n  }\n\n  render() {\n    var header = /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 138,\n        columnNumber: 22\n      }\n    }, /*#__PURE__*/React.createElement(Row, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 139,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(Col, {\n      md: \"1\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 140,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(MultiSelect, {\n      value: this.state.cols,\n      options: this.colOptions,\n      fixedPlaceholder: true,\n      placeholder: CommonConfig.dataTableConfig.columnToggleIcon,\n      tooltip: \"Show / Hide Column\",\n      onChange: this.onColumnToggle,\n      style: {\n        width: '50px'\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 141,\n        columnNumber: 21\n      }\n    })), /*#__PURE__*/React.createElement(Col, {\n      md: \"11\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 145,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      style: {\n        textAlign: 'right'\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 146,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"i\", {\n      className: \"pi pi-search\",\n      style: {\n        margin: '4px 4px 0 0'\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 147,\n        columnNumber: 25\n      }\n    }), /*#__PURE__*/React.createElement(InputText, {\n      type: \"search\",\n      onInput: e => this.setState({\n        globalFilter: e.target.value\n      }),\n      placeholder: \"Global Search\",\n      size: \"30\",\n      style: {\n        marginRight: 10\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 148,\n        columnNumber: 25\n      }\n    }), /*#__PURE__*/React.createElement(Button, {\n      type: \"button\",\n      icon: \"pi pi-external-link\",\n      iconPos: \"left\",\n      tooltip: \"Export as CSV\",\n      tooltipOptions: {\n        position: 'left'\n      },\n      onClick: this.export,\n      style: {\n        marginRight: 10\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 150,\n        columnNumber: 25\n      }\n    })))));\n    let columns = this.state.cols.map((col, i) => {\n      return /*#__PURE__*/React.createElement(Column, {\n        key: i,\n        field: col.field,\n        header: col.header,\n        body: col.body,\n        sortable: col.sortable,\n        filter: col.filter,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 157,\n          columnNumber: 20\n        }\n      });\n    });\n    return /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 161,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"basic-header\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 162,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"h1\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 163,\n        columnNumber: 21\n      }\n    }, \"Sub Binders\"), \"/\", /*#__PURE__*/React.createElement(\"div\", {\n      className: \"header-right-option\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 164,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(MultiSelect, {\n      value: this.state.cols,\n      options: this.colOptions,\n      fixedPlaceholder: true,\n      placeholder: CommonConfig.dataTableConfig.columnToggleIcon,\n      tooltip: \"Show / Hide Column\",\n      onChange: this.onColumnToggle,\n      style: {\n        width: '50px'\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 165,\n        columnNumber: 25\n      }\n    }), /*#__PURE__*/React.createElement(Button, {\n      type: \"button\",\n      icon: \"pi pi-plus\",\n      tooltip: \"Add Contact\",\n      tooltipOptions: {\n        position: 'bottom'\n      },\n      onClick: () => this.addBinder(),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 169,\n        columnNumber: 25\n      }\n    }), /*#__PURE__*/React.createElement(Button, {\n      type: \"button\",\n      icon: \"pi pi-external-link\",\n      tooltip: \"Export as CSV\",\n      tooltipOptions: {\n        position: 'bottom'\n      },\n      onClick: this.export,\n      style: {\n        marginRight: 10\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 170,\n        columnNumber: 25\n      }\n    }))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"table-custom\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 174,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(DataTable, {\n      ref: el => this.dt = el,\n      value: this.state.subBinderArray,\n      first: this.state.selectedPage,\n      onPage: e => this.getPageString(e),\n      paginator: true,\n      rows: this.state.rowsPerPage,\n      totalRecords: this.state.subBinderArray.length,\n      exportFilename: \"Contact List\",\n      currentPageReportTemplate: this.state.str,\n      scrollable: true,\n      scrollHeight: \"340px\",\n      paginatorTemplate: this.state.paginatorTemplate,\n      rowsPerPageOptions: this.state.rowsPerPageOptions,\n      globalFilter: this.state.globalFilter,\n      emptyMessage: \"No records found\",\n      responsive: true,\n      resizableColumns: true,\n      columnResizeMode: \"fit\" //stateKey=\"contactList\" stateStorage=\"local\" header={header} \n      ,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 175,\n        columnNumber: 21\n      }\n    }, columns)));\n  }\n\n}\n\nexport default withTranslation()(SubBinder);","map":{"version":3,"sources":["/Users/bhavik/Downloads/Cognisun/Evolution/Evolution_React/evolution_new/src/views/Binder/AddUdateBinder/SubBinder.js"],"names":["React","Component","Col","Row","Modal","ModalBody","ModalHeader","ModalFooter","Button","BTN","Input","withTranslation","DataTable","Column","MultiSelect","InputText","CommonConfig","api","APIConstant","SubBinder","constructor","props","getPageString","e","firstPage","first","l","rows","page","lastPage","state","subBinderArray","length","str","setState","selectedPage","rowsPerPage","columns","field","header","sortable","filter","id","body","actionTemplate","bind","selectedLanguage","i18n","language","cols","rowsPerPageOptions","dataTableConfig","globalFilter","paginatorTemplate","colOptions","col","push","label","value","onColumnToggle","export","event","valueInOrder","sort","x","y","dt","exportCSV","rowData","column","edit","marginRight","position","componentWillMount","componentDidMount","splitData","location","pathname","split","isEmpty","BinderId","getSubBinders","data","loggedInUserId","post","path","then","res","console","log","success","map","obj","SubBinderId","SubBinderType","NAME","SubBinderTitle","ContactCode","LiveStartDate","LiveEndDate","UpdatedOn","UpdatedByName","Status","catch","err","addBinder","history","render","columnToggleIcon","width","textAlign","margin","target","i","el"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\r\nimport 'primereact/resources/themes/nova-light/theme.css';\r\nimport 'primereact/resources/primereact.min.css';\r\nimport 'primeicons/primeicons.css';\r\nimport 'react-toastify/dist/ReactToastify.css';\r\nimport { Col, Row, Modal, ModalBody, ModalHeader, ModalFooter, Button as BTN, Input } from 'reactstrap';\r\nimport { withTranslation } from 'react-i18next';\r\nimport { DataTable } from 'primereact/datatable';\r\nimport { Column } from 'primereact/column';\r\nimport { MultiSelect } from 'primereact/multiselect';\r\nimport { InputText } from 'primereact/inputtext';\r\nimport { Button } from 'primereact/button';\r\nimport { CommonConfig } from '../../../utils/constants';\r\nimport api from '../../../utils/apiClient';\r\nimport APIConstant from '../../../utils/constants';\r\n\r\nclass SubBinder extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n        \r\n        let columns = [\r\n            { field: \"Id\", header: \"Id\", sortable: true, filter: true, id: 0 },\r\n            { field: \"Type\", header: \"Type\", sortable: true, filter: true, id: 1 },\r\n            { field: \"AgentName\", header: \"Agent Name\", sortable: true, filter: true, id: 2 },\r\n            { field: \"Title\", header: \"Title\", sortable: true, filter: true, id: 3 },\r\n            { field: \"RefID\", header: \"Ref ID\", sortable: true, filter: true, id: 4 },\r\n            { field: \"ActiveFrom\", header: \"Active From\", sortable: true, filter: true, id: 5 },\r\n            { field: \"ActiveTo\", header: \"Active To\", sortable: true, filter: true, id: 6 },\r\n            { field: \"LastUpdated\", header: \"Last Updated\", sortable: true, filter: true, id: 7 },\r\n            { field: \"UpdatedBy\", header: \"Updated By\", sortable: true, filter: true, id: 8 },\r\n            { field: \"Status\", header: \"Status\", sortable: true, filter: true, id: 9 },\r\n            { body: this.actionTemplate.bind(this), header: \"Action\", sortable: false, filter: false, id: 10 }\r\n        ];\r\n\r\n        this.state = {\r\n            selectedLanguage: (props.i18n.language === 'en') ? 'en-GB' : (props.i18n.language === 'es') ? 'es-ES' : (props.i18n.language === 'ie') ? 'en-IE' : props.i18n.language,\r\n            cols: columns,\r\n            subBinderArray: [],\r\n            selectedPage: 0,\r\n            rowsPerPageOptions: CommonConfig.dataTableConfig.rowsPerPageOptions,\r\n            rowsPerPage: CommonConfig.dataTableConfig.rowsPerPage,\r\n            globalFilter: null,\r\n            paginatorTemplate: \"CurrentPageReport FirstPageLink PrevPageLink PageLinks NextPageLink LastPageLink RowsPerPageDropdown\"\r\n        };\r\n\r\n        this.colOptions = [];\r\n        for (let col of columns) {\r\n            this.colOptions.push({ label: col.header, value: col });\r\n        }\r\n\r\n        this.onColumnToggle = this.onColumnToggle.bind(this);\r\n        this.actionTemplate = this.actionTemplate.bind(this);\r\n        this.export = this.export.bind(this);\r\n    }\r\n\r\n    getPageString = (e) => {\r\n        let firstPage = e.first + 1;\r\n        let l = e.rows * (e.page + 1);\r\n        let lastPage = (l < this.state.subBinderArray.length) ? l : this.state.subBinderArray.length\r\n        var str = firstPage + ' to ' + lastPage + ' out of ' + this.state.subBinderArray.length + ' records';\r\n        this.setState({ selectedPage: e.first, str: str, rowsPerPage: e.rows });\r\n    }\r\n\r\n    onColumnToggle(event) {\r\n        let valueInOrder = event.value.sort((x, y) => { return x.id - y.id });\r\n        this.setState({ cols: valueInOrder });\r\n    }\r\n\r\n    export() {\r\n        this.dt.exportCSV();\r\n    }\r\n\r\n    actionTemplate(rowData, column) {\r\n        return <div>\r\n            <Button type=\"button\" icon=\"pi pi-eye\" className=\"p-button-warning\" onClick={() => this.edit(rowData)}\r\n                style={{ marginRight: '.5em' }} tooltip=\"View\" tooltipOptions={{ position: 'bottom' }}>\r\n            </Button>\r\n            <Button type=\"button\" icon=\"pi pi-trash\" className=\"p-button-danger\" tooltip=\"Delete\" tooltipOptions={{ position: 'bottom' }}></Button>\r\n        </div>;\r\n    }\r\n\r\n    componentWillMount() {\r\n\r\n    }\r\n\r\n    componentDidMount() {\r\n        var splitData = this.props.location.pathname.split(\"/\");\r\n        // if (splitData[3] !== undefined) {\r\n        if (!CommonConfig.isEmpty(splitData[3])) {\r\n            this.setState({ BinderId: splitData[3] })\r\n            this.getSubBinders(splitData[3])\r\n        } \r\n        // if (this.props.match.params.constructor === Object && Object.keys(this.props.match.params).length !== 0) {\r\n        //     this.setState({ BinderId: this.props.match.params.Id })\r\n        //     this.getSubBinders(this.props.match.params.Id)\r\n        // }\r\n    }\r\n\r\n    getSubBinders(BinderId) {\r\n        \r\n        let data = {\r\n            \"BinderId\": BinderId,\r\n            \"UserId\": CommonConfig.loggedInUserId(),\r\n        }\r\n        api.post(APIConstant.path.getSubBinders, data).then(res => {\r\n            console.log(res.data[0]);\r\n\r\n            if (res.success) {\r\n                var getSubBinders = res.data[0]\r\n                this.setState({\r\n                    subBinderArray: getSubBinders.map((obj) => {\r\n                        console.log(obj);\r\n                        return {\r\n                            \"Id\": obj.SubBinderId,\r\n                            \"Type\": obj.SubBinderType,\r\n                            \"AgentName\": obj.NAME,\r\n                            \"Title\": obj.SubBinderTitle,\r\n                            \"RefID\": obj.ContactCode,\r\n                            \"ActiveFrom\": obj.LiveStartDate,\r\n                            \"ActiveTo\": obj.LiveEndDate,\r\n                            \"LastUpdated\": obj.UpdatedOn,\r\n                            \"UpdatedBy\": obj.UpdatedByName,\r\n                            \"Status\": obj.Status,\r\n                        }\r\n                    })\r\n                })\r\n            }\r\n        }).catch(err => {\r\n            console.log(err)\r\n        });\r\n    }\r\n\r\n    addBinder() {\r\n        this.props.history.push('/AddUpdateBinder');\r\n    }\r\n\r\n    render() {\r\n        var header = <div>\r\n            <Row>\r\n                <Col md=\"1\">\r\n                    <MultiSelect value={this.state.cols} options={this.colOptions}\r\n                        fixedPlaceholder={true} placeholder={CommonConfig.dataTableConfig.columnToggleIcon} tooltip=\"Show / Hide Column\"\r\n                        onChange={this.onColumnToggle} style={{ width: '50px' }} />\r\n                </Col>\r\n                <Col md=\"11\">\r\n                    <div style={{ textAlign: 'right' }}>\r\n                        <i className=\"pi pi-search\" style={{ margin: '4px 4px 0 0' }}></i>\r\n                        <InputText type=\"search\" onInput={(e) => this.setState({ globalFilter: e.target.value })} placeholder=\"Global Search\" size=\"30\" style={{ marginRight: 10 }} />\r\n\r\n                        <Button type=\"button\" icon=\"pi pi-external-link\" iconPos=\"left\" tooltip=\"Export as CSV\" tooltipOptions={{ position: 'left' }} onClick={this.export} style={{ marginRight: 10 }}></Button>\r\n                    </div>\r\n                </Col>\r\n            </Row>\r\n        </div>;\r\n\r\n        let columns = this.state.cols.map((col, i) => {\r\n            return <Column key={i} field={col.field} header={col.header} body={col.body} sortable={col.sortable} filter={col.filter} />;\r\n        });\r\n\r\n        return (\r\n            <div>\r\n                <div className=\"basic-header\">\r\n                    <h1>Sub Binders</h1>/\r\n                    <div className=\"header-right-option\">\r\n                        <MultiSelect value={this.state.cols} options={this.colOptions}\r\n                            fixedPlaceholder={true} placeholder={CommonConfig.dataTableConfig.columnToggleIcon} tooltip=\"Show / Hide Column\"\r\n                            onChange={this.onColumnToggle} style={{ width: '50px' }}\r\n                        />\r\n                        <Button type=\"button\" icon=\"pi pi-plus\" tooltip=\"Add Contact\" tooltipOptions={{ position: 'bottom' }} onClick={() => this.addBinder()}></Button>\r\n                        <Button type=\"button\" icon=\"pi pi-external-link\" tooltip=\"Export as CSV\" tooltipOptions={{ position: 'bottom' }} onClick={this.export} style={{ marginRight: 10 }}></Button>\r\n                    </div>\r\n                </div>\r\n\r\n                <div className=\"table-custom\">\r\n                    <DataTable ref={(el) => this.dt = el} value={this.state.subBinderArray} first={this.state.selectedPage} onPage={(e) => this.getPageString(e)}\r\n                        paginator={true} rows={this.state.rowsPerPage} totalRecords={this.state.subBinderArray.length} exportFilename=\"Contact List\"\r\n                        currentPageReportTemplate={this.state.str} scrollable={true} scrollHeight=\"340px\"\r\n                        paginatorTemplate={this.state.paginatorTemplate}\r\n                        rowsPerPageOptions={this.state.rowsPerPageOptions} globalFilter={this.state.globalFilter} emptyMessage=\"No records found\"\r\n                        responsive={true} resizableColumns={true} columnResizeMode=\"fit\" //stateKey=\"contactList\" stateStorage=\"local\" header={header} \r\n                    >\r\n                        {columns}\r\n                    </DataTable>\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nexport default withTranslation()(SubBinder);"]},"metadata":{},"sourceType":"module"}