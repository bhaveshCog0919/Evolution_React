{"ast":null,"code":"import _classCallCheck from\"/Users/bhavik/Downloads/Cognisun/Evolution/Evolution_React/evolution_new/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/bhavik/Downloads/Cognisun/Evolution/Evolution_React/evolution_new/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _assertThisInitialized from\"/Users/bhavik/Downloads/Cognisun/Evolution/Evolution_React/evolution_new/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";import _inherits from\"/Users/bhavik/Downloads/Cognisun/Evolution/Evolution_React/evolution_new/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/bhavik/Downloads/Cognisun/Evolution/Evolution_React/evolution_new/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component}from'react';import'primereact/resources/themes/nova-light/theme.css';import'primereact/resources/primereact.min.css';import'primeicons/primeicons.css';import'react-toastify/dist/ReactToastify.css';import{Col,Row,Modal,ModalBody,ModalHeader,ModalFooter,Button as BTN,Input}from'reactstrap';import{withTranslation}from'react-i18next';import{DataTable}from'primereact/datatable';import{Column}from'primereact/column';import{MultiSelect}from'primereact/multiselect';import{InputText}from'primereact/inputtext';import{Button}from'primereact/button';import{CommonConfig}from'../../../utils/constants';import api from'../../../utils/apiClient';import APIConstant from'../../../utils/constants';import moment from'moment';var Transaction=/*#__PURE__*/function(_Component){_inherits(Transaction,_Component);var _super=_createSuper(Transaction);function Transaction(props){var _this;_classCallCheck(this,Transaction);_this=_super.call(this,props);_this.getPageString=function(e){var firstPage=e.first+1;var l=e.rows*(e.page+1);var lastPage=l<_this.state.transactionArray.length?l:_this.state.transactionArray.length;var str=firstPage+' to '+lastPage+' out of '+_this.state.transactionArray.length+' records';_this.setState({selectedPage:e.first,str:str,rowsPerPage:e.rows});};var columns=[{field:\"TransactionID\",header:\"Transaction ID\",sortable:true,filter:true,id:0},{field:\"SettlementID\",header:\"Settlement ID\",sortable:true,filter:true,id:1},{field:\"Type\",header:\"Type\",sortable:true,filter:true,id:2},{field:\"Policy No\",header:\"Policy No\",sortable:true,filter:true,id:3},{field:\"Status\",header:\"Status\",sortable:true,filter:true,id:4},{field:\"Name/Company\",header:\"Name/Company\",sortable:true,filter:true,id:5},{field:\"Currency\",header:\"Currency\",sortable:true,filter:true,id:6},{field:\"Total\",header:\"Total\",sortable:true,filter:true,id:7},{field:\"Outstanding\",header:\"Outstanding\",sortable:true,filter:true,id:8},{field:\"Created\",header:\"Created\",sortable:true,filter:true,id:9},{field:\"LastUpdated\",header:\"Last Updated\",sortable:true,filter:true,id:10},{field:\"CreatedBy\",header:\"Created By\",sortable:true,filter:true,id:11},{field:\"UpdatedBy\",header:\"Updated By\",sortable:true,filter:true,id:12}];_this.state={selectedLanguage:props.i18n.language==='en'?'en-GB':props.i18n.language==='es'?'es-ES':props.i18n.language==='ie'?'en-IE':props.i18n.language,cols:columns,transactionArray:[],selectedPage:0,rowsPerPageOptions:CommonConfig.dataTableConfig.rowsPerPageOptions,rowsPerPage:CommonConfig.dataTableConfig.rowsPerPage,globalFilter:null,paginatorTemplate:\"CurrentPageReport FirstPageLink PrevPageLink PageLinks NextPageLink LastPageLink RowsPerPageDropdown\"};_this.colOptions=[];for(var _i=0,_columns=columns;_i<_columns.length;_i++){var col=_columns[_i];_this.colOptions.push({label:col.header,value:col});}_this.onColumnToggle=_this.onColumnToggle.bind(_assertThisInitialized(_this));_this.export=_this.export.bind(_assertThisInitialized(_this));return _this;}_createClass(Transaction,[{key:\"onColumnToggle\",value:function onColumnToggle(event){var valueInOrder=event.value.sort(function(x,y){return x.id-y.id;});this.setState({cols:valueInOrder});}},{key:\"export\",value:function _export(){this.dt.exportCSV();}},{key:\"actionTemplate\",value:function actionTemplate(rowData,column){var _this2=this;return/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(Button,{type:\"button\",icon:\"pi pi-eye\",className:\"p-button-warning\",onClick:function onClick(){return _this2.edit(rowData);},style:{marginRight:'.5em'},tooltip:\"View\",tooltipOptions:{position:'bottom'}}),/*#__PURE__*/React.createElement(Button,{type:\"button\",icon:\"pi pi-trash\",className:\"p-button-danger\",tooltip:\"Delete\",tooltipOptions:{position:'bottom'}}));}},{key:\"componentWillMount\",value:function componentWillMount(){}},{key:\"componentDidMount\",value:function componentDidMount(){var splitData=this.props.location.pathname.split(\"/\");// if (splitData[3] !== undefined) {\nif(!CommonConfig.isEmpty(splitData[3])){this.setState({BinderId:splitData[3]});this.getTransactions(splitData[3]);}// if (this.props.match.params.constructor === Object && Object.keys(this.props.match.params).length !== 0) {\n//     this.setState({ BinderId: this.props.match.params.Id })\n//     this.getTransactions(this.props.match.params.Id)\n// }\n}},{key:\"getTransactions\",value:function getTransactions(BinderId){var _this3=this;var data={\"BinderId\":BinderId,\"UserId\":CommonConfig.loggedInUserId()};api.post(APIConstant.path.getTransaction,data).then(function(res){console.log(res.data[0]);if(res.success){var transactionData=res.data[0];_this3.setState({transactionArray:transactionData.map(function(obj){console.log(obj);return{\"TransactionID\":obj.BinderTransactionId,\"SettlementID\":obj.SettelmentId,\"Type\":obj.TransactionType,\"Policy No\":obj.PolicyNumber,\"Status\":obj.Status,\"Name/Company\":obj.Name,\"Currency\":obj.Currency,\"Total\":obj.TotalAmount,\"Outstanding\":obj.Outstanding,\"Created\":CommonConfig.isEmpty(obj.CreatedOn)?'':moment(obj.CreatedOn).format('YYYY-MM-DD'),\"LastUpdated\":CommonConfig.isEmpty(obj.UpdatedOn)?'':moment(obj.UpdatedOn).format('YYYY-MM-DD'),\"CreatedBy\":obj.CreatedByName,\"UpdatedBy\":obj.UpdatedByName};})});}}).catch(function(err){console.log(err);});}},{key:\"render\",value:function render(){var _this4=this;var columns=this.state.cols.map(function(col,i){return/*#__PURE__*/React.createElement(Column,{key:i,field:col.field,header:col.header,body:col.body,sortable:col.sortable,filter:col.filter});});return/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"div\",{className:\"basic-header\"},/*#__PURE__*/React.createElement(\"h1\",null,\"Transaction\"),\"/\",/*#__PURE__*/React.createElement(\"div\",{className:\"header-right-option\"},/*#__PURE__*/React.createElement(MultiSelect,{value:this.state.cols,options:this.colOptions,fixedPlaceholder:true,placeholder:CommonConfig.dataTableConfig.columnToggleIcon,tooltip:\"Show / Hide Column\",onChange:this.onColumnToggle,style:{width:'50px'}}),/*#__PURE__*/React.createElement(Button,{type:\"button\",icon:\"pi pi-external-link\",tooltip:\"Export as CSV\",tooltipOptions:{position:'bottom'},onClick:this.export,style:{marginRight:10}}))),/*#__PURE__*/React.createElement(\"div\",{className:\"table-custom\"},/*#__PURE__*/React.createElement(DataTable,{ref:function ref(el){return _this4.dt=el;},value:this.state.transactionArray,first:this.state.selectedPage,onPage:function onPage(e){return _this4.getPageString(e);},paginator:true,rows:this.state.rowsPerPage,totalRecords:this.state.transactionArray.length,exportFilename:\"Transaction List\",currentPageReportTemplate:this.state.str,scrollable:true,scrollHeight:\"340px\",paginatorTemplate:this.state.paginatorTemplate,rowsPerPageOptions:this.state.rowsPerPageOptions,globalFilter:this.state.globalFilter,emptyMessage:\"No records found\",responsive:true,resizableColumns:true,columnResizeMode:\"fit\"//stateKey=\"contactList\" stateStorage=\"local\" header={header} \n},columns)));}}]);return Transaction;}(Component);export default withTranslation()(Transaction);","map":{"version":3,"sources":["/Users/bhavik/Downloads/Cognisun/Evolution/Evolution_React/evolution_new/src/views/Binder/AddUdateBinder/Transaction.js"],"names":["React","Component","Col","Row","Modal","ModalBody","ModalHeader","ModalFooter","Button","BTN","Input","withTranslation","DataTable","Column","MultiSelect","InputText","CommonConfig","api","APIConstant","moment","Transaction","props","getPageString","e","firstPage","first","l","rows","page","lastPage","state","transactionArray","length","str","setState","selectedPage","rowsPerPage","columns","field","header","sortable","filter","id","selectedLanguage","i18n","language","cols","rowsPerPageOptions","dataTableConfig","globalFilter","paginatorTemplate","colOptions","col","push","label","value","onColumnToggle","bind","export","event","valueInOrder","sort","x","y","dt","exportCSV","rowData","column","edit","marginRight","position","splitData","location","pathname","split","isEmpty","BinderId","getTransactions","data","loggedInUserId","post","path","getTransaction","then","res","console","log","success","transactionData","map","obj","BinderTransactionId","SettelmentId","TransactionType","PolicyNumber","Status","Name","Currency","TotalAmount","Outstanding","CreatedOn","format","UpdatedOn","CreatedByName","UpdatedByName","catch","err","i","body","columnToggleIcon","width","el"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\r\nimport 'primereact/resources/themes/nova-light/theme.css';\r\nimport 'primereact/resources/primereact.min.css';\r\nimport 'primeicons/primeicons.css';\r\nimport 'react-toastify/dist/ReactToastify.css';\r\nimport { Col, Row, Modal, ModalBody, ModalHeader, ModalFooter, Button as BTN, Input } from 'reactstrap';\r\nimport { withTranslation } from 'react-i18next';\r\nimport { DataTable } from 'primereact/datatable';\r\nimport { Column } from 'primereact/column';\r\nimport { MultiSelect } from 'primereact/multiselect';\r\nimport { InputText } from 'primereact/inputtext';\r\nimport { Button } from 'primereact/button';\r\nimport { CommonConfig } from '../../../utils/constants';\r\nimport api from '../../../utils/apiClient';\r\nimport APIConstant from '../../../utils/constants';\r\nimport moment from 'moment';\r\n\r\nclass Transaction extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        let columns = [\r\n            { field: \"TransactionID\", header: \"Transaction ID\", sortable: true, filter: true, id: 0 },\r\n            { field: \"SettlementID\", header: \"Settlement ID\", sortable: true, filter: true, id: 1 },\r\n            { field: \"Type\", header: \"Type\", sortable: true, filter: true, id: 2 },\r\n            { field: \"Policy No\", header: \"Policy No\", sortable: true, filter: true, id: 3 },\r\n            { field: \"Status\", header: \"Status\", sortable: true, filter: true, id: 4 },\r\n            { field: \"Name/Company\", header: \"Name/Company\", sortable: true, filter: true, id: 5 },\r\n            { field: \"Currency\", header: \"Currency\", sortable: true, filter: true, id: 6 },\r\n            { field: \"Total\", header: \"Total\", sortable: true, filter: true, id: 7 },\r\n            { field: \"Outstanding\", header: \"Outstanding\", sortable: true, filter: true, id: 8 },\r\n            { field: \"Created\", header: \"Created\", sortable: true, filter: true, id: 9 },\r\n            { field: \"LastUpdated\", header: \"Last Updated\", sortable: true, filter: true, id: 10 },\r\n            { field: \"CreatedBy\", header: \"Created By\", sortable: true, filter: true, id: 11 },\r\n            { field: \"UpdatedBy\", header: \"Updated By\", sortable: true, filter: true, id: 12 }\r\n        ];\r\n\r\n        this.state = {\r\n            selectedLanguage: (props.i18n.language === 'en') ? 'en-GB' : (props.i18n.language === 'es') ? 'es-ES' : (props.i18n.language === 'ie') ? 'en-IE' : props.i18n.language,\r\n            cols: columns,\r\n            transactionArray: [],\r\n            selectedPage: 0,\r\n            rowsPerPageOptions: CommonConfig.dataTableConfig.rowsPerPageOptions,\r\n            rowsPerPage: CommonConfig.dataTableConfig.rowsPerPage,\r\n            globalFilter: null,\r\n            paginatorTemplate: \"CurrentPageReport FirstPageLink PrevPageLink PageLinks NextPageLink LastPageLink RowsPerPageDropdown\"\r\n        };\r\n\r\n        this.colOptions = [];\r\n        for (let col of columns) {\r\n            this.colOptions.push({ label: col.header, value: col });\r\n        }\r\n\r\n        this.onColumnToggle = this.onColumnToggle.bind(this);\r\n        this.export = this.export.bind(this);\r\n    }\r\n\r\n    getPageString = (e) => {\r\n        let firstPage = e.first + 1;\r\n        let l = e.rows * (e.page + 1);\r\n        let lastPage = (l < this.state.transactionArray.length) ? l : this.state.transactionArray.length\r\n        var str = firstPage + ' to ' + lastPage + ' out of ' + this.state.transactionArray.length + ' records';\r\n        this.setState({ selectedPage: e.first, str: str, rowsPerPage: e.rows });\r\n    }\r\n\r\n    onColumnToggle(event) {\r\n        let valueInOrder = event.value.sort((x, y) => { return x.id - y.id });\r\n        this.setState({ cols: valueInOrder });\r\n    }\r\n\r\n    export() {\r\n        this.dt.exportCSV();\r\n    }\r\n\r\n    actionTemplate(rowData, column) {\r\n        return <div>\r\n            <Button type=\"button\" icon=\"pi pi-eye\" className=\"p-button-warning\" onClick={() => this.edit(rowData)}\r\n                style={{ marginRight: '.5em' }} tooltip=\"View\" tooltipOptions={{ position: 'bottom' }}>\r\n            </Button>\r\n            <Button type=\"button\" icon=\"pi pi-trash\" className=\"p-button-danger\" tooltip=\"Delete\" tooltipOptions={{ position: 'bottom' }}></Button>\r\n        </div>;\r\n    }\r\n\r\n    componentWillMount() {\r\n\r\n    }\r\n\r\n    componentDidMount() {\r\n        var splitData = this.props.location.pathname.split(\"/\");\r\n        // if (splitData[3] !== undefined) {\r\n        if (!CommonConfig.isEmpty(splitData[3])) {\r\n        this.setState({ BinderId: splitData[3] })\r\n            this.getTransactions(splitData[3])\r\n        } \r\n        // if (this.props.match.params.constructor === Object && Object.keys(this.props.match.params).length !== 0) {\r\n        //     this.setState({ BinderId: this.props.match.params.Id })\r\n        //     this.getTransactions(this.props.match.params.Id)\r\n        // }\r\n    }\r\n\r\n    getTransactions(BinderId) {\r\n        let data = {\r\n            \"BinderId\": BinderId,\r\n            \"UserId\": CommonConfig.loggedInUserId(),\r\n        }\r\n        api.post(APIConstant.path.getTransaction, data).then(res => {\r\n            console.log(res.data[0]);\r\n\r\n            if (res.success) {\r\n                var transactionData = res.data[0]\r\n                this.setState({\r\n                    transactionArray: transactionData.map((obj) => {\r\n                        console.log(obj);\r\n                        return {\r\n                            \"TransactionID\": obj.BinderTransactionId,\r\n                            \"SettlementID\": obj.SettelmentId,\r\n                            \"Type\": obj.TransactionType,\r\n                            \"Policy No\": obj.PolicyNumber,\r\n                            \"Status\": obj.Status,\r\n                            \"Name/Company\": obj.Name,\r\n                            \"Currency\": obj.Currency,\r\n                            \"Total\": obj.TotalAmount,\r\n                            \"Outstanding\": obj.Outstanding,\r\n                            \"Created\": CommonConfig.isEmpty(obj.CreatedOn) ? '' : moment(obj.CreatedOn).format('YYYY-MM-DD'),\r\n                            \"LastUpdated\": CommonConfig.isEmpty(obj.UpdatedOn) ? '' : moment(obj.UpdatedOn).format('YYYY-MM-DD'),\r\n                            \"CreatedBy\": obj.CreatedByName,\r\n                            \"UpdatedBy\": obj.UpdatedByName\r\n                        }\r\n                    })\r\n                })\r\n            }\r\n        }).catch(err => {\r\n            console.log(err)\r\n        });\r\n    }\r\n\r\n    render() {\r\n        let columns = this.state.cols.map((col, i) => {\r\n            return <Column key={i} field={col.field} header={col.header} body={col.body} sortable={col.sortable} filter={col.filter} />;\r\n        });\r\n\r\n        return (\r\n            <div>\r\n                <div className=\"basic-header\">\r\n                    <h1>Transaction</h1>/\r\n                    <div className=\"header-right-option\">\r\n                        <MultiSelect value={this.state.cols} options={this.colOptions}\r\n                            fixedPlaceholder={true} placeholder={CommonConfig.dataTableConfig.columnToggleIcon} tooltip=\"Show / Hide Column\"\r\n                            onChange={this.onColumnToggle} style={{ width: '50px' }}\r\n                        />\r\n                        <Button type=\"button\" icon=\"pi pi-external-link\" tooltip=\"Export as CSV\" tooltipOptions={{ position: 'bottom' }} onClick={this.export} style={{ marginRight: 10 }}></Button>\r\n                    </div>\r\n                </div>\r\n\r\n                <div className=\"table-custom\">\r\n                    <DataTable ref={(el) => this.dt = el} value={this.state.transactionArray} first={this.state.selectedPage} onPage={(e) => this.getPageString(e)}\r\n                        paginator={true} rows={this.state.rowsPerPage} totalRecords={this.state.transactionArray.length} exportFilename=\"Transaction List\"\r\n                        currentPageReportTemplate={this.state.str} scrollable={true} scrollHeight=\"340px\"\r\n                        paginatorTemplate={this.state.paginatorTemplate}\r\n                        rowsPerPageOptions={this.state.rowsPerPageOptions} globalFilter={this.state.globalFilter} emptyMessage=\"No records found\"\r\n                        responsive={true} resizableColumns={true} columnResizeMode=\"fit\" //stateKey=\"contactList\" stateStorage=\"local\" header={header} \r\n                    >\r\n                        {columns}\r\n                    </DataTable>\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nexport default withTranslation()(Transaction);"]},"metadata":{},"sourceType":"module"}