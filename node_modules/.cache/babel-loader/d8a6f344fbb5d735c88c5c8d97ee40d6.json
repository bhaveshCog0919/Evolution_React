{"ast":null,"code":"var _jsxFileName = \"/Users/bhavik/Downloads/Cognisun/Evolution/Evolution_React/evolution_new/src/views/Apps/Email/Compose/Compose.js\";\nimport React, { Component } from 'react';\nimport { DataTable } from 'primereact/datatable';\nimport { Column } from 'primereact/column';\nimport 'primereact/resources/themes/nova-light/theme.css';\nimport 'primereact/resources/primereact.min.css';\nimport 'primeicons/primeicons.css';\nimport moment from 'moment';\nimport { MultiSelect } from 'primereact/multiselect';\nimport { InputText } from 'primereact/inputtext';\nimport { Modal, ModalHeader, ModalBody, Nav, NavItem, NavLink, ButtonDropdown, Button as BTN, DropdownToggle, DropdownMenu, DropdownItem, Badge, Button, ButtonGroup, Form, FormGroup, Label, Input, Row, Col } from 'reactstrap';\nimport { AutoComplete } from 'primereact/autocomplete';\nimport APIConstant from '../../../../utils/constants';\nimport { CommonConfig } from '../../../../utils/constants';\nimport api from '../../../../utils/apiClient';\nimport { toast } from 'react-toastify';\nimport axios from 'axios';\nimport CKEditor from 'ckeditor4-react';\nimport { apiBase } from '../../../../utils/config';\n\nclass Compose extends Component {\n  constructor(props) {\n    super(props);\n\n    this.selectDocument = event => {\n      var docuCustom = [];\n\n      if (event.target.files && event.target.files) {\n        for (let i = 0; i < event.target.files.length; i++) {\n          docuCustom.push(event.target.files[i]);\n        }\n\n        this.setState({\n          customDoc: this.state.customDoc.concat(docuCustom)\n        });\n      } else {}\n    };\n\n    this.downloadData = rowdata => {\n      var path = apiBase + rowdata.URL;\n      axios({\n        url: path,\n        method: 'GET',\n        responseType: 'blob' // important\n\n      }).then(response => {\n        const url = window.URL.createObjectURL(new Blob([response.data]));\n        const link = document.createElement('a');\n        link.href = url;\n        link.setAttribute('download', rowdata.Filename); //or any other extension\n\n        document.body.appendChild(link);\n        link.click();\n      });\n    };\n\n    this.handleChange = e => {\n      this.setState({\n        [e.target.name]: e.target.value\n      });\n\n      if (e.target.name === 'emailTo') {\n        if (e.target.value === '' || e.target.value === null) {\n          this.setState({\n            emailTo: ''\n          });\n        } else {\n          this.setState({\n            emailTo: e.target.value\n          });\n        }\n      }\n\n      if (e.target.name === 'emailFrom') {\n        if (e.target.value === '' || e.target.value === null) {\n          this.setState({\n            emailFrom: ''\n          });\n        } else {\n          this.setState({\n            emailFrom: e.target.value\n          });\n        }\n      }\n\n      if (e.target.name === 'emailCC') {\n        if (e.target.value === '' || e.target.value === null) {\n          this.setState({\n            emailCC: ''\n          });\n        } else {\n          this.setState({\n            emailCC: e.target.value\n          });\n        }\n      }\n\n      if (e.target.name === 'emailBCC') {\n        if (e.target.value === '' || e.target.value === null) {\n          this.setState({\n            emailBCC: ''\n          });\n        } else {\n          this.setState({\n            emailBCC: e.target.value\n          });\n        }\n      }\n\n      if (e.target.name === 'emailSubject') {\n        if (e.target.value === '' || e.target.value === null) {\n          this.setState({\n            emailSubject: ''\n          });\n        } else {\n          this.setState({\n            emailSubject: e.target.value\n          });\n        }\n      }\n    };\n\n    this.mulSelect = e => {\n      this.setState({\n        selectedDocuments: e\n      });\n    };\n\n    this.getPageString = e => {\n      let firstPage = e.first + 1;\n      let l = e.rows * (e.page + 1);\n      let lastPage = l < this.state.documentList.length ? l : this.state.documentList.length;\n      var str = firstPage + ' to ' + lastPage + ' out of ' + this.state.documentList.length + ' records';\n      this.setState({\n        selectedPage: e.first,\n        str: str,\n        rowsPerPage: e.rows\n      });\n    };\n\n    let columns = [{\n      selectionMode: \"multiple\",\n      style: {\n        width: '3em'\n      },\n      id: 0\n    }, {\n      field: \"Filename\",\n      header: \"Name\",\n      sortable: true,\n      filter: true,\n      id: 1\n    }, {\n      body: this.formatCreatedDate.bind(this),\n      field: \"CreatedOn\",\n      header: \"Created\",\n      sortable: true,\n      filter: true,\n      id: 2\n    }, {\n      field: \"forename\",\n      header: \"CreatedBy\",\n      sortable: true,\n      filter: true,\n      id: 3\n    }, {\n      field: \"Directory\",\n      header: \"Directory\",\n      sortable: true,\n      filter: true,\n      id: 4\n    }];\n    this.toggle = this.toggle.bind(this);\n    this.state = {\n      documentType: '',\n      dropdownOpen: false,\n      emailBodyError: false,\n      filteredPolicysSingle: null,\n      selectedPolicy: null,\n      selectedPolicyId: null,\n      customDoc: [],\n      policysData: [],\n      emailTemplateList: [],\n      selectedTemplate: null,\n      emailTemplate: '',\n      documentList: [],\n      rowsPerPage: CommonConfig.dataTableConfig.rowsPerPage,\n      rowsPerPageOptions: CommonConfig.dataTableConfig.rowsPerPageOptions,\n      selectedPage: 0,\n      selectedDocuments: [],\n      cols: columns,\n      str: '',\n      openAttachmentPopup: false,\n      emailFrom: '',\n      emailFromName: '',\n      emailTo: '',\n      emailCC: '',\n      emailBCC: '',\n      emailSubject: '',\n      emailBody: '',\n      attachmentURL: [],\n      totalDocument: [],\n      InboxCount: ''\n    };\n    this.colOptions = [];\n\n    for (let col of columns) {\n      this.colOptions.push({\n        label: col.header,\n        value: col\n      });\n    }\n\n    this.onColumnToggle = this.onColumnToggle.bind(this);\n    this.handleDetailsChange = this.handleDetailsChange.bind(this);\n  }\n\n  onColumnToggle(event) {\n    let valueInOrder = event.value.sort((x, y) => {\n      return x.id - y.id;\n    });\n    this.setState({\n      cols: valueInOrder\n    });\n  }\n\n  componentDidMount() {\n    this.getInbox();\n    this.getEmailTemplate();\n  }\n\n  getDocumentList() {\n    try {\n      const data = {\n        \"pPolicyId\": this.state.policysData[0].policyId,\n        'CurrentUser': CommonConfig.loggedInUserData().EntityId\n      };\n      api.post(\"api/getDocumentList\", data).then(res => {\n        console.log(\"res\", res);\n\n        if (res.success) {\n          let lastPage = this.state.rowsPerPage < res.data.length ? this.state.rowsPerPage : res.data.length;\n          let str = '1 to ' + lastPage + ' out of ' + res.data.length + ' records';\n          this.setState({\n            documentList: res.data,\n            str: str,\n            openAttachmentPopup: true\n          });\n        } else {}\n      }).catch(err => {});\n    } catch (error) {}\n  }\n\n  formatCreatedDate(rowData) {\n    return moment(rowData.CreatedOn).format(CommonConfig.dateFormat.dateTime);\n  }\n\n  selectType(value, type) {\n    //need to select template\n    if (type === 'emailTemplate') {\n      if (value === '' || value === undefined || value === null) {\n        this.setState({\n          emailTemplate: ''\n        });\n      } else {\n        debugger;\n        this.setState({\n          emailTemplate: value.value\n        });\n        this.getEmailBodyData();\n      }\n    }\n\n    if (type === 'selectPolicy') {\n      if (value === '' || value === undefined || value === null) {\n        this.setState({\n          selectedPolicy: '',\n          selectedPolicyId: ''\n        });\n      } else {\n        this.setState({\n          selectedPolicy: value\n        });\n      }\n    }\n\n    if (type === 'documentType') {\n      if (value === '' || value === undefined || value === null) {\n        this.setState({\n          documentType: ''\n        });\n      } else {\n        this.setState({\n          documentType: value\n        });\n\n        if (value == \"1\") {\n          this.setState({\n            openAttachmentPopup: true\n          });\n        } else {\n          document.getElementById(\"customDoc\").click();\n        }\n      }\n    }\n  }\n\n  getEmailBodyData() {\n    let data = {\n      \"pPolicyId\": this.state.policysData[0].policyId,\n      \"pEntityType\": 'Policy',\n      \"pEntityId\": this.state.policysData[0].policyId,\n      \"pTemplateKey\": this.state.emailTemplate,\n      \"pCurrentUser\": CommonConfig.loggedInUserData().EntityId\n    };\n    api.post(APIConstant.path.getEmailBodyData, data).then(res => {\n      if (res.success) {\n        this.setState({\n          emailFrom: res.data[0].emailFrom,\n          emailFromName: res.data[0].emailFromName,\n          emailCC: res.data[0].emailCC,\n          emailBCC: res.data[0].emailBCC,\n          emailSubject: res.data[0].emailSubject,\n          emailBody: res.data[0].emailBody,\n          attachmentURL: JSON.parse(res.data[0].attachmentURL)\n        });\n      }\n    }).catch(err => {\n      console.log(err);\n    });\n  }\n\n  removeDocument(type, index) {\n    if (type == \"policy\") {\n      this.state.selectedDocuments.splice(index, 1);\n    } else {\n      this.state.customDoc.splice(index, 1);\n    }\n  }\n\n  getEmailTemplate() {\n    let data = {\n      \"Type\": \"Email\"\n    };\n    api.post(APIConstant.path.getEmailTemplate, data).then(res => {\n      if (res.success) {\n        this.setState({\n          emailTemplateList: res.data\n        });\n      }\n    }).catch(err => {\n      console.log(err);\n    });\n  }\n\n  sendMail() {\n    const emailDataForm = new FormData();\n    emailDataForm.append(\"to\", this.state.emailTo);\n    emailDataForm.append(\"from\", this.state.emailFrom);\n    emailDataForm.append(\"cc\", this.state.emailCC);\n    emailDataForm.append(\"bcc\", this.state.emailBCC);\n    emailDataForm.append(\"subject\", this.state.emailSubject);\n    emailDataForm.append(\"mail\", 'RenewalMail');\n    emailDataForm.append(\"EmailSenderId\", CommonConfig.loggedInUserData().EntityId);\n    emailDataForm.append(\"html\", this.state.emailBody);\n    emailDataForm.append(\"selectedDocuments\", JSON.stringify(this.state.selectedDocuments));\n    emailDataForm.append(\"attachmentURL\", this.state.attachmentURL);\n\n    for (let i = 0; i < this.state.customDoc.length; i++) {\n      emailDataForm.append(\"File\", this.state.customDoc[i], this.state.customDoc[i].name);\n    }\n\n    api.post(APIConstant.path.sendMailBulk, emailDataForm).then(res => {\n      if (res.success) {\n        toast.success('Mail Send Successful!');\n        this.props.history.push({\n          pathname: '/apps/email/inbox'\n        });\n      } else {\n        toast.error('Mail Send Failed!');\n      }\n    }).catch(err => {\n      console.log(err);\n    });\n  }\n\n  getInbox() {\n    let data = {\n      \"boxName\": \"INBOX\",\n      \"searchType\": \"ALL\"\n    };\n    api.post(APIConstant.path.allEmail, data).then(res => {\n      if (res.success) {\n        let count = res.data.filter(item => {\n          if (item.attributes.flags[0] != '\\\\Seen') {\n            return true;\n          } else {\n            return false;\n          }\n        }).length;\n        this.setState({\n          InboxCount: count\n        });\n      }\n    }).catch(err => {\n      console.log(err);\n    });\n  }\n\n  handleDetailsChange(evt) {\n    const data = evt.editor.getData();\n\n    if (CommonConfig.isEmpty(data)) {\n      this.setState({\n        emailBodyError: true,\n        emailBody: ''\n      }); // this.show(\"customEndorsementDetails\", true);\n    } else {\n      this.setState({\n        emailBodyError: false,\n        emailBody: data\n      }); // this.show(\"customEndorsementDetails\", false);\n    }\n  }\n\n  filterPolicySingle() {\n    let data = {\n      \"pPolicyId\": '',\n      \"pPolicyNumber\": this.state.selectedPolicy,\n      \"CurrentUser\": CommonConfig.loggedInUserData().EntityId\n    };\n    api.post(APIConstant.path.getPolicyAutoComplete, data).then(res => {\n      if (res.success) {\n        this.setState({\n          policysData: res.data,\n          emailTo: res.data[0].email\n        });\n        this.getDocumentList();\n      } else {\n        this.setState({\n          policysData: []\n        });\n        toast.error(res.data[0].returnValue);\n      }\n    }).catch(err => {\n      console.log(err);\n    });\n  }\n\n  toggle() {\n    this.setState({\n      dropdownOpen: !this.state.dropdownOpen\n    });\n  }\n\n  render() {\n    var header = /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 372,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      style: {\n        'textAlign': 'Right',\n        marginTop: 10\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 373,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(Row, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 374,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(Col, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 375,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"basic-header\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 376,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"header-right-option\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 377,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      style: {\n        textAlign: 'right'\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 378,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(\"i\", {\n      className: \"pi pi-search\",\n      style: {\n        margin: '4px 4px 0 0'\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 379,\n        columnNumber: 21\n      }\n    }), /*#__PURE__*/React.createElement(InputText, {\n      type: \"search\",\n      onInput: e => this.setState({\n        globalFilter: e.target.value\n      }),\n      placeholder: \"Global Search\",\n      size: \"30\",\n      style: {\n        marginRight: 10\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 380,\n        columnNumber: 21\n      }\n    })), /*#__PURE__*/React.createElement(MultiSelect, {\n      value: this.state.cols,\n      options: this.colOptions,\n      fixedPlaceholder: true,\n      placeholder: CommonConfig.dataTableConfig.columnToggleIcon,\n      tooltip: \"Show / Hide Column\",\n      onChange: this.onColumnToggle,\n      style: {\n        width: '50px'\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 382,\n        columnNumber: 19\n      }\n    })))))));\n    let columns = this.state.cols.map((col, i) => {\n      return /*#__PURE__*/React.createElement(Column, {\n        field: col.field,\n        header: col.header,\n        body: col.body,\n        sortable: col.sortable,\n        filter: col.filter,\n        selectionMode: col.selectionMode,\n        style: col.style,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 394,\n          columnNumber: 14\n        }\n      });\n    });\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"animated fadeIn\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 397,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"email-app\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 398,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"nav\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 399,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"a\", {\n      href: \"#/apps/email/compose\",\n      className: \"btn btn-danger btn-block\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 400,\n        columnNumber: 13\n      }\n    }, \"New Email\"), /*#__PURE__*/React.createElement(Nav, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 401,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(NavItem, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 402,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(NavLink, {\n      href: \"#/apps/email/inbox\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 403,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"i\", {\n      className: \"fa fa-inbox\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 403,\n        columnNumber: 52\n      }\n    }), \" Inbox \", /*#__PURE__*/React.createElement(Badge, {\n      color: \"danger\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 403,\n        columnNumber: 90\n      }\n    }, this.state.InboxCount))), /*#__PURE__*/React.createElement(NavItem, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 405,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(NavLink, {\n      href: \"#/apps/email/sent\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 406,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"i\", {\n      className: \"fa fa-inbox\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 406,\n        columnNumber: 51\n      }\n    }), \" Sent \")))), /*#__PURE__*/React.createElement(\"main\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 410,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"form\", {\n      method: \"post\",\n      action: \"\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 411,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"p\", {\n      className: \"text-center\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 412,\n        columnNumber: 15\n      }\n    }, \"New Message\"), /*#__PURE__*/React.createElement(Form, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 413,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(FormGroup, {\n      row: true,\n      className: \"mb-3\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 414,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(Label, {\n      for: \"to\",\n      xs: 2,\n      sm: 1,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 415,\n        columnNumber: 19\n      }\n    }, \"To:\"), /*#__PURE__*/React.createElement(Col, {\n      xs: 10,\n      sm: 11,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 416,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(Input, {\n      type: \"email\",\n      value: this.state.emailTo,\n      name: \"emailTo\",\n      id: \"emailTo\",\n      onChange: e => this.handleChange(e),\n      placeholder: \"Type Email\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 417,\n        columnNumber: 21\n      }\n    }))), /*#__PURE__*/React.createElement(FormGroup, {\n      row: true,\n      className: \"mb-3\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 420,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(Label, {\n      for: \"cc\",\n      xs: 2,\n      sm: 1,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 421,\n        columnNumber: 19\n      }\n    }, \"CC:\"), /*#__PURE__*/React.createElement(Col, {\n      xs: 10,\n      sm: 11,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 422,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(Input, {\n      type: \"email\",\n      value: this.state.emailCC,\n      id: \"emailCC\",\n      name: \"emailCC\",\n      onChange: e => this.handleChange(e),\n      placeholder: \"Type CC\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 423,\n        columnNumber: 21\n      }\n    }))), /*#__PURE__*/React.createElement(FormGroup, {\n      row: true,\n      className: \"mb-3\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 426,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(Label, {\n      for: \"bcc\",\n      xs: 2,\n      sm: 1,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 427,\n        columnNumber: 19\n      }\n    }, \"BCC:\"), /*#__PURE__*/React.createElement(Col, {\n      xs: 10,\n      sm: 11,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 428,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(Input, {\n      type: \"email\",\n      value: this.state.emailBCC,\n      id: \"emailBCC\",\n      name: \"emailBCC\",\n      onChange: e => this.handleChange(e),\n      placeholder: \"Type BCC\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 429,\n        columnNumber: 21\n      }\n    }))), /*#__PURE__*/React.createElement(FormGroup, {\n      row: true,\n      className: \"mb-3\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 432,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(Label, {\n      for: \"bcc\",\n      xs: 2,\n      sm: 1,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 433,\n        columnNumber: 19\n      }\n    }, \"Subject:\"), /*#__PURE__*/React.createElement(Col, {\n      xs: 10,\n      sm: 11,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 434,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(Input, {\n      type: \"text\",\n      value: this.state.emailSubject,\n      id: \"emailSubject\",\n      name: \"emailSubject\",\n      onChange: e => this.handleChange(e),\n      placeholder: \"Type Subject\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 435,\n        columnNumber: 21\n      }\n    })))), /*#__PURE__*/React.createElement(Row, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 439,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(Col, {\n      sm: 11,\n      className: \"ml-auto\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 440,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(FormGroup, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 441,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(Row, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 442,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(Col, {\n      md: \"4\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 443,\n        columnNumber: 23\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"input-box\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 444,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(Input, {\n      type: \"select\",\n      name: \"documentType\",\n      id: \"documentType\",\n      onChange: e => this.selectType(e.target.value, 'documentType'),\n      value: this.state.documentType,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 445,\n        columnNumber: 27\n      }\n    }, /*#__PURE__*/React.createElement(\"option\", {\n      value: \"\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 446,\n        columnNumber: 29\n      }\n    }, \"Select Attachment\"), /*#__PURE__*/React.createElement(\"option\", {\n      value: \"1\",\n      key: \"Policy Doc\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 447,\n        columnNumber: 29\n      }\n    }, \"Policy Doc\"), /*#__PURE__*/React.createElement(\"option\", {\n      value: \"2\",\n      key: \"Custom\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 448,\n        columnNumber: 29\n      }\n    }, \"Custom\")))), /*#__PURE__*/React.createElement(Col, {\n      md: \"4\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 452,\n        columnNumber: 23\n      }\n    }, this.state.documentType == \"1\" ? /*#__PURE__*/React.createElement(BTN, {\n      color: \"success\",\n      onClick: () => this.selectType(\"1\", 'documentType'),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 453,\n        columnNumber: 60\n      }\n    }, \"Select Doc\") : null, this.state.documentType == \"2\" ? /*#__PURE__*/React.createElement(BTN, {\n      color: \"success\",\n      onClick: () => this.selectType(\"2\", 'documentType'),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 454,\n        columnNumber: 60\n      }\n    }, \"Select Doc\") : null, /*#__PURE__*/React.createElement(Input, {\n      type: \"file\",\n      name: \"customDoc\",\n      id: \"customDoc\",\n      style: {\n        display: \"none\"\n      },\n      multiple: \"multiple\",\n      onChange: this.selectDocument,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 455,\n        columnNumber: 25\n      }\n    }))), /*#__PURE__*/React.createElement(Row, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 458,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(Col, {\n      md: \"4\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 459,\n        columnNumber: 23\n      }\n    }, this.state.policysData.length > 0 ? /*#__PURE__*/React.createElement(\"div\", {\n      className: \"input-box\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 460,\n        columnNumber: 63\n      }\n    }, /*#__PURE__*/React.createElement(Input, {\n      type: \"select\",\n      name: \"emailTemplate\",\n      id: \"emailTemplate\",\n      value: this.state.emailTemplate,\n      onChange: e => this.selectType(e.target, 'emailTemplate'),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 461,\n        columnNumber: 27\n      }\n    }, /*#__PURE__*/React.createElement(\"option\", {\n      value: \"\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 462,\n        columnNumber: 29\n      }\n    }, \"Select EmailTemplate\"), this.state.emailTemplateList.map((emailTemplate, i) => {\n      return /*#__PURE__*/React.createElement(\"option\", {\n        value: emailTemplate.MessageTemplateId,\n        key: i,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 464,\n          columnNumber: 39\n        }\n      }, emailTemplate.TamplateName);\n    }))) : null))), /*#__PURE__*/React.createElement(FormGroup, {\n      className: \"mt-4\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 472,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(CKEditor, {\n      name: \"emailBody\",\n      id: \"emailBody\",\n      data: this.state.emailBody,\n      onChange: this.handleDetailsChange,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 473,\n        columnNumber: 21\n      }\n    }), /*#__PURE__*/React.createElement(\"em\", {\n      id: \"emailBodyError\",\n      className: \"error invalid-feedback\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 474,\n        columnNumber: 21\n      }\n    })), /*#__PURE__*/React.createElement(FormGroup, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 476,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(Col, {\n      xs: 10,\n      sm: 11,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 477,\n        columnNumber: 21\n      }\n    }, this.state.attachmentURL.length > 0 ? /*#__PURE__*/React.createElement(\"div\", {\n      className: \"attachments\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 478,\n        columnNumber: 63\n      }\n    }, /*#__PURE__*/React.createElement(\"span\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 479,\n        columnNumber: 25\n      }\n    }, \"Policy Templete Doc\"), this.state.attachmentURL.map((attach, i) => {\n      return /*#__PURE__*/React.createElement(\"div\", {\n        className: \"attachment\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 482,\n          columnNumber: 29\n        }\n      }, /*#__PURE__*/React.createElement(Badge, {\n        color: \"danger\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 483,\n          columnNumber: 31\n        }\n      }, attach.Type), \" \", /*#__PURE__*/React.createElement(\"b\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 483,\n          columnNumber: 75\n        }\n      }, attach.FileName), \" \", /*#__PURE__*/React.createElement(\"i\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 483,\n          columnNumber: 100\n        }\n      }, \"(\", attach.FileSize, \")\"), /*#__PURE__*/React.createElement(\"span\", {\n        className: \"menu\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 484,\n          columnNumber: 31\n        }\n      }, /*#__PURE__*/React.createElement(\"a\", {\n        onClick: () => this.downloadData(attach),\n        className: \"fa fa-cloud-download\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 485,\n          columnNumber: 33\n        }\n      }, null)));\n    })) : null, this.state.selectedDocuments.length > 0 ? /*#__PURE__*/React.createElement(\"div\", {\n      className: \"attachments\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 492,\n        columnNumber: 67\n      }\n    }, /*#__PURE__*/React.createElement(\"span\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 493,\n        columnNumber: 25\n      }\n    }, \"Policy Doc : \"), /*#__PURE__*/React.createElement(\"span\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 494,\n        columnNumber: 25\n      }\n    }, \"Policy#: \", this.state.policysData.length > 0 ? this.state.policysData[0].policyNumber : 'NA'), /*#__PURE__*/React.createElement(\"span\", {\n      style: {\n        marginLeft: '10px'\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 495,\n        columnNumber: 25\n      }\n    }, \"RenewalDate: \", this.state.policysData.length > 0 ? moment(this.state.policysData[0].renewalDate).format(CommonConfig.dateFormat.forDatePicker) : 'NA'), /*#__PURE__*/React.createElement(\"span\", {\n      style: {\n        marginLeft: '10px'\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 496,\n        columnNumber: 25\n      }\n    }, \"InsuredName: \", this.state.policysData.length > 0 ? this.state.policysData[0].insuredName : 'NA'), /*#__PURE__*/React.createElement(\"span\", {\n      style: {\n        marginLeft: '10px'\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 497,\n        columnNumber: 25\n      }\n    }, \"PolicyType: \", this.state.policysData.length > 0 ? this.state.policysData[0].policyType : 'NA'), this.state.selectedDocuments.map((attach, i) => {\n      return /*#__PURE__*/React.createElement(\"div\", {\n        className: \"attachment\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 500,\n          columnNumber: 29\n        }\n      }, /*#__PURE__*/React.createElement(Badge, {\n        color: \"danger\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 501,\n          columnNumber: 31\n        }\n      }, attach.Type), \" \", /*#__PURE__*/React.createElement(\"b\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 501,\n          columnNumber: 75\n        }\n      }, attach.Filename), \" \", /*#__PURE__*/React.createElement(\"i\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 501,\n          columnNumber: 100\n        }\n      }, \"(\", attach.FileSize, \")\"), /*#__PURE__*/React.createElement(\"span\", {\n        className: \"menu\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 502,\n          columnNumber: 31\n        }\n      }, /*#__PURE__*/React.createElement(\"a\", {\n        onClick: () => this.removeDocument(\"custom\", i),\n        className: \"fa fa-remove\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 503,\n          columnNumber: 33\n        }\n      }, null), /*#__PURE__*/React.createElement(\"a\", {\n        onClick: () => this.downloadData(attach),\n        className: \"fa fa-cloud-download\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 504,\n          columnNumber: 33\n        }\n      }, null)));\n    })) : null, this.state.customDoc.length > 0 ? /*#__PURE__*/React.createElement(\"div\", {\n      className: \"attachments\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 511,\n        columnNumber: 59\n      }\n    }, /*#__PURE__*/React.createElement(\"span\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 512,\n        columnNumber: 25\n      }\n    }, \"Custom Doc\"), this.state.customDoc.map((attach, i) => {\n      return /*#__PURE__*/React.createElement(\"div\", {\n        className: \"attachment\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 515,\n          columnNumber: 29\n        }\n      }, /*#__PURE__*/React.createElement(Badge, {\n        color: \"danger\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 516,\n          columnNumber: 31\n        }\n      }, attach.type), \" \", /*#__PURE__*/React.createElement(\"b\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 516,\n          columnNumber: 75\n        }\n      }, attach.name), \" \", /*#__PURE__*/React.createElement(\"i\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 516,\n          columnNumber: 96\n        }\n      }, \"(\", Math.round(attach.size / 1024), \" KB)\"), /*#__PURE__*/React.createElement(\"span\", {\n        className: \"menu\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 517,\n          columnNumber: 31\n        }\n      }, /*#__PURE__*/React.createElement(\"a\", {\n        onClick: () => this.removeDocument(\"custom\", i),\n        className: \"fa fa-remove\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 518,\n          columnNumber: 33\n        }\n      }, null), /*#__PURE__*/React.createElement(\"a\", {\n        onClick: () => this.downloadData(attach),\n        className: \"fa fa-cloud-download\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 519,\n          columnNumber: 33\n        }\n      }, null)));\n    })) : null)), /*#__PURE__*/React.createElement(FormGroup, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 527,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(BTN, {\n      color: \"success\",\n      onClick: () => this.sendMail(),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 528,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"i\", {\n      class: \"fa fa-check\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 528,\n        columnNumber: 74\n      }\n    }), \"Send\"))))))), /*#__PURE__*/React.createElement(Modal, {\n      isOpen: this.state.openAttachmentPopup,\n      className: 'modal-lg',\n      style: {\n        maxWidth: '70%'\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 535,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(ModalHeader, {\n      toggle: () => this.setState({\n        openAttachmentPopup: false\n      }),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 536,\n        columnNumber: 11\n      }\n    }, \" Attachement \"), /*#__PURE__*/React.createElement(ModalBody, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 537,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(Row, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 538,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(Col, {\n      md: \"3\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 539,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(AutoComplete, {\n      value: this.state.selectedPolicy,\n      field: \"policyNumber\",\n      placeholder: \"Search By Policy And Email\",\n      minLength: 1,\n      onChange: e => this.selectType(e.value, 'selectPolicy'),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 540,\n        columnNumber: 17\n      }\n    })), /*#__PURE__*/React.createElement(Col, {\n      md: \"1\",\n      style: {\n        marginLeft: '2px'\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 542,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(BTN, {\n      color: \"success\",\n      onClick: () => this.filterPolicySingle(),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 543,\n        columnNumber: 17\n      }\n    }, \"Search\")), /*#__PURE__*/React.createElement(Col, {\n      md: \"7\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 545,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"span\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 546,\n        columnNumber: 17\n      }\n    }, \"Policy#: \", this.state.policysData.length > 0 ? this.state.policysData[0].policyNumber : 'NA'), /*#__PURE__*/React.createElement(\"span\", {\n      style: {\n        marginLeft: '10px'\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 547,\n        columnNumber: 17\n      }\n    }, \"RenewalDate: \", this.state.policysData.length > 0 ? moment(this.state.policysData[0].renewalDate).format(CommonConfig.dateFormat.forDatePicker) : 'NA'), /*#__PURE__*/React.createElement(\"span\", {\n      style: {\n        marginLeft: '10px'\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 548,\n        columnNumber: 17\n      }\n    }, \"InsuredName: \", this.state.policysData.length > 0 ? this.state.policysData[0].insuredName : 'NA'), /*#__PURE__*/React.createElement(\"span\", {\n      style: {\n        marginLeft: '10px'\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 549,\n        columnNumber: 17\n      }\n    }, \"PolicyType: \", this.state.policysData.length > 0 ? this.state.policysData[0].policyType : 'NA'))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"table-custom\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 552,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(DataTable, {\n      style: {},\n      ref: el => this.dt = el,\n      value: this.state.documentList,\n      currentPageReportTemplate: this.state.str,\n      first: this.state.selectedPage,\n      onPage: e => this.getPageString(e),\n      paginator: true,\n      rows: this.state.rowsPerPage,\n      header: header,\n      exportFilename: \"Documents\",\n      paginatorTemplate: \"CurrentPageReport FirstPageLink PrevPageLink PageLinks NextPageLink LastPageLink RowsPerPageDropdown \",\n      rowsPerPageOptions: this.state.rowsPerPageOptions,\n      globalFilter: this.state.globalFilter,\n      emptyMessage: \"No records found\",\n      responsive: true,\n      resizableColumns: true,\n      columnResizeMode: \"fit\",\n      scrollable: true,\n      scrollHeight: \"265px\",\n      selection: this.state.selectedDocuments,\n      onSelectionChange: e => this.mulSelect(e.value),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 553,\n        columnNumber: 15\n      }\n    }, columns)))));\n  }\n\n}\n\nexport default Compose;","map":{"version":3,"sources":["/Users/bhavik/Downloads/Cognisun/Evolution/Evolution_React/evolution_new/src/views/Apps/Email/Compose/Compose.js"],"names":["React","Component","DataTable","Column","moment","MultiSelect","InputText","Modal","ModalHeader","ModalBody","Nav","NavItem","NavLink","ButtonDropdown","Button","BTN","DropdownToggle","DropdownMenu","DropdownItem","Badge","ButtonGroup","Form","FormGroup","Label","Input","Row","Col","AutoComplete","APIConstant","CommonConfig","api","toast","axios","CKEditor","apiBase","Compose","constructor","props","selectDocument","event","docuCustom","target","files","i","length","push","setState","customDoc","state","concat","downloadData","rowdata","path","URL","url","method","responseType","then","response","window","createObjectURL","Blob","data","link","document","createElement","href","setAttribute","Filename","body","appendChild","click","handleChange","e","name","value","emailTo","emailFrom","emailCC","emailBCC","emailSubject","mulSelect","selectedDocuments","getPageString","firstPage","first","l","rows","page","lastPage","documentList","str","selectedPage","rowsPerPage","columns","selectionMode","style","width","id","field","header","sortable","filter","formatCreatedDate","bind","toggle","documentType","dropdownOpen","emailBodyError","filteredPolicysSingle","selectedPolicy","selectedPolicyId","policysData","emailTemplateList","selectedTemplate","emailTemplate","dataTableConfig","rowsPerPageOptions","cols","openAttachmentPopup","emailFromName","emailBody","attachmentURL","totalDocument","InboxCount","colOptions","col","label","onColumnToggle","handleDetailsChange","valueInOrder","sort","x","y","componentDidMount","getInbox","getEmailTemplate","getDocumentList","policyId","loggedInUserData","EntityId","post","res","console","log","success","catch","err","error","rowData","CreatedOn","format","dateFormat","dateTime","selectType","type","undefined","getEmailBodyData","getElementById","JSON","parse","removeDocument","index","splice","sendMail","emailDataForm","FormData","append","stringify","sendMailBulk","history","pathname","allEmail","count","item","attributes","flags","evt","editor","getData","isEmpty","filterPolicySingle","getPolicyAutoComplete","email","returnValue","render","marginTop","textAlign","margin","globalFilter","marginRight","columnToggleIcon","map","display","MessageTemplateId","TamplateName","attach","Type","FileName","FileSize","policyNumber","marginLeft","renewalDate","forDatePicker","insuredName","policyType","Math","round","size","maxWidth","el","dt"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport { DataTable } from 'primereact/datatable';\nimport { Column } from 'primereact/column';\nimport 'primereact/resources/themes/nova-light/theme.css';\nimport 'primereact/resources/primereact.min.css';\nimport 'primeicons/primeicons.css';\nimport moment from 'moment';\nimport { MultiSelect } from 'primereact/multiselect';\nimport { InputText } from 'primereact/inputtext';\nimport { Modal, ModalHeader, ModalBody, Nav, NavItem, NavLink, ButtonDropdown, Button as BTN, DropdownToggle, DropdownMenu, DropdownItem, Badge, Button, ButtonGroup, Form, FormGroup, Label, Input, Row, Col } from 'reactstrap';\nimport { AutoComplete } from 'primereact/autocomplete';\nimport APIConstant from '../../../../utils/constants';\nimport { CommonConfig } from '../../../../utils/constants';\nimport api from '../../../../utils/apiClient';\nimport { toast } from 'react-toastify';\nimport axios from 'axios';\nimport CKEditor from 'ckeditor4-react';\nimport { apiBase } from '../../../../utils/config';\n\nclass Compose extends Component {\n\n  constructor(props) {\n    super(props);\n\n    let columns = [\n      { selectionMode: \"multiple\", style: { width: '3em' }, id: 0 },\n      { field: \"Filename\", header: \"Name\", sortable: true, filter: true, id: 1 },\n      { body: this.formatCreatedDate.bind(this), field: \"CreatedOn\", header: \"Created\", sortable: true, filter: true, id: 2 },\n      { field: \"forename\", header: \"CreatedBy\", sortable: true, filter: true, id: 3 },\n      { field: \"Directory\", header: \"Directory\", sortable: true, filter: true, id: 4 },\n    ];\n\n    this.toggle = this.toggle.bind(this);\n    this.state = {\n      documentType: '',\n      dropdownOpen: false,\n      emailBodyError: false,\n      filteredPolicysSingle: null,\n      selectedPolicy: null,\n      selectedPolicyId: null,\n      customDoc: [],\n      policysData: [],\n      emailTemplateList: [],\n      selectedTemplate: null,\n      emailTemplate: '',\n      documentList: [],\n      rowsPerPage: CommonConfig.dataTableConfig.rowsPerPage,\n      rowsPerPageOptions: CommonConfig.dataTableConfig.rowsPerPageOptions,\n      selectedPage: 0,\n      selectedDocuments: [],\n      cols: columns,\n      str: '',\n      openAttachmentPopup: false,\n      emailFrom: '',\n      emailFromName: '',\n      emailTo: '',\n      emailCC: '',\n      emailBCC: '',\n      emailSubject: '',\n      emailBody: '',\n      attachmentURL: [],\n      totalDocument: [],\n      InboxCount: ''\n    };\n\n    this.colOptions = [];\n    for (let col of columns) {\n      this.colOptions.push({ label: col.header, value: col });\n    }\n\n    this.onColumnToggle = this.onColumnToggle.bind(this);\n    this.handleDetailsChange = this.handleDetailsChange.bind(this);\n  }\n\n  selectDocument = (event) => {\n    var docuCustom = []\n    if (event.target.files && event.target.files) {\n      for (let i = 0; i < event.target.files.length; i++) {\n        docuCustom.push(event.target.files[i])\n      }\n      this.setState({ customDoc: this.state.customDoc.concat(docuCustom) });\n    } else {\n\n    }\n  }\n\n  onColumnToggle(event) {\n    let valueInOrder = event.value.sort((x, y) => { return x.id - y.id });\n    this.setState({ cols: valueInOrder });\n  }\n\n  componentDidMount() {\n    this.getInbox()\n    this.getEmailTemplate()\n  }\n\n  getDocumentList() {\n    try {\n      const data = {\n        \"pPolicyId\": this.state.policysData[0].policyId,\n        'CurrentUser': CommonConfig.loggedInUserData().EntityId\n      };\n      api.post(\"api/getDocumentList\", data).then(res => {\n        console.log(\"res\", res);\n        if (res.success) {\n          let lastPage = (this.state.rowsPerPage < res.data.length) ? this.state.rowsPerPage : res.data.length;\n          let str = '1 to ' + lastPage + ' out of ' + res.data.length + ' records';\n          this.setState({ documentList: res.data, str: str, openAttachmentPopup: true });\n        } else {\n\n        }\n      }).catch(err => {\n\n      });\n    } catch (error) {\n\n    }\n  }\n\n  formatCreatedDate(rowData) {\n    return (\n      moment(rowData.CreatedOn).format(CommonConfig.dateFormat.dateTime)\n    )\n  }\n\n  selectType(value, type) {\n    //need to select template\n    if (type === 'emailTemplate') {\n      if (value === '' || value === undefined || value === null) {\n        this.setState({ emailTemplate: '' });\n      } else {\n        debugger\n        this.setState({ emailTemplate: value.value });\n        this.getEmailBodyData()\n      }\n    }\n\n    if (type === 'selectPolicy') {\n      if (value === '' || value === undefined || value === null) {\n        this.setState({ selectedPolicy: '', selectedPolicyId: '' });\n      } else {\n        this.setState({ selectedPolicy: value });\n      }\n    }\n\n    if (type === 'documentType') {\n      if (value === '' || value === undefined || value === null) {\n        this.setState({ documentType: '' });\n      } else {\n        this.setState({ documentType: value });\n        if (value == \"1\") {\n          this.setState({ openAttachmentPopup: true });\n        } else {\n          document.getElementById(\"customDoc\").click()\n        }\n      }\n    }\n\n  }\n\n  getEmailBodyData() {\n    let data = {\n      \"pPolicyId\": this.state.policysData[0].policyId,\n      \"pEntityType\": 'Policy',\n      \"pEntityId\": this.state.policysData[0].policyId,\n      \"pTemplateKey\": this.state.emailTemplate,\n      \"pCurrentUser\": CommonConfig.loggedInUserData().EntityId\n    }\n    api.post(APIConstant.path.getEmailBodyData, data).then(res => {\n      if (res.success) {\n        this.setState({\n          emailFrom: res.data[0].emailFrom,\n          emailFromName: res.data[0].emailFromName,\n          emailCC: res.data[0].emailCC,\n          emailBCC: res.data[0].emailBCC,\n          emailSubject: res.data[0].emailSubject,\n          emailBody: res.data[0].emailBody,\n          attachmentURL: JSON.parse(res.data[0].attachmentURL)\n        })\n      }\n    }).catch(err => {\n      console.log(err)\n    });\n  }\n\n  removeDocument(type, index) {\n    if (type == \"policy\") {\n      this.state.selectedDocuments.splice(index, 1)\n    } else {\n      this.state.customDoc.splice(index, 1)\n    }\n  }\n\n  downloadData = (rowdata) => {\n    var path = apiBase + rowdata.URL;\n\n    axios({\n      url: path,\n      method: 'GET',\n      responseType: 'blob', // important\n    }).then((response) => {\n      const url = window.URL.createObjectURL(new Blob([response.data]));\n      const link = document.createElement('a');\n      link.href = url;\n      link.setAttribute('download', rowdata.Filename); //or any other extension\n      document.body.appendChild(link);\n      link.click();\n    });\n  }\n\n  getEmailTemplate() {\n    let data = {\n      \"Type\": \"Email\"\n    }\n    api.post(APIConstant.path.getEmailTemplate, data).then(res => {\n      if (res.success) {\n        this.setState({ emailTemplateList: res.data })\n      }\n\n    }).catch(err => {\n      console.log(err)\n    });\n  }\n\n  sendMail() {\n    const emailDataForm = new FormData();\n    emailDataForm.append(\"to\", this.state.emailTo)\n    emailDataForm.append(\"from\", this.state.emailFrom)\n    emailDataForm.append(\"cc\", this.state.emailCC)\n    emailDataForm.append(\"bcc\", this.state.emailBCC)\n    emailDataForm.append(\"subject\", this.state.emailSubject)\n    emailDataForm.append(\"mail\", 'RenewalMail')\n    emailDataForm.append(\"EmailSenderId\", CommonConfig.loggedInUserData().EntityId)\n    emailDataForm.append(\"html\", this.state.emailBody)\n    emailDataForm.append(\"selectedDocuments\", JSON.stringify(this.state.selectedDocuments))\n    emailDataForm.append(\"attachmentURL\", this.state.attachmentURL)\n\n    for (let i = 0; i < this.state.customDoc.length; i++) {\n      emailDataForm.append(\"File\", this.state.customDoc[i], this.state.customDoc[i].name);\n    }\n\n    api.post(APIConstant.path.sendMailBulk, emailDataForm).then(res => {\n      if (res.success) {\n        toast.success('Mail Send Successful!');\n        this.props.history.push({\n          pathname: '/apps/email/inbox'\n        });\n      } else {\n        toast.error('Mail Send Failed!');\n      }\n    }).catch(err => {\n      console.log(err)\n    });\n\n  }\n\n  getInbox() {\n    let data = {\n      \"boxName\": \"INBOX\",\n      \"searchType\": \"ALL\"\n    }\n    api.post(APIConstant.path.allEmail, data).then(res => {\n      if (res.success) {\n        let count = res.data.filter((item) => {\n          if (item.attributes.flags[0] != '\\\\Seen') {\n            return true\n          } else {\n            return false\n          }\n        }).length\n        this.setState({ InboxCount: count })\n      }\n\n    }).catch(err => {\n      console.log(err)\n    });\n  }\n\n  handleDetailsChange(evt) {\n    const data = evt.editor.getData();\n    if (CommonConfig.isEmpty(data)) {\n      this.setState({ emailBodyError: true, emailBody: '' });\n      // this.show(\"customEndorsementDetails\", true);\n    } else {\n      this.setState({ emailBodyError: false, emailBody: data });\n      // this.show(\"customEndorsementDetails\", false);\n    }\n  }\n\n  handleChange = (e) => {\n    this.setState({ [e.target.name]: e.target.value });\n    if (e.target.name === 'emailTo') {\n      if (e.target.value === '' || e.target.value === null) {\n        this.setState({ emailTo: '' });\n      } else {\n        this.setState({ emailTo: e.target.value });\n      }\n    }\n\n    if (e.target.name === 'emailFrom') {\n      if (e.target.value === '' || e.target.value === null) {\n        this.setState({ emailFrom: '' });\n      } else {\n        this.setState({ emailFrom: e.target.value });\n      }\n    }\n\n    if (e.target.name === 'emailCC') {\n      if (e.target.value === '' || e.target.value === null) {\n        this.setState({ emailCC: '' });\n      } else {\n        this.setState({ emailCC: e.target.value });\n      }\n    }\n\n    if (e.target.name === 'emailBCC') {\n      if (e.target.value === '' || e.target.value === null) {\n        this.setState({ emailBCC: '' });\n      } else {\n        this.setState({ emailBCC: e.target.value });\n      }\n    }\n\n    if (e.target.name === 'emailSubject') {\n      if (e.target.value === '' || e.target.value === null) {\n        this.setState({ emailSubject: '' });\n      } else {\n        this.setState({ emailSubject: e.target.value });\n      }\n    }\n  }\n\n  filterPolicySingle() {\n    let data = {\n      \"pPolicyId\": '',\n      \"pPolicyNumber\": this.state.selectedPolicy,\n      \"CurrentUser\": CommonConfig.loggedInUserData().EntityId\n    }\n    api.post(APIConstant.path.getPolicyAutoComplete, data).then(res => {\n      if (res.success) {\n        this.setState({ policysData: res.data, emailTo: res.data[0].email })\n        this.getDocumentList()\n      } else {\n        this.setState({ policysData: [] })\n        toast.error(res.data[0].returnValue);\n      }\n    }).catch(err => {\n      console.log(err)\n    });\n  }\n\n  toggle() {\n    this.setState({\n      dropdownOpen: !this.state.dropdownOpen\n    });\n  }\n\n  mulSelect = (e) => {\n    this.setState({ selectedDocuments: e })\n  }\n\n  getPageString = (e) => {\n    let firstPage = e.first + 1;\n    let l = e.rows * (e.page + 1);\n    let lastPage = (l < this.state.documentList.length) ? l : this.state.documentList.length\n    var str = firstPage + ' to ' + lastPage + ' out of ' + this.state.documentList.length + ' records';\n    this.setState({ selectedPage: e.first, str: str, rowsPerPage: e.rows });\n  }\n\n  render() {\n    var header =\n      <div>\n        <div style={{ 'textAlign': 'Right', marginTop: 10 }}>\n          <Row>\n            <Col>\n              <div className=\"basic-header\">\n                <div className=\"header-right-option\">\n                  <div style={{ textAlign: 'right' }}>\n                    <i className=\"pi pi-search\" style={{ margin: '4px 4px 0 0' }}></i>\n                    <InputText type=\"search\" onInput={(e) => this.setState({ globalFilter: e.target.value })} placeholder=\"Global Search\" size=\"30\" style={{ marginRight: 10 }} />\n                  </div>\n                  <MultiSelect value={this.state.cols} options={this.colOptions}\n                    fixedPlaceholder={true} placeholder={CommonConfig.dataTableConfig.columnToggleIcon} tooltip=\"Show / Hide Column\"\n                    onChange={this.onColumnToggle} style={{ width: '50px' }}\n                  />\n                </div>\n              </div>\n            </Col>\n          </Row>\n        </div>\n      </div>;\n\n    let columns = this.state.cols.map((col, i) => {\n      return <Column field={col.field} header={col.header} body={col.body} sortable={col.sortable} filter={col.filter} selectionMode={col.selectionMode} style={col.style} />;\n    });\n    return (\n      <div className=\"animated fadeIn\">\n        <div className=\"email-app\">\n          <nav>\n            <a href=\"#/apps/email/compose\" className=\"btn btn-danger btn-block\">New Email</a>\n            <Nav>\n              <NavItem>\n                <NavLink href=\"#/apps/email/inbox\"><i className=\"fa fa-inbox\"></i> Inbox <Badge color=\"danger\">{this.state.InboxCount}</Badge></NavLink>\n              </NavItem>\n              <NavItem>\n                <NavLink href=\"#/apps/email/sent\"><i className=\"fa fa-inbox\"></i> Sent </NavLink>\n              </NavItem>\n            </Nav>\n          </nav>\n          <main>\n            <form method=\"post\" action=\"\">\n              <p className=\"text-center\">New Message</p>\n              <Form>\n                <FormGroup row className=\"mb-3\">\n                  <Label for=\"to\" xs={2} sm={1}>To:</Label>\n                  <Col xs={10} sm={11}>\n                    <Input type=\"email\" value={this.state.emailTo} name=\"emailTo\" id=\"emailTo\" onChange={(e) => this.handleChange(e)} placeholder=\"Type Email\" />\n                  </Col>\n                </FormGroup>\n                <FormGroup row className=\"mb-3\">\n                  <Label for=\"cc\" xs={2} sm={1}>CC:</Label>\n                  <Col xs={10} sm={11}>\n                    <Input type=\"email\" value={this.state.emailCC} id=\"emailCC\" name=\"emailCC\" onChange={(e) => this.handleChange(e)} placeholder=\"Type CC\" />\n                  </Col>\n                </FormGroup>\n                <FormGroup row className=\"mb-3\">\n                  <Label for=\"bcc\" xs={2} sm={1}>BCC:</Label>\n                  <Col xs={10} sm={11}>\n                    <Input type=\"email\" value={this.state.emailBCC} id=\"emailBCC\" name=\"emailBCC\" onChange={(e) => this.handleChange(e)} placeholder=\"Type BCC\" />\n                  </Col>\n                </FormGroup>\n                <FormGroup row className=\"mb-3\">\n                  <Label for=\"bcc\" xs={2} sm={1}>Subject:</Label>\n                  <Col xs={10} sm={11}>\n                    <Input type=\"text\" value={this.state.emailSubject} id=\"emailSubject\" name=\"emailSubject\" onChange={(e) => this.handleChange(e)} placeholder=\"Type Subject\" />\n                  </Col>\n                </FormGroup>\n              </Form>\n              <Row>\n                <Col sm={11} className=\"ml-auto\">\n                  <FormGroup>\n                    <Row>\n                      <Col md=\"4\">\n                        <div className=\"input-box\">\n                          <Input type=\"select\" name=\"documentType\" id=\"documentType\" onChange={(e) => this.selectType(e.target.value, 'documentType')} value={this.state.documentType}>\n                            <option value=''>Select Attachment</option>\n                            <option value=\"1\" key=\"Policy Doc\">Policy Doc</option>\n                            <option value=\"2\" key=\"Custom\">Custom</option>\n                          </Input>\n                        </div>\n                      </Col>\n                      <Col md=\"4\">\n                        {this.state.documentType == \"1\" ? (<BTN color=\"success\" onClick={() => this.selectType(\"1\", 'documentType')}>Select Doc</BTN>) : (null)}\n                        {this.state.documentType == \"2\" ? (<BTN color=\"success\" onClick={() => this.selectType(\"2\", 'documentType')}>Select Doc</BTN>) : (null)}\n                        <Input type=\"file\" name=\"customDoc\" id=\"customDoc\" style={{ display: \"none\" }} multiple=\"multiple\" onChange={this.selectDocument} />\n                      </Col>\n                    </Row>\n                    <Row>\n                      <Col md=\"4\">\n                        {this.state.policysData.length > 0 ? (<div className=\"input-box\">\n                          <Input type=\"select\" name=\"emailTemplate\" id=\"emailTemplate\" value={this.state.emailTemplate} onChange={(e) => this.selectType(e.target, 'emailTemplate')}>\n                            <option value=\"\">Select EmailTemplate</option>\n                            {this.state.emailTemplateList.map((emailTemplate, i) => {\n                              return (<option value={emailTemplate.MessageTemplateId} key={i}>{emailTemplate.TamplateName}</option>)\n                            })\n                            }\n                          </Input>\n                        </div>) : (null)}\n                      </Col>\n                    </Row>\n                  </FormGroup>\n                  <FormGroup className=\"mt-4\">\n                    <CKEditor name=\"emailBody\" id=\"emailBody\" data={this.state.emailBody} onChange={this.handleDetailsChange} />\n                    <em id=\"emailBodyError\" className=\"error invalid-feedback\"></em>\n                  </FormGroup>\n                  <FormGroup>\n                    <Col xs={10} sm={11}>\n                      {this.state.attachmentURL.length > 0 ? (<div className=\"attachments\">\n                        <span>Policy Templete Doc</span>\n                        {this.state.attachmentURL.map((attach, i) => {\n                          return (\n                            <div className=\"attachment\">\n                              <Badge color=\"danger\">{attach.Type}</Badge> <b>{attach.FileName}</b> <i>({attach.FileSize})</i>\n                              <span className=\"menu\">\n                                <a onClick={() => this.downloadData(attach)} className=\"fa fa-cloud-download\">{null}</a>\n                              </span>\n                            </div>)\n                        })\n                        }\n                      </div>) : (null)}\n\n                      {this.state.selectedDocuments.length > 0 ? (<div className=\"attachments\">\n                        <span>Policy Doc : </span>\n                        <span>Policy#: {this.state.policysData.length > 0 ? this.state.policysData[0].policyNumber : 'NA'}</span>\n                        <span style={{ marginLeft: '10px' }}>RenewalDate: {this.state.policysData.length > 0 ? moment(this.state.policysData[0].renewalDate).format(CommonConfig.dateFormat.forDatePicker) : 'NA'}</span>\n                        <span style={{ marginLeft: '10px' }}>InsuredName: {this.state.policysData.length > 0 ? this.state.policysData[0].insuredName : 'NA'}</span>\n                        <span style={{ marginLeft: '10px' }}>PolicyType: {this.state.policysData.length > 0 ? this.state.policysData[0].policyType : 'NA'}</span>\n                        {this.state.selectedDocuments.map((attach, i) => {\n                          return (\n                            <div className=\"attachment\">\n                              <Badge color=\"danger\">{attach.Type}</Badge> <b>{attach.Filename}</b> <i>({attach.FileSize})</i>\n                              <span className=\"menu\">\n                                <a onClick={() => this.removeDocument(\"custom\", i)} className=\"fa fa-remove\">{null}</a>\n                                <a onClick={() => this.downloadData(attach)} className=\"fa fa-cloud-download\">{null}</a>\n                              </span>\n                            </div>)\n                        })\n                        }\n                      </div>) : (null)}\n\n                      {this.state.customDoc.length > 0 ? (<div className=\"attachments\">\n                        <span>Custom Doc</span>\n                        {this.state.customDoc.map((attach, i) => {\n                          return (\n                            <div className=\"attachment\">\n                              <Badge color=\"danger\">{attach.type}</Badge> <b>{attach.name}</b> <i>({Math.round(attach.size / 1024)} KB)</i>\n                              <span className=\"menu\">\n                                <a onClick={() => this.removeDocument(\"custom\", i)} className=\"fa fa-remove\">{null}</a>\n                                <a onClick={() => this.downloadData(attach)} className=\"fa fa-cloud-download\">{null}</a>\n                              </span>\n                            </div>)\n                        })\n                        }\n                      </div>) : (null)}\n                    </Col>\n                  </FormGroup>\n                  <FormGroup>\n                    <BTN color=\"success\" onClick={() => this.sendMail()}><i class=\"fa fa-check\"></i>Send</BTN>\n                  </FormGroup>\n                </Col>\n              </Row>\n            </form>\n          </main>\n        </div>\n        <Modal isOpen={this.state.openAttachmentPopup} className={'modal-lg'} style={{ maxWidth: '70%' }}>\n          <ModalHeader toggle={() => this.setState({ openAttachmentPopup: false })}> Attachement </ModalHeader>\n          <ModalBody>\n            <Row>\n              <Col md=\"3\">\n                <AutoComplete value={this.state.selectedPolicy} field=\"policyNumber\" placeholder=\"Search By Policy And Email\" minLength={1} onChange={(e) => this.selectType(e.value, 'selectPolicy')} />\n              </Col>\n              <Col md=\"1\" style={{ marginLeft: '2px' }}>\n                <BTN color=\"success\" onClick={() => this.filterPolicySingle()}>Search</BTN>\n              </Col>\n              <Col md=\"7\">\n                <span>Policy#: {this.state.policysData.length > 0 ? this.state.policysData[0].policyNumber : 'NA'}</span>\n                <span style={{ marginLeft: '10px' }}>RenewalDate: {this.state.policysData.length > 0 ? moment(this.state.policysData[0].renewalDate).format(CommonConfig.dateFormat.forDatePicker) : 'NA'}</span>\n                <span style={{ marginLeft: '10px' }}>InsuredName: {this.state.policysData.length > 0 ? this.state.policysData[0].insuredName : 'NA'}</span>\n                <span style={{ marginLeft: '10px' }}>PolicyType: {this.state.policysData.length > 0 ? this.state.policysData[0].policyType : 'NA'}</span>\n              </Col>\n            </Row>\n            <div className=\"table-custom\">\n              <DataTable style={{}} ref={(el) => this.dt = el} value={this.state.documentList}\n                currentPageReportTemplate={this.state.str} first={this.state.selectedPage} onPage={(e) => this.getPageString(e)}\n                paginator={true} rows={this.state.rowsPerPage} header={header} exportFilename=\"Documents\"\n                paginatorTemplate=\"CurrentPageReport FirstPageLink PrevPageLink PageLinks NextPageLink LastPageLink RowsPerPageDropdown \"\n                rowsPerPageOptions={this.state.rowsPerPageOptions} globalFilter={this.state.globalFilter} emptyMessage=\"No records found\"\n                responsive={true} resizableColumns={true} columnResizeMode=\"fit\"\n                scrollable={true} scrollHeight=\"265px\"\n                selection={this.state.selectedDocuments}\n                onSelectionChange={(e) => this.mulSelect(e.value)}\n              >\n                {columns}\n              </DataTable>\n            </div>\n          </ModalBody>\n        </Modal>\n      </div >\n    )\n  }\n}\n\nexport default Compose;\n"]},"metadata":{},"sourceType":"module"}