{"ast":null,"code":"import _defineProperty from\"/Users/bhavik/Downloads/Cognisun/Evolution/Evolution_React/evolution_new/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _classCallCheck from\"/Users/bhavik/Downloads/Cognisun/Evolution/Evolution_React/evolution_new/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/bhavik/Downloads/Cognisun/Evolution/Evolution_React/evolution_new/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/Users/bhavik/Downloads/Cognisun/Evolution/Evolution_React/evolution_new/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/bhavik/Downloads/Cognisun/Evolution/Evolution_React/evolution_new/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component}from\"react\";import{Link}from\"react-router-dom\";import{Button,Card,CardBody,CardGroup,Col,Container,Form,Input,InputGroup,InputGroupAddon,InputGroupText,Row}from\"reactstrap\";import uuid from\"uuid\";import api from\"../../../utils/apiClient\";import Cookies from\"js-cookie\";import APIConstant from\"../../../utils/constants\";import{ToastContainer,toast}from\"react-toastify\";import{useTranslation,withTranslation,Trans}from'react-i18next';import{CommonConfig}from'../../../utils/constants';import logo from'../../../assets/img/yachtsman_logo.png';function Page(){var _useTranslation=useTranslation(),t=_useTranslation.t,i18n=_useTranslation.i18n;var changeLanguage=function changeLanguage(lng){i18n.changeLanguage(lng);window.location.reload();};return/*#__PURE__*/React.createElement(\"div\",{className:\"lan-buttons\"},/*#__PURE__*/React.createElement(\"button\",{onClick:function onClick(){return changeLanguage('de');}},\"de\"),/*#__PURE__*/React.createElement(\"button\",{onClick:function onClick(){return changeLanguage('en');}},\"en\"),/*#__PURE__*/React.createElement(\"button\",{onClick:function onClick(){return changeLanguage('es');}},\"es\"));}var Login=/*#__PURE__*/function(_Component){_inherits(Login,_Component);var _super=_createSuper(Login);function Login(props,context){var _this;_classCallCheck(this,Login);_this=_super.call(this,props,context);_this.handleChange=function(e){_this.setState(_defineProperty({},e.target.name,e.target.value));if(e.target.name===\"username\"){if(e.target.value===\"\"||e.target.value===null){_this.setState({usernameError:true});_this.show(\"username\",true);}else{_this.setState({usernameError:false,username:e.target.value});_this.show(\"username\",false);}}if(e.target.name===\"password\"){if(e.target.value===\"\"||e.target.value===null){_this.setState({passwordError:true});_this.show(\"password\",true);}else{_this.setState({passwordError:false,password:e.target.value});_this.show(\"password\",false);}}};_this.state={password:\"\",username:\"\",passwordError:true,usernameError:true};return _this;}_createClass(Login,[{key:\"validateEmail\",value:function validateEmail(username){var pattern=/[a-zA-Z0-9]+[\\.]?([a-zA-Z0-9]+)?[\\@][a-z]{3,9}[\\.][a-z]{2,5}/g;var result=pattern.test(username);}},{key:\"show\",value:function show(field,condition){if(condition){document.getElementById(field).className=\"form-control is-invalid\";}else{document.getElementById(field).className=\"form-control\";}}},{key:\"onLogin\",value:function onLogin(){var _this2=this;if(this.state.usernameError===false&&this.state.passwordError===false){var form={username:this.state.username,password:this.state.password};api.post(APIConstant.path.login,form).then(function(res){if(res.success){toast.success(res.message);var PolicyDetailPageTimer=CommonConfig.getSysConfigByKey('PolicyDetailPageTimer');var PolicyDetailModalTimer=CommonConfig.getSysConfigByKey('PolicyDetailModalTimer');// const expires = 60 * 600 * 1000;\n// const inOneHour = new Date(new Date().getTime() + expires);\n// console.log(\"DSgf\", inOneHour, res);\n// Cookies.set(\"access_token\", res.token, { expires: inOneHour });\n// Cookies.set(\"loggedInUserData\", JSON.stringify(res.data[0]), { expires: inOneHour });\nlocalStorage.setItem('access_token',res.token);localStorage.setItem('batchMessageHeaderId',uuid.v4());localStorage.setItem('loggedInUserData',JSON.stringify(res.data[0]));_this2.props.history.push(\"/dashboard\");}else{toast.error(res.message);}}).catch(function(err){toast.error(err);});}else{this.show(\"username\",this.state.usernameError);this.show(\"password\",this.state.passwordError);}}},{key:\"render\",value:function render(){var _this3=this;var t=this.props.t;return/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(Page,null),/*#__PURE__*/React.createElement(ToastContainer,null),/*#__PURE__*/React.createElement(\"div\",{className:\"app flex-row align-items-center\"},/*#__PURE__*/React.createElement(Container,null,/*#__PURE__*/React.createElement(Row,{className:\"justify-content-center\"},/*#__PURE__*/React.createElement(Col,{md:\"3\"},/*#__PURE__*/React.createElement(\"img\",{src:logo,className:\"\",style:{marginBottom:20}}))),/*#__PURE__*/React.createElement(Row,{className:\"justify-content-center\"},/*#__PURE__*/React.createElement(Col,{md:\"8\"},/*#__PURE__*/React.createElement(CardGroup,null,/*#__PURE__*/React.createElement(Card,{className:\"p-4\"},/*#__PURE__*/React.createElement(CardBody,null,/*#__PURE__*/React.createElement(Form,{onSubmit:function onSubmit(e){return e.preventDefault();}},/*#__PURE__*/React.createElement(\"h1\",null,t('loginData.title')),/*#__PURE__*/React.createElement(\"p\",{className:\"text-muted\"},t('loginData.description')),/*#__PURE__*/React.createElement(InputGroup,{className:\"mb-3\"},/*#__PURE__*/React.createElement(InputGroupAddon,{addonType:\"prepend\"},/*#__PURE__*/React.createElement(InputGroupText,null,/*#__PURE__*/React.createElement(\"i\",{className:\"icon-user\"}))),/*#__PURE__*/React.createElement(Input,{name:\"username\",type:\"text\",id:\"username\",className:\"\",placeholder:t('loginData.username.placeholder'),autoComplete:t('loginData.username.placeholder'),onChange:function onChange(e){return _this3.handleChange(e);},value:this.state.username}),/*#__PURE__*/React.createElement(\"em\",{className:\"error invalid-feedback\"},t('loginData.username.error'))),/*#__PURE__*/React.createElement(InputGroup,{className:\"mb-4\"},/*#__PURE__*/React.createElement(InputGroupAddon,{addonType:\"prepend\"},/*#__PURE__*/React.createElement(InputGroupText,null,/*#__PURE__*/React.createElement(\"i\",{className:\"icon-lock\"}))),/*#__PURE__*/React.createElement(Input,{name:\"password\",id:\"password\",type:\"password\",placeholder:t('loginData.password.placeholder'),autoComplete:\"current-password\",onChange:function onChange(e){return _this3.handleChange(e);},value:this.state.password}),/*#__PURE__*/React.createElement(\"em\",{className:\"error invalid-feedback\"},t('loginData.password.error'))),/*#__PURE__*/React.createElement(Row,null,/*#__PURE__*/React.createElement(Col,{xs:\"6\"},/*#__PURE__*/React.createElement(Button,{type:\"submit\",color:\"primary\",className:\"px-4\",onClick:function onClick(){return _this3.onLogin();}},t('loginData.button'))),/*#__PURE__*/React.createElement(Col,{xs:\"6\",className:\"text-right\"},/*#__PURE__*/React.createElement(Button,{color:\"link\",className:\"px-0\",onClick:function onClick(e){return _this3.props.history.push('/forgotpassword');}},t('loginData.forgotpassword'))))))),/*#__PURE__*/React.createElement(Card,{className:\"text-white bg-primary py-5 d-md-down-none\",style:{width:\"44%\"}},/*#__PURE__*/React.createElement(CardBody,{className:\"text-center\"},/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"h2\",null,t('loginData.signup')),/*#__PURE__*/React.createElement(\"p\",null,t('loginData.registerdescription')),/*#__PURE__*/React.createElement(Link,{to:\"/register\"},/*#__PURE__*/React.createElement(Button,{color:\"primary\",className:\"mt-3\",active:true,tabIndex:-1},t('loginData.registerbutton'))))))))),/*#__PURE__*/React.createElement(Row,{className:\"justify-content-center\"},/*#__PURE__*/React.createElement(Col,{md:\"3\"},/*#__PURE__*/React.createElement(\"div\",{style:{fontSize:10,textAlign:\"center\",marginTop:10}},\"Verison: \",CommonConfig.appVerison),/*#__PURE__*/React.createElement(\"div\",{style:{fontSize:10,textAlign:\"center\"}},\"Region: \",CommonConfig.appRegion))))));}}]);return Login;}(Component);export default withTranslation()(Login);","map":{"version":3,"sources":["/Users/bhavik/Downloads/Cognisun/Evolution/Evolution_React/evolution_new/src/views/Pages/Login/Login.js"],"names":["React","Component","Link","Button","Card","CardBody","CardGroup","Col","Container","Form","Input","InputGroup","InputGroupAddon","InputGroupText","Row","uuid","api","Cookies","APIConstant","ToastContainer","toast","useTranslation","withTranslation","Trans","CommonConfig","logo","Page","t","i18n","changeLanguage","lng","window","location","reload","Login","props","context","handleChange","e","setState","target","name","value","usernameError","show","username","passwordError","password","state","pattern","result","test","field","condition","document","getElementById","className","form","post","path","login","then","res","success","message","PolicyDetailPageTimer","getSysConfigByKey","PolicyDetailModalTimer","localStorage","setItem","token","v4","JSON","stringify","data","history","push","error","catch","err","marginBottom","preventDefault","onLogin","width","fontSize","textAlign","marginTop","appVerison","appRegion"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\nimport {\r\n  Button,\r\n  Card,\r\n  CardBody,\r\n  CardGroup,\r\n  Col,\r\n  Container,\r\n  Form,\r\n  Input,\r\n  InputGroup,\r\n  InputGroupAddon,\r\n  InputGroupText,\r\n  Row\r\n} from \"reactstrap\";\r\nimport uuid from \"uuid\";\r\nimport api from \"../../../utils/apiClient\";\r\nimport Cookies from \"js-cookie\";\r\nimport APIConstant from \"../../../utils/constants\";\r\nimport { ToastContainer, toast } from \"react-toastify\";\r\nimport { useTranslation, withTranslation, Trans } from 'react-i18next';\r\nimport { CommonConfig } from '../../../utils/constants';\r\n\r\nimport logo from '../../../assets/img/yachtsman_logo.png';\r\n\r\nfunction Page() {\r\n  const { t, i18n } = useTranslation();\r\n\r\n  const changeLanguage = lng => {\r\n    i18n.changeLanguage(lng);\r\n    window.location.reload();\r\n  };\r\n\r\n  return (\r\n    <div className=\"lan-buttons\">\r\n      <button onClick={() => changeLanguage('de')}>de</button>\r\n      <button onClick={() => changeLanguage('en')}>en</button>\r\n      <button onClick={() => changeLanguage('es')}>es</button>\r\n    </div>\r\n  );\r\n}\r\n\r\nclass Login extends Component {\r\n\r\n  constructor(props, context) {\r\n    super(props, context);\r\n\r\n    this.state = {\r\n      password: \"\",\r\n      username: \"\",\r\n      passwordError: true,\r\n      usernameError: true\r\n    };\r\n  }\r\n\r\n  handleChange = e => {\r\n    this.setState({\r\n      [e.target.name]: e.target.value\r\n    });\r\n\r\n    if (e.target.name === \"username\") {\r\n      if (e.target.value === \"\" || e.target.value === null) {\r\n        this.setState({\r\n          usernameError: true\r\n        });\r\n        this.show(\"username\", true);\r\n      } else {\r\n        this.setState({\r\n          usernameError: false,\r\n          username: e.target.value\r\n        });\r\n        this.show(\"username\", false);\r\n      }\r\n    }\r\n\r\n    if (e.target.name === \"password\") {\r\n      if (e.target.value === \"\" || e.target.value === null) {\r\n        this.setState({\r\n          passwordError: true\r\n        });\r\n        this.show(\"password\", true);\r\n      } else {\r\n        this.setState({\r\n          passwordError: false,\r\n          password: e.target.value\r\n        });\r\n        this.show(\"password\", false);\r\n      }\r\n    }\r\n  };\r\n\r\n  validateEmail(username) {\r\n    const pattern = /[a-zA-Z0-9]+[\\.]?([a-zA-Z0-9]+)?[\\@][a-z]{3,9}[\\.][a-z]{2,5}/g;\r\n    const result = pattern.test(username);\r\n  }\r\n\r\n  show(field, condition) {\r\n    if (condition) {\r\n      document.getElementById(field).className = \"form-control is-invalid\";\r\n    } else {\r\n      document.getElementById(field).className = \"form-control\";\r\n    }\r\n  }\r\n\r\n  onLogin() {\r\n    if (\r\n      this.state.usernameError === false &&\r\n      this.state.passwordError === false\r\n    ) {\r\n      const form = {\r\n        username: this.state.username,\r\n        password: this.state.password\r\n      };\r\n\r\n      api\r\n        .post(APIConstant.path.login, form)\r\n        .then(res => {\r\n          if (res.success) {\r\n            toast.success(res.message);\r\n            var PolicyDetailPageTimer = CommonConfig.getSysConfigByKey('PolicyDetailPageTimer');\r\n            var PolicyDetailModalTimer = CommonConfig.getSysConfigByKey('PolicyDetailModalTimer');\r\n            // const expires = 60 * 600 * 1000;\r\n            // const inOneHour = new Date(new Date().getTime() + expires);\r\n            // console.log(\"DSgf\", inOneHour, res);\r\n            // Cookies.set(\"access_token\", res.token, { expires: inOneHour });\r\n            // Cookies.set(\"loggedInUserData\", JSON.stringify(res.data[0]), { expires: inOneHour });\r\n            localStorage.setItem('access_token',  res.token)\r\n\r\n              localStorage.setItem('batchMessageHeaderId', uuid.v4())\r\n            localStorage.setItem('loggedInUserData', JSON.stringify(res.data[0]))\r\n            this.props.history.push(\"/dashboard\");\r\n          } else {\r\n            toast.error(res.message);\r\n          }\r\n        })\r\n        .catch(err => {\r\n          toast.error(err);\r\n        });\r\n    } else {\r\n      this.show(\"username\", this.state.usernameError);\r\n      this.show(\"password\", this.state.passwordError);\r\n    }\r\n  }\r\n\r\n  render() {\r\n    const { t } = this.props;\r\n\r\n    return (\r\n      <div>\r\n        <Page />\r\n\r\n        <ToastContainer></ToastContainer>\r\n\r\n        <div className=\"app flex-row align-items-center\">\r\n          <Container>\r\n            <Row className=\"justify-content-center\">\r\n              <Col md=\"3\">\r\n                <img src={logo} className=\"\" style={{ marginBottom: 20 }} />\r\n              </Col>\r\n            </Row>\r\n            <Row className=\"justify-content-center\">\r\n              <Col md=\"8\">\r\n                <CardGroup>\r\n                  <Card className=\"p-4\">\r\n                    <CardBody>\r\n                      <Form onSubmit={e => e.preventDefault()}>\r\n                        <h1>{t('loginData.title')}</h1>\r\n\r\n                        <p className=\"text-muted\">{t('loginData.description')}</p>\r\n\r\n                        <InputGroup className=\"mb-3\">\r\n                          <InputGroupAddon addonType=\"prepend\">\r\n                            <InputGroupText>\r\n                              <i className=\"icon-user\"></i>\r\n                            </InputGroupText>\r\n                          </InputGroupAddon>\r\n\r\n                          <Input\r\n                            name=\"username\"\r\n                            type=\"text\"\r\n                            id=\"username\"\r\n                            className=\"\"\r\n                            placeholder={t('loginData.username.placeholder')}\r\n                            autoComplete={t('loginData.username.placeholder')}\r\n                            onChange={e => this.handleChange(e)}\r\n                            value={this.state.username}\r\n                          />\r\n                          {/* <Input id=\"username\" type=\"text\" className=\"form-control is-invalid\" placeholder=\"Username\" autoComplete=\"username\" value={this.state.username} /> */}\r\n                          <em className=\"error invalid-feedback\">{t('loginData.username.error')}</em>\r\n                        </InputGroup>\r\n\r\n                        <InputGroup className=\"mb-4\">\r\n                          <InputGroupAddon addonType=\"prepend\">\r\n                            <InputGroupText>\r\n                              <i className=\"icon-lock\"></i>\r\n                            </InputGroupText>\r\n                          </InputGroupAddon>\r\n\r\n                          <Input\r\n                            name=\"password\"\r\n                            id=\"password\"\r\n                            type=\"password\"\r\n                            placeholder={t('loginData.password.placeholder')}\r\n                            autoComplete=\"current-password\"\r\n                            onChange={e => this.handleChange(e)}\r\n                            value={this.state.password}\r\n                          />\r\n                          <em className=\"error invalid-feedback\">{t('loginData.password.error')}</em>\r\n                        </InputGroup>\r\n\r\n                        <Row>\r\n                          <Col xs=\"6\">\r\n                            <Button\r\n                              type=\"submit\"\r\n                              color=\"primary\"\r\n                              className=\"px-4\"\r\n                              onClick={() => this.onLogin()}\r\n                            >\r\n                              {t('loginData.button')}\r\n                            </Button>\r\n                          </Col>\r\n\r\n                          <Col xs=\"6\" className=\"text-right\">\r\n                            {/* <Link to=\"/forgotpassword\"> */}\r\n                            <Button color=\"link\" className=\"px-0\" onClick={e => this.props.history.push('/forgotpassword')}>\r\n                              {t('loginData.forgotpassword')}\r\n                            </Button>\r\n                            {/* </Link> */}\r\n                          </Col>\r\n                          {/* <Col xs=\"6\" className=\"text-right\">\r\n                          <Link to=\"/forgotpassword\">\r\n                            <Button color=\"link\" className=\"px-0\">\r\n                            {t('loginData.forgotpassword')}\r\n                            </Button>\r\n                          </Link>\r\n                        </Col> */}\r\n                        </Row>\r\n                      </Form>\r\n                    </CardBody>\r\n                  </Card>\r\n                  <Card\r\n                    className=\"text-white bg-primary py-5 d-md-down-none\"\r\n                    style={{ width: \"44%\" }}\r\n                  >\r\n                    <CardBody className=\"text-center\">\r\n                      <div>\r\n                        <h2>{t('loginData.signup')}</h2>\r\n                        <p>\r\n                          {t('loginData.registerdescription')}\r\n                        </p>\r\n                        <Link to=\"/register\">\r\n                          <Button\r\n                            color=\"primary\"\r\n                            className=\"mt-3\"\r\n                            active\r\n                            tabIndex={-1}\r\n                          >\r\n                            {t('loginData.registerbutton')}\r\n                          </Button>\r\n                        </Link>\r\n                      </div>\r\n                    </CardBody>\r\n                  </Card>\r\n                </CardGroup>\r\n              </Col>\r\n            </Row>\r\n\r\n            <Row className=\"justify-content-center\">\r\n              <Col md=\"3\">\r\n                <div style={{ fontSize: 10, textAlign: \"center\", marginTop: 10 }}>\r\n                  Verison: {CommonConfig.appVerison}\r\n                </div>\r\n                <div style={{ fontSize: 10, textAlign: \"center\" }}>\r\n                  Region: {CommonConfig.appRegion}\r\n                </div>\r\n              </Col>\r\n            </Row>\r\n          </Container>\r\n        </div>\r\n      </div>\r\n    )\r\n  }\r\n\r\n}\r\n\r\nexport default withTranslation()(Login);\r\n"]},"metadata":{},"sourceType":"module"}