{"ast":null,"code":"import _defineProperty from\"/Users/bhavik/Downloads/Cognisun/Evolution/Evolution_React/evolution_new/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _classCallCheck from\"/Users/bhavik/Downloads/Cognisun/Evolution/Evolution_React/evolution_new/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/bhavik/Downloads/Cognisun/Evolution/Evolution_React/evolution_new/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _assertThisInitialized from\"/Users/bhavik/Downloads/Cognisun/Evolution/Evolution_React/evolution_new/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";import _inherits from\"/Users/bhavik/Downloads/Cognisun/Evolution/Evolution_React/evolution_new/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/bhavik/Downloads/Cognisun/Evolution/Evolution_React/evolution_new/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component}from'react';import Select from'react-select';import api from'../../utils/apiClient';import moment from'moment';import DatePicker from'react-date-picker';import{withTranslation}from'react-i18next';import{DataTable}from'primereact/datatable';import{Column}from'primereact/column';import{CommonConfig}from'../../utils/constants';import{Button}from'primereact/button';import{MultiSelect}from'primereact/multiselect';import{Collapse,Button as BTN,Input,Card,CardHeader,CardBody,Row,Col,Modal,ModalHeader,ModalBody,ModalFooter}from'reactstrap';import{toast}from'react-toastify';import APIConstant from'../../utils/constants';import ShowMoreText from'react-show-more-text';var Lead_Quotation_and_newbusiness_report=/*#__PURE__*/function(_Component){_inherits(Lead_Quotation_and_newbusiness_report,_Component);var _super=_createSuper(Lead_Quotation_and_newbusiness_report);function Lead_Quotation_and_newbusiness_report(props){var _this;_classCallCheck(this,Lead_Quotation_and_newbusiness_report);_this=_super.call(this,props);_this.getPageString=function(e){var firstPage=e.first+1;var l=e.rows*(e.page+1);var lastPage=l<_this.state.arr.length?l:_this.state.arr.length;var str=firstPage+' to '+lastPage+' out of '+_this.state.arr.length+' records';_this.setState({selectedPage:e.first,str:str,rowsPerPage:e.rows});};_this.handleChange=function(e){_this.setState(_defineProperty({},e.target.name,e.target.value));if(e.target.name==='monthtillDate'){_this.setState({monthtillDate:e.target.value});}if(e.target.name==='fromDate'){_this.setState({fromDate:e.target.value});}if(e.target.name==='toDate'){_this.setState({toDate:e.target.value});}if(e.target.name==='Year'){console.log('Year',e.target.value);if(e.target.value===null||e.target.value===undefined||e.target.value===''){_this.setState({Year:e.target.value,YearError:true});_this.show('Year',true,'YearError','Please Enter Year');}else{_this.setState({Year:e.target.value,YearError:false});_this.show('Year',false,'YearError','');}}};var columns=[/*  { body: this.actionTemplate.bind(this), field: \"Select\", header: \"Select\", sortable: false, id: \"checkbox\", style: { 'width': '45px' } },*/{field:\"Stage\",header:\"Stage\",sortable:true,filter:true,id:1,style:{'width':'85px'}},{field:\"PolicyNumber\",header:\"Policy ID\",sortable:true,filter:true,id:2,style:{'width':'65px'}},{field:\"Name\",header:\"Name\",sortable:true,filter:true,id:3,style:{'width':'150px'}},{field:\"Language\",header:\"Language\",sortable:true,filter:true,id:4,style:{'width':'65px'}},{field:\"PolicyClass\",header:\"Policy Class\",sortable:true,filter:true,id:5,style:{'width':'100px'}},{field:\"PolicyType\",header:\"Policy Type\",sortable:true,filter:true,id:6,style:{'textAlign':'right','width':'100px'}},{field:\"YearBuilt\",header:\"Year Built\",sortable:true,filter:true,id:7,style:{'textAlign':'right','width':'65px'}},{field:\"TSI\",header:\"TSI\",sortable:true,filter:true,id:8,style:{'width':'85px','textAlign':'right'}},{field:\"Cover\",header:\"Cover\",sortable:true,filter:true,id:9,style:{'width':'105px'}},{field:\"Source\",header:\"Source\",sortable:true,filter:true,id:10,style:{'width':'85px'}},{field:\"SourceName\",header:\"Source Name\",sortable:true,filter:true,filterMatchMode:'contains',id:11,style:{'width':'105px'}},{field:\"Quarter\",header:\"Quarter\",sortable:true,filter:true,id:12,style:{'width':'65px'}},// { field: \"Stage\", header: \"Stage\", sortable: true, filter: true, id: 13, style: { 'width': '65px' }  },\n{body:_this.ShowNotes.bind(_assertThisInitialized(_this)),field:\"Notes\",header:\"Notes\",sortable:true,filter:true,id:14,style:{'width':'65px'}},{field:\"LastHandler\",header:\"Last Handler\",sortable:true,filter:true,filterMatchMode:'contains',id:15,style:{'width':'65px'}},{field:\"RunDays\",header:\"Run Days\",sortable:true,filter:true,id:16,style:{'width':'65px'}},{field:\"LeadMonth\",header:\"Lead Month\",sortable:true,filter:true,filterMatchMode:'contains',id:17,style:{'width':'65px'}},{body:_this.ShowQuotationIssuedDate.bind(_assertThisInitialized(_this)),field:\"QuotationIssued\",header:\"Quotation Issued\",sortable:true,filter:true,id:18,style:{'width':'105px'}},{body:_this.ShowRiskBoundDate.bind(_assertThisInitialized(_this)),field:\"RiskBound\",header:\"Risk Bound\",sortable:true,filter:true,id:19,style:{'width':'105px'}},{field:\"QuotationPremium\",header:\"Quotation Premium\",sortable:true,filter:true,id:20,style:{'width':'65px','textAlign':'right'}},{field:\"Yearcontactfirstestablished\",header:\"Year contact first established\",sortable:true,filter:true,id:21,style:{'width':'65px'}},{field:\"MooringLocation\",header:\"Mooring Location\",sortable:true,filter:true,id:22,style:{'width':'155px'}},{field:\"ClientEmail\",header:\"Client Email\",sortable:true,filter:true,id:23,style:{'width':'200px'}},{field:\"ClientPhoneNumber\",header:\"Client Phone Number\",sortable:true,filter:true,id:24,style:{'width':'155px'}},{field:\"RiskboundBY\",header:\"Risk bound BY\",sortable:true,filter:true,id:25,style:{'width':'65px'}}];_this.state={LanguageId:props.i18n.language==='en'?'en-GB':props.i18n.language==='es'?'es-ES':props.i18n.language==='ie'?'en-IE':props.i18n.language,cols:columns,arr:[],selectedPage:0,rowsPerPageOptions:CommonConfig.dataTableConfig.rowsPerPageOptions,str:'',rowsPerPage:CommonConfig.dataTableConfig.rowsPerPage,globalFilter:null,searchCollapse:false,DebtorType:'SubAgent',Period:0,selected:{},selectedPolicy:0,selectedAgent:'',selectAll:0,policyNoteList:[],noteType:[],DebtorTypeError:false,agentinfo:'',agentinfoError:false,monthtillDate:moment().format(\"YYYY-MM\"),fromDate:moment().format(\"YYYY-MM-DD\"),toDate:moment().format(\"YYYY-MM-DD\"),MONTHList:[],MONTH:('0'+(new Date().getMonth()+1).toString()).slice(-2),MONTHError:false,Year:'',YearError:false};_this.colOptions=[];for(var _i=0,_columns=columns;_i<_columns.length;_i++){var col=_columns[_i];_this.colOptions.push({label:col.header,value:col});}_this.export=_this.export.bind(_assertThisInitialized(_this));return _this;}_createClass(Lead_Quotation_and_newbusiness_report,[{key:\"componentDidMount\",value:function componentDidMount(){this.Lead_Quotation_and_newbusiness_report();this.getOrganazationData(this.state.DebtorType);this.getDropDownValues('MONTH','MONTHList','StringMapKey');}},{key:\"ClientDetails\",value:function ClientDetails(rowData){return/*#__PURE__*/React.createElement(\"div\",{className:\"policy-list-data\"},/*#__PURE__*/React.createElement(\"p\",null,rowData.ClientName),/*#__PURE__*/React.createElement(\"p\",null,rowData.ClientCode));}},{key:\"ShowNotes\",value:function ShowNotes(rowData){var _this2=this;return rowData.Notes!=\"--\"?/*#__PURE__*/React.createElement(\"div\",{className:\"policy-list-data\"},/*#__PURE__*/React.createElement(\"span\",null,/*#__PURE__*/React.createElement(\"p\",{onClick:function onClick(){return _this2.getNoteList(rowData);},style:{color:'blue',cursor:'pointer'},href:\"#\",id:rowData.PolicyId},rowData.Notes))):/*#__PURE__*/React.createElement(\"div\",{className:\"policy-list-data\"},/*#__PURE__*/React.createElement(\"span\",null,/*#__PURE__*/React.createElement(\"p\",null,rowData.Notes)));}},{key:\"AgentDetails\",value:function AgentDetails(rowData){return/*#__PURE__*/React.createElement(\"div\",{className:\"policy-list-data\"},/*#__PURE__*/React.createElement(\"p\",null,rowData.AgentName),/*#__PURE__*/React.createElement(\"p\",null,rowData.AgentCode));}},{key:\"toggleRow\",value:function toggleRow(id){var newSelected=Object.assign({},this.state.selected);newSelected[id]=!this.state.selected[id];this.setState({selected:newSelected,selectAll:2});}},{key:\"toggleSelectAll\",value:function toggleSelectAll(){var newSelected={};if(this.state.selectAll===0){this.state.arr.forEach(function(x){newSelected[x.id]=true;});}this.setState({selected:newSelected,selectAll:this.state.selectAll===0?1:0});}},{key:\"actionTemplate\",value:function actionTemplate(rowData,column){var _this3=this;return/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"input\",{type:\"checkbox\",className:\"checkbox\",checked:this.state.selected[rowData.id]===true,onChange:function onChange(){return _this3.toggleRow(rowData.id);}}));}},{key:\"DateDetails\",value:function DateDetails(rowData){return/*#__PURE__*/React.createElement(\"div\",{className:\"policy-list-data\"},/*#__PURE__*/React.createElement(\"p\",null,rowData.RenewalDate),/*#__PURE__*/React.createElement(\"p\",null,rowData.InceptionDate));}},{key:\"ShowRiskBoundDate\",value:function ShowRiskBoundDate(rowData){return rowData.RiskBound!='Invalid date'?/*#__PURE__*/React.createElement(\"div\",{className:\"policy-list-data\"},/*#__PURE__*/React.createElement(\"p\",null,rowData.RiskBound)):/*#__PURE__*/React.createElement(\"div\",{className:\"policy-list-data\"},/*#__PURE__*/React.createElement(\"p\",null,\"--\"));}},{key:\"ShowQuotationIssuedDate\",value:function ShowQuotationIssuedDate(rowData){return rowData.QuotationIssued!='Invalid date'?/*#__PURE__*/React.createElement(\"div\",{className:\"policy-list-data\"},/*#__PURE__*/React.createElement(\"p\",null,rowData.QuotationIssued)):/*#__PURE__*/React.createElement(\"div\",{className:\"policy-list-data\"},/*#__PURE__*/React.createElement(\"p\",null,\"--\"));}},{key:\"getDropDownValues\",value:function getDropDownValues(stringMapType,setStateName,orderBy){var _this4=this;try{var data={stringmaptype:stringMapType,orderby:orderBy};api.post(APIConstant.path.dropdownbycode,data).then(function(res){if(res.success){_this4.setState(_defineProperty({},setStateName,res.data));}else{}}).catch(function(err){});}catch(error){}}},{key:\"getNoteList\",value:function getNoteList(rowData){var _this5=this;this.setState({NavID:null});var data={'entityId':rowData.PolicyId,'entityType':'Policy','CurrentUser':CommonConfig.loggedInUserData().EntityId};// api.post('api/getNotes', data).then(res => {\napi.post('api/getNewBusineesNotes',data).then(function(res){if(res.success){_this5.setState({policyNoteList:res.data,openNotePopup:true,NavID:rowData.PolicyId});}else{toast.warn(\"No notes found for Policy.\");}}).catch(function(err){console.log(\"getNoteList err\",err);});}},{key:\"Lead_Quotation_and_newbusiness_report\",value:function Lead_Quotation_and_newbusiness_report(){var _this6=this;var ShowMonth=this.state.MONTH;console.log(ShowMonth);if(ShowMonth===\"\")this.state.MONTH=new Date().getMonth()+1;else if(ShowMonth===\"All\")this.state.MONTH=1;if(this.state.Year===\"\")this.state.Year=new Date().getFullYear();var startDate=moment([parseInt(this.state.Year),parseInt(this.state.MONTH)-1]).format('YYYY-MM-DD');if(ShowMonth===''||ShowMonth==='All')var endDate=moment(startDate).endOf('year').format('YYYY-MM-DD');else var endDate=moment(startDate).endOf('month').format('YYYY-MM-DD');var data={fromDate:startDate,toDate:endDate};//console.log(data);\nthis.state.MONTH=ShowMonth;api.post('api/Lead_Quotation_and_newbusiness_report',data).then(function(res){if(res.success){var formattedData=[];_this6.setState({selectedPage:0});var dataLength=res.data[0].length;if(dataLength>0){for(var i=0;i<dataLength;i++){var tempData=res.data[0][i];console.log(\"tempData\",tempData);formattedData.push({PolicyNumber:tempData.PolicyNumber,PolicyId:tempData.PolicyId,Name:tempData.ClientName,Language:tempData.DocLang,PolicyClass:tempData.PolicyVesselClass,PolicyType:tempData.PolicyVesselType,YearBuilt:tempData.YearBuilt,TSI:tempData.SumInsured?tempData.SumInsured:'',Cover:tempData.LiabilityType?tempData.LiabilityType:'--',Source:tempData.Source?tempData.Source:'--',SourceName:tempData.SourceName?tempData.SourceName:'--',Quarter:tempData.Quarter?tempData.Quarter:'--',Stage:tempData.Stage?tempData.Stage:'--',Notes:tempData.Notes?tempData.Notes:'--',LastHandler:tempData.LastHandler?tempData.LastHandler:'--',RunDays:tempData.RunDays,LeadMonth:tempData.LeadMonth+\" (\"+moment().month(tempData.LeadMonth-1).format(\"MMMM\")+\")\",QuotationIssued:moment(tempData.QuotationIssued).format('DD-MM-YYYY'),RiskBound:moment(tempData.RiskBound).format('DD-MM-YYYY'),QuotationPremium:tempData.QuotationPremium,Yearcontactfirstestablished:tempData.YearContactFirstEstablished,MooringLocation:tempData.MooringLocation,ClientEmail:tempData.ClientEmail,ClientPhoneNumber:tempData.ClientPhone,RiskboundBY:tempData.RiskBoundBy});}}var firstPage=formattedData.length?'1':'0';var lastPage=_this6.state.rowsPerPage<formattedData.length?_this6.state.rowsPerPage:formattedData.length;var str=firstPage+' to '+lastPage+' out of '+formattedData.length+' records';_this6.setState({arr:formattedData,str:str});}});}},{key:\"export\",value:function _export(){this.dt.exportCSV();}},{key:\"filterData\",value:function filterData(){this.Lead_Quotation_and_newbusiness_report();}},{key:\"selectType\",value:function selectType(value,type){if(type==='DebtorType'){this.setState({DebtorTypeError:false,DebtorType:value});this.show('DebtorType',false,\"DebtorTypeError\",\"\");this.getOrganazationData(value);}if(type==='agentinfo'){this.setState({agentinfo:value,agentinfoError:false});this.show('agentinfo',false,'agentinfoError','');}if(type==='Period'){this.setState({Period:value});}if(type==='MONTH'){console.log('MONTH',value);if(CommonConfig.isEmpty(value)){this.setState({MONTHError:true,MONTH:value});this.show('MONTH',true,\"MONTHError\",\"Please select Date Type\");}else{this.setState({MONTHError:false,MONTH:value});this.show('MONTH',false,\"MONTHError\",\"\");}}}},{key:\"getOrganazationData\",value:function getOrganazationData(ContactType){var _this7=this;try{var data={ContactType:ContactType};api.post('api/getOrganazationData',data).then(function(res){if(res.success){var formattedData=[];for(var i=0;i<res.data.length;i++){formattedData.push({label:res.data[i].OrganizationName,value:res.data[i].OrganizationId});}_this7.setState({sourceList:formattedData});}else{console.log('getOrganazationData_error');}}).catch(function(err){console.log('getOrganazationData',err);});}catch(error){console.log('getOrganazationData',error);}}},{key:\"show\",value:function show(field,condition,errorField,message){if(condition){if(document.getElementById(field))document.getElementById(field).className=\"form-control is-invalid\";if(document.getElementById(errorField))document.getElementById(errorField).innerHTML='<p>'+message+' </p>';}else{if(document.getElementById(field))document.getElementById(field).className=\"form-control\";if(document.getElementById(errorField))document.getElementById(errorField).innerHTML=null;}}},{key:\"Update_Stage\",value:function Update_Stage(){}},{key:\"render\",value:function render(){var _this8=this;var t=this.props.t;var header=null;var columns=this.state.cols.map(function(col,i){return/*#__PURE__*/React.createElement(Column,{key:i,field:col.field,header:col.header,body:col.body,sortable:col.sortable,filter:col.filter,filterMatchMode:col.filterMatchMode,style:col.style});});return/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"div\",{className:\"basic-header\"},/*#__PURE__*/React.createElement(\"h1\",null,\"Lead Quotation and new business report\"),/*#__PURE__*/React.createElement(\"div\",{className:\"header-right-option\"},/*#__PURE__*/React.createElement(MultiSelect,{value:this.state.cols,options:this.colOptions,fixedPlaceholder:true,placeholder:CommonConfig.dataTableConfig.columnToggleIcon,tooltip:\"Show / Hide Column\",tooltipOptions:{position:'bottom'},onChange:this.onColumnToggle,style:{width:'50px'}}),/*#__PURE__*/React.createElement(Button,{type:\"button\",icon:\"pi pi-external-link\",tooltip:\"Export as CSV\",tooltipOptions:{position:'bottom'},onClick:this.export,style:{marginRight:10}}))),/*#__PURE__*/React.createElement(\"div\",{className:\"input-box\",id:\"accordion\"},/*#__PURE__*/React.createElement(Card,{className:\"mb-0\"},/*#__PURE__*/React.createElement(CardHeader,{id:\"headingOne\"},/*#__PURE__*/React.createElement(BTN,{block:true,color:\"link\",className:\"text-left m-0 p-0\",onClick:function onClick(){return _this8.setState({custom:!_this8.state.custom});},\"aria-expanded\":this.state.custom,\"aria-controls\":\"collapseOne\"},/*#__PURE__*/React.createElement(\"h5\",{className:\"m-0 p-0\"},\"Filter\",/*#__PURE__*/React.createElement(\"i\",{style:{float:'right'},className:this.state.custom?\"fa fa-chevron-down\":\"fa fa-chevron-up\"})))),/*#__PURE__*/React.createElement(Collapse,{isOpen:this.state.custom,\"data-parent\":\"#accordion\",id:\"collapseOne\",\"aria-labelledby\":\"headingOne\"},/*#__PURE__*/React.createElement(CardBody,null,/*#__PURE__*/React.createElement(\"div\",{className:\"filter-data\"},/*#__PURE__*/React.createElement(Row,null,/*#__PURE__*/React.createElement(Col,{md:\"3\"},/*#__PURE__*/React.createElement(\"label\",null,\"Month\"),/*#__PURE__*/React.createElement(Input,{type:\"select\",name:\"MONTH\",id:\"MONTH\",onChange:function onChange(e){return _this8.selectType(e.target.value,'MONTH');},value:this.state.MONTH},/*#__PURE__*/React.createElement(\"option\",{value:\"All\"},\"All\"),this.state.MONTHList.map(function(type,i){console.log(type.StringMapKey);return moment().month()+1===type.StringMapKey?/*#__PURE__*/React.createElement(\"option\",{value:type.StringMapKey},type.StringMapName):/*#__PURE__*/React.createElement(\"option\",{value:type.StringMapKey},type.StringMapName);})),/*#__PURE__*/React.createElement(\"em\",{id:\"MONTHError\",className:\"error invalid-feedback\"})),/*#__PURE__*/React.createElement(Col,{md:\"3\"},/*#__PURE__*/React.createElement(\"label\",null,\"Year\"),/*#__PURE__*/React.createElement(Input,{type:\"number\",min:\"1900\",max:\"2099\",id:\"Year\",name:\"Year\",value:this.state.Year,onChange:function onChange(e){return _this8.handleChange(e,'Year');}}),/*#__PURE__*/React.createElement(\"em\",{id:\"YearError\",className:\"error invalid-feedback\"})),/*#__PURE__*/React.createElement(Col,{md:\"2\"},/*#__PURE__*/React.createElement(\"div\",null,\"\\xA0\"),/*#__PURE__*/React.createElement(BTN,{color:\"success\",title:\"Search\",onClick:function onClick(){return _this8.filterData();}},\" Search \"))),/*#__PURE__*/React.createElement(Row,null)))))),/*#__PURE__*/React.createElement(\"div\",{className:\"table-custom\"},/*#__PURE__*/React.createElement(DataTable,{ref:function ref(el){return _this8.dt=el;},value:this.state.arr,first:this.state.selectedPage,onPage:function onPage(e){return _this8.getPageString(e);},paginator:true,rows:this.state.rowsPerPage,header:header,totalRecords:this.state.arr.length,exportFilename:\"Lead Quotation and new business report\",currentPageReportTemplate:this.state.str,scrollable:true,paginatorTemplate:\"CurrentPageReport FirstPageLink PrevPageLink PageLinks NextPageLink LastPageLink RowsPerPageDropdown\",rowsPerPageOptions:this.state.rowsPerPageOptions,globalFilter:this.state.globalFilter,emptyMessage:\"No records found\",responsive:true,resizableColumns:true,columnResizeMode:\"expand\"},columns)),/*#__PURE__*/React.createElement(Modal,{isOpen:this.state.openNotePopup,className:'modal-lg',style:{maxWidth:'70%'}},/*#__PURE__*/React.createElement(ModalHeader,{toggle:function toggle(){return _this8.setState({openNotePopup:false});}},\" Notes \"),/*#__PURE__*/React.createElement(ModalBody,null,/*#__PURE__*/React.createElement(\"div\",{className:\"added-note-outer\"},/*#__PURE__*/React.createElement(\"h4\",null,this.state.policyNoteList.length,\" notes\"),/*#__PURE__*/React.createElement(\"ul\",null,this.state.policyNoteList.map(function(notes,i){return/*#__PURE__*/React.createElement(\"li\",null,/*#__PURE__*/React.createElement(\"div\",{className:\"addednote-left\"},/*#__PURE__*/React.createElement(\"span\",{style:{color:notes.IsFlag.data[0]===0?'#aaaaaa':'#ff0000'}},/*#__PURE__*/React.createElement(\"i\",{class:\"fa fa-exclamation-circle\",\"aria-hidden\":\"true\"})),/*#__PURE__*/React.createElement(\"h3\",null,notes.NoteType),/*#__PURE__*/React.createElement(\"p\",null,/*#__PURE__*/React.createElement(ShowMoreText,{lines:2,more:\"Show more\",less:\"Show less\",anchorClass:\"\",onClick:_this8.executeOnClick,expanded:false},notes.NoteText)),/*#__PURE__*/React.createElement(Row,null,/*#__PURE__*/React.createElement(Col,{md:\"6\"},/*#__PURE__*/React.createElement(\"p\",null,\"Added By\"),/*#__PURE__*/React.createElement(\"span\",{className:\"date\",style:{marginRight:10}},/*#__PURE__*/React.createElement(\"i\",{class:\"fa fa-user\",\"aria-hidden\":\"true\"}),\" \",notes.CreatedByName),/*#__PURE__*/React.createElement(\"span\",{className:\"date\"},/*#__PURE__*/React.createElement(\"i\",{class:\"fa fa-calendar\",\"aria-hidden\":\"true\"}),\" \",moment(notes.CreatedOn).format(CommonConfig.dateFormat.dateTime))),notes.UpdatedByName!=null?/*#__PURE__*/React.createElement(Col,{md:\"6\"},/*#__PURE__*/React.createElement(\"p\",null,\"Updated By\"),/*#__PURE__*/React.createElement(\"span\",{className:\"date\",style:{marginRight:10}},/*#__PURE__*/React.createElement(\"i\",{class:\"fa fa-user\",\"aria-hidden\":\"true\"}),\" \",notes.UpdatedByName),/*#__PURE__*/React.createElement(\"span\",{className:\"date\"},/*#__PURE__*/React.createElement(\"i\",{class:\"fa fa-calendar\",\"aria-hidden\":\"true\"}),\" \",moment(notes.UpdatedOn).format(CommonConfig.dateFormat.dateTime))):null)));}))))));}}]);return Lead_Quotation_and_newbusiness_report;}(Component);export default withTranslation()(Lead_Quotation_and_newbusiness_report);","map":{"version":3,"sources":["/Users/bhavik/Downloads/Cognisun/Evolution/Evolution_React/evolution_new/src/views/Reports/Lead_Quotation_and_newbusiness_report.js"],"names":["React","Component","Select","api","moment","DatePicker","withTranslation","DataTable","Column","CommonConfig","Button","MultiSelect","Collapse","BTN","Input","Card","CardHeader","CardBody","Row","Col","Modal","ModalHeader","ModalBody","ModalFooter","toast","APIConstant","ShowMoreText","Lead_Quotation_and_newbusiness_report","props","getPageString","e","firstPage","first","l","rows","page","lastPage","state","arr","length","str","setState","selectedPage","rowsPerPage","handleChange","target","name","value","monthtillDate","fromDate","toDate","console","log","undefined","Year","YearError","show","columns","field","header","sortable","filter","id","style","filterMatchMode","body","ShowNotes","bind","ShowQuotationIssuedDate","ShowRiskBoundDate","LanguageId","i18n","language","cols","rowsPerPageOptions","dataTableConfig","globalFilter","searchCollapse","DebtorType","Period","selected","selectedPolicy","selectedAgent","selectAll","policyNoteList","noteType","DebtorTypeError","agentinfo","agentinfoError","format","MONTHList","MONTH","Date","getMonth","toString","slice","MONTHError","colOptions","col","push","label","export","getOrganazationData","getDropDownValues","rowData","ClientName","ClientCode","Notes","getNoteList","color","cursor","PolicyId","AgentName","AgentCode","newSelected","Object","assign","forEach","x","column","toggleRow","RenewalDate","InceptionDate","RiskBound","QuotationIssued","stringMapType","setStateName","orderBy","data","stringmaptype","orderby","post","path","dropdownbycode","then","res","success","catch","err","error","NavID","loggedInUserData","EntityId","openNotePopup","warn","ShowMonth","getFullYear","startDate","parseInt","endDate","endOf","formattedData","dataLength","i","tempData","PolicyNumber","Name","Language","DocLang","PolicyClass","PolicyVesselClass","PolicyType","PolicyVesselType","YearBuilt","TSI","SumInsured","Cover","LiabilityType","Source","SourceName","Quarter","Stage","LastHandler","RunDays","LeadMonth","month","QuotationPremium","Yearcontactfirstestablished","YearContactFirstEstablished","MooringLocation","ClientEmail","ClientPhoneNumber","ClientPhone","RiskboundBY","RiskBoundBy","dt","exportCSV","type","isEmpty","ContactType","OrganizationName","OrganizationId","sourceList","condition","errorField","message","document","getElementById","className","innerHTML","t","map","columnToggleIcon","position","onColumnToggle","width","marginRight","custom","float","selectType","StringMapKey","StringMapName","filterData","el","maxWidth","notes","IsFlag","NoteType","executeOnClick","NoteText","CreatedByName","CreatedOn","dateFormat","dateTime","UpdatedByName","UpdatedOn"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\r\nimport Select from 'react-select';\r\nimport api from '../../utils/apiClient';\r\nimport moment from 'moment';\r\nimport DatePicker from 'react-date-picker';\r\nimport { withTranslation } from 'react-i18next';\r\nimport { DataTable } from 'primereact/datatable';\r\nimport { Column } from 'primereact/column';\r\nimport { CommonConfig } from '../../utils/constants';\r\nimport { Button } from 'primereact/button';\r\nimport { MultiSelect } from 'primereact/multiselect';\r\nimport { Collapse, Button as BTN, Input, Card, CardHeader, CardBody, Row, Col,Modal, ModalHeader, ModalBody, ModalFooter } from 'reactstrap';\r\nimport { toast } from 'react-toastify';\r\nimport APIConstant from '../../utils/constants';\r\nimport ShowMoreText from 'react-show-more-text';\r\n\r\nclass Lead_Quotation_and_newbusiness_report extends Component {\r\n\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        let columns = [\r\n          /*  { body: this.actionTemplate.bind(this), field: \"Select\", header: \"Select\", sortable: false, id: \"checkbox\", style: { 'width': '45px' } },*/\r\n            { field: \"Stage\", header: \"Stage\", sortable: true, filter: true, id: 1, style: { 'width': '85px' } },\r\n            { field: \"PolicyNumber\", header: \"Policy ID\", sortable: true, filter: true, id: 2, style: { 'width': '65px' } },\r\n            { field: \"Name\", header: \"Name\", sortable: true, filter: true, id: 3, style: { 'width': '150px' } },\r\n            { field: \"Language\", header: \"Language\", sortable: true, filter: true, id: 4, style: { 'width': '65px' } },\r\n            { field: \"PolicyClass\", header: \"Policy Class\", sortable: true, filter: true, id: 5, style: { 'width': '100px' } },\r\n            { field: \"PolicyType\", header: \"Policy Type\", sortable: true, filter: true, id: 6, style: { 'textAlign': 'right','width': '100px'  }},\r\n            { field: \"YearBuilt\", header: \"Year Built\", sortable: true, filter: true, id: 7, style: { 'textAlign': 'right','width': '65px'  } },\r\n            { field: \"TSI\", header: \"TSI\", sortable: true, filter: true, id: 8, style: { 'width': '85px','textAlign': 'right' } },\r\n            { field: \"Cover\", header: \"Cover\", sortable: true, filter: true, id: 9, style: { 'width': '105px' }  },\r\n            { field: \"Source\", header: \"Source\", sortable: true, filter: true, id: 10, style: { 'width': '85px' }  },\r\n            { field: \"SourceName\", header: \"Source Name\", sortable: true, filter: true,filterMatchMode: 'contains', id: 11, style: { 'width': '105px' }  },\r\n            { field: \"Quarter\", header: \"Quarter\", sortable: true, filter: true, id: 12, style: { 'width': '65px' }  },\r\n           // { field: \"Stage\", header: \"Stage\", sortable: true, filter: true, id: 13, style: { 'width': '65px' }  },\r\n            { body: this.ShowNotes.bind(this),field: \"Notes\", header: \"Notes\", sortable: true, filter: true, id: 14, style: { 'width': '65px' }  },\r\n            { field: \"LastHandler\", header: \"Last Handler\", sortable: true, filter: true,filterMatchMode: 'contains', id: 15, style: { 'width': '65px' }  },\r\n            { field: \"RunDays\", header: \"Run Days\", sortable: true, filter: true, id: 16, style: { 'width': '65px' }  },\r\n            { field: \"LeadMonth\", header: \"Lead Month\", sortable: true, filter: true,filterMatchMode: 'contains', id: 17, style: { 'width': '65px' }  },\r\n\r\n            { body: this.ShowQuotationIssuedDate.bind(this),field: \"QuotationIssued\", header: \"Quotation Issued\", sortable: true, filter: true, id: 18, style: { 'width': '105px' }  },\r\n            {  body: this.ShowRiskBoundDate.bind(this),field: \"RiskBound\", header: \"Risk Bound\", sortable: true, filter: true, id: 19, style: { 'width': '105px' }  },\r\n            { field: \"QuotationPremium\", header: \"Quotation Premium\", sortable: true, filter: true, id: 20, style: { 'width': '65px', 'textAlign': 'right' }  },\r\n            { field: \"Yearcontactfirstestablished\", header: \"Year contact first established\", sortable: true, filter: true, id: 21, style: { 'width': '65px' }  },\r\n            { field: \"MooringLocation\", header: \"Mooring Location\", sortable: true, filter: true, id: 22, style: { 'width': '155px' }  },\r\n            { field: \"ClientEmail\", header: \"Client Email\", sortable: true, filter: true, id: 23, style: {'width': '200px'}  },\r\n            { field: \"ClientPhoneNumber\", header: \"Client Phone Number\", sortable: true, filter: true, id: 24, style: { 'width': '155px' }  },\r\n            { field: \"RiskboundBY\", header: \"Risk bound BY\", sortable: true, filter: true, id: 25, style: { 'width': '65px' }  },\r\n        ];\r\n\r\n        this.state = {\r\n            LanguageId: (props.i18n.language === 'en') ? 'en-GB' : (props.i18n.language === 'es') ? 'es-ES' : (props.i18n.language === 'ie') ? 'en-IE' : props.i18n.language,\r\n            cols: columns,\r\n            arr: [],\r\n            selectedPage: 0,\r\n            rowsPerPageOptions: CommonConfig.dataTableConfig.rowsPerPageOptions,\r\n            str: '',\r\n            rowsPerPage: CommonConfig.dataTableConfig.rowsPerPage,\r\n            globalFilter: null,\r\n            searchCollapse: false,\r\n\r\n            DebtorType: 'SubAgent',\r\n            Period: 0,\r\n            selected: {},\r\n            selectedPolicy: 0,\r\n            selectedAgent: '',\r\n            selectAll: 0,\r\n            policyNoteList: [],\r\n            noteType: [],\r\n            DebtorTypeError: false,\r\n            agentinfo: '',\r\n            agentinfoError: false,\r\n            monthtillDate: moment().format(\"YYYY-MM\"),\r\n            fromDate: moment().format(\"YYYY-MM-DD\"),\r\n            toDate: moment().format(\"YYYY-MM-DD\"),\r\n            MONTHList: [],\r\n            MONTH: ('0'+(new Date().getMonth() + 1).toString()).slice(-2),\r\n            MONTHError: false,\r\n            Year: '',\r\n            YearError: false,\r\n        };\r\n\r\n        this.colOptions = [];\r\n        for (let col of columns) {\r\n            this.colOptions.push({ label: col.header, value: col });\r\n        }\r\n\r\n        this.export = this.export.bind(this);\r\n    }\r\n\r\n    componentDidMount() {\r\n        this.Lead_Quotation_and_newbusiness_report();\r\n        this.getOrganazationData(this.state.DebtorType);\r\n        this.getDropDownValues('MONTH', 'MONTHList', 'StringMapKey');\r\n    }\r\n\r\n    ClientDetails(rowData) {\r\n        return (\r\n            <div className=\"policy-list-data\">\r\n                <p>{rowData.ClientName}</p>\r\n                <p>{rowData.ClientCode}</p>\r\n            </div>\r\n        )\r\n    }\r\n    ShowNotes(rowData) {\r\n        return (rowData.Notes !=\"--\")?\r\n            <div className=\"policy-list-data\">\r\n                  <span>\r\n        <p onClick={() => this.getNoteList(rowData)} style={{ color:'blue', cursor: 'pointer' }}  href=\"#\" id={rowData.PolicyId}>{rowData.Notes}</p>\r\n              \r\n            </span>\r\n            </div>\r\n            :\r\n            <div className=\"policy-list-data\">\r\n                  <span>\r\n        <p >{rowData.Notes}</p>\r\n              \r\n            </span>\r\n            </div>;\r\n        }\r\n    AgentDetails(rowData) {\r\n        return (\r\n            <div className=\"policy-list-data\">\r\n                <p>{rowData.AgentName}</p>\r\n                <p>{rowData.AgentCode}</p>\r\n            </div>\r\n        )\r\n    }\r\n\r\n    toggleRow(id) {\r\n        const newSelected = Object.assign({}, this.state.selected);\r\n        newSelected[id] = !this.state.selected[id];\r\n        this.setState({\r\n            selected: newSelected,\r\n            selectAll: 2\r\n        });\r\n    }\r\n    toggleSelectAll() {\r\n        let newSelected = {};\r\n        if (this.state.selectAll === 0) {\r\n            this.state.arr.forEach(x => {\r\n                newSelected[x.id] = true;\r\n            });\r\n        }\r\n        this.setState({\r\n            selected: newSelected,\r\n            selectAll: this.state.selectAll === 0 ? 1 : 0\r\n        });\r\n    }\r\n\r\n    actionTemplate(rowData, column) {\r\n        return <div>\r\n            <input\r\n                type=\"checkbox\"\r\n                className=\"checkbox\"\r\n                checked={this.state.selected[rowData.id] === true}\r\n                onChange={() => this.toggleRow(rowData.id)} />\r\n        </div>;\r\n    }\r\n    \r\n    DateDetails(rowData) {\r\n        return (\r\n            <div className=\"policy-list-data\">\r\n                <p>{rowData.RenewalDate}</p>\r\n                <p>{rowData.InceptionDate}</p>\r\n            </div>\r\n        )\r\n    }\r\n\r\n    ShowRiskBoundDate(rowData) {\r\n        return (rowData.RiskBound != 'Invalid date')?\r\n            <div className=\"policy-list-data\">\r\n                <p>{rowData.RiskBound}</p>\r\n            </div>:\r\n            <div className=\"policy-list-data\">\r\n            <p>--</p>\r\n        </div>;\r\n    }\r\n\r\n    ShowQuotationIssuedDate(rowData) {\r\n        return (rowData.QuotationIssued != 'Invalid date')?\r\n            <div className=\"policy-list-data\">\r\n                <p>{rowData.QuotationIssued}</p>\r\n            </div>:\r\n            <div className=\"policy-list-data\">\r\n            <p>--</p>\r\n        </div>;\r\n    }\r\n    \r\n\r\n\r\n\r\n\r\n    getDropDownValues(stringMapType, setStateName, orderBy) {\r\n        try {\r\n            const data = {\r\n                stringmaptype: stringMapType,\r\n                orderby: orderBy\r\n            };\r\n            api.post(APIConstant.path.dropdownbycode, data).then(res => {\r\n                if (res.success) {\r\n                    this.setState({ [setStateName]: res.data });\r\n                } else {\r\n                }\r\n            }).catch(err => {\r\n            });\r\n        } catch (error) {\r\n        }\r\n    }\r\n   \r\n    getNoteList(rowData) {\r\n        this.setState({ NavID: null });\r\n\r\n        const data = {\r\n            'entityId': rowData.PolicyId,\r\n            'entityType': 'Policy',\r\n            'CurrentUser': CommonConfig.loggedInUserData().EntityId\r\n        };\r\n        // api.post('api/getNotes', data).then(res => {\r\n            api.post('api/getNewBusineesNotes', data).then(res => {\r\n            if (res.success) {\r\n                this.setState({ policyNoteList: res.data, openNotePopup: true, NavID: rowData.PolicyId });\r\n            } else {\r\n                toast.warn(\"No notes found for Policy.\");\r\n            }\r\n        }).catch(err => {\r\n            console.log(\"getNoteList err\", err);\r\n        });\r\n    }\r\n\r\n    Lead_Quotation_and_newbusiness_report() { \r\n        var ShowMonth = this.state.MONTH; console.log(ShowMonth);\r\n\r\n        if (ShowMonth ===\"\")\r\n        this.state.MONTH = new Date().getMonth() + 1;\r\n        else\r\n            if (ShowMonth ===\"All\")\r\n            this.state.MONTH = 1;\r\n        if (this.state.Year ===\"\")\r\n        this.state.Year = new Date().getFullYear();\r\n        \r\n        var startDate = moment([parseInt(this.state.Year), parseInt(this.state.MONTH) - 1]).format('YYYY-MM-DD');\r\n\r\n        if(ShowMonth ==='' || ShowMonth ==='All')\r\n        var endDate =  moment(startDate).endOf('year').format('YYYY-MM-DD');\r\n        else \r\n        var endDate =  moment(startDate).endOf('month').format('YYYY-MM-DD');\r\n        var data = {\r\n            fromDate: startDate,\r\n            toDate: endDate,\r\n        };\r\n        //console.log(data);\r\n        this.state.MONTH = ShowMonth;\r\n        api.post('api/Lead_Quotation_and_newbusiness_report', data).then(res => {\r\n            if (res.success) {\r\n                var formattedData = [];\r\n                this.setState({\r\n                    selectedPage:0\r\n                });\r\n                var dataLength = res.data[0].length;\r\n                if (dataLength > 0) {\r\n            \r\n                    for (let i = 0; i < dataLength; i++) {\r\n                        var tempData = res.data[0][i];\r\n                        console.log(\"tempData\", tempData);\r\n                \r\n                        formattedData.push({\r\n                            PolicyNumber:tempData.PolicyNumber,\r\n                            PolicyId:tempData.PolicyId,\r\nName:tempData.ClientName,\r\nLanguage:tempData.DocLang,\r\nPolicyClass:tempData.PolicyVesselClass,\r\nPolicyType:tempData.PolicyVesselType,\r\nYearBuilt:tempData.YearBuilt,\r\nTSI:tempData.SumInsured?tempData.SumInsured:'',\r\nCover:tempData.LiabilityType?tempData.LiabilityType:'--',\r\nSource:tempData.Source?tempData.Source:'--',\r\nSourceName:tempData.SourceName?tempData.SourceName:'--',\r\nQuarter:tempData.Quarter?tempData.Quarter:'--',\r\nStage:tempData.Stage?tempData.Stage:'--',\r\nNotes:tempData.Notes?tempData.Notes:'--',\r\nLastHandler:tempData.LastHandler?tempData.LastHandler:'--',\r\nRunDays:tempData.RunDays,\r\nLeadMonth: tempData.LeadMonth+ \" (\" + moment().month(tempData.LeadMonth -1 ).format(\"MMMM\")  + \")\",\r\nQuotationIssued: moment(tempData.QuotationIssued).format('DD-MM-YYYY'),\r\nRiskBound: moment(tempData.RiskBound).format('DD-MM-YYYY'),\r\nQuotationPremium:tempData.QuotationPremium,\r\nYearcontactfirstestablished:tempData.YearContactFirstEstablished,\r\nMooringLocation:tempData.MooringLocation,\r\nClientEmail:tempData.ClientEmail,\r\nClientPhoneNumber:tempData.ClientPhone,\r\nRiskboundBY:tempData.RiskBoundBy,\r\n                        });\r\n                }\r\n                }\r\n\r\n                let firstPage = (formattedData.length) ? '1' : '0';\r\n                let lastPage = (this.state.rowsPerPage < formattedData.length) ? this.state.rowsPerPage : formattedData.length;\r\n                let str = firstPage + ' to ' + lastPage + ' out of ' + formattedData.length + ' records';\r\n                this.setState({ arr: formattedData, str: str });\r\n            }\r\n        });\r\n    }\r\n\r\n    getPageString = (e) => {\r\n        let firstPage = e.first + 1;\r\n        let l = e.rows * (e.page + 1);\r\n        let lastPage = (l < this.state.arr.length) ? l : this.state.arr.length\r\n        var str = firstPage + ' to ' + lastPage + ' out of ' + this.state.arr.length + ' records';\r\n        this.setState({ selectedPage: e.first, str: str, rowsPerPage: e.rows });\r\n    }\r\n\r\n    export() {\r\n        this.dt.exportCSV();\r\n    }\r\n\r\n    filterData() {\r\n        this.Lead_Quotation_and_newbusiness_report();\r\n\r\n    }\r\n\r\n    handleChange = (e) => {\r\n\r\n        this.setState({ [e.target.name]: e.target.value });\r\n\r\n        if (e.target.name === 'monthtillDate') {\r\n            this.setState({ monthtillDate: e.target.value });\r\n        }\r\n\r\n        if (e.target.name === 'fromDate') {\r\n            this.setState({ fromDate: e.target.value });\r\n        }\r\n\r\n        if (e.target.name === 'toDate') {\r\n            this.setState({ toDate: e.target.value });\r\n        }\r\n\r\n        if (e.target.name === 'Year') {\r\nconsole.log('Year',e.target.value);\r\n            if (e.target.value === null || e.target.value === undefined || e.target.value === '') {\r\n                this.setState({ Year: e.target.value, YearError: true });\r\n                this.show('Year', true, 'YearError', 'Please Enter Year');\r\n            } else {\r\n                this.setState({ Year: e.target.value, YearError: false });\r\n                this.show('Year', false, 'YearError', '');\r\n            }\r\n        }\r\n    }\r\n\r\n    selectType(value, type) {\r\n\r\n        if (type === 'DebtorType') {\r\n\r\n            this.setState({ DebtorTypeError: false, DebtorType: value });\r\n            this.show('DebtorType', false, \"DebtorTypeError\", \"\");\r\n            this.getOrganazationData(value)\r\n\r\n        }\r\n\r\n        if (type === 'agentinfo') {\r\n\r\n            this.setState({ agentinfo: value, agentinfoError: false });\r\n            this.show('agentinfo', false, 'agentinfoError', '');\r\n\r\n        }\r\n\r\n        if (type === 'Period') {\r\n            this.setState({ Period: value });\r\n        }\r\n\r\n        if (type === 'MONTH') {\r\n\r\n            console.log('MONTH',value);\r\n            if (CommonConfig.isEmpty(value)) {\r\n                this.setState({ MONTHError: true, MONTH: value });\r\n                this.show('MONTH', true, \"MONTHError\", \"Please select Date Type\");\r\n            } else {\r\n                this.setState({ MONTHError: false, MONTH: value });\r\n                this.show('MONTH', false, \"MONTHError\", \"\");\r\n\r\n            }\r\n        \r\n        }\r\n\r\n    }\r\n\r\n    getOrganazationData(ContactType) {\r\n        try {\r\n            let data = { ContactType: ContactType };\r\n            api.post('api/getOrganazationData', data).then(res => {\r\n                if (res.success) {\r\n                    var formattedData = [];\r\n                    for (let i = 0; i < res.data.length; i++) {\r\n                        formattedData.push({\r\n                            label: res.data[i].OrganizationName,\r\n                            value: res.data[i].OrganizationId,\r\n                        })\r\n                    }\r\n                    this.setState({ sourceList: formattedData });\r\n                } else {\r\n                    console.log('getOrganazationData_error');\r\n                }\r\n            }).catch(err => {\r\n                console.log('getOrganazationData', err);\r\n            });\r\n        } catch (error) {\r\n            console.log('getOrganazationData', error);\r\n        }\r\n    }\r\n\r\n    show(field, condition, errorField, message) {\r\n        if (condition) {\r\n            if (document.getElementById(field))\r\n                document.getElementById(field).className = \"form-control is-invalid\";\r\n\r\n            if (document.getElementById(errorField))\r\n                document.getElementById(errorField).innerHTML = '<p>' + message + ' </p>';\r\n        } else {\r\n            if (document.getElementById(field))\r\n                document.getElementById(field).className = \"form-control\";\r\n\r\n            if (document.getElementById(errorField))\r\n                document.getElementById(errorField).innerHTML = null;\r\n        }\r\n    }\r\n\r\n    Update_Stage(){\r\n        \r\n    }\r\n\r\n    render() {\r\n        const { t } = this.props;\r\n        var header = null;\r\n\r\n        let columns = this.state.cols.map((col, i) => {\r\n            return <Column key={i} field={col.field} header={col.header} body={col.body} sortable={col.sortable} filter={col.filter} filterMatchMode={col.filterMatchMode} style={col.style}\r\n            />;\r\n        });\r\n\r\n        return (\r\n            <div>\r\n                <div className=\"basic-header\">\r\n                    <h1>Lead Quotation and new business report</h1>\r\n                    <div className=\"header-right-option\">\r\n                        <MultiSelect value={this.state.cols} options={this.colOptions}\r\n                            fixedPlaceholder={true} placeholder={CommonConfig.dataTableConfig.columnToggleIcon} tooltip=\"Show / Hide Column\" tooltipOptions={{ position: 'bottom' }}\r\n                            onChange={this.onColumnToggle} style={{ width: '50px' }}\r\n                        />\r\n\r\n                        <Button type=\"button\" icon=\"pi pi-external-link\" tooltip=\"Export as CSV\" tooltipOptions={{ position: 'bottom' }} onClick={this.export} style={{ marginRight: 10 }}></Button>\r\n                    </div>\r\n                </div>\r\n\r\n                <div className=\"input-box\" id=\"accordion\">\r\n                    <Card className=\"mb-0\">\r\n                        <CardHeader id=\"headingOne\">\r\n                            <BTN block color=\"link\" className=\"text-left m-0 p-0\" onClick={() => this.setState({ custom: !this.state.custom })} aria-expanded={this.state.custom} aria-controls=\"collapseOne\">\r\n                                <h5 className=\"m-0 p-0\">\r\n                                    Filter\r\n                        <i style={{ float: 'right' }} className={this.state.custom ? \"fa fa-chevron-down\" : \"fa fa-chevron-up\"}></i>\r\n                                </h5>\r\n                            </BTN>\r\n                        </CardHeader>\r\n                        <Collapse isOpen={this.state.custom} data-parent=\"#accordion\" id=\"collapseOne\" aria-labelledby=\"headingOne\">\r\n                            <CardBody>\r\n                                <div className=\"filter-data\">\r\n                                    <Row>\r\n                                        <Col md='3'>\r\n                                                <label>Month</label>\r\n                                                <Input type=\"select\" name=\"MONTH\" id=\"MONTH\" onChange={(e) => this.selectType(e.target.value, 'MONTH')} value={this.state.MONTH}>\r\n                                                <option value='All'>All</option>\r\n                                                    {this.state.MONTHList.map((type, i) => { console.log(type.StringMapKey);\r\n                                                        return (moment().month() +1  === type.StringMapKey)?<option value={type.StringMapKey} >{type.StringMapName}</option>\r\n                                                        :<option value={type.StringMapKey} >{type.StringMapName}</option>;\r\n                                                    })\r\n                                                    }\r\n                                                </Input>\r\n                                                <em id=\"MONTHError\" className=\"error invalid-feedback\"></em>\r\n                                        </Col>\r\n                                        <Col md='3'>\r\n                                            \r\n                                                <label>Year</label>\r\n                                                <Input type=\"number\" min=\"1900\" max=\"2099\" id=\"Year\" name=\"Year\"\r\n                                                    value={this.state.Year}\r\n                                                    onChange={(e) => this.handleChange(e, 'Year')}\r\n                                                ></Input>\r\n\r\n                                                <em id=\"YearError\" className=\"error invalid-feedback\"></em>\r\n                                        </Col>\r\n                                        <Col md='2'>\r\n                                            <div>&nbsp;</div>\r\n                                            <BTN color=\"success\" title=\"Search\" onClick={() => this.filterData()}> Search </BTN>\r\n                                        </Col>\r\n                                    </Row>\r\n                                    <Row>\r\n                                        {/* <Col md='3'>\r\n                                            <label>Month</label>\r\n                                            <Input type=\"select\" name=\"MONTH\" id=\"MONTH\" onChange={(e) => this.selectType(e.target.value, 'MONTH')} value={this.state.MONTH}>\r\n                                                {this.state.MONTHList.map((type, i) => {\r\n                                                    return (<option value={type.StringMapKey}>{type.StringMapName}</option>)\r\n                                                })\r\n                                                }\r\n                                            </Input>\r\n                                            <em id=\"MONTHError\" className=\"error invalid-feedback\"></em>\r\n                                        </Col>   */}\r\n                                      {/*  <Col md='2'>\r\n                                            <div>&nbsp;</div>\r\n                                            <BTN color=\"success\" title=\"Search\" onClick={() => this.Update_Stage()}> Update Stage </BTN>\r\n                                    </Col>*/}\r\n                                    </Row>\r\n                                </div>\r\n                            </CardBody>\r\n                        </Collapse>\r\n                    </Card>\r\n                </div>\r\n\r\n                <div className=\"table-custom\">\r\n                    <DataTable ref={(el) => this.dt = el} value={this.state.arr} first={this.state.selectedPage} onPage={(e) => this.getPageString(e)}\r\n                        paginator={true} rows={this.state.rowsPerPage} header={header} totalRecords={this.state.arr.length} exportFilename=\"Lead Quotation and new business report\"\r\n                        currentPageReportTemplate={this.state.str}\r\n                        scrollable={true}\r\n                        paginatorTemplate=\"CurrentPageReport FirstPageLink PrevPageLink PageLinks NextPageLink LastPageLink RowsPerPageDropdown\"\r\n                        rowsPerPageOptions={this.state.rowsPerPageOptions} globalFilter={this.state.globalFilter} emptyMessage=\"No records found\"\r\n                        responsive={true} resizableColumns={true} columnResizeMode=\"expand\">\r\n                        {columns}\r\n                    </DataTable>\r\n                </div>\r\n            \r\n                {/* Confirmation Popup On Stage Change */}\r\n\r\n                <Modal isOpen={this.state.openNotePopup} className={'modal-lg'} style={{ maxWidth: '70%' }}>\r\n                    <ModalHeader toggle={() => this.setState({ openNotePopup: false })}> Notes </ModalHeader>\r\n\r\n                    <ModalBody>\r\n                     \r\n\r\n                        <div className=\"added-note-outer\">\r\n                            <h4>{this.state.policyNoteList.length} notes</h4>\r\n                            <ul>\r\n                                {\r\n                                    this.state.policyNoteList.map((notes, i) => {\r\n                                        return (\r\n                                            <li>\r\n                                                <div className=\"addednote-left\">\r\n                                                    <span style={{ color: notes.IsFlag.data[0] === 0 ? '#aaaaaa' : '#ff0000' }}><i class=\"fa fa-exclamation-circle\" aria-hidden=\"true\"></i></span>\r\n                                                    <h3>{notes.NoteType}</h3>\r\n                                                    <p>\r\n                                                        <ShowMoreText\r\n                                                            lines={2}\r\n                                                            more='Show more'\r\n                                                            less='Show less'\r\n                                                            anchorClass=''\r\n                                                            onClick={this.executeOnClick}\r\n                                                            expanded={false}>\r\n                                                            {notes.NoteText}\r\n                                                        </ShowMoreText>\r\n                                                    </p>\r\n                                                    <Row>\r\n                                                        <Col md='6'>\r\n                                                            <p>Added By</p>\r\n                                                            <span className=\"date\" style={{ marginRight: 10 }}><i class=\"fa fa-user\" aria-hidden=\"true\"></i> {notes.CreatedByName}</span>\r\n                                                            <span className=\"date\"><i class=\"fa fa-calendar\" aria-hidden=\"true\"></i> {moment(notes.CreatedOn).format(CommonConfig.dateFormat.dateTime)}</span>\r\n                                                        </Col>\r\n                                                        {(notes.UpdatedByName != null) ? (\r\n                                                            <Col md='6'>\r\n                                                                <p>Updated By</p>\r\n                                                                <span className=\"date\" style={{ marginRight: 10 }}><i class=\"fa fa-user\" aria-hidden=\"true\"></i> {notes.UpdatedByName}</span>\r\n                                                                <span className=\"date\"><i class=\"fa fa-calendar\" aria-hidden=\"true\"></i> {moment(notes.UpdatedOn).format(CommonConfig.dateFormat.dateTime)}</span>\r\n                                                            </Col>\r\n                                                        ) : (null)}\r\n                                                    </Row>\r\n                                                </div>\r\n\r\n                                            </li>\r\n                                        )\r\n                                    })\r\n                                }\r\n                            </ul>\r\n                        </div>\r\n                    </ModalBody>\r\n                </Modal>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\n\r\n\r\nexport default withTranslation()(Lead_Quotation_and_newbusiness_report);\r\n"]},"metadata":{},"sourceType":"module"}