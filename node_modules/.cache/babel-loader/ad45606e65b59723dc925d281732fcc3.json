{"ast":null,"code":"import _regeneratorRuntime from\"/Users/bhavik/Downloads/Cognisun/Evolution/Evolution_React/evolution_new/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/bhavik/Downloads/Cognisun/Evolution/Evolution_React/evolution_new/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _defineProperty from\"/Users/bhavik/Downloads/Cognisun/Evolution/Evolution_React/evolution_new/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _classCallCheck from\"/Users/bhavik/Downloads/Cognisun/Evolution/Evolution_React/evolution_new/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/bhavik/Downloads/Cognisun/Evolution/Evolution_React/evolution_new/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _assertThisInitialized from\"/Users/bhavik/Downloads/Cognisun/Evolution/Evolution_React/evolution_new/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";import _inherits from\"/Users/bhavik/Downloads/Cognisun/Evolution/Evolution_React/evolution_new/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/bhavik/Downloads/Cognisun/Evolution/Evolution_React/evolution_new/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component}from'react';import{Modal,ModalBody,Collapse,Button as BTN,ModalHeader,Card,CardHeader,UncontrolledTooltip,CardBody,Col,Row,Input,Form}from'reactstrap';import{Button}from'primereact/button';import api from'../../utils/apiClient';import{withTranslation}from'react-i18next';import{DataTable}from'primereact/datatable';import{Column}from'primereact/column';import{MultiSelect}from'primereact/multiselect';import{InputText}from'primereact/inputtext';import'react-toastify/dist/ReactToastify.css';import{CommonConfig}from'../../utils/constants';import DatePicker from'react-date-picker';import moment from'moment';import uuid from\"uuid\";import APIConstant from'../../utils/constants';import Select from'react-select';import'react-select/dist/react-select.min.css';import{off}from'codemirror';import{toast}from'react-toastify';import{apiBase}from'../../utils/config';var EmailReport=/*#__PURE__*/function(_Component){_inherits(EmailReport,_Component);var _super=_createSuper(EmailReport);function EmailReport(props){var _this$state;var _this;_classCallCheck(this,EmailReport);_this=_super.call(this,props);_this.getPageString=function(e){var firstPage=e.first+1;var l=e.rows*(e.page+1);var lastPage=l<_this.state.arr.length?l:_this.state.arr.length;var str=firstPage+' to '+lastPage+' out of '+_this.state.arr.length+' records';_this.setState({selectedPage:e.first,str:str,rowsPerPage:e.rows});};_this.toggleLargeAdd=function(){_this.setState({toggleModalAdd:false});};_this.toggleCustom=function(tab){var prevState=_this.state.custom;var state=prevState.map(function(x,index){return tab===index?!x:false;});_this.setState({custom:state});};_this.handleChange=function(e){var t=_this.props.t;_this.setState(_defineProperty({},e.target.name,e.target.value));if(e.target.name==='selectedFromDate'){if(e.target.value===''||e.target.value===null){_this.setState({selectedFromDate:''});}else{_this.setState({selectedFromDate:e.target.value,selectedToDate:''});}}if(e.target.name==='selectedToDate'){if(e.target.value===''||e.target.value===null){_this.setState({selectedToDate:''});}else{if(!CommonConfig.isEmpty(_this.state.selectedFromDate)){var isToDateGreater=moment(e.target.value).isSameOrAfter(_this.state.selectedFromDate);if(!isToDateGreater){_this.show('selectedToDate',true,'selectedToDateError','To date must be greater then From date.');}else{_this.show('selectedToDate',false,'selectedToDateError','');}}else{_this.show('selectedToDate',false,'selectedToDateError','');}_this.setState({selectedToDate:e.target.value});}}};var columns=[{field:\"Date\",header:\"Date\",sortable:true,filter:true,filterMatchMode:'contains',id:1},{body:_this.formatEntityData.bind(_assertThisInitialized(_this)),field:\"EntityData\",header:\"Entity Type/Entity ID\",sortable:true,filter:true,filterMatchMode:'contains',id:2},{body:_this.formatProcessDetail.bind(_assertThisInitialized(_this)),field:\"ProcessDetail\",header:\"Process/Template Type\",sortable:true,filter:true,filterMatchMode:'contains',id:3},{field:\"RecipientType\",header:\"Recipient Type\",sortable:true,filter:true,filterMatchMode:'contains',id:4},{body:_this.formatClientDetail.bind(_assertThisInitialized(_this)),field:\"ClientDetail\",header:\"Client/Sub Agent\",sortable:true,filter:true,filterMatchMode:'contains',id:5},{body:_this.formatEmail.bind(_assertThisInitialized(_this)),field:\"ToEmail\",header:\"Recipient (To)\",sortable:true,filter:true,filterMatchMode:'contains',id:6},{body:_this.formatSubject.bind(_assertThisInitialized(_this)),field:\"EmailSubject\",header:\"Subject\",sortable:true,filter:true,filterMatchMode:'contains',id:7},{body:_this.formatBody.bind(_assertThisInitialized(_this)),field:\"EmailBody\",header:\"Body\",sortable:true,filter:true,filterMatchMode:'contains',id:8},{body:_this.formatStatus.bind(_assertThisInitialized(_this)),field:\"Status\",header:\"Status\",sortable:true,filter:true,filterMatchMode:'contains',id:9}];_this.state=(_this$state={toggleModalAdd:false,cols:columns,str:'',arr:[],selectedPage:0,filteredcontactsSingle:null,rowsPerPageOptions:CommonConfig.dataTableConfig.rowsPerPageOptions,rowsPerPage:CommonConfig.dataTableConfig.rowsPerPage,custom:true,isExpand:false,isMonthYear:true,monthArray:[],yearArray:[],selectedFromDate:'',selectedFromDateError:false,selectedToDate:'',selectedToDateError:false,selectedMonth:parseInt(moment().format('MM')),selectedMonthError:false,selectedYear:moment().format('YYYY'),selectedYearError:false,selectedStatus:'',entityType:'',entityTypeError:false,processType:'',processTypeError:false,recepientType:'',recepientTypeError:false},_defineProperty(_this$state,\"selectedStatus\",''),_defineProperty(_this$state,\"selectedStatusError\",false),_defineProperty(_this$state,\"isMessageModalVisible\",false),_defineProperty(_this$state,\"FullMessage\",''),_defineProperty(_this$state,\"offset\",0),_defineProperty(_this$state,\"recordStr\",''),_defineProperty(_this$state,\"selected\",{}),_defineProperty(_this$state,\"batchMessageHeaderId\",''),_defineProperty(_this$state,\"policyCount\",0),_defineProperty(_this$state,\"entityTypeList\",[{label:'Policy',value:'Policy'},{label:'Claims',value:'Claims'}]),_defineProperty(_this$state,\"processTypeList\",[{label:'Renewal',value:'Renewal'}]),_defineProperty(_this$state,\"recepientTypeList\",[{label:'SubAgent',value:'SubAgent'},{label:'Client',value:'Client'}]),_defineProperty(_this$state,\"statusList\",[{label:'Pending',value:'Pending'},{label:'Sent',value:'Sent'},{label:'Failed',value:'Failed'}]),_this$state);_this.colOptions=[];for(var _i=0,_columns=columns;_i<_columns.length;_i++){var col=_columns[_i];_this.colOptions.push({label:col.header,value:col});}_this.onColumnToggle=_this.onColumnToggle.bind(_assertThisInitialized(_this));_this.actionTemplate=_this.actionTemplate.bind(_assertThisInitialized(_this));_this.export=_this.export.bind(_assertThisInitialized(_this));return _this;}_createClass(EmailReport,[{key:\"componentDidMount\",value:function componentDidMount(){this.getDropdown();// this.getEmailReportList();\n}},{key:\"getEmailReportList\",value:function(){var _getEmailReportList=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var _this2=this;var data;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:data={IsMonthYear:this.state.isMonthYear?\"true\":\"false\",Month:this.state.isMonthYear?this.state.selectedMonth:'',Year:this.state.isMonthYear?this.state.selectedYear:'',FromDate:!this.state.isMonthYear?this.state.selectedFromDate:'',ToDate:!this.state.isMonthYear?this.state.selectedToDate:'',EntityType:this.state.entityType,ProcessType:this.state.processType,RecipientType:this.state.recepientType,Status:this.state.selectedStatus};_context.next=3;return api.post('api/getEmailReportList',data).then(function(res){console.log(\"data in EmailList....\",res);_this2.setState({arr:res.data[0]});}).catch(function(err){console.log(\"error in EmailList\",err);toast.error(\"Error\",err);});case 3:case\"end\":return _context.stop();}}},_callee,this);}));function getEmailReportList(){return _getEmailReportList.apply(this,arguments);}return getEmailReportList;}()},{key:\"getDropdown\",value:function getDropdown(){// Get Month\nvar monthArray=[{label:'January',value:1},{label:'February',value:2},{label:'March',value:3},{label:'April',value:4},{label:'May',value:5},{label:'June',value:6},{label:'July',value:7},{label:'August',value:8},{label:'Septemeber',value:9},{label:'October',value:10},{label:'November',value:11},{label:'December',value:12}];this.setState({monthArray:monthArray});// Get Year - Get last 10 year from current year\nvar startYear=moment().format('YYYY');var last10Year=parseInt(startYear)-10;var yearArray=[];for(var index=last10Year;index<=parseInt(last10Year)+10;index++){yearArray.push({label:index,value:index});}this.setState({yearArray:yearArray});}},{key:\"toggleSelectAll\",value:function toggleSelectAll(){var newSelected={};if(this.state.selectAll===0){this.state.arr.forEach(function(x){newSelected[x.SrNo]=true;});}this.setState({selected:newSelected,selectAll:this.state.selectAll===0?1:0});}},{key:\"toggleRow\",value:function toggleRow(SrNo){var newSelected=Object.assign({},this.state.selected);newSelected[SrNo]=!this.state.selected[SrNo];this.setState({selected:newSelected,selectAll:2});}},{key:\"actionTemplate\",value:function actionTemplate(rowData,column){var _this3=this;return/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"input\",{type:\"checkbox\",className:\"checkbox\",checked:this.state.selected[rowData.SrNo]===true,onChange:function onChange(){return _this3.toggleRow(rowData.SrNo);}}));}},{key:\"onColumnToggle\",value:function onColumnToggle(event){var valueInOrder=event.value.sort(function(x,y){return x.id-y.id;});this.setState({cols:valueInOrder});}},{key:\"edit\",value:function edit(rowData){this.props.history.push({pathname:'/PolicyDetailsMerged/'+rowData.PolicyId+'/1/1',state:{PolicyId:rowData.PolicyId,tab:1}});}},{key:\"formatEntityData\",value:function formatEntityData(rowData){var _this4=this;return/*#__PURE__*/React.createElement(\"div\",{className:\"policy-list-data\"},/*#__PURE__*/React.createElement(\"p\",null,rowData.EntityType,\" - \",\" \",/*#__PURE__*/React.createElement(\"a\",{onClick:function onClick(){return _this4.openPolicy(rowData);},style:{marginRight:'.5em',cursor:'pointer',borderBottomWidth:\"1px\",color:\"#007ad9\"},tooltip:\"View Policy\",tooltipOptions:{position:'bottom'}},rowData.PolicyNumber)));}},{key:\"formatProcessDetail\",value:function formatProcessDetail(rowData){return/*#__PURE__*/React.createElement(\"div\",{className:\"policy-list-data\"},/*#__PURE__*/React.createElement(\"p\",null,rowData.ProcessDetail));}},{key:\"formatClientDetail\",value:function formatClientDetail(rowData){return/*#__PURE__*/React.createElement(\"div\",{className:\"policy-list-data\"},/*#__PURE__*/React.createElement(\"p\",null,rowData.ClientDetail));}},{key:\"formatEmail\",value:function formatEmail(rowData){return/*#__PURE__*/React.createElement(\"div\",{className:\"policy-list-data\"},/*#__PURE__*/React.createElement(\"p\",null,/*#__PURE__*/React.createElement(\"a\",null,rowData.ToEmail)));}},{key:\"formatSubject\",value:function formatSubject(rowData){return/*#__PURE__*/React.createElement(\"div\",{className:\"policy-list-data\"},/*#__PURE__*/React.createElement(\"p\",null,rowData.EmailSubject));}},{key:\"formatBody\",value:function formatBody(rowData){var _this5=this;return/*#__PURE__*/React.createElement(\"div\",{className:\"policy-list-data\"},/*#__PURE__*/React.createElement(\"p\",null,/*#__PURE__*/React.createElement(\"div\",{dangerouslySetInnerHTML:{__html:this.htmlDecode(rowData.EmailBody.substr(0,80))}}),/*#__PURE__*/React.createElement(\"a\",{onClick:function onClick(){return _this5.viewEmailBody(rowData);},style:{marginRight:'.5em',cursor:'pointer',borderBottomWidth:\"1px\",color:\"#007ad9\"}},\"...\")));}},{key:\"formatStatus\",value:function formatStatus(rowData){return/*#__PURE__*/React.createElement(\"div\",{className:\"policy-list-data\"},/*#__PURE__*/React.createElement(\"p\",null,rowData.Status,rowData.Status=='Failed'?/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(\"i\",{style:{color:'#ff0000'},class:\"fa fa-exclamation-circle\",id:\"Error\"+rowData.EmailSenderId,\"aria-hidden\":\"true\"}),/*#__PURE__*/React.createElement(UncontrolledTooltip,{placement:\"bottom\",target:\"Error\"+rowData.EmailSenderId},rowData.ErrorMsg)):null));}},{key:\"viewEmailBody\",value:function viewEmailBody(rowData){var escaped=new Option(rowData.EmailBody).innerHTML;this.setState({isMessageModalVisible:true,FullMessage:escaped});}},{key:\"htmlDecode\",value:function htmlDecode(input){var e=document.createElement('div');e.innerHTML=input;return e.childNodes.length===0?\"\":e.childNodes[0].nodeValue;}//   render() {\n//     return (\n//       <div dangerouslySetInnerHTML={{ __html: this.htmlDecode(this.state.description) }} />\n//     );\n// PolicyDetailsMerged/7e921eb8-f65e-11ea-8832-2da09a23e307/1/1\n},{key:\"openPolicy\",value:function openPolicy(rowData){window.open(window.location.origin+'/#'+'PolicyDetailsMerged/'+rowData.PolicyId+'/1/1');}},{key:\"export\",value:function _export(){this.dt.exportCSV();}},{key:\"getDropDownValues\",value:function getDropDownValues(stringMapType,setStateName){var _this6=this;try{var data={stringmaptype:stringMapType,orderby:'sortorder'};api.post(APIConstant.path.dropdownbycode,data).then(function(res){if(res.success){_this6.setState(_defineProperty({},setStateName,res.data));}else{}}).catch(function(err){});}catch(error){console.log(\"error...\",error);}}},{key:\"selectType\",value:function selectType(value,type){if(type==='selectedMonth'){if(value===''||value===undefined||value===null){this.setState({selectedMonth:''});}else{this.setState({selectedMonth:value.value});}}if(type==='selectedYear'){if(value===''||value===undefined||value===null){this.setState({selectedYear:''});}else{this.setState({selectedYear:value.value});}}if(type==='entityType'){if(value===''||value===undefined||value===null){this.setState({entityType:''});}else{this.setState({entityType:value.value});}}if(type==='processType'){if(value===''||value===undefined||value===null){this.setState({processType:''});}else{this.setState({processType:value.value});}}if(type==='recepientType'){if(value===''||value===undefined||value===null){this.setState({recepientType:''});}else{this.setState({recepientType:value.value});}}if(type==='selectedStatus'){if(value===''||value===undefined||value===null){this.setState({selectedStatus:''});}else{this.setState({selectedStatus:value.value});}}}},{key:\"show\",value:function show(field,condition,errorField,message){if(condition){if(document.getElementById(field))document.getElementById(field).className=\"form-control is-invalid\";if(document.getElementById(errorField))document.getElementById(errorField).innerHTML='<p>'+message+' </p>';}else{if(document.getElementById(field))document.getElementById(field).className=\"form-control\";if(document.getElementById(errorField))document.getElementById(errorField).innerHTML=null;}}},{key:\"changePolicyDateView\",value:function changePolicyDateView(){this.setState({isMonthYear:!this.state.isMonthYear});}},{key:\"getPreviousRecords\",value:function getPreviousRecords(){var _this7=this;var offset=this.state.offset>0?parseInt(this.state.offset)-1:0;this.setState({offset:offset});setTimeout(function(){_this7.getSearchPolicy();},100);}},{key:\"getNextRecords\",value:function getNextRecords(){var _this8=this;var offset=this.state.offset>=0?parseInt(this.state.offset)+1:0;this.setState({offset:offset});setTimeout(function(){_this8.getSearchPolicy();},100);}},{key:\"render\",value:function render(){var _this9=this;var t=this.props.t;var header=/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(Row,null,/*#__PURE__*/React.createElement(Col,{md:\"1\"},/*#__PURE__*/React.createElement(MultiSelect,{value:this.state.cols,options:this.colOptions,fixedPlaceholder:true,placeholder:CommonConfig.dataTableConfig.columnToggleIcon,tooltip:\"Show / Hide Column\",onChange:this.onColumnToggle,style:{width:'50px'}})),/*#__PURE__*/React.createElement(Col,{md:\"11\"},/*#__PURE__*/React.createElement(\"div\",{style:{textAlign:'right'}},/*#__PURE__*/React.createElement(\"i\",{className:\"pi pi-search\",style:{margin:'4px 4px 0 0'}}),/*#__PURE__*/React.createElement(InputText,{type:\"search\",onInput:function onInput(e){return _this9.setState({globalFilter:e.target.value});},placeholder:\"Global Search\",size:\"30\",style:{marginRight:10}}),/*#__PURE__*/React.createElement(Button,{type:\"button\",icon:\"pi pi-external-link\",iconPos:\"left\",tooltip:\"Export as CSV\",tooltipOptions:{position:'left'},onClick:this.export,style:{marginRight:10}})))));var columns=this.state.cols.map(function(col,i){return/*#__PURE__*/React.createElement(Column,{key:i,field:col.field,header:col.header,body:col.body,sortable:col.sortable,filter:col.filter,filterMatchMode:col.filterMatchMode});});return/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"div\",{className:\"basic-header\"},/*#__PURE__*/React.createElement(\"h1\",null,\"Email Report\"),/*#__PURE__*/React.createElement(\"div\",{className:\"header-right-option\"},/*#__PURE__*/React.createElement(MultiSelect,{value:this.state.cols,options:this.colOptions,fixedPlaceholder:true,placeholder:CommonConfig.dataTableConfig.columnToggleIcon,tooltip:\"Show / Hide Column\",onChange:this.onColumnToggle,style:{width:'50px'}}),/*#__PURE__*/React.createElement(Button,{type:\"button\",icon:\"pi pi-external-link\",tooltip:\"Export as CSV\",tooltipOptions:{position:'bottom'},onClick:this.export,style:{marginRight:10}}))),/*#__PURE__*/React.createElement(\"div\",{className:\"input-box\",id:\"accordion\"},/*#__PURE__*/React.createElement(Card,{className:\"mb-0\"},/*#__PURE__*/React.createElement(CardHeader,{id:\"headingOne\"},/*#__PURE__*/React.createElement(BTN,{block:true,color:\"link\",className:\"text-left m-0 p-0\",onClick:function onClick(){return _this9.setState({custom:!_this9.state.custom});},\"aria-expanded\":this.state.custom,\"aria-controls\":\"collapseOne\"},/*#__PURE__*/React.createElement(\"h5\",{className:\"m-0 p-0\"},\"Email Report\",/*#__PURE__*/React.createElement(\"i\",{style:{float:'right'},className:this.state.custom?\"fa fa-chevron-down\":\"fa fa-chevron-up\"})))),/*#__PURE__*/React.createElement(Collapse,{isOpen:this.state.custom,\"data-parent\":\"#accordion\",id:\"collapseOne\",\"aria-labelledby\":\"headingOne\"},/*#__PURE__*/React.createElement(CardBody,null,/*#__PURE__*/React.createElement(Form,{onSubmit:function onSubmit(e){return e.preventDefault();}},/*#__PURE__*/React.createElement(Row,null,/*#__PURE__*/React.createElement(Col,{md:\"12\"},/*#__PURE__*/React.createElement(Row,null,this.state.isMonthYear?/*#__PURE__*/React.createElement(Col,{md:\"2\"},/*#__PURE__*/React.createElement(\"div\",{className:\"input-box\"},/*#__PURE__*/React.createElement(\"label\",null,\"Month\"),/*#__PURE__*/React.createElement(Input,{type:\"select\",name:\"selectedMonth\",id:\"selectedMonth\",value:this.state.selectedMonth,onChange:function onChange(e){return _this9.selectType(e.target,'selectedMonth');}},/*#__PURE__*/React.createElement(\"option\",{value:\"\"},\"Select Month\"),this.state.monthArray.map(function(month,i){return/*#__PURE__*/React.createElement(\"option\",{value:month.value,key:i},month.label);})),/*#__PURE__*/React.createElement(\"em\",{id:\"selectedMonthError\",className:\"error invalid-feedback\"}))):/*#__PURE__*/React.createElement(Col,{md:\"2\"},/*#__PURE__*/React.createElement(\"div\",{className:\"input-box\"},/*#__PURE__*/React.createElement(\"label\",null,\"From\"),/*#__PURE__*/React.createElement(Input,{type:\"date\",name:\"selectedFromDate\",id:\"selectedFromDate\",value:this.state.selectedFromDate,onBlur:function onBlur(e){return _this9.handleChange(e);},onChange:function onChange(e){return _this9.handleChange(e);}}),/*#__PURE__*/React.createElement(\"em\",{id:\"selectedFromDateError\",className:\"error invalid-feedback\"}))),this.state.isMonthYear?/*#__PURE__*/React.createElement(Col,{md:\"2\"},/*#__PURE__*/React.createElement(\"div\",{className:\"input-box\"},/*#__PURE__*/React.createElement(\"label\",null,\"Year\"),/*#__PURE__*/React.createElement(Input,{type:\"select\",name:\"selectedYear\",id:\"selectedYear\",value:this.state.selectedYear,onChange:function onChange(e){return _this9.selectType(e.target,'selectedYear');}},/*#__PURE__*/React.createElement(\"option\",{value:\"\"},\"Select Year\"),this.state.yearArray.map(function(year,i){return/*#__PURE__*/React.createElement(\"option\",{value:year.value,key:i},year.label);})),/*#__PURE__*/React.createElement(\"em\",{id:\"selectedYearError\",className:\"error invalid-feedback\"}))):/*#__PURE__*/React.createElement(Col,{md:\"2\"},/*#__PURE__*/React.createElement(\"div\",{className:\"input-box\"},/*#__PURE__*/React.createElement(\"label\",null,\"To\"),/*#__PURE__*/React.createElement(Input,{type:\"date\",name:\"selectedToDate\",id:\"selectedToDate\",value:this.state.selectedToDate,onBlur:function onBlur(e){return _this9.handleChange(e);},onChange:function onChange(e){return _this9.handleChange(e);}}),/*#__PURE__*/React.createElement(\"em\",{id:\"selectedToDateError\",className:\"error invalid-feedback\"}))),/*#__PURE__*/React.createElement(Col,{md:\"2\",style:{alignSelf:'center'}},this.state.isMonthYear?/*#__PURE__*/React.createElement(\"label\",{style:{textDecoration:'underline'},onClick:function onClick(){return _this9.changePolicyDateView();}},\"Change to Date Range\"):/*#__PURE__*/React.createElement(\"label\",{style:{textDecoration:'underline'},onClick:function onClick(){return _this9.changePolicyDateView();}},\"Change to Month/Year\"))))),/*#__PURE__*/React.createElement(Row,null,/*#__PURE__*/React.createElement(Col,{md:\"2\"},/*#__PURE__*/React.createElement(\"div\",{className:\"input-box\"},/*#__PURE__*/React.createElement(\"label\",null,\"Entity Type\"),/*#__PURE__*/React.createElement(Input,{type:\"select\",name:\"entityType\",id:\"entityType\",value:this.state.entityType,onChange:function onChange(e){return _this9.selectType(e.target,'entityType');}},/*#__PURE__*/React.createElement(\"option\",{value:\"\"},\"All\"),this.state.entityTypeList.map(function(x,i){return/*#__PURE__*/React.createElement(\"option\",{value:x.value,key:i},x.label);})),/*#__PURE__*/React.createElement(\"em\",{id:\"entityTypeError\",className:\"error invalid-feedback\"}))),/*#__PURE__*/React.createElement(Col,{md:\"2\"},/*#__PURE__*/React.createElement(\"div\",{className:\"input-box\"},/*#__PURE__*/React.createElement(\"label\",null,\"Process\"),/*#__PURE__*/React.createElement(Input,{type:\"select\",name:\"processType\",id:\"processType\",value:this.state.processType,onChange:function onChange(e){return _this9.selectType(e.target,'processType');}},/*#__PURE__*/React.createElement(\"option\",{value:\"\"},\"All\"),this.state.processTypeList.map(function(x,i){return/*#__PURE__*/React.createElement(\"option\",{value:x.value,key:i},x.label);})),/*#__PURE__*/React.createElement(\"em\",{id:\"processTypeError\",className:\"error invalid-feedback\"}))),/*#__PURE__*/React.createElement(Col,{md:\"2\"},/*#__PURE__*/React.createElement(\"div\",{className:\"input-box\"},/*#__PURE__*/React.createElement(\"label\",null,\"Recepient Type\"),/*#__PURE__*/React.createElement(Input,{type:\"select\",name:\"recepientType\",id:\"recepientType\",value:this.state.recepientType,onChange:function onChange(e){return _this9.selectType(e.target,'recepientType');}},/*#__PURE__*/React.createElement(\"option\",{value:\"\"},\"All\"),this.state.recepientTypeList.map(function(x,i){return/*#__PURE__*/React.createElement(\"option\",{value:x.value,key:i},x.label);})),/*#__PURE__*/React.createElement(\"em\",{id:\"recepientTypeError\",className:\"error invalid-feedback\"}))),/*#__PURE__*/React.createElement(Col,{md:\"2\"},/*#__PURE__*/React.createElement(\"div\",{className:\"input-box\"},/*#__PURE__*/React.createElement(\"label\",null,\"Status\"),/*#__PURE__*/React.createElement(Input,{type:\"select\",name:\"selectedStatus\",id:\"selectedStatus\",value:this.state.selectedStatus,onChange:function onChange(e){return _this9.selectType(e.target,'selectedStatus');}},/*#__PURE__*/React.createElement(\"option\",{value:\"\"},\"All\"),this.state.statusList.map(function(x,i){return/*#__PURE__*/React.createElement(\"option\",{value:x.value,key:i},x.label);})),/*#__PURE__*/React.createElement(\"em\",{id:\"selectedStatusError\",className:\"error invalid-feedback\"}))),/*#__PURE__*/React.createElement(Col,{md:\"3\",className:\"text-left\"},/*#__PURE__*/React.createElement(\"div\",{className:\"input-box\"},/*#__PURE__*/React.createElement(\"label\",null),/*#__PURE__*/React.createElement(BTN,{type:\"submit\",color:\"success\",title:\"Go\",onClick:function onClick(){return _this9.getEmailReportList();}},\" Go \"))))))))),/*#__PURE__*/React.createElement(\"div\",{className:\"table-custom\"},/*#__PURE__*/React.createElement(DataTable,{ref:function ref(el){return _this9.dt=el;},value:this.state.arr,first:this.state.selectedPage,onPage:function onPage(e){return _this9.getPageString(e);},paginator:true,rows:this.state.rowsPerPage,totalRecords:this.state.arr.length,exportFilename:\"Email Report\",currentPageReportTemplate:this.state.str,scrollable:true,scrollHeight:\"340px\",paginatorTemplate:\"CurrentPageReport FirstPageLink PrevPageLink PageLinks NextPageLink LastPageLink RowsPerPageDropdown\",rowsPerPageOptions:this.state.rowsPerPageOptions,globalFilter:this.state.globalFilter,emptyMessage:\"No records found\",responsive:true,resizableColumns:true,columnResizeMode:\"fit\"//stateKey=\"contactList\" stateStorage=\"local\" header={header} \n},columns)),/*#__PURE__*/React.createElement(Modal,{isOpen:this.state.isMessageModalVisible,className:'modal-lg',style:{maxWidth:'70%'}},/*#__PURE__*/React.createElement(ModalHeader,{toggle:function toggle(){return _this9.setState({isMessageModalVisible:false});}},\" Email Body \"),/*#__PURE__*/React.createElement(ModalBody,null,/*#__PURE__*/React.createElement(Card,{className:\"mb-0\"},/*#__PURE__*/React.createElement(Row,null,/*#__PURE__*/React.createElement(Col,null,/*#__PURE__*/React.createElement(\"div\",{dangerouslySetInnerHTML:{__html:this.htmlDecode(this.state.FullMessage)}})))))));}}]);return EmailReport;}(Component);export default withTranslation()(EmailReport);","map":{"version":3,"sources":["/Users/bhavik/Downloads/Cognisun/Evolution/Evolution_React/evolution_new/src/views/Reports/EmailReport.js"],"names":["React","Component","Modal","ModalBody","Collapse","Button","BTN","ModalHeader","Card","CardHeader","UncontrolledTooltip","CardBody","Col","Row","Input","Form","api","withTranslation","DataTable","Column","MultiSelect","InputText","CommonConfig","DatePicker","moment","uuid","APIConstant","Select","off","toast","apiBase","EmailReport","props","getPageString","e","firstPage","first","l","rows","page","lastPage","state","arr","length","str","setState","selectedPage","rowsPerPage","toggleLargeAdd","toggleModalAdd","toggleCustom","tab","prevState","custom","map","x","index","handleChange","t","target","name","value","selectedFromDate","selectedToDate","isEmpty","isToDateGreater","isSameOrAfter","show","columns","field","header","sortable","filter","filterMatchMode","id","body","formatEntityData","bind","formatProcessDetail","formatClientDetail","formatEmail","formatSubject","formatBody","formatStatus","cols","filteredcontactsSingle","rowsPerPageOptions","dataTableConfig","isExpand","isMonthYear","monthArray","yearArray","selectedFromDateError","selectedToDateError","selectedMonth","parseInt","format","selectedMonthError","selectedYear","selectedYearError","selectedStatus","entityType","entityTypeError","processType","processTypeError","recepientType","recepientTypeError","label","colOptions","col","push","onColumnToggle","actionTemplate","export","getDropdown","data","IsMonthYear","Month","Year","FromDate","ToDate","EntityType","ProcessType","RecipientType","Status","post","then","res","console","log","catch","err","error","startYear","last10Year","newSelected","selectAll","forEach","SrNo","selected","Object","assign","rowData","column","toggleRow","event","valueInOrder","sort","y","history","pathname","PolicyId","openPolicy","marginRight","cursor","borderBottomWidth","color","position","PolicyNumber","ProcessDetail","ClientDetail","ToEmail","EmailSubject","__html","htmlDecode","EmailBody","substr","viewEmailBody","EmailSenderId","ErrorMsg","escaped","Option","innerHTML","isMessageModalVisible","FullMessage","input","document","createElement","childNodes","nodeValue","window","open","location","origin","dt","exportCSV","stringMapType","setStateName","stringmaptype","orderby","path","dropdownbycode","success","type","undefined","condition","errorField","message","getElementById","className","offset","setTimeout","getSearchPolicy","columnToggleIcon","width","textAlign","margin","globalFilter","i","float","preventDefault","selectType","month","year","alignSelf","textDecoration","changePolicyDateView","entityTypeList","processTypeList","recepientTypeList","statusList","getEmailReportList","el","maxWidth"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\r\nimport { Modal, ModalBody, Collapse, Button as BTN, ModalHeader, Card, CardHeader,UncontrolledTooltip,\r\n     CardBody, Col, Row, Input, Form } from 'reactstrap';\r\nimport { Button } from 'primereact/button';\r\nimport api from '../../utils/apiClient';\r\nimport { withTranslation } from 'react-i18next';\r\nimport { DataTable } from 'primereact/datatable';\r\nimport { Column } from 'primereact/column';\r\nimport { MultiSelect } from 'primereact/multiselect';\r\nimport { InputText } from 'primereact/inputtext';\r\nimport 'react-toastify/dist/ReactToastify.css';\r\nimport { CommonConfig } from '../../utils/constants';\r\nimport DatePicker from 'react-date-picker';\r\nimport moment from 'moment';\r\nimport uuid from \"uuid\";\r\nimport APIConstant from '../../utils/constants';\r\nimport Select from 'react-select';\r\nimport 'react-select/dist/react-select.min.css';\r\nimport { off } from 'codemirror';\r\nimport { toast } from 'react-toastify';\r\nimport { apiBase } from '../../utils/config';\r\n\r\nclass EmailReport extends Component {\r\n\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        let columns = [\r\n            { field: \"Date\", header: \"Date\", sortable: true, filter: true, filterMatchMode: 'contains', id: 1 },\r\n            { body: this.formatEntityData.bind(this), field: \"EntityData\", header: \"Entity Type/Entity ID\", sortable: true, filter: true, filterMatchMode: 'contains', id: 2 },\r\n            { body: this.formatProcessDetail.bind(this), field: \"ProcessDetail\", header: \"Process/Template Type\", sortable: true, filter: true, filterMatchMode: 'contains', id: 3 },\r\n            { field: \"RecipientType\", header: \"Recipient Type\", sortable: true, filter: true, filterMatchMode: 'contains', id: 4 },\r\n            { body: this.formatClientDetail.bind(this), field: \"ClientDetail\", header: \"Client/Sub Agent\", sortable: true, filter: true, filterMatchMode: 'contains', id: 5 },\r\n            { body: this.formatEmail.bind(this), field: \"ToEmail\", header: \"Recipient (To)\", sortable: true, filter: true, filterMatchMode: 'contains', id: 6 },\r\n            { body: this.formatSubject.bind(this), field: \"EmailSubject\", header: \"Subject\", sortable: true, filter: true, filterMatchMode: 'contains', id: 7 },\r\n            { body: this.formatBody.bind(this), field: \"EmailBody\", header: \"Body\", sortable: true, filter: true, filterMatchMode: 'contains', id: 8 },\r\n            { body: this.formatStatus.bind(this), field: \"Status\", header: \"Status\", sortable: true, filter: true, filterMatchMode: 'contains', id: 9 },\r\n        ];\r\n\r\n        this.state = {\r\n            toggleModalAdd: false,\r\n            cols: columns,\r\n            str: '',\r\n            arr: [],\r\n            selectedPage: 0,\r\n            filteredcontactsSingle: null,\r\n            rowsPerPageOptions: CommonConfig.dataTableConfig.rowsPerPageOptions,\r\n            rowsPerPage: CommonConfig.dataTableConfig.rowsPerPage,\r\n            custom: true,\r\n            isExpand: false,\r\n\r\n            isMonthYear: true,\r\n            monthArray: [],\r\n            yearArray: [],\r\n\r\n            selectedFromDate:'',\r\n            selectedFromDateError: false,\r\n            selectedToDate:'',\r\n            selectedToDateError: false,\r\n\r\n            selectedMonth:parseInt(moment().format('MM')),\r\n            selectedMonthError: false,\r\n            selectedYear:moment().format('YYYY'),\r\n            selectedYearError: false,\r\n\r\n            selectedStatus:'',\r\n            entityType:'',\r\n            entityTypeError: false,\r\n            processType:'',\r\n            processTypeError: false,\r\n            recepientType: '',\r\n            recepientTypeError: false,\r\n            selectedStatus:'',\r\n            selectedStatusError: false,\r\n\r\n            isMessageModalVisible: false,\r\n            FullMessage:'',\r\n\r\n            offset: 0,\r\n            recordStr: '',\r\n            selected: {},\r\n            batchMessageHeaderId: '',\r\n            policyCount: 0,\r\n            \r\n            entityTypeList: [\r\n            \r\n            { label: 'Policy', value: 'Policy' },\r\n            { label: 'Claims', value: 'Claims' },\r\n            \r\n            ],\r\n\r\n            processTypeList: [\r\n                \r\n            { label: 'Renewal', value: 'Renewal' },\r\n\r\n            ],\r\n            recepientTypeList: [\r\n                \r\n            { label: 'SubAgent', value: 'SubAgent' },\r\n            { label: 'Client', value: 'Client' },\r\n\r\n            ],\r\n\r\n            statusList: [\r\n                \r\n            { label: 'Pending', value: 'Pending'},\r\n            { label: 'Sent', value: 'Sent' },\r\n            { label: 'Failed', value: 'Failed' },\r\n        \r\n            ],\r\n\r\n        };\r\n\r\n        this.colOptions = [];\r\n        for (let col of columns) {\r\n            this.colOptions.push({ label: col.header, value: col });\r\n        }\r\n        this.onColumnToggle = this.onColumnToggle.bind(this);\r\n        this.actionTemplate = this.actionTemplate.bind(this);\r\n        this.export = this.export.bind(this);\r\n    }\r\n\r\n    componentDidMount() {\r\n        this.getDropdown();\r\n        // this.getEmailReportList();\r\n    }\r\n\r\n    async getEmailReportList(){\r\n        let data ={\r\n            IsMonthYear: this.state.isMonthYear ? \"true\" : \"false\",\r\n            Month: this.state.isMonthYear ? this.state.selectedMonth : '',\r\n            Year: this.state.isMonthYear ? this.state.selectedYear : '',\r\n            FromDate: !this.state.isMonthYear ? this.state.selectedFromDate : '',\r\n            ToDate: !this.state.isMonthYear ? this.state.selectedToDate : '',\r\n            EntityType: this.state.entityType,\r\n            ProcessType: this.state.processType,\r\n            RecipientType: this.state.recepientType,\r\n            Status: this.state.selectedStatus,\r\n        }\r\n\r\n        await api.post('api/getEmailReportList',data).then(res =>{\r\n            console.log(\"data in EmailList....\",res);\r\n            this.setState({ arr: res.data[0]});\r\n        }).catch(err =>{\r\n            console.log(\"error in EmailList\",err);\r\n            toast.error(\"Error\",err);\r\n        });\r\n    }\r\n\r\n    getDropdown() {\r\n\r\n        // Get Month\r\n        let monthArray = [\r\n            { label: 'January', value: 1 },\r\n            { label: 'February', value: 2 },\r\n            { label: 'March', value: 3 },\r\n            { label: 'April', value: 4 },\r\n            { label: 'May', value: 5 },\r\n            { label: 'June', value: 6 },\r\n            { label: 'July', value: 7 },\r\n            { label: 'August', value: 8 },\r\n            { label: 'Septemeber', value: 9 },\r\n            { label: 'October', value: 10 },\r\n            { label: 'November', value: 11 },\r\n            { label: 'December', value: 12 },\r\n        ];\r\n        this.setState({ monthArray: monthArray });\r\n\r\n        // Get Year - Get last 10 year from current year\r\n        let startYear = moment().format('YYYY');\r\n        let last10Year = parseInt(startYear) - 10;\r\n        let yearArray = [];\r\n        for (let index = last10Year; index <= (parseInt(last10Year) + 10); index++) {\r\n            yearArray.push({ label: index, value: index });\r\n        }\r\n        this.setState({ yearArray: yearArray });\r\n\r\n\r\n    }\r\n\r\n    toggleSelectAll() {\r\n        let newSelected = {};\r\n        if (this.state.selectAll === 0) {\r\n            this.state.arr.forEach(x => {\r\n                newSelected[x.SrNo] = true;\r\n            });\r\n        }\r\n        this.setState({\r\n            selected: newSelected,\r\n            selectAll: this.state.selectAll === 0 ? 1 : 0\r\n        });\r\n    }\r\n\r\n    toggleRow(SrNo) {\r\n        const newSelected = Object.assign({}, this.state.selected);\r\n        newSelected[SrNo] = !this.state.selected[SrNo];\r\n        this.setState({\r\n            selected: newSelected,\r\n            selectAll: 2\r\n        });\r\n    }\r\n    actionTemplate(rowData, column) {\r\n        return <div>\r\n            <input\r\n                type=\"checkbox\"\r\n                className=\"checkbox\"\r\n                checked={this.state.selected[rowData.SrNo] === true}\r\n                onChange={() => this.toggleRow(rowData.SrNo)} />\r\n        </div>;\r\n    }\r\n\r\n\r\n    onColumnToggle(event) {\r\n        let valueInOrder = event.value.sort((x, y) => { return x.id - y.id });\r\n        this.setState({ cols: valueInOrder });\r\n    }\r\n\r\n    edit(rowData) {\r\n        this.props.history.push({\r\n            pathname: '/PolicyDetailsMerged/' + rowData.PolicyId + '/1/1',\r\n            state: {\r\n                PolicyId: rowData.PolicyId,\r\n                tab: 1\r\n            }\r\n        });\r\n    }\r\n\r\n    formatEntityData(rowData) {\r\n        return (\r\n            <div className=\"policy-list-data\">\r\n                <p>{rowData.EntityType} - {\" \"}\r\n                <a onClick={()=> this.openPolicy(rowData)} \r\n                    style={{ marginRight: '.5em', cursor: 'pointer' , borderBottomWidth: \"1px\" , color: \"#007ad9\"}}\r\n                    tooltip=\"View Policy\" tooltipOptions={{ position: 'bottom' }}>\r\n                    {rowData.PolicyNumber}\r\n                </a>\r\n                </p>\r\n            </div>\r\n        )\r\n    }\r\n\r\n    formatProcessDetail(rowData){\r\n        return(\r\n            <div className=\"policy-list-data\">\r\n                <p>{rowData.ProcessDetail}</p>\r\n                {/* <p>{rowData.PolicyNumber}</p> */}\r\n            </div>\r\n        )\r\n\r\n    }\r\n\r\n    formatClientDetail(rowData){\r\n        return (\r\n            <div className=\"policy-list-data\">\r\n                <p>{rowData.ClientDetail}</p>\r\n            </div>\r\n        )\r\n    }\r\n\r\n    formatEmail(rowData) {\r\n        return (\r\n            <div className=\"policy-list-data\">\r\n                <p><a >{rowData.ToEmail}</a></p>\r\n            </div>\r\n        )\r\n    }\r\n\r\n    formatSubject(rowData){\r\n        return (\r\n            <div className=\"policy-list-data\">\r\n                <p>{rowData.EmailSubject}</p>\r\n            </div>\r\n        )\r\n    }\r\n\r\n    \r\n    formatBody(rowData){\r\n        return (\r\n             <div className=\"policy-list-data\">\r\n                <p><div dangerouslySetInnerHTML={{ __html: this.htmlDecode(rowData.EmailBody.substr(0,80)) }}></div>\r\n                {/* {rowData.EmailBody.substr(0,80)} */}\r\n                    <a onClick={()=>this.viewEmailBody(rowData)} \r\n                        style={{ marginRight: '.5em', cursor: 'pointer' , borderBottomWidth: \"1px\" ,\r\n                        color: \"#007ad9\"}}>\r\n                    ...</a>\r\n                </p>\r\n            </div>\r\n        )\r\n    }\r\n\r\n    formatStatus(rowData){\r\n        return(\r\n            <div className=\"policy-list-data\">\r\n                <p>{rowData.Status} \r\n                    {rowData.Status == 'Failed' ? \r\n                    <>\r\n                        <i style={{ color: '#ff0000'}} class=\"fa fa-exclamation-circle\" id={\"Error\"+rowData.EmailSenderId} \r\n                        aria-hidden=\"true\"></i>\r\n                        <UncontrolledTooltip placement=\"bottom\" target={\"Error\"+rowData.EmailSenderId}>\r\n                            {rowData.ErrorMsg}      \r\n                        </UncontrolledTooltip>\r\n                    </>\r\n                    :null\r\n                    }\r\n                </p>\r\n            </div>\r\n        )\r\n    }\r\n\r\n    viewEmailBody(rowData){\r\n        let escaped = new Option(rowData.EmailBody).innerHTML\r\n        this.setState({isMessageModalVisible: true , FullMessage: escaped });\r\n    }\r\n    htmlDecode(input){\r\n        var e = document.createElement('div');\r\n        e.innerHTML = input;\r\n        return e.childNodes.length === 0 ? \"\" : e.childNodes[0].nodeValue;\r\n      }\r\n    \r\n    //   render() {\r\n    //     return (\r\n    //       <div dangerouslySetInnerHTML={{ __html: this.htmlDecode(this.state.description) }} />\r\n    //     );\r\n\r\n    // PolicyDetailsMerged/7e921eb8-f65e-11ea-8832-2da09a23e307/1/1\r\n    openPolicy(rowData){        \r\n        window.open(window.location.origin + '/#' + 'PolicyDetailsMerged/' + rowData.PolicyId + '/1/1');\r\n    }\r\n\r\n    export() {\r\n        this.dt.exportCSV();\r\n    }\r\n\r\n    getPageString = (e) => {\r\n        let firstPage = e.first + 1;\r\n        let l = e.rows * (e.page + 1);\r\n        let lastPage = (l < this.state.arr.length) ? l : this.state.arr.length\r\n        var str = firstPage + ' to ' + lastPage + ' out of ' + this.state.arr.length + ' records';\r\n        this.setState({ selectedPage: e.first, str: str, rowsPerPage: e.rows });\r\n    }\r\n\r\n    getDropDownValues(stringMapType, setStateName) {\r\n        try {\r\n            const data = {\r\n                stringmaptype: stringMapType,\r\n                orderby: 'sortorder'\r\n            };\r\n            api.post(APIConstant.path.dropdownbycode, data).then(res => {\r\n                if (res.success) {\r\n                    this.setState({ [setStateName]: res.data });\r\n                } else {\r\n                }\r\n            }).catch(err => {\r\n            });\r\n        } catch (error) {\r\n            console.log(\"error...\", error);\r\n        }\r\n    }\r\n\r\n    toggleLargeAdd = () => {\r\n        this.setState({ toggleModalAdd: false });\r\n    }\r\n\r\n\r\n    toggleCustom = (tab) => {\r\n        const prevState = this.state.custom;\r\n        const state = prevState.map((x, index) => tab === index ? !x : false);\r\n        this.setState({ custom: state });\r\n    }\r\n\r\n    selectType(value, type) {\r\n        if (type === 'selectedMonth') {\r\n            if (value === '' || value === undefined || value === null) {\r\n                this.setState({ selectedMonth: '' });\r\n            } else {\r\n                this.setState({ selectedMonth: value.value });\r\n            }\r\n        }\r\n\r\n        if (type === 'selectedYear') {\r\n            if (value === '' || value === undefined || value === null) {\r\n                this.setState({ selectedYear: '' });\r\n            } else {\r\n                this.setState({ selectedYear: value.value });\r\n            }\r\n        }\r\n\r\n        if (type === 'entityType') {\r\n            if (value === '' || value === undefined || value === null) {\r\n                this.setState({ entityType: '' });\r\n            } else {\r\n                this.setState({ entityType: value.value });\r\n            }\r\n        }\r\n\r\n        if (type === 'processType') {\r\n            if (value === '' || value === undefined || value === null) {\r\n                this.setState({ processType: '' });\r\n            } else {\r\n                this.setState({ processType: value.value });\r\n            }\r\n        }\r\n\r\n        if (type === 'recepientType') {\r\n            if (value === '' || value === undefined || value === null) {\r\n                this.setState({ recepientType: '' });\r\n            } else {\r\n                this.setState({ recepientType: value.value });\r\n            }\r\n        }\r\n\r\n        if (type === 'selectedStatus') {\r\n            if (value === '' || value === undefined || value === null) {\r\n                this.setState({ selectedStatus: '' });\r\n            } else {\r\n                this.setState({ selectedStatus: value.value });\r\n            }\r\n        }\r\n\r\n    }\r\n    handleChange = e => {\r\n        const { t } = this.props;\r\n        this.setState({ [e.target.name]: e.target.value });\r\n\r\n        if (e.target.name === 'selectedFromDate') {\r\n            if (e.target.value === '' || e.target.value === null) {\r\n                this.setState({ selectedFromDate: '' });\r\n            } else {\r\n                this.setState({ selectedFromDate: e.target.value, selectedToDate: '' });\r\n            }\r\n        }\r\n\r\n        if (e.target.name === 'selectedToDate') {\r\n            if (e.target.value === '' || e.target.value === null) {\r\n                this.setState({ selectedToDate: '' });\r\n            } else {\r\n                if (!CommonConfig.isEmpty(this.state.selectedFromDate)) {\r\n                    var isToDateGreater = moment(e.target.value).isSameOrAfter(this.state.selectedFromDate);\r\n                    if (!isToDateGreater) {\r\n                        this.show('selectedToDate', true, 'selectedToDateError', 'To date must be greater then From date.');\r\n                    } else {\r\n                        this.show('selectedToDate', false, 'selectedToDateError', '');\r\n                    }\r\n                } else {\r\n                    this.show('selectedToDate', false, 'selectedToDateError', '');\r\n                }\r\n                this.setState({ selectedToDate: e.target.value });\r\n            }\r\n        }\r\n    }\r\n\r\n\r\n    show(field, condition, errorField, message) {\r\n        if (condition) {\r\n            if (document.getElementById(field))\r\n                document.getElementById(field).className = \"form-control is-invalid\";\r\n\r\n            if (document.getElementById(errorField))\r\n                document.getElementById(errorField).innerHTML = '<p>' + message + ' </p>';\r\n        } else {\r\n            if (document.getElementById(field))\r\n                document.getElementById(field).className = \"form-control\";\r\n\r\n            if (document.getElementById(errorField))\r\n                document.getElementById(errorField).innerHTML = null;\r\n        }\r\n    }\r\n\r\n    changePolicyDateView() {\r\n        this.setState({ isMonthYear: !this.state.isMonthYear });\r\n    }\r\n\r\n    getPreviousRecords() {\r\n        let offset = (this.state.offset > 0) ? parseInt(this.state.offset) - 1 : 0;\r\n        this.setState({ offset: offset });\r\n\r\n        setTimeout(() => {\r\n            this.getSearchPolicy();\r\n        }, 100);\r\n    }\r\n\r\n    getNextRecords() {\r\n        let offset = (this.state.offset >= 0) ? parseInt(this.state.offset) + 1 : 0;\r\n        this.setState({ offset: offset });\r\n\r\n        setTimeout(() => {\r\n            this.getSearchPolicy();\r\n        }, 100);\r\n    }\r\n\r\n\r\n    render() {\r\n        const { t } = this.props;\r\n\r\n        var header = <div>\r\n            <Row>\r\n                <Col md=\"1\">\r\n                    <MultiSelect value={this.state.cols} options={this.colOptions}\r\n                        fixedPlaceholder={true} placeholder={CommonConfig.dataTableConfig.columnToggleIcon} tooltip=\"Show / Hide Column\"\r\n                        onChange={this.onColumnToggle} style={{ width: '50px' }} />\r\n                </Col>\r\n                <Col md=\"11\">\r\n                    <div style={{ textAlign: 'right' }}>\r\n                        <i className=\"pi pi-search\" style={{ margin: '4px 4px 0 0' }}></i>\r\n                        <InputText type=\"search\" onInput={(e) => this.setState({ globalFilter: e.target.value })} placeholder=\"Global Search\" size=\"30\" style={{ marginRight: 10 }} />\r\n\r\n                        <Button type=\"button\" icon=\"pi pi-external-link\" iconPos=\"left\" tooltip=\"Export as CSV\" tooltipOptions={{ position: 'left' }} onClick={this.export} style={{ marginRight: 10 }}></Button>\r\n                    </div>\r\n                </Col>\r\n            </Row>\r\n        </div>;\r\n\r\n        let columns = this.state.cols.map((col, i) => {\r\n            return <Column key={i} field={col.field} header={col.header} body={col.body} sortable={col.sortable} filter={col.filter} filterMatchMode={col.filterMatchMode} />;\r\n        });\r\n\r\n        return (\r\n            <div>\r\n                <div className=\"basic-header\">\r\n                    <h1>Email Report</h1>\r\n\r\n                    <div className=\"header-right-option\">\r\n                        <MultiSelect value={this.state.cols} options={this.colOptions}\r\n                            fixedPlaceholder={true} placeholder={CommonConfig.dataTableConfig.columnToggleIcon} tooltip=\"Show / Hide Column\"\r\n                            onChange={this.onColumnToggle} style={{ width: '50px' }}\r\n                        />\r\n\r\n                        <Button type=\"button\" icon=\"pi pi-external-link\" tooltip=\"Export as CSV\" tooltipOptions={{ position: 'bottom' }} onClick={this.export} style={{ marginRight: 10 }}></Button>\r\n                    </div>\r\n                </div>\r\n\r\n                <div className=\"input-box\" id=\"accordion\">\r\n\r\n                    {/* <h5>Search Policy</h5> */}\r\n                    <Card className=\"mb-0\">\r\n                        <CardHeader id=\"headingOne\">\r\n                            <BTN block color=\"link\" className=\"text-left m-0 p-0\" onClick={() => this.setState({ custom: !this.state.custom })} aria-expanded={this.state.custom} aria-controls=\"collapseOne\">\r\n                                <h5 className=\"m-0 p-0\">\r\n                                    {\"Email Report\"}\r\n                                    <i style={{ float: 'right' }} className={this.state.custom ? \"fa fa-chevron-down\" : \"fa fa-chevron-up\"}></i>\r\n                                </h5>\r\n                            </BTN>\r\n                        </CardHeader>\r\n                        <Collapse isOpen={this.state.custom} data-parent=\"#accordion\" id=\"collapseOne\" aria-labelledby=\"headingOne\">\r\n                            <CardBody>\r\n                                <Form onSubmit={e => e.preventDefault()}>\r\n                                    \r\n\r\n                                        <Row>\r\n                                            <Col md=\"12\">\r\n                                                <Row>\r\n                                                    {(this.state.isMonthYear) ? (\r\n                                                        <Col md=\"2\">\r\n                                                            <div className=\"input-box\">\r\n                                                                <label>Month</label>\r\n                                                                <Input type=\"select\" name=\"selectedMonth\" id=\"selectedMonth\" value={this.state.selectedMonth} onChange={(e) => this.selectType(e.target, 'selectedMonth')}>\r\n                                                                    <option value=\"\">Select Month</option>\r\n                                                                    {this.state.monthArray.map((month, i) => {\r\n                                                                        return (<option value={month.value} key={i}>{month.label}</option>)\r\n                                                                    })\r\n                                                                    }\r\n                                                                </Input>\r\n                                                                <em id=\"selectedMonthError\" className=\"error invalid-feedback\"></em>\r\n                                                            </div>\r\n                                                        </Col>\r\n                                                    ) : (\r\n                                                            <Col md=\"2\">\r\n                                                                <div className=\"input-box\">\r\n                                                                    <label>From</label>\r\n                                                                    <Input type=\"date\" name=\"selectedFromDate\" id=\"selectedFromDate\"\r\n                                                                        value={this.state.selectedFromDate}\r\n                                                                        onBlur={(e) => this.handleChange(e)}\r\n                                                                        onChange={(e) => this.handleChange(e)} />\r\n                                                                    <em id=\"selectedFromDateError\" className=\"error invalid-feedback\"></em>\r\n                                                                </div>\r\n                                                            </Col>\r\n                                                        )}\r\n                                                    {(this.state.isMonthYear) ? (\r\n                                                        <Col md=\"2\">\r\n                                                            <div className=\"input-box\">\r\n                                                                <label>Year</label>\r\n                                                                <Input type=\"select\" name=\"selectedYear\" id=\"selectedYear\" value={this.state.selectedYear} onChange={(e) => this.selectType(e.target, 'selectedYear')}>\r\n                                                                    <option value=\"\">Select Year</option>\r\n                                                                    {this.state.yearArray.map((year, i) => {\r\n                                                                        return (<option value={year.value} key={i}>{year.label}</option>)\r\n                                                                    })\r\n                                                                    }\r\n                                                                </Input>\r\n                                                                <em id=\"selectedYearError\" className=\"error invalid-feedback\"></em>\r\n                                                            </div>\r\n                                                        </Col>\r\n                                                    ) : (\r\n                                                            <Col md=\"2\">\r\n                                                                <div className=\"input-box\">\r\n                                                                    <label>To</label>\r\n                                                                    <Input type=\"date\" name=\"selectedToDate\" id=\"selectedToDate\"\r\n                                                                        value={this.state.selectedToDate}\r\n                                                                        onBlur={(e) => this.handleChange(e)}\r\n                                                                        onChange={(e) => this.handleChange(e)} />\r\n                                                                    <em id=\"selectedToDateError\" className=\"error invalid-feedback\"></em>\r\n                                                                </div>\r\n                                                            </Col>\r\n                                                        )}\r\n\r\n                                                    <Col md=\"2\" style={{ alignSelf: 'center' }}>\r\n                                                        {(this.state.isMonthYear) ? (\r\n                                                            <label style={{ textDecoration: 'underline' }} onClick={() => this.changePolicyDateView()}>Change to Date Range</label>\r\n                                                        ) : (\r\n                                                                <label style={{ textDecoration: 'underline' }} onClick={() => this.changePolicyDateView()}>Change to Month/Year</label>\r\n                                                            )}\r\n                                                    </Col>\r\n\r\n                                                </Row>\r\n                                            </Col>\r\n                                        </Row>\r\n\r\n\r\n                                        <Row>\r\n                                            <Col md=\"2\">\r\n                                                <div className=\"input-box\">\r\n                                                    <label>Entity Type</label>\r\n                                                    <Input type=\"select\" name=\"entityType\" id=\"entityType\" value={this.state.entityType} onChange={(e) => this.selectType(e.target, 'entityType')}>\r\n                                                        <option value=\"\">All</option>\r\n                                                        {this.state.entityTypeList.map((x, i) => {\r\n                                                            return (<option value={x.value} key={i}>{x.label}</option>)\r\n                                                        })\r\n                                                        }\r\n                                                    </Input>\r\n                                                    <em id=\"entityTypeError\" className=\"error invalid-feedback\"></em>\r\n                                                </div>\r\n                                            </Col>\r\n                                            <Col md=\"2\">\r\n                                                <div className=\"input-box\">\r\n                                                    <label>Process</label>\r\n                                                    <Input type=\"select\" name=\"processType\" id=\"processType\" value={this.state.processType} onChange={(e) => this.selectType(e.target, 'processType')}>\r\n                                                        <option value=\"\">All</option>\r\n                                                        {this.state.processTypeList.map((x, i) => {\r\n                                                            return (<option value={x.value} key={i}>{x.label}</option>)\r\n                                                        })\r\n                                                        }\r\n                                                    </Input>\r\n                                                    <em id=\"processTypeError\" className=\"error invalid-feedback\"></em>\r\n                                                </div>\r\n                                            </Col>\r\n                                            <Col md=\"2\">\r\n                                                <div className=\"input-box\">\r\n                                                    <label>Recepient Type</label>\r\n                                                    <Input type=\"select\" name=\"recepientType\" id=\"recepientType\" value={this.state.recepientType} onChange={(e) => this.selectType(e.target, 'recepientType')}>\r\n                                                        <option value=\"\">All</option>\r\n                                                        {this.state.recepientTypeList.map((x, i) => {\r\n                                                            return (<option value={x.value} key={i}>{x.label}</option>)\r\n                                                        })\r\n                                                        }\r\n                                                    </Input>\r\n                                                    <em id=\"recepientTypeError\" className=\"error invalid-feedback\"></em>\r\n                                                </div>\r\n                                            </Col>\r\n                                            <Col md=\"2\">\r\n                                                <div className=\"input-box\">\r\n                                                    <label>Status</label>\r\n                                                    <Input type=\"select\" name=\"selectedStatus\" id=\"selectedStatus\" value={this.state.selectedStatus} onChange={(e) => this.selectType(e.target, 'selectedStatus')}>\r\n                                                        <option value=\"\">All</option>\r\n                                                        {this.state.statusList.map((x, i) => {\r\n                                                            return (<option value={x.value} key={i}>{x.label}</option>)\r\n                                                        })\r\n                                                        }\r\n                                                    </Input>\r\n                                                    <em id=\"selectedStatusError\" className=\"error invalid-feedback\"></em>\r\n                                                </div>\r\n                                            </Col>\r\n                                            <Col md=\"3\" className=\"text-left\">\r\n                                            <div className=\"input-box\">\r\n                                            <label></label>\r\n                                                <BTN type=\"submit\" color=\"success\" title=\"Go\" onClick={() => this.getEmailReportList()}> Go </BTN>\r\n                                            </div>\r\n                                            </Col>\r\n                                        </Row>\r\n                                </Form>\r\n                            </CardBody>\r\n                        </Collapse>\r\n                    </Card>\r\n                </div>\r\n\r\n                <div className=\"table-custom\">\r\n                    <DataTable \r\n                        ref={(el) => this.dt = el} \r\n                        value={this.state.arr} \r\n                        first={this.state.selectedPage} \r\n                        onPage={(e) => this.getPageString(e)}\r\n                        paginator={true} \r\n                        rows={this.state.rowsPerPage} \r\n                        totalRecords={this.state.arr.length} \r\n                        exportFilename=\"Email Report\"\r\n                        currentPageReportTemplate={this.state.str} \r\n                        scrollable={true} scrollHeight=\"340px\"\r\n                        paginatorTemplate=\"CurrentPageReport FirstPageLink PrevPageLink PageLinks NextPageLink LastPageLink RowsPerPageDropdown\"\r\n                        rowsPerPageOptions={this.state.rowsPerPageOptions}\r\n                        globalFilter={this.state.globalFilter} emptyMessage=\"No records found\"\r\n                        responsive={true} \r\n                        resizableColumns={true} \r\n                        columnResizeMode=\"fit\" //stateKey=\"contactList\" stateStorage=\"local\" header={header} \r\n                    >\r\n                        {columns}\r\n                    </DataTable>\r\n                </div>\r\n\r\n                <Modal isOpen={this.state.isMessageModalVisible} className={'modal-lg'} style={{ maxWidth: '70%' }}>\r\n                    <ModalHeader toggle={() => this.setState({ isMessageModalVisible: false })}> Email Body </ModalHeader>\r\n                    <ModalBody>\r\n                        <Card className=\"mb-0\">\r\n                            <Row>\r\n                                <Col>\r\n                                <div dangerouslySetInnerHTML={{ __html: this.htmlDecode(this.state.FullMessage) }}>\r\n                                    \r\n                                </div>\r\n                                </Col>   \r\n                            </Row>\r\n                        </Card>\r\n                    </ModalBody>\r\n                </Modal>\r\n\r\n\r\n\r\n            </div>\r\n        );\r\n    }\r\n\r\n}\r\n\r\nexport default withTranslation()(EmailReport);\r\n\r\n\r\n\r\n"]},"metadata":{},"sourceType":"module"}