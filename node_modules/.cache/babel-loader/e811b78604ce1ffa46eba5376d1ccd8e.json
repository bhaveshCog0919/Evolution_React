{"ast":null,"code":"import _defineProperty from\"/Users/bhavik/Downloads/Cognisun/Evolution/Evolution_React/evolution_new/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _classCallCheck from\"/Users/bhavik/Downloads/Cognisun/Evolution/Evolution_React/evolution_new/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/bhavik/Downloads/Cognisun/Evolution/Evolution_React/evolution_new/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _assertThisInitialized from\"/Users/bhavik/Downloads/Cognisun/Evolution/Evolution_React/evolution_new/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";import _inherits from\"/Users/bhavik/Downloads/Cognisun/Evolution/Evolution_React/evolution_new/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/bhavik/Downloads/Cognisun/Evolution/Evolution_React/evolution_new/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component}from'react';import{DataTable}from'primereact/datatable';import{Column}from'primereact/column';import{InputText}from'primereact/inputtext';import{MultiSelect}from'primereact/multiselect';import'primereact/resources/themes/nova-light/theme.css';import'primereact/resources/primereact.min.css';import'primeicons/primeicons.css';import{Button}from'primereact/button';import api from'../../../utils/apiClient';import{CommonConfig}from'../../../utils/constants';import moment from'moment';var mooringGuide=/*#__PURE__*/function(_Component){_inherits(mooringGuide,_Component);var _super=_createSuper(mooringGuide);function mooringGuide(props){var _this;_classCallCheck(this,mooringGuide);_this=_super.call(this,props);_this.getPageString=function(e){var firstPage=e.first+1;var l=e.rows*(e.page+1);var lastPage=l<_this.state.arr.length?l:_this.state.arr.length;var str=firstPage+' to '+lastPage+' out of '+_this.state.arr.length+' records';_this.setState({selectedPage:e.first,str:str,rowsPerPage:e.rows});};_this.addMoreMooringGuide=function(){_this.props.history.push({pathname:'/AddMooringGuide'});// this.props.history.push('/AddMooringGuide');\n};_this.onEditRow=function(rowData){debugger;var Id=rowData.MooringGuideId;_this.props.history.push({pathname:'/EditMooringGuide/'+Id,state:{Id:Id}});};var columns=[{field:\"id\",header:\"Id\",sortable:true,filter:true,filterMatchMode:'contains',id:0},{field:\"name\",header:\"Name\",sortable:true,filter:true,filterMatchMode:'contains',id:1},{field:\"Country\",header:\"Country\",sortable:true,filter:true,filterMatchMode:'contains',id:2},{field:\"County\",header:\"County/Region\",sortable:true,filter:true,filterMatchMode:'contains',id:3},{field:\"Location\",header:\"Location\",sortable:true,filter:true,filterMatchMode:'contains',id:4},{field:\"location_type\",header:\"Location Type\",sortable:true,filter:true,filterMatchMode:'contains',id:5},{field:\"Loading\",header:\"Loading\",sortable:true,filter:true,filterMatchMode:'contains',id:6},{field:\"mooring_Type\",header:\"Mooring Type\",sortable:true,filter:true,filterMatchMode:'contains',id:7},{field:\"approval_Required\",header:\"Approval Required\",sortable:true,filter:true,filterMatchMode:'contains',id:8},{body:_this.actionTemplate.bind(_assertThisInitialized(_this)),header:\"Action\",sortable:false,filter:false,filterMatchMode:'contains',id:6}];_this.state={cols:columns,arr:[],rowData:'',selectedPage:0,rowsPerPageOptions:CommonConfig.dataTableConfig.rowsPerPageOptions,str:'',rowsPerPage:CommonConfig.dataTableConfig.rowsPerPage,globalFilter:null,isEdit:false};_this.colOptions=[];for(var _i=0,_columns=columns;_i<_columns.length;_i++){var col=_columns[_i];_this.colOptions.push({label:col.header,value:col});}_this.onColumnToggle=_this.onColumnToggle.bind(_assertThisInitialized(_this));_this.export=_this.export.bind(_assertThisInitialized(_this));return _this;}_createClass(mooringGuide,[{key:\"componentDidMount\",value:function componentDidMount(){this.getMooringGuide();}},{key:\"getMooringGuide\",value:function getMooringGuide(){var _this2=this;api.post('api/getMooringGuide').then(function(res){if(res.success){var formattedData=[];for(var i=0;i<res.data.length;i++){var approvalRequired=res.data[i].IsApprovalRequired.data[0]==1?\"Yes\":\"No\";formattedData.push({id:[i+1],MooringGuideId:res.data[i].MooringGuideId,name:res.data[i].MooringName,Country:res.data[i].countryName,County:res.data[i].Region,Location:res.data[i].Location,location_type:res.data[i].LocationType,Loading:res.data[i].LoadingPercent.toFixed(2),mooring_Type:res.data[i].MooringType,approval_Required:approvalRequired,CountryId:res.data[i].CountryId,Longitude:res.data[i].Longitude,Latitude:res.data[i].Latitude,Notes:res.data[i].Notes,MooringZone:res.data[i].MooringZone});}var lastPage=_this2.state.rowsPerPage<formattedData.length?_this2.state.rowsPerPage:formattedData.length;var str='1 to '+lastPage+' out of '+formattedData.length+' records';_this2.setState({arr:formattedData,str:str});}else{console.log(\"Else\");}}).catch(function(err){});}},{key:\"onColumnToggle\",value:function onColumnToggle(event){var valueInOrder=event.value.sort(function(x,y){return x.id-y.id;});this.setState({cols:valueInOrder});}},{key:\"actionTemplate\",value:function actionTemplate(rowData,column){var _this3=this;return/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(Button,{type:\"button\",tooltip:\"Edit\",tooltipOptions:{position:'bottom'},icon:\"pi pi-pencil\",className:\"p-button-warning\",style:{marginRight:'.5em'},onClick:function onClick(){return _this3.onEditRow(rowData);}}));}},{key:\"export\",value:function _export(){this.dt.exportCSV();}},{key:\"render\",value:function render(){var _this4=this,_React$createElement;var columns=this.state.cols.map(function(col,i){return/*#__PURE__*/React.createElement(Column,{field:col.field,header:col.header,body:col.body,sortable:col.sortable,filter:col.filter,filterMatchMode:\"contains\"});});return/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"div\",{className:\"basic-header\"},/*#__PURE__*/React.createElement(\"h1\",null,\"Mooring Guide\"),/*#__PURE__*/React.createElement(\"div\",{className:\"header-right-option\"},/*#__PURE__*/React.createElement(\"div\",{style:{textAlign:'right'}},/*#__PURE__*/React.createElement(\"i\",{className:\"pi pi-search\",style:{margin:'4px 4px 0 0'}}),/*#__PURE__*/React.createElement(InputText,{type:\"search\",onInput:function onInput(e){return _this4.setState({globalFilter:e.target.value});},placeholder:\"Global Search\",size:\"30\",style:{marginRight:10}})),/*#__PURE__*/React.createElement(MultiSelect,{value:this.state.cols,options:this.colOptions,fixedPlaceholder:true,placeholder:CommonConfig.dataTableConfig.columnToggleIcon,tooltip:\"Show / Hide Column\",onChange:this.onColumnToggle,style:{width:'50px'}}),/*#__PURE__*/React.createElement(Button,{type:\"button\",icon:\"pi pi-plus\",tooltip:\"Add Mooring Guide\",tooltipOptions:{position:'bottom'},onClick:function onClick(){return _this4.addMoreMooringGuide();}}),/*#__PURE__*/React.createElement(Button,{type:\"button\",icon:\"pi pi-external-link\",tooltip:\"Export As CSV\",tooltipOptions:{position:'bottom'},onClick:function onClick(){return _this4.export();}}))),/*#__PURE__*/React.createElement(\"div\",{className:\"table-custom\"},/*#__PURE__*/React.createElement(DataTable,(_React$createElement={ref:function ref(el){return _this4.dt=el;},value:this.state.arr,first:this.state.selectedPage,onPage:function onPage(e){return _this4.getPageString(e);}// onRowClick={(e) => this.onEditRow(e)}\n,paginator:true,rows:this.state.rowsPerPage,totalRecords:this.state.arr.length,exportFilename:\"Mooring Guide List\",currentPageReportTemplate:this.state.str,scrollable:true,scrollHeight:\"250px\",paginatorTemplate:\"CurrentPageReport FirstPageLink PrevPageLink PageLinks NextPageLink LastPageLink RowsPerPageDropdown\",rowsPerPageOptions:this.state.rowsPerPageOptions,globalFilter:this.state.globalFilter,emptyMessage:\"No records found\",responsive:true,resizableColumns:true,columnResizeMode:\"fit\"},_defineProperty(_React$createElement,\"scrollable\",true),_defineProperty(_React$createElement,\"scrollHeight\",\"265px\"),_React$createElement),columns)));}}]);return mooringGuide;}(Component);export default mooringGuide;","map":{"version":3,"sources":["/Users/bhavik/Downloads/Cognisun/Evolution/Evolution_React/evolution_new/src/views/Master/MooringGuide/mooringGuide.js"],"names":["React","Component","DataTable","Column","InputText","MultiSelect","Button","api","CommonConfig","moment","mooringGuide","props","getPageString","e","firstPage","first","l","rows","page","lastPage","state","arr","length","str","setState","selectedPage","rowsPerPage","addMoreMooringGuide","history","push","pathname","onEditRow","rowData","Id","MooringGuideId","columns","field","header","sortable","filter","filterMatchMode","id","body","actionTemplate","bind","cols","rowsPerPageOptions","dataTableConfig","globalFilter","isEdit","colOptions","col","label","value","onColumnToggle","export","getMooringGuide","post","then","res","success","formattedData","i","data","approvalRequired","IsApprovalRequired","name","MooringName","Country","countryName","County","Region","Location","location_type","LocationType","Loading","LoadingPercent","toFixed","mooring_Type","MooringType","approval_Required","CountryId","Longitude","Latitude","Notes","MooringZone","console","log","catch","err","event","valueInOrder","sort","x","y","column","position","marginRight","dt","exportCSV","map","textAlign","margin","target","columnToggleIcon","width","el"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\r\nimport { DataTable } from 'primereact/datatable';\r\nimport { Column } from 'primereact/column';\r\nimport { InputText } from 'primereact/inputtext';\r\nimport { MultiSelect } from 'primereact/multiselect';\r\nimport 'primereact/resources/themes/nova-light/theme.css';\r\nimport 'primereact/resources/primereact.min.css';\r\nimport 'primeicons/primeicons.css';\r\nimport { Button } from 'primereact/button';\r\nimport api from '../../../utils/apiClient';\r\nimport { CommonConfig } from '../../../utils/constants';\r\nimport moment from 'moment';\r\n\r\nclass mooringGuide extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        let columns = [\r\n            { field: \"id\", header: \"Id\", sortable: true, filter: true, filterMatchMode: 'contains', id: 0 },\r\n            { field: \"name\", header: \"Name\", sortable: true, filter: true, filterMatchMode: 'contains', id: 1 },\r\n            { field: \"Country\", header: \"Country\", sortable: true, filter: true, filterMatchMode: 'contains', id: 2 },\r\n            { field: \"County\", header: \"County/Region\", sortable: true, filter: true, filterMatchMode: 'contains', id: 3 },\r\n            { field: \"Location\", header: \"Location\", sortable: true, filter: true, filterMatchMode: 'contains', id: 4 },\r\n            { field: \"location_type\", header: \"Location Type\", sortable: true, filter: true, filterMatchMode: 'contains', id: 5 },\r\n            { field: \"Loading\", header: \"Loading\", sortable: true, filter: true, filterMatchMode: 'contains', id: 6 },\r\n            { field: \"mooring_Type\", header: \"Mooring Type\", sortable: true, filter: true, filterMatchMode: 'contains', id: 7 },\r\n            { field: \"approval_Required\", header: \"Approval Required\", sortable: true, filter: true, filterMatchMode: 'contains', id: 8 },\r\n            { body: this.actionTemplate.bind(this), header: \"Action\", sortable: false, filter: false, filterMatchMode: 'contains', id: 6 }\r\n        ];\r\n\r\n        this.state = {\r\n            cols: columns,\r\n            arr: [],\r\n            rowData: '',\r\n            selectedPage: 0,\r\n            rowsPerPageOptions: CommonConfig.dataTableConfig.rowsPerPageOptions,\r\n            str: '',\r\n            rowsPerPage: CommonConfig.dataTableConfig.rowsPerPage,\r\n            globalFilter: null,\r\n            isEdit: false\r\n        };\r\n\r\n        this.colOptions = [];\r\n        for (let col of columns) {\r\n            this.colOptions.push({ label: col.header, value: col });\r\n        }\r\n        this.onColumnToggle = this.onColumnToggle.bind(this);\r\n        this.export = this.export.bind(this);\r\n    }\r\n\r\n    componentDidMount() {\r\n        this.getMooringGuide();\r\n    }\r\n\r\n    getMooringGuide() {\r\n        api.post('api/getMooringGuide').then(res => {\r\n            if (res.success) {\r\n                var formattedData = [];\r\n                for (var i = 0; i < res.data.length; i++) {\r\n                    var approvalRequired = (res.data[i].IsApprovalRequired.data[0] == 1) ? (\"Yes\") : (\"No\");\r\n                    formattedData.push({\r\n                        id: [i + 1],\r\n                        MooringGuideId: res.data[i].MooringGuideId,\r\n                        name: res.data[i].MooringName,\r\n                        Country: res.data[i].countryName,\r\n                        County: res.data[i].Region,\r\n                        Location: res.data[i].Location,\r\n                        location_type: res.data[i].LocationType,\r\n                        Loading: res.data[i].LoadingPercent.toFixed(2),\r\n                        mooring_Type: res.data[i].MooringType,\r\n                        approval_Required: approvalRequired,\r\n                        CountryId: res.data[i].CountryId,\r\n                        Longitude: res.data[i].Longitude,\r\n                        Latitude: res.data[i].Latitude,\r\n                        Notes: res.data[i].Notes,\r\n                        MooringZone: res.data[i].MooringZone\r\n                    });\r\n                }\r\n                let lastPage = (this.state.rowsPerPage < formattedData.length) ? this.state.rowsPerPage : formattedData.length;\r\n                let str = '1 to ' + lastPage + ' out of ' + formattedData.length + ' records';\r\n                this.setState({ arr: formattedData, str: str });\r\n            } else {\r\n                console.log(\"Else\");\r\n\r\n            }\r\n        }).catch(err => {\r\n\r\n        });\r\n    }\r\n\r\n    getPageString = (e) => {\r\n        let firstPage = e.first + 1;\r\n        let l = e.rows * (e.page + 1);\r\n        let lastPage = (l < this.state.arr.length) ? l : this.state.arr.length\r\n        var str = firstPage + ' to ' + lastPage + ' out of ' + this.state.arr.length + ' records';\r\n        this.setState({ selectedPage: e.first, str: str, rowsPerPage: e.rows });\r\n    }\r\n\r\n    onColumnToggle(event) {\r\n        let valueInOrder = event.value.sort((x, y) => { return x.id - y.id });\r\n        this.setState({ cols: valueInOrder });\r\n    }\r\n\r\n    actionTemplate(rowData, column) {\r\n        return <div>\r\n            <Button type=\"button\" tooltip=\"Edit\" tooltipOptions={{ position: 'bottom' }} icon=\"pi pi-pencil\" className=\"p-button-warning\" style={{ marginRight: '.5em' }} onClick={() => this.onEditRow(rowData)}></Button>\r\n        </div>;\r\n    }\r\n\r\n    export() {\r\n        this.dt.exportCSV();\r\n    }\r\n\r\n    addMoreMooringGuide = () => {\r\n        this.props.history.push({\r\n            pathname: '/AddMooringGuide'\r\n        });\r\n        // this.props.history.push('/AddMooringGuide');\r\n    }\r\n\r\n    onEditRow = (rowData) => {debugger\r\n        var Id = rowData.MooringGuideId;\r\n        this.props.history.push({\r\n            pathname: '/EditMooringGuide/' + Id,\r\n            state: {\r\n                Id: Id,\r\n            }\r\n        });\r\n    }\r\n\r\n    render() {\r\n        let columns = this.state.cols.map((col, i) => {\r\n            return <Column field={col.field} header={col.header} body={col.body} sortable={col.sortable} filter={col.filter} filterMatchMode=\"contains\" />;\r\n        });\r\n        return (\r\n            <div>\r\n                <div className=\"basic-header\">\r\n                    <h1>Mooring Guide</h1>\r\n                    <div className=\"header-right-option\">\r\n                        <div style={{ textAlign: 'right' }}>\r\n                            <i className=\"pi pi-search\" style={{ margin: '4px 4px 0 0' }}></i>\r\n                            <InputText type=\"search\" onInput={(e) => this.setState({ globalFilter: e.target.value })} placeholder=\"Global Search\" size=\"30\" style={{ marginRight: 10 }} />\r\n                        </div>\r\n\r\n                        <MultiSelect value={this.state.cols} options={this.colOptions}\r\n                            fixedPlaceholder={true} placeholder={CommonConfig.dataTableConfig.columnToggleIcon} tooltip=\"Show / Hide Column\"\r\n                            onChange={this.onColumnToggle} style={{ width: '50px' }}\r\n                        />\r\n\r\n                        <Button type=\"button\" icon=\"pi pi-plus\" tooltip=\"Add Mooring Guide\" tooltipOptions={{ position: 'bottom' }} onClick={() => this.addMoreMooringGuide()}></Button>\r\n                        <Button type=\"button\" icon=\"pi pi-external-link\" tooltip=\"Export As CSV\" tooltipOptions={{ position: 'bottom' }} onClick={() => this.export()}></Button>\r\n                    </div>\r\n                </div>\r\n                <div className=\"table-custom\">\r\n                    <DataTable\r\n                        ref={(el) => this.dt = el}\r\n                        value={this.state.arr}\r\n                        first={this.state.selectedPage}\r\n                        onPage={(e) => this.getPageString(e)}\r\n                        // onRowClick={(e) => this.onEditRow(e)}\r\n                        paginator={true}\r\n                        rows={this.state.rowsPerPage}\r\n                        totalRecords={this.state.arr.length}\r\n                        exportFilename=\"Mooring Guide List\"\r\n                        currentPageReportTemplate={this.state.str}\r\n                        scrollable={true} scrollHeight=\"250px\"\r\n                        paginatorTemplate=\"CurrentPageReport FirstPageLink PrevPageLink PageLinks NextPageLink LastPageLink RowsPerPageDropdown\"\r\n                        rowsPerPageOptions={this.state.rowsPerPageOptions}\r\n                        globalFilter={this.state.globalFilter}\r\n                        emptyMessage=\"No records found\"\r\n                        responsive={true}\r\n                        resizableColumns={true}\r\n                        columnResizeMode=\"fit\"\r\n                        scrollable={true}\r\n                        scrollHeight=\"265px\">\r\n                        {columns}\r\n                    </DataTable>\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nexport default mooringGuide;"]},"metadata":{},"sourceType":"module"}