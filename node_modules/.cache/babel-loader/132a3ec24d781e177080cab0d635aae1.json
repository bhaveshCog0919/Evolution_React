{"ast":null,"code":"import _classCallCheck from\"/Users/bhavik/Downloads/Cognisun/Evolution/Evolution_React/evolution_new/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/bhavik/Downloads/Cognisun/Evolution/Evolution_React/evolution_new/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _assertThisInitialized from\"/Users/bhavik/Downloads/Cognisun/Evolution/Evolution_React/evolution_new/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";import _inherits from\"/Users/bhavik/Downloads/Cognisun/Evolution/Evolution_React/evolution_new/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/bhavik/Downloads/Cognisun/Evolution/Evolution_React/evolution_new/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component}from'react';import Select from'react-select';import api from'../../utils/apiClient';import moment from'moment';import DatePicker from'react-date-picker';import{withTranslation}from'react-i18next';import{DataTable}from'primereact/datatable';import{Column}from'primereact/column';import{CommonConfig}from'../../utils/constants';import{Button}from'primereact/button';import{MultiSelect}from'primereact/multiselect';import{Collapse,Button as BTN,Input,Card,CardHeader,CardBody,Row,Col}from'reactstrap';import APIConstant from'../../utils/constants';import'primereact/resources/themes/nova-light/theme.css';import'primereact/resources/primereact.min.css';import'primeicons/primeicons.css';import{Modal,ModalBody,ModalHeader,ModalFooter}from'reactstrap';import{toast}from'react-toastify';import SearchBox from'react-google-maps/lib/components/places/SearchBox';var MonitoringReport=/*#__PURE__*/function(_Component){_inherits(MonitoringReport,_Component);var _super=_createSuper(MonitoringReport);function MonitoringReport(props){var _this;_classCallCheck(this,MonitoringReport);_this=_super.call(this,props);_this.getPageString=function(e){var firstPage=e.first+1;var l=e.rows*(e.page+1);var lastPage=l<_this.state.arr.length?l:_this.state.arr.length;var str=firstPage+' to '+lastPage+' out of '+_this.state.arr.length+' records';_this.setState({selectedPage:e.first,str:str,rowsPerPage:e.rows});};var columns=[{field:\"SrNO\",header:\"Sr No\",sortable:true,filter:true,id:0},{field:\"MessageType\",header:\"MessageType\",sortable:true,filter:true,id:1},{field:\"MessageText\",header:\"MessageText\",sortable:true,filter:true,id:2},{field:\"Param\",header:\"Param\",sortable:true,filter:true,id:3},{field:\"Comment\",header:\"Comment\",sortable:true,filter:true,id:4},{body:_this.CreatedOn.bind(_assertThisInitialized(_this)),field:\"CreatedOn/UpdatedOn\",header:\"CreatedOn/UpdatedOn\",sortable:true,filter:true,id:5},{body:_this.CreatedBy.bind(_assertThisInitialized(_this)),field:\"CreatedBy/UpdatedBy\",header:\"CreatedBy/UpdatedBy\",sortable:true,filter:true,id:6}];_this.state={LanguageId:props.i18n.language==='en'?'en-GB':props.i18n.language==='es'?'es-ES':props.i18n.language==='ie'?'en-IE':props.i18n.language,cols:columns,arr:[],selectedPage:0,rowsPerPageOptions:CommonConfig.dataTableConfig.rowsPerPageOptions,str:'',rowsPerPage:CommonConfig.dataTableConfig.rowsPerPage,globalFilter:null,searchCollapse:false};_this.colOptions=[];for(var _i=0,_columns=columns;_i<_columns.length;_i++){var col=_columns[_i];_this.colOptions.push({label:col.header,value:col});}_this.export=_this.export.bind(_assertThisInitialized(_this));return _this;}_createClass(MonitoringReport,[{key:\"componentDidMount\",value:function componentDidMount(){this.MonitoringReport();}},{key:\"CreatedOn\",value:function CreatedOn(rowData){return/*#__PURE__*/React.createElement(\"div\",{className:\"policy-list-data\"},/*#__PURE__*/React.createElement(\"p\",null,rowData.CreatedOn),/*#__PURE__*/React.createElement(\"p\",null,rowData.UpdatedOn));}},{key:\"CreatedBy\",value:function CreatedBy(rowData){return/*#__PURE__*/React.createElement(\"div\",{className:\"policy-list-data\"},/*#__PURE__*/React.createElement(\"p\",null,rowData.CreatedBy),/*#__PURE__*/React.createElement(\"p\",null,rowData.UpdatedBy));}},{key:\"MonitoringReport\",value:function MonitoringReport(){var _this2=this;api.post('api/MonitoringReport','').then(function(res){if(res.success){var formattedData=[];var dataLength=res.data[0].length;if(dataLength>0){for(var i=0;i<dataLength;i++){var tempData=res.data[0][i];console.log(\"tempData\",tempData);formattedData.push({SrNO:tempData.Id,MessageType:tempData.MessageType,MessageText:tempData.MessageText,Param:tempData.Param,Comment:tempData.Comment,CreatedBy:tempData.CreatedBy,UpdatedBy:tempData.UpdatedBy,CreatedOn:moment(tempData.CreatedOn).format('DD/MM/YYYY'),UpdatedOn:moment(tempData.UpdatedOn).format('DD/MM/YYYY')});}}var firstPage=formattedData.length?'1':'0';var lastPage=_this2.state.rowsPerPage<formattedData.length?_this2.state.rowsPerPage:formattedData.length;var str=firstPage+' to '+lastPage+' out of '+formattedData.length+' records';_this2.setState({arr:formattedData,str:str});}});}},{key:\"export\",value:function _export(){this.dt.exportCSV();}},{key:\"render\",value:function render(){var _this3=this;var t=this.props.t;var header=null;var columns=this.state.cols.map(function(col,i){return/*#__PURE__*/React.createElement(Column,{key:i,field:col.field,header:col.header,body:col.body,sortable:col.sortable,filter:col.filter,filterMatchMode:col.filterMatchMode,style:col.style});});return/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"div\",{className:\"basic-header\"},/*#__PURE__*/React.createElement(\"h1\",null,\"Monitoring Report\"),/*#__PURE__*/React.createElement(\"div\",{className:\"header-right-option\"},/*#__PURE__*/React.createElement(MultiSelect,{value:this.state.cols,options:this.colOptions,fixedPlaceholder:true,placeholder:CommonConfig.dataTableConfig.columnToggleIcon,tooltip:\"Show / Hide Column\",tooltipOptions:{position:'bottom'},onChange:this.onColumnToggle,style:{width:'50px'}}),/*#__PURE__*/React.createElement(Button,{type:\"button\",icon:\"pi pi-external-link\",tooltip:\"Export as CSV\",tooltipOptions:{position:'bottom'},onClick:this.export,style:{marginRight:10}}))),/*#__PURE__*/React.createElement(\"div\",{className:\"table-custom\"},/*#__PURE__*/React.createElement(DataTable,{ref:function ref(el){return _this3.dt=el;},value:this.state.arr,first:this.state.selectedPage,onPage:function onPage(e){return _this3.getPageString(e);},paginator:true,rows:this.state.rowsPerPage,header:header,totalRecords:this.state.arr.length,exportFilename:\"Sub Agent Statement\",currentPageReportTemplate:this.state.str,scrollable:true,paginatorTemplate:\"CurrentPageReport FirstPageLink PrevPageLink PageLinks NextPageLink LastPageLink RowsPerPageDropdown\",rowsPerPageOptions:this.state.rowsPerPageOptions,globalFilter:this.state.globalFilter,emptyMessage:\"No records found\",responsive:true,resizableColumns:true,columnResizeMode:\"expand\"},columns)));}}]);return MonitoringReport;}(Component);export default withTranslation()(MonitoringReport);","map":{"version":3,"sources":["/Users/bhavik/Downloads/Cognisun/Evolution/Evolution_React/evolution_new/src/views/Reports/MonitoringReport.js"],"names":["React","Component","Select","api","moment","DatePicker","withTranslation","DataTable","Column","CommonConfig","Button","MultiSelect","Collapse","BTN","Input","Card","CardHeader","CardBody","Row","Col","APIConstant","Modal","ModalBody","ModalHeader","ModalFooter","toast","SearchBox","MonitoringReport","props","getPageString","e","firstPage","first","l","rows","page","lastPage","state","arr","length","str","setState","selectedPage","rowsPerPage","columns","field","header","sortable","filter","id","body","CreatedOn","bind","CreatedBy","LanguageId","i18n","language","cols","rowsPerPageOptions","dataTableConfig","globalFilter","searchCollapse","colOptions","col","push","label","value","export","rowData","UpdatedOn","UpdatedBy","post","then","res","success","formattedData","dataLength","data","i","tempData","console","log","SrNO","Id","MessageType","MessageText","Param","Comment","format","dt","exportCSV","t","map","filterMatchMode","style","columnToggleIcon","position","onColumnToggle","width","marginRight","el"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\r\nimport Select from 'react-select';\r\nimport api from '../../utils/apiClient';\r\nimport moment from 'moment';\r\nimport DatePicker from 'react-date-picker';\r\nimport { withTranslation } from 'react-i18next';\r\nimport { DataTable } from 'primereact/datatable';\r\nimport { Column } from 'primereact/column';\r\nimport { CommonConfig } from '../../utils/constants';\r\nimport { Button } from 'primereact/button';\r\nimport { MultiSelect } from 'primereact/multiselect';\r\nimport { Collapse, Button as BTN, Input, Card, CardHeader, CardBody, Row, Col } from 'reactstrap';\r\nimport APIConstant from '../../utils/constants';\r\nimport 'primereact/resources/themes/nova-light/theme.css';\r\nimport 'primereact/resources/primereact.min.css';\r\nimport 'primeicons/primeicons.css';\r\nimport { Modal, ModalBody, ModalHeader, ModalFooter } from 'reactstrap';\r\nimport { toast } from 'react-toastify';\r\nimport SearchBox from 'react-google-maps/lib/components/places/SearchBox';\r\n\r\nclass MonitoringReport extends Component {\r\n\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        let columns = [\r\n            { field: \"SrNO\", header: \"Sr No\", sortable: true, filter: true, id: 0 },\r\n            { field: \"MessageType\", header: \"MessageType\", sortable: true, filter: true, id: 1 },\r\n            { field: \"MessageText\", header: \"MessageText\", sortable: true, filter: true, id: 2 },\r\n            { field: \"Param\", header: \"Param\", sortable: true, filter: true, id: 3 },\r\n            { field: \"Comment\", header: \"Comment\", sortable: true, filter: true, id: 4 },\r\n            { body: this.CreatedOn.bind(this), field: \"CreatedOn/UpdatedOn\", header: \"CreatedOn/UpdatedOn\", sortable: true, filter: true, id: 5 },\r\n            { body: this.CreatedBy.bind(this), field: \"CreatedBy/UpdatedBy\", header: \"CreatedBy/UpdatedBy\", sortable: true, filter: true, id: 6 },\r\n        ];\r\n\r\n        this.state = {\r\n            LanguageId: (props.i18n.language === 'en') ? 'en-GB' : (props.i18n.language === 'es') ? 'es-ES' : (props.i18n.language === 'ie') ? 'en-IE' : props.i18n.language,\r\n            cols: columns,\r\n            arr: [],\r\n            selectedPage: 0,\r\n            rowsPerPageOptions: CommonConfig.dataTableConfig.rowsPerPageOptions,\r\n            str: '',\r\n            rowsPerPage: CommonConfig.dataTableConfig.rowsPerPage,\r\n            globalFilter: null,\r\n            searchCollapse: false,\r\n        };\r\n\r\n        this.colOptions = [];\r\n        for (let col of columns) {\r\n            this.colOptions.push({ label: col.header, value: col });\r\n        }\r\n\r\n        this.export = this.export.bind(this);\r\n    }\r\n\r\n    componentDidMount() {\r\n        this.MonitoringReport();\r\n    }\r\n\r\n    CreatedOn(rowData) {\r\n        return (\r\n            <div className=\"policy-list-data\">\r\n                <p>{rowData.CreatedOn}</p>\r\n                <p>{rowData.UpdatedOn}</p>\r\n            </div>\r\n        )\r\n    }\r\n\r\n    CreatedBy(rowData) {\r\n        return (\r\n            <div className=\"policy-list-data\">\r\n                <p>{rowData.CreatedBy}</p>\r\n                <p>{rowData.UpdatedBy}</p>\r\n            </div>\r\n        )\r\n    }\r\n\r\n    MonitoringReport() {\r\n        api.post('api/MonitoringReport', '').then(res => {\r\n            if (res.success) {\r\n                var formattedData = [];\r\n\r\n                var dataLength = res.data[0].length;\r\n                if (dataLength > 0) {\r\n                    for (let i = 0; i < dataLength; i++) {\r\n                        var tempData = res.data[0][i];\r\n                        console.log(\"tempData\", tempData);\r\n                        formattedData.push({\r\n                            SrNO: tempData.Id,\r\n                            MessageType: tempData.MessageType,\r\n                            MessageText: tempData.MessageText,\r\n                            Param: tempData.Param,\r\n                            Comment: tempData.Comment,\r\n                            CreatedBy: tempData.CreatedBy,\r\n                            UpdatedBy: tempData.UpdatedBy,\r\n                            CreatedOn: moment(tempData.CreatedOn).format('DD/MM/YYYY'),\r\n                            UpdatedOn: moment(tempData.UpdatedOn).format('DD/MM/YYYY')\r\n\r\n                        });\r\n                    }\r\n                }\r\n\r\n                let firstPage = (formattedData.length) ? '1' : '0';\r\n                let lastPage = (this.state.rowsPerPage < formattedData.length) ? this.state.rowsPerPage : formattedData.length;\r\n                let str = firstPage + ' to ' + lastPage + ' out of ' + formattedData.length + ' records';\r\n                this.setState({ arr: formattedData, str: str });\r\n            }\r\n        });\r\n    }\r\n\r\n    getPageString = (e) => {\r\n        let firstPage = e.first + 1;\r\n        let l = e.rows * (e.page + 1);\r\n        let lastPage = (l < this.state.arr.length) ? l : this.state.arr.length\r\n        var str = firstPage + ' to ' + lastPage + ' out of ' + this.state.arr.length + ' records';\r\n        this.setState({ selectedPage: e.first, str: str, rowsPerPage: e.rows });\r\n    }\r\n\r\n    export() {\r\n        this.dt.exportCSV();\r\n    }\r\n\r\n    render() {\r\n        const { t } = this.props;\r\n        var header = null;\r\n\r\n        let columns = this.state.cols.map((col, i) => {\r\n            return <Column key={i} field={col.field} header={col.header} body={col.body} sortable={col.sortable} filter={col.filter} filterMatchMode={col.filterMatchMode} style={col.style}\r\n            />;\r\n        });\r\n\r\n        return (\r\n            <div>\r\n                <div className=\"basic-header\">\r\n                    <h1>Monitoring Report</h1>\r\n                    <div className=\"header-right-option\">\r\n                        <MultiSelect value={this.state.cols} options={this.colOptions}\r\n                            fixedPlaceholder={true} placeholder={CommonConfig.dataTableConfig.columnToggleIcon} tooltip=\"Show / Hide Column\" tooltipOptions={{ position: 'bottom' }}\r\n                            onChange={this.onColumnToggle} style={{ width: '50px' }}\r\n                        />\r\n\r\n                        <Button type=\"button\" icon=\"pi pi-external-link\" tooltip=\"Export as CSV\" tooltipOptions={{ position: 'bottom' }} onClick={this.export} style={{ marginRight: 10 }}></Button>\r\n                    </div>\r\n                </div>\r\n\r\n                <div className=\"table-custom\">\r\n                    <DataTable ref={(el) => this.dt = el} value={this.state.arr} first={this.state.selectedPage} onPage={(e) => this.getPageString(e)}\r\n                        paginator={true} rows={this.state.rowsPerPage} header={header} totalRecords={this.state.arr.length} exportFilename=\"Sub Agent Statement\"\r\n                        currentPageReportTemplate={this.state.str}\r\n                        scrollable={true}\r\n                        paginatorTemplate=\"CurrentPageReport FirstPageLink PrevPageLink PageLinks NextPageLink LastPageLink RowsPerPageDropdown\"\r\n                        rowsPerPageOptions={this.state.rowsPerPageOptions} globalFilter={this.state.globalFilter} emptyMessage=\"No records found\"\r\n                        responsive={true} resizableColumns={true} columnResizeMode=\"expand\">\r\n                        {columns}\r\n                    </DataTable>\r\n                </div>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\n\r\nexport default withTranslation()(MonitoringReport);\r\n"]},"metadata":{},"sourceType":"module"}