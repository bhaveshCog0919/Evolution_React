{"ast":null,"code":"import _defineProperty from\"/Users/bhavik/Downloads/Cognisun/Evolution/Evolution_React/evolution_new/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _classCallCheck from\"/Users/bhavik/Downloads/Cognisun/Evolution/Evolution_React/evolution_new/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/bhavik/Downloads/Cognisun/Evolution/Evolution_React/evolution_new/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _possibleConstructorReturn from\"/Users/bhavik/Downloads/Cognisun/Evolution/Evolution_React/evolution_new/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";import _assertThisInitialized from\"/Users/bhavik/Downloads/Cognisun/Evolution/Evolution_React/evolution_new/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";import _inherits from\"/Users/bhavik/Downloads/Cognisun/Evolution/Evolution_React/evolution_new/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/bhavik/Downloads/Cognisun/Evolution/Evolution_React/evolution_new/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";/* eslint-disable jsx-a11y/anchor-is-valid */import React,{Component}from'react';import{toast}from'react-toastify';import api from'../../../../utils/apiClient';import APIConstant from'../../../../utils/constants';import{MultiSelect}from'primereact/multiselect';import{InputText}from'primereact/inputtext';import{CommonConfig}from'../../../../utils/constants';import{AutoComplete}from'primereact/autocomplete';import{DataTable}from'primereact/datatable';import{Column}from'primereact/column';import moment from'moment';import CKEditor from'ckeditor4-react';import{Modal,ModalHeader,ModalBody,Nav,NavItem,NavLink,ButtonDropdown,DropdownToggle,DropdownMenu,DropdownItem,Badge,Button,ButtonGroup,FormGroup,Input,Button as BTN,Form,Label,Row,Col}from'reactstrap';var simpleParser=require('mailparser').simpleParser;var _=require('lodash');var Message=/*#__PURE__*/function(_Component){_inherits(Message,_Component);var _super=_createSuper(Message);function Message(props){var _this;_classCallCheck(this,Message);_this=_super.call(this,props);_this.selectDocument=function(event){var docuCustom=[];if(event.target.files&&event.target.files){for(var i=0;i<event.target.files.length;i++){docuCustom.push(event.target.files[i]);}_this.setState({customDoc:_this.state.customDoc.concat(docuCustom)});}else{}};_this.downloadData=function(rowdata){var blob=new Blob([rowdata.content],{type:rowdata.contentType});var link=document.createElement('a');link.href=window.URL.createObjectURL(blob);var fileName=rowdata.filename;link.download=fileName;link.click();};_this.handleChange=function(e){_this.setState(_defineProperty({},e.target.name,e.target.value));if(e.target.name==='emailTo'){if(e.target.value===''||e.target.value===null){_this.setState({emailTo:''});}else{_this.setState({emailTo:e.target.value});}}if(e.target.name==='emailFrom'){if(e.target.value===''||e.target.value===null){_this.setState({emailFrom:''});}else{_this.setState({emailFrom:e.target.value});}}if(e.target.name==='emailCC'){if(e.target.value===''||e.target.value===null){_this.setState({emailCC:''});}else{_this.setState({emailCC:e.target.value});}}if(e.target.name==='emailBCC'){if(e.target.value===''||e.target.value===null){_this.setState({emailBCC:''});}else{_this.setState({emailBCC:e.target.value});}}if(e.target.name==='emailSubject'){if(e.target.value===''||e.target.value===null){_this.setState({emailSubject:''});}else{_this.setState({emailSubject:e.target.value});}}};_this.mulSelect=function(e){_this.setState({selectedDocuments:e});};_this.getPageString=function(e){var firstPage=e.first+1;var l=e.rows*(e.page+1);var lastPage=l<_this.state.documentList.length?l:_this.state.documentList.length;var str=firstPage+' to '+lastPage+' out of '+_this.state.documentList.length+' records';_this.setState({selectedPage:e.first,str:str,rowsPerPage:e.rows});};if(_this.props.location.state==undefined){_this.props.history.push({pathname:'/apps/email/inbox'});return _possibleConstructorReturn(_this);}var columns=[{selectionMode:\"multiple\",style:{width:'3em'},id:0},{field:\"Filename\",header:\"Name\",sortable:true,filter:true,id:1},{body:_this.formatCreatedDate.bind(_assertThisInitialized(_this)),field:\"CreatedOn\",header:\"Created\",sortable:true,filter:true,id:2},{field:\"forename\",header:\"CreatedBy\",sortable:true,filter:true,id:3},{field:\"Directory\",header:\"Directory\",sortable:true,filter:true,id:4}];_this.toggle=_this.toggle.bind(_assertThisInitialized(_this));_this.state={messageType:_this.props.location.state.type,documentType:\"\",replytoView:false,replyAllView:false,forwordView:false,attachmentURL:[],totalDocument:[],selectedDocuments:[],cols:columns,str:'',customDoc:[],openAttachmentPopup:false,filteredPolicysSingle:null,selectedPolicy:null,selectedPolicyId:null,policysData:[],documentList:[],dropdownOpen:false,emails:_this.props.location.state.email,emailBody:\"\",emailBodyError:false,InboxCount:_this.props.location.state.InboxCount,attachment:[],emailFrom:_this.props.location.state.email.FromEmail,emailFromName:_this.props.location.state.email.FromName,emailTo:_this.props.location.state.email.FromEmail,emailCC:_this.props.location.state.email.CCEmail,emailBCC:_this.props.location.state.email.BCCEmail,emailSubject:\"Re:\"+_this.props.location.state.email.Subject};_this.colOptions=[];for(var _i=0,_columns=columns;_i<_columns.length;_i++){var col=_columns[_i];_this.colOptions.push({label:col.header,value:col});}_this.onColumnToggle=_this.onColumnToggle.bind(_assertThisInitialized(_this));_this.handleDetailsChange=_this.handleDetailsChange.bind(_assertThisInitialized(_this));_this.getAttachment();if(_this.state.emails.IsViewed.data[0]==0){_this.addRemoveFlag(_this.state.emails,\"SEEN\",false);}return _this;}_createClass(Message,[{key:\"deleteMessage\",value:function deleteMessage(emails){var _this2=this;var data={\"uid\":emails.EmailUID,\"boxName\":\"INBOX\",\"searchType\":\"ALL\"};api.post(APIConstant.path.deleteMessage,data).then(function(res){if(res.success){_this2.props.history.push({pathname:'/apps/email/inbox'});}}).catch(function(err){console.log(err);});}},{key:\"addRemoveFlag\",value:function addRemoveFlag(emails,FlagName,remove){var _this3=this;var data={\"uid\":emails.EmailUID,\"boxName\":\"INBOX\",\"flagname\":FlagName,\"remove\":remove};api.post(APIConstant.path.addRemoveFlag,data).then(function(res){if(res.success){if(FlagName==\"FLAGGED\"&&remove==false){_this3.state.emails.IsImportant.data[0]=1;}else if(FlagName==\"FLAGGED\"&&remove==true){_this3.state.emails.IsImportant.data[0]=0;}else if(FlagName==\"SEEN\"&&remove==true){_this3.state.emails.IsViewed.data[0]=0;}else if(FlagName==\"SEEN\"&&remove==true){_this3.state.emails.IsViewed.data[0]=0;}}}).catch(function(err){console.log(err);});}},{key:\"onColumnToggle\",value:function onColumnToggle(event){var valueInOrder=event.value.sort(function(x,y){return x.id-y.id;});this.setState({cols:valueInOrder});}},{key:\"formatCreatedDate\",value:function formatCreatedDate(rowData){return moment(rowData.CreatedOn).format(CommonConfig.dateFormat.dateTime);}},{key:\"removeDocument\",value:function removeDocument(type,index){if(type==\"policy\"){this.state.selectedDocuments.splice(index,1);}else{this.state.customDoc.splice(index,1);}}},{key:\"getDocumentList\",value:function getDocumentList(){var _this4=this;try{var data={\"pPolicyId\":this.state.policysData[0].policyId,'CurrentUser':CommonConfig.loggedInUserData().EntityId};api.post(\"api/getDocumentList\",data).then(function(res){console.log(\"res\",res);if(res.success){var lastPage=_this4.state.rowsPerPage<res.data.length?_this4.state.rowsPerPage:res.data.length;var str='1 to '+lastPage+' out of '+res.data.length+' records';_this4.setState({documentList:res.data,str:str,openAttachmentPopup:true});}else{}}).catch(function(err){});}catch(error){}}},{key:\"selectType\",value:function selectType(value,type){//need to select template\nif(type==='selectPolicy'){if(value===''||value===undefined||value===null){this.setState({selectedPolicy:'',selectedPolicyId:''});}else{this.setState({selectedPolicy:value});}}if(type==='documentType'){if(value===''||value===undefined||value===null){this.setState({documentType:''});}else{this.setState({documentType:value});if(value==\"1\"){this.setState({openAttachmentPopup:true});}else{document.getElementById(\"customDoc\").click();}}}}},{key:\"handleDetailsChange\",value:function handleDetailsChange(evt){var data=evt.editor.getData();if(CommonConfig.isEmpty(data)){this.setState({emailBodyError:true,emailBody:''});// this.show(\"customEndorsementDetails\", true);\n}else{this.setState({emailBodyError:false,emailBody:data});// this.show(\"customEndorsementDetails\", false);\n}}},{key:\"filterPolicySingle\",value:function filterPolicySingle(){var _this5=this;var data={\"pPolicyId\":'',\"pPolicyNumber\":this.state.selectedPolicy,\"CurrentUser\":CommonConfig.loggedInUserData().EntityId};api.post(APIConstant.path.getPolicyAutoComplete,data).then(function(res){if(res.success){_this5.setState({policysData:res.data});_this5.getDocumentList();}else{_this5.setState({policysData:[]});toast.error(res.data[0].returnValue);}}).catch(function(err){console.log(err);});}},{key:\"forwordMail\",value:function forwordMail(){var _this6=this;var emailDataForm=new FormData();emailDataForm.append(\"to\",this.state.emailTo);emailDataForm.append(\"replyTo\",this.state.emails.InReplyTo);emailDataForm.append(\"messageId\",this.state.emails.MessageId);emailDataForm.append(\"from\",this.state.emailFrom);emailDataForm.append(\"cc\",this.state.emailCC);emailDataForm.append(\"bcc\",this.state.emailBCC);emailDataForm.append(\"subject\",this.state.emailSubject);emailDataForm.append(\"mail\",'RenewalMail');emailDataForm.append(\"EmailSenderId\",CommonConfig.loggedInUserData().EntityId);emailDataForm.append(\"html\",this.state.emailBody);emailDataForm.append(\"selectedDocuments\",JSON.stringify(this.state.selectedDocuments));for(var i=0;i<this.state.customDoc.length;i++){emailDataForm.append(\"File\",this.state.customDoc[i],this.state.customDoc[i].name);}api.post(APIConstant.path.forwordMail,emailDataForm).then(function(res){if(res.success){toast.success('Mail Send Successful!');_this6.props.history.push({pathname:'/apps/email/inbox'});}else{toast.error('Mail Send Failed!');}}).catch(function(err){console.log(err);});}},{key:\"sendReplyAll\",value:function sendReplyAll(){var _this7=this;var emailDataForm=new FormData();emailDataForm.append(\"to\",this.state.emailTo);emailDataForm.append(\"replyTo\",this.state.emails.InReplyTo);emailDataForm.append(\"messageId\",this.state.emails.MessageId);emailDataForm.append(\"from\",this.state.emailFrom);emailDataForm.append(\"cc\",this.state.emailCC);emailDataForm.append(\"bcc\",this.state.emailBCC);emailDataForm.append(\"subject\",this.state.emailSubject);emailDataForm.append(\"mail\",'RenewalMail');emailDataForm.append(\"EmailSenderId\",CommonConfig.loggedInUserData().EntityId);emailDataForm.append(\"html\",this.state.emailBody);emailDataForm.append(\"selectedDocuments\",JSON.stringify(this.state.selectedDocuments));for(var i=0;i<this.state.customDoc.length;i++){emailDataForm.append(\"File\",this.state.customDoc[i],this.state.customDoc[i].name);}api.post(APIConstant.path.forwordMail,emailDataForm).then(function(res){if(res.success){toast.success('Mail Send Successful!');_this7.props.history.push({pathname:'/apps/email/inbox'});}else{toast.error('Mail Send Failed!');}}).catch(function(err){console.log(err);});}},{key:\"sendReply\",value:function sendReply(){var _this8=this;var emailDataForm=new FormData();emailDataForm.append(\"to\",this.state.emailTo);emailDataForm.append(\"replyTo\",this.state.emails.InReplyTo);emailDataForm.append(\"messageId\",this.state.emails.MessageId);emailDataForm.append(\"from\",this.state.emailFrom);emailDataForm.append(\"cc\",this.state.emailCC);emailDataForm.append(\"bcc\",this.state.emailBCC);emailDataForm.append(\"subject\",this.state.emailSubject);emailDataForm.append(\"mail\",'RenewalMail');emailDataForm.append(\"EmailSenderId\",CommonConfig.loggedInUserData().EntityId);emailDataForm.append(\"html\",this.state.emailBody);emailDataForm.append(\"selectedDocuments\",JSON.stringify(this.state.selectedDocuments));for(var i=0;i<this.state.customDoc.length;i++){emailDataForm.append(\"File\",this.state.customDoc[i],this.state.customDoc[i].name);}api.post(APIConstant.path.sendReply,emailDataForm).then(function(res){if(res.success){toast.success('Mail Send Successful!');_this8.props.history.push({pathname:'/apps/email/inbox'});}else{toast.error('Mail Send Failed!');}}).catch(function(err){console.log(err);});}},{key:\"getAttachment\",value:function getAttachment(){var _this9=this;var data={\"uid\":this.state.emails.EmailUID,\"boxName\":this.state.messageType==\"sent\"?\"INBOX.Sent\":\"INBOX\"};api.post(APIConstant.path.getAttachment,data).then(function(res){if(res.success){var all=_.find(res.data[0].parts,{\"which\":\"\"});var id=_this9.state.emails.EmailUID;var idHeader=\"Imap-Id: \"+id+\"\\r\\n\";simpleParser(idHeader+all.body,function(err,mail){_this9.setState({emailBody:mail.html==false?mail.textAsHtml:mail.html,attachment:mail.attachments});});}}).catch(function(err){console.log(err);});}},{key:\"toggle\",value:function toggle(){this.setState({dropdownOpen:!this.state.dropdownOpen});}},{key:\"createMarkup\",value:function createMarkup(){return{__html:this.state.emailBody};}},{key:\"render\",value:function render(){var _this10=this;var header=/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"div\",{style:{'textAlign':'Right',marginTop:10}},/*#__PURE__*/React.createElement(Row,null,/*#__PURE__*/React.createElement(Col,null,/*#__PURE__*/React.createElement(\"div\",{className:\"basic-header\"},/*#__PURE__*/React.createElement(\"div\",{className:\"header-right-option\"},/*#__PURE__*/React.createElement(\"div\",{style:{textAlign:'right'}},/*#__PURE__*/React.createElement(\"i\",{className:\"pi pi-search\",style:{margin:'4px 4px 0 0'}}),/*#__PURE__*/React.createElement(InputText,{type:\"search\",onInput:function onInput(e){return _this10.setState({globalFilter:e.target.value});},placeholder:\"Global Search\",size:\"30\",style:{marginRight:10}})),/*#__PURE__*/React.createElement(MultiSelect,{value:this.state.cols,options:this.colOptions,fixedPlaceholder:true,placeholder:CommonConfig.dataTableConfig.columnToggleIcon,tooltip:\"Show / Hide Column\",onChange:this.onColumnToggle,style:{width:'50px'}})))))));var columns=this.state.cols.map(function(col,i){return/*#__PURE__*/React.createElement(Column,{field:col.field,header:col.header,body:col.body,sortable:col.sortable,filter:col.filter,selectionMode:col.selectionMode,style:col.style});});return/*#__PURE__*/React.createElement(\"div\",{className:\"animated fadeIn\"},/*#__PURE__*/React.createElement(\"div\",{className:\"email-app mb-4\"},/*#__PURE__*/React.createElement(\"nav\",null,/*#__PURE__*/React.createElement(\"a\",{href:\"#/apps/email/compose\",className:\"btn btn-danger btn-block\"},\"New Email\"),/*#__PURE__*/React.createElement(Nav,null,/*#__PURE__*/React.createElement(NavItem,null,/*#__PURE__*/React.createElement(NavLink,{href:\"#/apps/email/inbox\"},/*#__PURE__*/React.createElement(\"i\",{className:\"fa fa-inbox\"}),\" Inbox \",/*#__PURE__*/React.createElement(Badge,{color:\"danger\"}))),/*#__PURE__*/React.createElement(NavItem,null,/*#__PURE__*/React.createElement(NavLink,{href:\"#/apps/email/sent\"},/*#__PURE__*/React.createElement(\"i\",{className:\"fa fa-inbox\"}),\" Sent \")))),/*#__PURE__*/React.createElement(\"main\",{className:\"message\"},this.state.messageType!='sent'?this.state.replytoView==false&&this.state.replyAllView==false&&this.state.forwordView==false?/*#__PURE__*/React.createElement(\"div\",{className:\"toolbar\"},/*#__PURE__*/React.createElement(ButtonGroup,{className:'mr-1'},this.state.emails.IsImportant.data[0]==1?/*#__PURE__*/React.createElement(Button,{color:\"light\",onClick:function onClick(){return _this10.addRemoveFlag(_this10.state.emails,\"FLAGGED\",true);}},/*#__PURE__*/React.createElement(\"span\",{className:\"fa fa-star\"})):/*#__PURE__*/React.createElement(Button,{color:\"light\",onClick:function onClick(){return _this10.addRemoveFlag(_this10.state.emails,\"FLAGGED\",false);}},/*#__PURE__*/React.createElement(\"span\",{className:\"fa fa-star-o\"}))),/*#__PURE__*/React.createElement(ButtonGroup,{className:'mr-1'},/*#__PURE__*/React.createElement(Button,{color:\"light\"},/*#__PURE__*/React.createElement(\"span\",{onClick:function onClick(){return _this10.setState({replytoView:true,replyAllView:false,forwordView:false});},className:\"fa fa-mail-reply\"})),/*#__PURE__*/React.createElement(Button,{color:\"light\"},/*#__PURE__*/React.createElement(\"span\",{onClick:function onClick(){return _this10.setState({replytoView:false,replyAllView:true,forwordView:false});},className:\"fa fa-mail-reply-all\"})),/*#__PURE__*/React.createElement(Button,{color:\"light\"},/*#__PURE__*/React.createElement(\"span\",{onClick:function onClick(){return _this10.setState({replytoView:false,replyAllView:false,forwordView:true});},className:\"fa fa-mail-forward\"}))),/*#__PURE__*/React.createElement(Button,{color:\"light\",onClick:function onClick(){return _this10.deleteMessage(_this10.state.emails);},className:'mr-1'},/*#__PURE__*/React.createElement(\"span\",{className:\"fa fa-trash-o\"})),this.state.emails.IsViewed.data[0]==1?/*#__PURE__*/React.createElement(Button,{color:\"light\",onClick:function onClick(){return _this10.addRemoveFlag(_this10.state.emails,\"SEEN\",true);}},/*#__PURE__*/React.createElement(\"span\",{className:\"fa fa-envelope\"})):/*#__PURE__*/React.createElement(Button,{color:\"light\",onClick:function onClick(){return _this10.addRemoveFlag(_this10.state.emails,\"SEEN\",false);}},/*#__PURE__*/React.createElement(\"span\",{className:\"fa fa-envelope-o\"}))):null:null,/*#__PURE__*/React.createElement(\"div\",{className:\"details\"},this.state.replytoView==false&&this.state.replyAllView==false&&this.state.forwordView==false?/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"div\",{className:\"title\"},this.state.emails.Subject),/*#__PURE__*/React.createElement(\"div\",{className:\"header\"},/*#__PURE__*/React.createElement(\"div\",{className:\"from\"},/*#__PURE__*/React.createElement(\"p\",null,this.state.emails.FromName,\" \",this.state.emails.FromEmail),/*#__PURE__*/React.createElement(\"p\",null,this.state.emails.ToEmail),/*#__PURE__*/React.createElement(\"p\",null,this.state.emails.CCEmail),/*#__PURE__*/React.createElement(\"p\",null,this.state.emails.BCCEmail)),/*#__PURE__*/React.createElement(\"div\",{className:\"date\"},moment(this.state.emails.CreatedOn).format(CommonConfig.dateFormat.dbDateTime))),/*#__PURE__*/React.createElement(\"div\",{className:\"content\",dangerouslySetInnerHTML:this.createMarkup()}),\" \"):null,this.state.attachment.length>0?/*#__PURE__*/React.createElement(\"div\",{className:\"attachments\"},this.state.attachment.map(function(attach,i){return/*#__PURE__*/React.createElement(\"div\",{className:\"attachment\"},/*#__PURE__*/React.createElement(Badge,{color:\"danger\"},attach.contentType),\" \",/*#__PURE__*/React.createElement(\"b\",null,attach.filename),\" \",/*#__PURE__*/React.createElement(\"i\",null,\"(\",parseInt(parseInt(attach.size)/1024),\" Kb)\"),/*#__PURE__*/React.createElement(\"span\",{className:\"menu\"},/*#__PURE__*/React.createElement(\"a\",{onClick:function onClick(){return _this10.downloadData(attach);},className:\"fa fa-cloud-download\"},null)));})):null,this.state.replytoView==true||this.state.replyAllView==true||this.state.forwordView==true?/*#__PURE__*/React.createElement(Form,null,/*#__PURE__*/React.createElement(FormGroup,{row:true,className:\"mb-3\"},/*#__PURE__*/React.createElement(Label,{for:\"to\",xs:2,sm:1},\"To:\"),/*#__PURE__*/React.createElement(Col,{xs:10,sm:11},/*#__PURE__*/React.createElement(Input,{type:\"email\",value:this.state.emailTo,name:\"emailTo\",id:\"emailTo\",onChange:function onChange(e){return _this10.handleChange(e);},placeholder:\"Type Email\"}))),/*#__PURE__*/React.createElement(FormGroup,{row:true,className:\"mb-3\"},/*#__PURE__*/React.createElement(Label,{for:\"cc\",xs:2,sm:1},\"CC:\"),/*#__PURE__*/React.createElement(Col,{xs:10,sm:11},/*#__PURE__*/React.createElement(Input,{type:\"email\",value:this.state.emailCC,id:\"emailCC\",name:\"emailCC\",onChange:function onChange(e){return _this10.handleChange(e);},placeholder:\"Type CC\"}))),/*#__PURE__*/React.createElement(FormGroup,{row:true,className:\"mb-3\"},/*#__PURE__*/React.createElement(Label,{for:\"bcc\",xs:2,sm:1},\"BCC:\"),/*#__PURE__*/React.createElement(Col,{xs:10,sm:11},/*#__PURE__*/React.createElement(Input,{type:\"email\",value:this.state.emailBCC,id:\"emailBCC\",name:\"emailBCC\",onChange:function onChange(e){return _this10.handleChange(e);},placeholder:\"Type BCC\"}))),/*#__PURE__*/React.createElement(FormGroup,{row:true,className:\"mb-3\"},/*#__PURE__*/React.createElement(Label,{for:\"bcc\",xs:2,sm:1},\"Subject:\"),/*#__PURE__*/React.createElement(Col,{xs:10,sm:11},/*#__PURE__*/React.createElement(Input,{type:\"text\",value:this.state.emailSubject,id:\"emailSubject\",name:\"emailSubject\",onChange:function onChange(e){return _this10.handleChange(e);},placeholder:\"Type Subject\"})))):null,this.state.replytoView==true||this.state.replyAllView==true||this.state.forwordView==true?/*#__PURE__*/React.createElement(\"form\",{method:\"post\",action:\"\"},/*#__PURE__*/React.createElement(FormGroup,{className:\"mt-4\"},/*#__PURE__*/React.createElement(CKEditor,{name:\"emailBody\",id:\"emailBody\",data:this.state.emailBody,onChange:this.handleDetailsChange}),/*#__PURE__*/React.createElement(\"em\",{id:\"emailBodyError\",className:\"error invalid-feedback\"})),/*#__PURE__*/React.createElement(FormGroup,null,/*#__PURE__*/React.createElement(Col,{xs:10,sm:11},/*#__PURE__*/React.createElement(FormGroup,null,/*#__PURE__*/React.createElement(Row,null,/*#__PURE__*/React.createElement(Col,{md:\"4\"},/*#__PURE__*/React.createElement(\"div\",{className:\"input-box\"},/*#__PURE__*/React.createElement(Input,{type:\"select\",name:\"documentType\",id:\"documentType\",onChange:function onChange(e){return _this10.selectType(e.target.value,'documentType');},value:this.state.documentType},/*#__PURE__*/React.createElement(\"option\",{value:\"\"},\"Select Attachment\"),/*#__PURE__*/React.createElement(\"option\",{value:\"1\",key:\"Policy Doc\"},\"Policy Doc\"),/*#__PURE__*/React.createElement(\"option\",{value:\"2\",key:\"Custom\"},\"Custom\")))),/*#__PURE__*/React.createElement(Col,{md:\"4\"},this.state.documentType==\"1\"?/*#__PURE__*/React.createElement(BTN,{color:\"success\",onClick:function onClick(){return _this10.selectType(\"1\",'documentType');}},\"Select Doc\"):null,this.state.documentType==\"2\"?/*#__PURE__*/React.createElement(BTN,{color:\"success\",onClick:function onClick(){return _this10.selectType(\"2\",'documentType');}},\"Select Doc\"):null,/*#__PURE__*/React.createElement(Input,{type:\"file\",name:\"customDoc\",id:\"customDoc\",style:{display:\"none\"},multiple:\"multiple\",onChange:this.selectDocument})))),this.state.selectedDocuments.length>0?/*#__PURE__*/React.createElement(\"div\",{className:\"attachments\"},/*#__PURE__*/React.createElement(\"span\",null,\"Policy Doc : \"),/*#__PURE__*/React.createElement(\"span\",null,\"Policy#: \",this.state.policysData.length>0?this.state.policysData[0].policyNumber:'NA'),/*#__PURE__*/React.createElement(\"span\",{style:{marginLeft:'10px'}},\"RenewalDate: \",this.state.policysData.length>0?moment(this.state.policysData[0].renewalDate).format(CommonConfig.dateFormat.forDatePicker):'NA'),/*#__PURE__*/React.createElement(\"span\",{style:{marginLeft:'10px'}},\"InsuredName: \",this.state.policysData.length>0?this.state.policysData[0].insuredName:'NA'),/*#__PURE__*/React.createElement(\"span\",{style:{marginLeft:'10px'}},\"PolicyType: \",this.state.policysData.length>0?this.state.policysData[0].policyType:'NA'),this.state.selectedDocuments.map(function(attach,i){return/*#__PURE__*/React.createElement(\"div\",{className:\"attachment\"},/*#__PURE__*/React.createElement(Badge,{color:\"danger\"},attach.Type),\" \",/*#__PURE__*/React.createElement(\"b\",null,attach.Filename),\" \",/*#__PURE__*/React.createElement(\"i\",null,\"(\",attach.FileSize,\")\"),/*#__PURE__*/React.createElement(\"span\",{className:\"menu\"},/*#__PURE__*/React.createElement(\"a\",{onClick:function onClick(){return _this10.removeDocument(\"policy\",i);},className:\"fa fa-remove\"},null),/*#__PURE__*/React.createElement(\"a\",{onClick:function onClick(){return _this10.downloadData(attach);},className:\"fa fa-cloud-download\"},null)));})):null,this.state.customDoc.length>0?/*#__PURE__*/React.createElement(\"div\",{className:\"attachments\"},/*#__PURE__*/React.createElement(\"span\",null,\"Custom Doc\"),this.state.customDoc.map(function(attach,i){return/*#__PURE__*/React.createElement(\"div\",{className:\"attachment\"},/*#__PURE__*/React.createElement(Badge,{color:\"danger\"},attach.type),\" \",/*#__PURE__*/React.createElement(\"b\",null,attach.name),\" \",/*#__PURE__*/React.createElement(\"i\",null,\"(\",Math.round(attach.size/1024),\" KB)\"),/*#__PURE__*/React.createElement(\"span\",{className:\"menu\"},/*#__PURE__*/React.createElement(\"a\",{onClick:function onClick(){return _this10.removeDocument(\"custom\",i);},className:\"fa fa-remove\"},null),/*#__PURE__*/React.createElement(\"a\",{onClick:function onClick(){return _this10.downloadData(attach);},className:\"fa fa-cloud-download\"},null)));})):null),/*#__PURE__*/React.createElement(Col,null,/*#__PURE__*/React.createElement(FormGroup,null,this.state.replytoView==true?/*#__PURE__*/React.createElement(BTN,{color:\"success\",onClick:function onClick(){return _this10.sendReply();}},\"Reply\"):null,this.state.replyAllView==true?/*#__PURE__*/React.createElement(BTN,{color:\"success\",onClick:function onClick(){return _this10.sendReplyAll();}},\"Reply All\"):null,this.state.forwordView==true?/*#__PURE__*/React.createElement(BTN,{color:\"success\",onClick:function onClick(){return _this10.forwordMail();}},\"Forword\"):null)))):null))),/*#__PURE__*/React.createElement(Modal,{isOpen:this.state.openAttachmentPopup,className:'modal-lg',style:{maxWidth:'70%'}},/*#__PURE__*/React.createElement(ModalHeader,{toggle:function toggle(){return _this10.setState({openAttachmentPopup:false});}},\" Attachement \"),/*#__PURE__*/React.createElement(ModalBody,null,/*#__PURE__*/React.createElement(Row,null,/*#__PURE__*/React.createElement(Col,{md:\"3\"},/*#__PURE__*/React.createElement(AutoComplete,{value:this.state.selectedPolicy,field:\"policyNumber\",placeholder:\"Search By Policy And Email\",minLength:1,onChange:function onChange(e){return _this10.selectType(e.value,'selectPolicy');}})),/*#__PURE__*/React.createElement(Col,{md:\"1\",style:{marginLeft:'2px'}},/*#__PURE__*/React.createElement(BTN,{color:\"success\",onClick:function onClick(){return _this10.filterPolicySingle();}},\"Search\")),/*#__PURE__*/React.createElement(Col,{md:\"7\"},/*#__PURE__*/React.createElement(\"span\",null,\"Policy#: \",this.state.policysData.length>0?this.state.policysData[0].policyNumber:'NA'),/*#__PURE__*/React.createElement(\"span\",{style:{marginLeft:'10px'}},\"RenewalDate: \",this.state.policysData.length>0?moment(this.state.policysData[0].renewalDate).format(CommonConfig.dateFormat.forDatePicker):'NA'),/*#__PURE__*/React.createElement(\"span\",{style:{marginLeft:'10px'}},\"InsuredName: \",this.state.policysData.length>0?this.state.policysData[0].insuredName:'NA'),/*#__PURE__*/React.createElement(\"span\",{style:{marginLeft:'10px'}},\"PolicyType: \",this.state.policysData.length>0?this.state.policysData[0].policyType:'NA'))),/*#__PURE__*/React.createElement(\"div\",{className:\"table-custom\"},/*#__PURE__*/React.createElement(DataTable,{style:{},ref:function ref(el){return _this10.dt=el;},value:this.state.documentList,currentPageReportTemplate:this.state.str,first:this.state.selectedPage,onPage:function onPage(e){return _this10.getPageString(e);},paginator:true,rows:this.state.rowsPerPage,header:header,exportFilename:\"Documents\",paginatorTemplate:\"CurrentPageReport FirstPageLink PrevPageLink PageLinks NextPageLink LastPageLink RowsPerPageDropdown \",rowsPerPageOptions:this.state.rowsPerPageOptions,globalFilter:this.state.globalFilter,emptyMessage:\"No records found\",responsive:true,resizableColumns:true,columnResizeMode:\"fit\",scrollable:true,scrollHeight:\"265px\",selection:this.state.selectedDocuments,onSelectionChange:function onSelectionChange(e){return _this10.mulSelect(e.value);}},columns)))));}}]);return Message;}(Component);export default Message;","map":{"version":3,"sources":["/Users/bhavik/Downloads/Cognisun/Evolution/Evolution_React/evolution_new/src/views/Apps/Email/Message/Message.js"],"names":["React","Component","toast","api","APIConstant","MultiSelect","InputText","CommonConfig","AutoComplete","DataTable","Column","moment","CKEditor","Modal","ModalHeader","ModalBody","Nav","NavItem","NavLink","ButtonDropdown","DropdownToggle","DropdownMenu","DropdownItem","Badge","Button","ButtonGroup","FormGroup","Input","BTN","Form","Label","Row","Col","simpleParser","require","_","Message","props","selectDocument","event","docuCustom","target","files","i","length","push","setState","customDoc","state","concat","downloadData","rowdata","blob","Blob","content","type","contentType","link","document","createElement","href","window","URL","createObjectURL","fileName","filename","download","click","handleChange","e","name","value","emailTo","emailFrom","emailCC","emailBCC","emailSubject","mulSelect","selectedDocuments","getPageString","firstPage","first","l","rows","page","lastPage","documentList","str","selectedPage","rowsPerPage","location","undefined","history","pathname","columns","selectionMode","style","width","id","field","header","sortable","filter","body","formatCreatedDate","bind","toggle","messageType","documentType","replytoView","replyAllView","forwordView","attachmentURL","totalDocument","cols","openAttachmentPopup","filteredPolicysSingle","selectedPolicy","selectedPolicyId","policysData","dropdownOpen","emails","email","emailBody","emailBodyError","InboxCount","attachment","FromEmail","emailFromName","FromName","CCEmail","BCCEmail","Subject","colOptions","col","label","onColumnToggle","handleDetailsChange","getAttachment","IsViewed","data","addRemoveFlag","EmailUID","post","path","deleteMessage","then","res","success","catch","err","console","log","FlagName","remove","IsImportant","valueInOrder","sort","x","y","rowData","CreatedOn","format","dateFormat","dateTime","index","splice","policyId","loggedInUserData","EntityId","error","getElementById","evt","editor","getData","isEmpty","getPolicyAutoComplete","getDocumentList","returnValue","emailDataForm","FormData","append","InReplyTo","MessageId","JSON","stringify","forwordMail","sendReply","all","find","parts","idHeader","mail","html","textAsHtml","attachments","__html","marginTop","textAlign","margin","globalFilter","marginRight","dataTableConfig","columnToggleIcon","map","ToEmail","dbDateTime","createMarkup","attach","parseInt","size","selectType","display","policyNumber","marginLeft","renewalDate","forDatePicker","insuredName","policyType","Type","Filename","FileSize","removeDocument","Math","round","sendReplyAll","maxWidth","filterPolicySingle","el","dt","rowsPerPageOptions"],"mappings":"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","sourcesContent":["/* eslint-disable jsx-a11y/anchor-is-valid */\nimport React, { Component } from 'react';\nimport { toast } from 'react-toastify';\nimport api from '../../../../utils/apiClient';\nimport APIConstant from '../../../../utils/constants';\nimport { MultiSelect } from 'primereact/multiselect';\nimport { InputText } from 'primereact/inputtext';\nimport { CommonConfig } from '../../../../utils/constants';\nimport { AutoComplete } from 'primereact/autocomplete';\nimport { DataTable } from 'primereact/datatable';\nimport { Column } from 'primereact/column';\nimport moment from 'moment';\nimport CKEditor from 'ckeditor4-react';\nimport { Modal, ModalHeader, ModalBody, Nav, NavItem, NavLink, ButtonDropdown, DropdownToggle, DropdownMenu, DropdownItem, Badge, Button, ButtonGroup, FormGroup, Input, Button as BTN, Form, Label, Row, Col } from 'reactstrap';\nconst simpleParser = require('mailparser').simpleParser;\nconst _ = require('lodash');\n\nclass Message extends Component {\n\n  constructor(props) {\n    super(props);\n\n    if (this.props.location.state == undefined) {\n      this.props.history.push({\n        pathname: '/apps/email/inbox'\n      });\n      return\n    }\n\n    let columns = [\n      { selectionMode: \"multiple\", style: { width: '3em' }, id: 0 },\n      { field: \"Filename\", header: \"Name\", sortable: true, filter: true, id: 1 },\n      { body: this.formatCreatedDate.bind(this), field: \"CreatedOn\", header: \"Created\", sortable: true, filter: true, id: 2 },\n      { field: \"forename\", header: \"CreatedBy\", sortable: true, filter: true, id: 3 },\n      { field: \"Directory\", header: \"Directory\", sortable: true, filter: true, id: 4 },\n    ];\n\n    this.toggle = this.toggle.bind(this);\n    this.state = {\n      messageType:this.props.location.state.type,\n      documentType: \"\",\n      replytoView: false,\n      replyAllView: false,\n      forwordView: false,\n      attachmentURL: [],\n      totalDocument: [],\n      selectedDocuments: [],\n      cols: columns,\n      str: '',\n      customDoc: [],\n      openAttachmentPopup: false,\n      filteredPolicysSingle: null,\n      selectedPolicy: null,\n      selectedPolicyId: null,\n      policysData: [],\n      documentList: [],\n      dropdownOpen: false,\n      emails: this.props.location.state.email,\n      emailBody: \"\",\n      emailBodyError: false,\n      InboxCount: this.props.location.state.InboxCount,\n      attachment: [],\n      emailFrom: this.props.location.state.email.FromEmail,\n      emailFromName: this.props.location.state.email.FromName,\n      emailTo: this.props.location.state.email.FromEmail,\n      emailCC: this.props.location.state.email.CCEmail,\n      emailBCC: this.props.location.state.email.BCCEmail,\n      emailSubject: \"Re:\" + this.props.location.state.email.Subject,\n    };\n\n    this.colOptions = [];\n    for (let col of columns) {\n      this.colOptions.push({ label: col.header, value: col });\n    }\n\n    this.onColumnToggle = this.onColumnToggle.bind(this);\n    this.handleDetailsChange = this.handleDetailsChange.bind(this);\n    this.getAttachment()\n    if (this.state.emails.IsViewed.data[0] == 0) {\n      this.addRemoveFlag(this.state.emails, \"SEEN\", false)\n    }\n  }\n\n  deleteMessage(emails) {\n    let data = {\n      \"uid\": emails.EmailUID,\n      \"boxName\": \"INBOX\",\n      \"searchType\": \"ALL\"\n    }\n    api.post(APIConstant.path.deleteMessage, data).then(res => {\n      if (res.success) {\n        this.props.history.push({\n          pathname: '/apps/email/inbox'\n        });\n      }\n    }).catch(err => {\n      console.log(err)\n    });\n  }\n\n  addRemoveFlag(emails, FlagName, remove) {\n    let data = {\n      \"uid\": emails.EmailUID,\n      \"boxName\": \"INBOX\",\n      \"flagname\": FlagName,\n      \"remove\": remove\n    }\n    api.post(APIConstant.path.addRemoveFlag, data).then(res => {\n      if (res.success) {\n        if (FlagName == \"FLAGGED\" && remove == false) {\n          this.state.emails.IsImportant.data[0] = 1\n        } else if (FlagName == \"FLAGGED\" && remove == true) {\n          this.state.emails.IsImportant.data[0] = 0\n        } else if (FlagName == \"SEEN\" && remove == true) {\n          this.state.emails.IsViewed.data[0] = 0\n        } else if (FlagName == \"SEEN\" && remove == true) {\n          this.state.emails.IsViewed.data[0] = 0\n        }\n      }\n    }).catch(err => {\n      console.log(err)\n    });\n  }\n\n  onColumnToggle(event) {\n    let valueInOrder = event.value.sort((x, y) => { return x.id - y.id });\n    this.setState({ cols: valueInOrder });\n  }\n\n  formatCreatedDate(rowData) {\n    return (\n      moment(rowData.CreatedOn).format(CommonConfig.dateFormat.dateTime)\n    )\n  }\n\n  selectDocument = (event) => {\n    var docuCustom = []\n    if (event.target.files && event.target.files) {\n      for (let i = 0; i < event.target.files.length; i++) {\n        docuCustom.push(event.target.files[i])\n      }\n      this.setState({ customDoc: this.state.customDoc.concat(docuCustom) });\n    } else {\n\n    }\n  }\n\n  removeDocument(type, index) {\n    if (type == \"policy\") {\n      this.state.selectedDocuments.splice(index, 1)\n    } else {\n      this.state.customDoc.splice(index, 1)\n    }\n  }\n\n  getDocumentList() {\n    try {\n      const data = {\n        \"pPolicyId\": this.state.policysData[0].policyId,\n        'CurrentUser': CommonConfig.loggedInUserData().EntityId\n      };\n      api.post(\"api/getDocumentList\", data).then(res => {\n        console.log(\"res\", res);\n        if (res.success) {\n          let lastPage = (this.state.rowsPerPage < res.data.length) ? this.state.rowsPerPage : res.data.length;\n          let str = '1 to ' + lastPage + ' out of ' + res.data.length + ' records';\n          this.setState({ documentList: res.data, str: str, openAttachmentPopup: true });\n        } else {\n\n        }\n      }).catch(err => {\n\n      });\n    } catch (error) {\n\n    }\n  }\n\n  selectType(value, type) {\n    //need to select template\n    if (type === 'selectPolicy') {\n      if (value === '' || value === undefined || value === null) {\n        this.setState({ selectedPolicy: '', selectedPolicyId: '' });\n      } else {\n        this.setState({ selectedPolicy: value });\n      }\n    }\n\n    if (type === 'documentType') {\n      if (value === '' || value === undefined || value === null) {\n        this.setState({ documentType: '' });\n      } else {\n        this.setState({ documentType: value });\n        if (value == \"1\") {\n          this.setState({ openAttachmentPopup: true });\n        } else {\n          document.getElementById(\"customDoc\").click()\n        }\n      }\n    }\n  }\n\n  handleDetailsChange(evt) {\n    const data = evt.editor.getData();\n    if (CommonConfig.isEmpty(data)) {\n      this.setState({ emailBodyError: true, emailBody: '' });\n      // this.show(\"customEndorsementDetails\", true);\n    } else {\n      this.setState({ emailBodyError: false, emailBody: data });\n      // this.show(\"customEndorsementDetails\", false);\n    }\n  }\n\n  downloadData = (rowdata) => {\n    var blob = new Blob([rowdata.content], { type: rowdata.contentType });\n    var link = document.createElement('a');\n    link.href = window.URL.createObjectURL(blob);\n    var fileName = rowdata.filename;\n    link.download = fileName;\n    link.click();\n  }\n\n  filterPolicySingle() {\n    let data = {\n      \"pPolicyId\": '',\n      \"pPolicyNumber\": this.state.selectedPolicy,\n      \"CurrentUser\": CommonConfig.loggedInUserData().EntityId\n    }\n    api.post(APIConstant.path.getPolicyAutoComplete, data).then(res => {\n      if (res.success) {\n        this.setState({ policysData: res.data })\n        this.getDocumentList()\n      } else {\n        this.setState({ policysData: [] })\n        toast.error(res.data[0].returnValue);\n      }\n    }).catch(err => {\n      console.log(err)\n    });\n  }\n\n  forwordMail() {\n    const emailDataForm = new FormData();\n    emailDataForm.append(\"to\", this.state.emailTo)\n    emailDataForm.append(\"replyTo\", this.state.emails.InReplyTo)\n    emailDataForm.append(\"messageId\", this.state.emails.MessageId)\n    emailDataForm.append(\"from\", this.state.emailFrom)\n    emailDataForm.append(\"cc\", this.state.emailCC)\n    emailDataForm.append(\"bcc\", this.state.emailBCC)\n    emailDataForm.append(\"subject\", this.state.emailSubject)\n    emailDataForm.append(\"mail\", 'RenewalMail')\n    emailDataForm.append(\"EmailSenderId\", CommonConfig.loggedInUserData().EntityId)\n    emailDataForm.append(\"html\", this.state.emailBody)\n    emailDataForm.append(\"selectedDocuments\", JSON.stringify(this.state.selectedDocuments))\n\n    for (let i = 0; i < this.state.customDoc.length; i++) {\n      emailDataForm.append(\"File\", this.state.customDoc[i], this.state.customDoc[i].name);\n    }\n\n    api.post(APIConstant.path.forwordMail, emailDataForm).then(res => {\n      if (res.success) {\n        toast.success('Mail Send Successful!');\n        this.props.history.push({\n          pathname: '/apps/email/inbox'\n        });\n      } else {\n        toast.error('Mail Send Failed!');\n      }\n    }).catch(err => {\n      console.log(err)\n    });\n\n  }\n\n  sendReplyAll() {\n    const emailDataForm = new FormData();\n    emailDataForm.append(\"to\", this.state.emailTo)\n    emailDataForm.append(\"replyTo\", this.state.emails.InReplyTo)\n    emailDataForm.append(\"messageId\", this.state.emails.MessageId)\n    emailDataForm.append(\"from\", this.state.emailFrom)\n    emailDataForm.append(\"cc\", this.state.emailCC)\n    emailDataForm.append(\"bcc\", this.state.emailBCC)\n    emailDataForm.append(\"subject\", this.state.emailSubject)\n    emailDataForm.append(\"mail\", 'RenewalMail')\n    emailDataForm.append(\"EmailSenderId\", CommonConfig.loggedInUserData().EntityId)\n    emailDataForm.append(\"html\", this.state.emailBody)\n    emailDataForm.append(\"selectedDocuments\", JSON.stringify(this.state.selectedDocuments))\n\n    for (let i = 0; i < this.state.customDoc.length; i++) {\n      emailDataForm.append(\"File\", this.state.customDoc[i], this.state.customDoc[i].name);\n    }\n\n    api.post(APIConstant.path.forwordMail, emailDataForm).then(res => {\n      if (res.success) {\n        toast.success('Mail Send Successful!');\n        this.props.history.push({\n          pathname: '/apps/email/inbox'\n        });\n      } else {\n        toast.error('Mail Send Failed!');\n      }\n    }).catch(err => {\n      console.log(err)\n    });\n\n  }\n\n  sendReply() {\n    const emailDataForm = new FormData();\n    emailDataForm.append(\"to\", this.state.emailTo)\n    emailDataForm.append(\"replyTo\", this.state.emails.InReplyTo)\n    emailDataForm.append(\"messageId\", this.state.emails.MessageId)\n    emailDataForm.append(\"from\", this.state.emailFrom)\n    emailDataForm.append(\"cc\", this.state.emailCC)\n    emailDataForm.append(\"bcc\", this.state.emailBCC)\n    emailDataForm.append(\"subject\", this.state.emailSubject)\n    emailDataForm.append(\"mail\", 'RenewalMail')\n    emailDataForm.append(\"EmailSenderId\", CommonConfig.loggedInUserData().EntityId)\n    emailDataForm.append(\"html\", this.state.emailBody)\n    emailDataForm.append(\"selectedDocuments\", JSON.stringify(this.state.selectedDocuments))\n\n    for (let i = 0; i < this.state.customDoc.length; i++) {\n      emailDataForm.append(\"File\", this.state.customDoc[i], this.state.customDoc[i].name);\n    }\n\n    api.post(APIConstant.path.sendReply, emailDataForm).then(res => {\n      if (res.success) {\n        toast.success('Mail Send Successful!');\n        this.props.history.push({\n          pathname: '/apps/email/inbox'\n        });\n      } else {\n        toast.error('Mail Send Failed!');\n      }\n    }).catch(err => {\n      console.log(err)\n    });\n\n  }\n\n  handleChange = (e) => {\n    this.setState({ [e.target.name]: e.target.value });\n    if (e.target.name === 'emailTo') {\n      if (e.target.value === '' || e.target.value === null) {\n        this.setState({ emailTo: '' });\n      } else {\n        this.setState({ emailTo: e.target.value });\n      }\n    }\n\n    if (e.target.name === 'emailFrom') {\n      if (e.target.value === '' || e.target.value === null) {\n        this.setState({ emailFrom: '' });\n      } else {\n        this.setState({ emailFrom: e.target.value });\n      }\n    }\n\n    if (e.target.name === 'emailCC') {\n      if (e.target.value === '' || e.target.value === null) {\n        this.setState({ emailCC: '' });\n      } else {\n        this.setState({ emailCC: e.target.value });\n      }\n    }\n\n    if (e.target.name === 'emailBCC') {\n      if (e.target.value === '' || e.target.value === null) {\n        this.setState({ emailBCC: '' });\n      } else {\n        this.setState({ emailBCC: e.target.value });\n      }\n    }\n\n    if (e.target.name === 'emailSubject') {\n      if (e.target.value === '' || e.target.value === null) {\n        this.setState({ emailSubject: '' });\n      } else {\n        this.setState({ emailSubject: e.target.value });\n      }\n    }\n  }\n\n  getAttachment() {\n    let data = {\n      \"uid\": this.state.emails.EmailUID,\n      \"boxName\":this.state.messageType == \"sent\" ? \"INBOX.Sent\" : \"INBOX\"\n    }\n    api.post(APIConstant.path.getAttachment, data).then(res => {\n      if (res.success) {\n        var all = _.find(res.data[0].parts, { \"which\": \"\" })\n        var id = this.state.emails.EmailUID;\n        var idHeader = \"Imap-Id: \" + id + \"\\r\\n\";\n        simpleParser(idHeader + all.body, (err, mail) => {\n          this.setState({ emailBody: mail.html == false ? mail.textAsHtml : mail.html, attachment: mail.attachments })\n        });\n      }\n    }).catch(err => {\n      console.log(err)\n    });\n  }\n\n  mulSelect = (e) => {\n    this.setState({ selectedDocuments: e })\n  }\n\n  getPageString = (e) => {\n    let firstPage = e.first + 1;\n    let l = e.rows * (e.page + 1);\n    let lastPage = (l < this.state.documentList.length) ? l : this.state.documentList.length\n    var str = firstPage + ' to ' + lastPage + ' out of ' + this.state.documentList.length + ' records';\n    this.setState({ selectedPage: e.first, str: str, rowsPerPage: e.rows });\n  }\n\n  toggle() {\n    this.setState({\n      dropdownOpen: !this.state.dropdownOpen\n    });\n  }\n\n  createMarkup() {\n    return { __html: this.state.emailBody };\n  }\n\n  render() {\n\n    var header =\n      <div>\n        <div style={{ 'textAlign': 'Right', marginTop: 10 }}>\n          <Row>\n            <Col>\n              <div className=\"basic-header\">\n                <div className=\"header-right-option\">\n                  <div style={{ textAlign: 'right' }}>\n                    <i className=\"pi pi-search\" style={{ margin: '4px 4px 0 0' }}></i>\n                    <InputText type=\"search\" onInput={(e) => this.setState({ globalFilter: e.target.value })} placeholder=\"Global Search\" size=\"30\" style={{ marginRight: 10 }} />\n                  </div>\n                  <MultiSelect value={this.state.cols} options={this.colOptions}\n                    fixedPlaceholder={true} placeholder={CommonConfig.dataTableConfig.columnToggleIcon} tooltip=\"Show / Hide Column\"\n                    onChange={this.onColumnToggle} style={{ width: '50px' }}\n                  />\n                </div>\n              </div>\n            </Col>\n          </Row>\n        </div>\n      </div>;\n\n    let columns = this.state.cols.map((col, i) => {\n      return <Column field={col.field} header={col.header} body={col.body} sortable={col.sortable} filter={col.filter} selectionMode={col.selectionMode} style={col.style} />;\n    });\n\n    return (\n      <div className=\"animated fadeIn\">\n        <div className=\"email-app mb-4\">\n          <nav>\n            <a href=\"#/apps/email/compose\" className=\"btn btn-danger btn-block\">New Email</a>\n            <Nav>\n              <NavItem>\n                <NavLink href=\"#/apps/email/inbox\"><i className=\"fa fa-inbox\"></i> Inbox <Badge color=\"danger\"></Badge></NavLink>\n              </NavItem>\n              <NavItem>\n                <NavLink href=\"#/apps/email/sent\"><i className=\"fa fa-inbox\"></i> Sent </NavLink>\n              </NavItem>\n            </Nav>\n          </nav>\n          <main className=\"message\">\n            {this.state.messageType != 'sent' ? ((this.state.replytoView == false && this.state.replyAllView == false && this.state.forwordView == false) ? (<div className=\"toolbar\">\n              <ButtonGroup className={'mr-1'}>\n                {this.state.emails.IsImportant.data[0] == 1 ? <Button color=\"light\" onClick={() => this.addRemoveFlag(this.state.emails, \"FLAGGED\", true)}>\n                  <span className=\"fa fa-star\"></span>\n                </Button> :\n                  <Button color=\"light\" onClick={() => this.addRemoveFlag(this.state.emails, \"FLAGGED\", false)}>\n                    <span className=\"fa fa-star-o\"></span>\n                  </Button>}\n              </ButtonGroup>\n              <ButtonGroup className={'mr-1'}>\n                <Button color=\"light\"><span onClick={() => this.setState({ replytoView: true, replyAllView: false, forwordView: false })} className=\"fa fa-mail-reply\"></span></Button>\n                <Button color=\"light\"><span onClick={() => this.setState({ replytoView: false, replyAllView: true, forwordView: false })} className=\"fa fa-mail-reply-all\"></span></Button>\n                <Button color=\"light\"><span onClick={() => this.setState({ replytoView: false, replyAllView: false, forwordView: true })} className=\"fa fa-mail-forward\"></span></Button>\n              </ButtonGroup>\n              <Button color=\"light\" onClick={() => this.deleteMessage(this.state.emails)} className={'mr-1'}><span className=\"fa fa-trash-o\"></span></Button>\n              {this.state.emails.IsViewed.data[0] == 1 ? <Button color=\"light\" onClick={() => this.addRemoveFlag(this.state.emails,\"SEEN\",true)}><span className=\"fa fa-envelope\"></span></Button> : <Button color=\"light\" onClick={() => this.addRemoveFlag(this.state.emails,\"SEEN\",false)}><span className=\"fa fa-envelope-o\"></span></Button>}\n            </div>) : (null)) : (null)}\n            <div className=\"details\">\n              {(this.state.replytoView == false && this.state.replyAllView == false && this.state.forwordView == false) ? (\n                <div>\n                  <div className=\"title\">{this.state.emails.Subject}</div>\n                  <div className=\"header\">\n                    <div className=\"from\">\n                      <p>{this.state.emails.FromName} {this.state.emails.FromEmail}</p>\n                      <p>{this.state.emails.ToEmail}</p>\n                      <p>{this.state.emails.CCEmail}</p>\n                      <p>{this.state.emails.BCCEmail}</p>\n                    </div>\n                    <div className=\"date\">{moment(this.state.emails.CreatedOn).format(CommonConfig.dateFormat.dbDateTime)}</div>\n                  </div>\n                  <div className=\"content\" dangerouslySetInnerHTML={this.createMarkup()} /> </div>) : (null)}\n              {this.state.attachment.length > 0 ? (<div className=\"attachments\">\n                {this.state.attachment.map((attach, i) => {\n                  return (\n                    <div className=\"attachment\">\n                      <Badge color=\"danger\">{attach.contentType}</Badge> <b>{attach.filename}</b> <i>({parseInt(parseInt(attach.size) / 1024)} Kb)</i>\n                      <span className=\"menu\">\n                        <a onClick={() => this.downloadData(attach)} className=\"fa fa-cloud-download\">{null}</a>\n                      </span>\n                    </div>)\n                })}\n              </div>) : (null)}\n              {(this.state.replytoView == true || this.state.replyAllView == true || this.state.forwordView == true) ?\n                (<Form>\n                  <FormGroup row className=\"mb-3\">\n                    <Label for=\"to\" xs={2} sm={1}>To:</Label>\n                    <Col xs={10} sm={11}>\n                      <Input type=\"email\" value={this.state.emailTo} name=\"emailTo\" id=\"emailTo\" onChange={(e) => this.handleChange(e)} placeholder=\"Type Email\" />\n                    </Col>\n                  </FormGroup>\n                  <FormGroup row className=\"mb-3\">\n                    <Label for=\"cc\" xs={2} sm={1}>CC:</Label>\n                    <Col xs={10} sm={11}>\n                      <Input type=\"email\" value={this.state.emailCC} id=\"emailCC\" name=\"emailCC\" onChange={(e) => this.handleChange(e)} placeholder=\"Type CC\" />\n                    </Col>\n                  </FormGroup>\n                  <FormGroup row className=\"mb-3\">\n                    <Label for=\"bcc\" xs={2} sm={1}>BCC:</Label>\n                    <Col xs={10} sm={11}>\n                      <Input type=\"email\" value={this.state.emailBCC} id=\"emailBCC\" name=\"emailBCC\" onChange={(e) => this.handleChange(e)} placeholder=\"Type BCC\" />\n                    </Col>\n                  </FormGroup>\n                  <FormGroup row className=\"mb-3\">\n                    <Label for=\"bcc\" xs={2} sm={1}>Subject:</Label>\n                    <Col xs={10} sm={11}>\n                      <Input type=\"text\" value={this.state.emailSubject} id=\"emailSubject\" name=\"emailSubject\" onChange={(e) => this.handleChange(e)} placeholder=\"Type Subject\" />\n                    </Col>\n                  </FormGroup>\n                </Form>) : (null)}\n              {(this.state.replytoView == true || this.state.replyAllView == true || this.state.forwordView == true) ? (<form method=\"post\" action=\"\">\n                <FormGroup className=\"mt-4\">\n                  <CKEditor name=\"emailBody\" id=\"emailBody\" data={this.state.emailBody} onChange={this.handleDetailsChange} />\n                  <em id=\"emailBodyError\" className=\"error invalid-feedback\"></em>\n                </FormGroup>\n                <FormGroup>\n                  <Col xs={10} sm={11}>\n                    <FormGroup>\n                      <Row>\n                        <Col md=\"4\">\n                          <div className=\"input-box\">\n                            <Input type=\"select\" name=\"documentType\" id=\"documentType\" onChange={(e) => this.selectType(e.target.value, 'documentType')} value={this.state.documentType}>\n                              <option value=''>Select Attachment</option>\n                              <option value=\"1\" key=\"Policy Doc\">Policy Doc</option>\n                              <option value=\"2\" key=\"Custom\">Custom</option>\n                            </Input>\n                          </div>\n                        </Col>\n                        <Col md=\"4\">\n                          {this.state.documentType == \"1\" ? (<BTN color=\"success\" onClick={() => this.selectType(\"1\", 'documentType')}>Select Doc</BTN>) : (null)}\n                          {this.state.documentType == \"2\" ? (<BTN color=\"success\" onClick={() => this.selectType(\"2\", 'documentType')}>Select Doc</BTN>) : (null)}\n                          <Input type=\"file\" name=\"customDoc\" id=\"customDoc\" style={{ display: \"none\" }} multiple=\"multiple\" onChange={this.selectDocument} />\n                        </Col>\n                      </Row>\n                    </FormGroup>\n\n                    {this.state.selectedDocuments.length > 0 ? (<div className=\"attachments\">\n                      <span>Policy Doc : </span>\n                      <span>Policy#: {this.state.policysData.length > 0 ? this.state.policysData[0].policyNumber : 'NA'}</span>\n                      <span style={{ marginLeft: '10px' }}>RenewalDate: {this.state.policysData.length > 0 ? moment(this.state.policysData[0].renewalDate).format(CommonConfig.dateFormat.forDatePicker) : 'NA'}</span>\n                      <span style={{ marginLeft: '10px' }}>InsuredName: {this.state.policysData.length > 0 ? this.state.policysData[0].insuredName : 'NA'}</span>\n                      <span style={{ marginLeft: '10px' }}>PolicyType: {this.state.policysData.length > 0 ? this.state.policysData[0].policyType : 'NA'}</span>\n                      {this.state.selectedDocuments.map((attach, i) => {\n                        return (\n                          <div className=\"attachment\">\n                            <Badge color=\"danger\">{attach.Type}</Badge> <b>{attach.Filename}</b> <i>({attach.FileSize})</i>\n                            <span className=\"menu\">\n                              <a onClick={() => this.removeDocument(\"policy\", i)} className=\"fa fa-remove\">{null}</a>\n                              <a onClick={() => this.downloadData(attach)} className=\"fa fa-cloud-download\">{null}</a>\n                            </span>\n                          </div>)\n                      })\n                      }\n                    </div>) : (null)}\n\n                    {this.state.customDoc.length > 0 ? (<div className=\"attachments\">\n                      <span>Custom Doc</span>\n                      {this.state.customDoc.map((attach, i) => {\n                        return (\n                          <div className=\"attachment\">\n                            <Badge color=\"danger\">{attach.type}</Badge> <b>{attach.name}</b> <i>({Math.round(attach.size / 1024)} KB)</i>\n                            <span className=\"menu\">\n                              <a onClick={() => this.removeDocument(\"custom\", i)} className=\"fa fa-remove\">{null}</a>\n                              <a onClick={() => this.downloadData(attach)} className=\"fa fa-cloud-download\">{null}</a>\n                            </span>\n                          </div>)\n                      })\n                      }\n                    </div>) : (null)}\n                  </Col>\n                  <Col>\n                    <FormGroup>\n                      {this.state.replytoView == true ?\n                        <BTN color=\"success\" onClick={() => this.sendReply()}>Reply</BTN> : (null)}\n\n                      {this.state.replyAllView == true ?\n                        <BTN color=\"success\" onClick={() => this.sendReplyAll()}>Reply All</BTN> : (null)}\n\n                      {this.state.forwordView == true ?\n                        <BTN color=\"success\" onClick={() => this.forwordMail()}>Forword</BTN> : (null)}\n                    </FormGroup>\n                  </Col>\n                </FormGroup>\n              </form>) : (null)}\n            </div>\n          </main>\n        </div>\n        <Modal isOpen={this.state.openAttachmentPopup} className={'modal-lg'} style={{ maxWidth: '70%' }}>\n          <ModalHeader toggle={() => this.setState({ openAttachmentPopup: false })}> Attachement </ModalHeader>\n          <ModalBody>\n            <Row>\n              <Col md=\"3\">\n                <AutoComplete value={this.state.selectedPolicy} field=\"policyNumber\" placeholder=\"Search By Policy And Email\" minLength={1} onChange={(e) => this.selectType(e.value, 'selectPolicy')} />\n              </Col>\n              <Col md=\"1\" style={{ marginLeft: '2px' }}>\n                <BTN color=\"success\" onClick={() => this.filterPolicySingle()}>Search</BTN>\n              </Col>\n              <Col md=\"7\">\n                <span>Policy#: {this.state.policysData.length > 0 ? this.state.policysData[0].policyNumber : 'NA'}</span>\n                <span style={{ marginLeft: '10px' }}>RenewalDate: {this.state.policysData.length > 0 ? moment(this.state.policysData[0].renewalDate).format(CommonConfig.dateFormat.forDatePicker) : 'NA'}</span>\n                <span style={{ marginLeft: '10px' }}>InsuredName: {this.state.policysData.length > 0 ? this.state.policysData[0].insuredName : 'NA'}</span>\n                <span style={{ marginLeft: '10px' }}>PolicyType: {this.state.policysData.length > 0 ? this.state.policysData[0].policyType : 'NA'}</span>\n              </Col>\n            </Row>\n            <div className=\"table-custom\">\n              <DataTable style={{}} ref={(el) => this.dt = el} value={this.state.documentList}\n                currentPageReportTemplate={this.state.str} first={this.state.selectedPage} onPage={(e) => this.getPageString(e)}\n                paginator={true} rows={this.state.rowsPerPage} header={header} exportFilename=\"Documents\"\n                paginatorTemplate=\"CurrentPageReport FirstPageLink PrevPageLink PageLinks NextPageLink LastPageLink RowsPerPageDropdown \"\n                rowsPerPageOptions={this.state.rowsPerPageOptions} globalFilter={this.state.globalFilter} emptyMessage=\"No records found\"\n                responsive={true} resizableColumns={true} columnResizeMode=\"fit\"\n                scrollable={true} scrollHeight=\"265px\"\n                selection={this.state.selectedDocuments}\n                onSelectionChange={(e) => this.mulSelect(e.value)}\n              >\n                {columns}\n              </DataTable>\n            </div>\n          </ModalBody>\n        </Modal>\n      </div>\n    )\n  }\n}\n\nexport default Message;\n"]},"metadata":{},"sourceType":"module"}