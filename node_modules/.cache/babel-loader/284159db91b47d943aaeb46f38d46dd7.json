{"ast":null,"code":"import axios from'axios';import i18n from\"i18next\";import{apiBase}from'./config';import{getAccessToken}from'./authenticate';var instance=axios.create({baseURL:apiBase// timeout: 60000\n});var headers={'Content-Type':'application/json','Authorization':'JWT fefege...',\"Access-Control-Allow-Origin\":\"*\",\"Access-Control-Allow-Headers\":\"*\",'X-Requested-With':'XMLHttpRequest'};//axios.defaults.headers.common['Authorization'] =sessionStorage.getItem(\"token\");\nvar request=function request(method,url,data,isSilent){var loginUserLang=JSON.parse(localStorage.getItem('loggedInUserData'));// console.log(\"SDAf\", getAccessToken())\nconsole.log(\"url\",url);// console.log(\"isSilent\", isSilent)\nif(data==undefined||data==''){var setData={PreferLang:loginUserLang.PreferredLanguage==null?'en-IE':loginUserLang.PreferredLanguage,CurrentUserId:loginUserLang.EntityId==undefined||loginUserLang.EntityId==null?'System':loginUserLang.EntityId};data=setData;}else{var pref='';data.PreferLang=pref;data.CurrentUserId=pref;// var setData = {\n//   PreferLang: (loginUserLang.PreferredLanguage == null ? 'en-IE' : loginUserLang.PreferredLanguage),\n//   CurrentUserId:((loginUserLang.EntityId == undefined || loginUserLang.EntityId == null)? 'System': loginUserLang.EntityId)\n// };\n// data = setData;\nconsole.log(\"loginUserLang\",loginUserLang);if(loginUserLang!=null){if(loginUserLang.PreferredLanguage==null){data.PreferLang='en-IE';}else{data.PreferLang=loginUserLang.PreferredLanguage;}if(loginUserLang.EntityId==undefined||loginUserLang.EntityId==null){data.CurrentUserId='System';}else{data.CurrentUserId=loginUserLang.EntityId;}}}console.log(\"data..\",data);headers['accept-language']=i18n.language;headers['token']=getAccessToken();var isaSilent=isSilent===undefined?false:isSilent;// instance.defaults.headers.common['Auth  orization'] = sessionStorage.getItem(\"token\");\nif(url!='api/getNotificationList'&&url!='api/getNotificationCount'){if(typeof isaSilent===\"boolean\"&&isaSilent!==true){var spinner=document.querySelector('.spinner');var logo=document.querySelector('.logo-img');spinner.classList.add('spinner-show');logo.classList.add('spinner-show');}}return new Promise(function(resolve,reject){(function(){if(method==='get'){return instance.request({url:url,method:method,params:data,headers:headers});}else{return instance.request({url:url,method:method,data:data,headers:headers});}})().then(function(res){// console.log(res);\nvar spinner=document.querySelector('.spinner');var logo=document.querySelector('.logo-img');resolve(res.data);spinner.classList.remove('spinner-show');logo.classList.remove('spinner-show');}).catch(function(err){var spinner=document.querySelector('.spinner');var logo=document.querySelector('.logo-img');spinner.classList.remove('spinner-show');logo.classList.remove('spinner-show');reject(err.response);});});};export default{get:function get(endpoint,data,isSilent){return request('get',endpoint,data,isSilent);},post:function post(endpoint,data,isSilent){// return request('post', endpoint, JSON.stringify(data));\nreturn request('post',endpoint,data,isSilent);},put:function put(endpoint,data,isSilent){return request('put',endpoint,data,isSilent);},del:function del(endpoint,data,isSilent){return request('delete',endpoint,data,isSilent);}};","map":{"version":3,"sources":["/Users/bhavik/Downloads/Cognisun/Evolution/Evolution_React/evolution_new/src/utils/apiClient.js"],"names":["axios","i18n","apiBase","getAccessToken","instance","create","baseURL","headers","request","method","url","data","isSilent","loginUserLang","JSON","parse","localStorage","getItem","console","log","undefined","setData","PreferLang","PreferredLanguage","CurrentUserId","EntityId","pref","language","isaSilent","spinner","document","querySelector","logo","classList","add","Promise","resolve","reject","params","then","res","remove","catch","err","response","get","endpoint","post","put","del"],"mappings":"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","sourcesContent":["import axios from 'axios';\nimport i18n from \"i18next\";\nimport { apiBase } from './config';\nimport { getAccessToken } from './authenticate';\n\nconst instance = axios.create({\n  baseURL: apiBase,\n  // timeout: 60000\n});\n\nvar headers = {\n  'Content-Type': 'application/json',\n  'Authorization': 'JWT fefege...',\n  \"Access-Control-Allow-Origin\":\"*\",\n  \"Access-Control-Allow-Headers\":\"*\",\n  'X-Requested-With': 'XMLHttpRequest'\n}\n\n//axios.defaults.headers.common['Authorization'] =sessionStorage.getItem(\"token\");\nconst request = (method, url, data, isSilent) => {\n  var loginUserLang = JSON.parse(localStorage.getItem('loggedInUserData'));\n  // console.log(\"SDAf\", getAccessToken())\n    console.log(\"url\", url)\n    // console.log(\"isSilent\", isSilent)\n  if(data == undefined || data == ''){\n    var setData = {\n      PreferLang: (loginUserLang.PreferredLanguage == null ? 'en-IE' : loginUserLang.PreferredLanguage),\n      CurrentUserId:((loginUserLang.EntityId == undefined || loginUserLang.EntityId == null)? 'System': loginUserLang.EntityId)\n\n    };\n    data = setData;\n  }else{\n    var pref='';\n    data.PreferLang = pref;\n    data.CurrentUserId = pref;\n    // var setData = {\n    //   PreferLang: (loginUserLang.PreferredLanguage == null ? 'en-IE' : loginUserLang.PreferredLanguage),\n    //   CurrentUserId:((loginUserLang.EntityId == undefined || loginUserLang.EntityId == null)? 'System': loginUserLang.EntityId)\n\n    // };\n    // data = setData;\n  console.log(\"loginUserLang\", loginUserLang);\n  \n  if(loginUserLang != null){\n    if(loginUserLang.PreferredLanguage == null){\n         \n      data.PreferLang = 'en-IE';\n    }\n    else{\n      data.PreferLang = loginUserLang.PreferredLanguage;\n    }\n    if(loginUserLang.EntityId == undefined || loginUserLang.EntityId == null){\n      data.CurrentUserId = 'System';  \n      }\n    else{\n      data.CurrentUserId = loginUserLang.EntityId;\n      }\n  }\n}\nconsole.log(\"data..\",data);\n  headers['accept-language'] = i18n.language;\n  headers['token'] = getAccessToken();\n  let isaSilent = isSilent === undefined ? false : isSilent\n\n  // instance.defaults.headers.common['Auth  orization'] = sessionStorage.getItem(\"token\");\n  if( url != 'api/getNotificationList' && url != 'api/getNotificationCount'){\n    if (typeof isaSilent === \"boolean\" && isaSilent !== true) {\n      let spinner = document.querySelector('.spinner');\n      let logo = document.querySelector('.logo-img');\n      spinner.classList.add('spinner-show');\n      logo.classList.add('spinner-show');\n    }\n  }\n\n  return new Promise((resolve, reject) => {\n    (() => {\n      if (method === 'get') {\n        return instance.request({\n          url, method, params: data, headers: headers\n        });\n      } else {\n        return instance.request({\n          url, method, data, headers: headers\n        });\n      }\n    })()\n      .then((res) => {\n        // console.log(res);\n        let spinner = document.querySelector('.spinner');\n        let logo = document.querySelector('.logo-img');\n\n        resolve(res.data);\n        spinner.classList.remove('spinner-show');\n        logo.classList.remove('spinner-show');\n      })\n      .catch((err) => {\n        let spinner = document.querySelector('.spinner');\n        let logo = document.querySelector('.logo-img');\n        spinner.classList.remove('spinner-show');\n        logo.classList.remove('spinner-show');\n        reject(err.response);\n      })\n      ;\n  });\n};\n\nexport default {\n  get: (endpoint, data, isSilent) => {\n    return request('get', endpoint, data, isSilent);\n  },\n  post: (endpoint, data, isSilent) => {\n    // return request('post', endpoint, JSON.stringify(data));\n    return request('post', endpoint, data, isSilent);\n  },\n  put: (endpoint, data, isSilent) => {\n    return request('put', endpoint, data, isSilent);\n  },\n  del: (endpoint, data, isSilent) => {\n    return request('delete', endpoint, data, isSilent);\n  },\n};\n\n\n"]},"metadata":{},"sourceType":"module"}