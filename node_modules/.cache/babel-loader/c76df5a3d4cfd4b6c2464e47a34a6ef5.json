{"ast":null,"code":"import _defineProperty from\"/Users/bhavik/Downloads/Cognisun/Evolution/Evolution_React/evolution_new/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _classCallCheck from\"/Users/bhavik/Downloads/Cognisun/Evolution/Evolution_React/evolution_new/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/bhavik/Downloads/Cognisun/Evolution/Evolution_React/evolution_new/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _assertThisInitialized from\"/Users/bhavik/Downloads/Cognisun/Evolution/Evolution_React/evolution_new/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";import _inherits from\"/Users/bhavik/Downloads/Cognisun/Evolution/Evolution_React/evolution_new/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/bhavik/Downloads/Cognisun/Evolution/Evolution_React/evolution_new/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component}from'react';import Select from'react-select';import api from'../../utils/apiClient';import moment from'moment';import DatePicker from'react-date-picker';import{withTranslation}from'react-i18next';import{DataTable}from'primereact/datatable';import{Column}from'primereact/column';import{CommonConfig}from'../../utils/constants';import{Button}from'primereact/button';import{MultiSelect}from'primereact/multiselect';import{Collapse,Button as BTN,Input,Card,CardHeader,InputGroup,CardBody,Row,Col}from'reactstrap';import APIConstant from'../../utils/constants';import'primereact/resources/themes/nova-light/theme.css';import'primereact/resources/primereact.min.css';import'primeicons/primeicons.css';import{Modal,ModalBody,ModalHeader,ModalFooter}from'reactstrap';import{toast}from'react-toastify';import SearchBox from'react-google-maps/lib/components/places/SearchBox';var SubAgentPaymentReport=/*#__PURE__*/function(_Component){_inherits(SubAgentPaymentReport,_Component);var _super=_createSuper(SubAgentPaymentReport);function SubAgentPaymentReport(props){var _this;_classCallCheck(this,SubAgentPaymentReport);_this=_super.call(this,props);_this.getPageString=function(e){var firstPage=e.first+1;var l=e.rows*(e.page+1);var lastPage=l<_this.state.arr.length?l:_this.state.arr.length;var str=firstPage+' to '+lastPage+' out of '+_this.state.arr.length+' records';_this.setState({selectedPage:e.first,str:str,rowsPerPage:e.rows});};_this.handleChange=function(e){_this.setState(_defineProperty({},e.target.name,e.target.value));if(e.target.name==='tillDate'){_this.setState({tillDate:e.target.value,tillDateError:false});_this.show('tillDate',false,'tillDateError','');}if(e.target.name==='newEntryDate'){if(CommonConfig.isEmpty(e.target.value)){_this.setState({newEntryDateError:true});_this.show(\"newEntryDate\",true,\"newEntryDateError\",\"Please enter date\");}else{_this.setState({newEntryDateError:false,newEntryDate:e.target.value});_this.show(\"newEntryDate\",false,\"newEntryDateError\",\"\");}}};var columns=[{field:\"TransactionDate\",header:\"TransactionDate\",sortable:true,filter:true,id:0,style:{'width':'100px'}},{field:\"UniqueReferenceId\",header:\"UniqueReferenceId\",sortable:true,filter:true,id:1,style:{'width':'60px'}},{field:\"TotalAmountPaidInBatch\",header:\"TotalAmountPaidInBatch\",sortable:true,filter:true,id:2,style:{'width':'80px'}},{field:\"PaymentMode\",header:\"PaymentMode\",sortable:true,filter:true,id:3,style:{'width':'80px'}},{field:\"PolicyNumber\",header:\"PolicyNumber\",sortable:true,filter:true,id:4,style:{'width':'80px'}},{field:\"ClientName\",header:\"ClientName\",sortable:true,filter:true,id:5,style:{'width':'100px'}},{field:\"ClientDue\",header:\"ClientDue\",sortable:true,filter:true,id:6,style:{'width':'60px','textAlign':'right'}},{field:\"Commission\",header:\"Commission\",sortable:true,filter:true,id:7,style:{'width':'60px','textAlign':'right'}},{field:\"NetDue\",header:\"NetDue\",sortable:true,filter:true,id:8,style:{'width':'60px','textAlign':'right'}},{field:\"AmountPaid\",header:\"AmountPaid\",sortable:true,filter:true,id:9,style:{'width':'60px','textAlign':'right'}},{field:\"PolicyAccountReferenceId\",header:\"PolicyAccountReferenceId\",sortable:true,filter:true,id:12,style:{'width':'60px','textAlign':'right'}}];_this.state={LanguageId:props.i18n.language==='en'?'en-GB':props.i18n.language==='es'?'es-ES':props.i18n.language==='ie'?'en-IE':props.i18n.language,cols:columns,showcol2:false,arr:[],selectedPage:0,rowsPerPageOptions:CommonConfig.dataTableConfig.rowsPerPageOptions,str:'',rowsPerPage:CommonConfig.dataTableConfig.rowsPerPage,globalFilter:null,searchCollapse:false,selected:{},selectedPolicy:0,selectedAgent:'',selectAll:0,newEntryDate:'',newEntryDateError:false,paymentMode:'',paymentModearr:[],paymentModeError:false,note:'',DebtorType:'SubAgent',DebtorTypeError:false,agentinfo:'',agentinfoError:false,tillDate:moment().format(\"YYYY-MM\"),tillDateError:false};_this.colOptions=[];for(var _i=0,_columns=columns;_i<_columns.length;_i++){var col=_columns[_i];_this.colOptions.push({label:col.header,value:col});}_this.export=_this.export.bind(_assertThisInitialized(_this));return _this;}_createClass(SubAgentPaymentReport,[{key:\"componentDidMount\",value:function componentDidMount(){this.getOrganazationData('SubAgent');}},{key:\"toggleRow\",value:function toggleRow(id){var newSelected=Object.assign({},this.state.selected);newSelected[id]=!this.state.selected[id];this.setState({selected:newSelected,selectAll:2});}},{key:\"actionTemplate\",value:function actionTemplate(rowData,column){var _this2=this;return/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"input\",{type:\"checkbox\",className:\"checkbox\",checked:this.state.selected[rowData.id]===true,onChange:function onChange(){return _this2.toggleRow(rowData.id);}}));}},{key:\"toggleSelectAll\",value:function toggleSelectAll(){var newSelected={};if(this.state.selectAll===0){this.state.arr.forEach(function(x){newSelected[x.id]=true;});}this.setState({selected:newSelected,selectAll:this.state.selectAll===0?1:0});}},{key:\"DateDetails\",value:function DateDetails(rowData){return/*#__PURE__*/React.createElement(\"div\",{className:\"policy-list-data\"},/*#__PURE__*/React.createElement(\"p\",null,rowData.RenewalDate),/*#__PURE__*/React.createElement(\"p\",null,rowData.InceptionDate));}},{key:\"getDropDownValues\",value:function getDropDownValues(stringMapType,setStateName,orderBy){var _this3=this;try{var data={stringmaptype:stringMapType,orderby:orderBy};api.post(APIConstant.path.dropdownbycode,data).then(function(res){if(res.success){_this3.setState(_defineProperty({},setStateName,res.data));}else{}}).catch(function(err){});}catch(error){}}},{key:\"SubAgentPaymentReport\",value:function SubAgentPaymentReport(){var _this4=this;var data={DebtorType:this.state.DebtorType?this.state.DebtorType:'',agentinfo:this.state.agentinfo?this.state.agentinfo:'',tillDate:this.state.tillDate?this.state.tillDate:''};api.post('api/SubAgentPaymentReport',data).then(function(res){if(res.success){var formattedData=[];_this4.setState({selectedPage:0});var dataLength=res.data[0].length;if(dataLength>0){var AmountPaid=0;var ClientDue=0;var Commission=0;var NetDue=0;var TotalAmountPaidInBatch=0;for(var i=0;i<dataLength;i++){var tempData=res.data[0][i];formattedData.push({id:i,AmountPaid:tempData.AmountPaid,ClientDue:tempData.ClientDue,ClientName:tempData.ClientName,Commission:tempData.Commission,NetDue:tempData.NetDue,PaymentMode:tempData.PaymentMode,PolicyAccountReferenceId:tempData.PolicyAccountReferenceId,PolicyNumber:tempData.PolicyNumber,TotalAmountPaidInBatch:tempData.TotalAmountPaidInBatch,TransactionDate:moment(tempData.TransactionDate).format('DD/MM/YYYY'),UniqueReferenceId:tempData.UniqueReferenceId});AmountPaid=AmountPaid+tempData.AmountPaid;Commission=Commission+tempData.Commission;ClientDue=ClientDue+tempData.ClientDue;NetDue=NetDue+tempData.NetDue;TotalAmountPaidInBatch=TotalAmountPaidInBatch+tempData.TotalAmountPaidInBatch;}formattedData.push({TransactionDate:'Total',AmountPaid:parseFloat(AmountPaid).toFixed(2),ClientDue:parseFloat(ClientDue).toFixed(2),Commission:parseFloat(Commission).toFixed(2),NetDue:parseFloat(NetDue).toFixed(2),TotalAmountPaidInBatch:parseFloat(TotalAmountPaidInBatch).toFixed(2)});}var firstPage=formattedData.length?'1':'0';var lastPage=_this4.state.rowsPerPage<formattedData.length?_this4.state.rowsPerPage:formattedData.length;var str=firstPage+' to '+lastPage+' out of '+formattedData.length+' records';_this4.setState({arr:formattedData,str:str});}});}},{key:\"export\",value:function _export(){this.dt.exportCSV();}},{key:\"filterData\",value:function filterData(){if(this.state.radioSelected||this.state.DebtorType==''||this.state.agentinfo==''){toast.error(\"Select Sub Agent First\");}else{this.SubAgentPaymentReport();}}},{key:\"onRadioBtnClick\",value:function onRadioBtnClick(e){this.setState({radioSelected:e.target.checked,agentinfo:''});this.state.agentinfo='';this.SubAgentPaymentReport();}},{key:\"selectType\",value:function selectType(value,type){if(type==='DebtorType'){this.setState({DebtorTypeError:false,DebtorType:value});this.show('DebtorType',false,\"DebtorTypeError\",\"\");this.getOrganazationData(value);}if(type==='paymentMode'){if(CommonConfig.isEmpty(value)){this.setState({paymentModeError:true,paymentMode:value});this.show('paymentMode',true,\"paymentModeError\",\"Select payment mode\");}else{this.setState({paymentModeError:false,paymentMode:value});this.show('paymentMode',false,\"paymentModeError\",\"\");}}if(type==='agentinfo'){this.setState({agentinfo:value,radioSelected:false,DebtorType:'SubAgent'});}}},{key:\"getOrganazationData\",value:function getOrganazationData(ContactType){var _this5=this;try{var data={ContactType:ContactType};api.post('api/getOrganazationData',data).then(function(res){if(res.success){var formattedData=[];for(var i=0;i<res.data.length;i++){formattedData.push({label:res.data[i].OrganizationName,value:res.data[i].OrganizationId});}_this5.setState({sourceList:formattedData});}else{console.log('getOrganazationData_error');}}).catch(function(err){console.log('getOrganazationData',err);});}catch(error){console.log('getOrganazationData',error);}}},{key:\"show\",value:function show(field,condition,errorField,message){if(condition){if(document.getElementById(field))document.getElementById(field).className=\"form-control is-invalid\";if(document.getElementById(errorField))document.getElementById(errorField).innerHTML='<p>'+message+' </p>';}else{if(document.getElementById(field))document.getElementById(field).className=\"form-control\";if(document.getElementById(errorField))document.getElementById(errorField).innerHTML=null;}}},{key:\"render\",value:function render(){var _this6=this;var t=this.props.t;var header=null;var columns='';columns=this.state.cols.map(function(col,i){return/*#__PURE__*/React.createElement(Column,{key:i,field:col.field,header:col.header,body:col.body,sortable:col.sortable,filter:col.filter,filterMatchMode:col.filterMatchMode,style:col.style});});return/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"div\",{className:\"basic-header\"},/*#__PURE__*/React.createElement(\"h1\",null,\"Sub Agent Payment Report\"),/*#__PURE__*/React.createElement(\"div\",{md:\"3\",className:\"header-right-option\"},/*#__PURE__*/React.createElement(MultiSelect,{value:this.state.cols,options:this.colOptions,fixedPlaceholder:true,placeholder:CommonConfig.dataTableConfig.columnToggleIcon,tooltip:\"Show / Hide Column\",tooltipOptions:{position:'bottom'},onChange:this.onColumnToggle,style:{width:'50px'}}),/*#__PURE__*/React.createElement(Button,{type:\"button\",icon:\"pi pi-external-link\",tooltip:\"Export as CSV\",tooltipOptions:{position:'bottom'},onClick:this.export,style:{marginRight:10}}))),/*#__PURE__*/React.createElement(\"div\",{className:\"input-box\",id:\"accordion\"},/*#__PURE__*/React.createElement(Card,{className:\"mb-0\"},/*#__PURE__*/React.createElement(CardHeader,{id:\"headingOne\"},/*#__PURE__*/React.createElement(BTN,{block:true,color:\"link\",className:\"text-left m-0 p-0\",onClick:function onClick(){return _this6.setState({custom:!_this6.state.custom});},\"aria-expanded\":this.state.custom,\"aria-controls\":\"collapseOne\"},/*#__PURE__*/React.createElement(\"h5\",{className:\"m-0 p-0\"},\"Search Sub Agent\",/*#__PURE__*/React.createElement(\"i\",{style:{float:'right'},className:this.state.custom?\"fa fa-chevron-down\":\"fa fa-chevron-up\"})))),/*#__PURE__*/React.createElement(Collapse,{isOpen:this.state.custom,\"data-parent\":\"#accordion\",id:\"collapseOne\",\"aria-labelledby\":\"headingOne\"},/*#__PURE__*/React.createElement(CardBody,null,/*#__PURE__*/React.createElement(\"div\",{className:\"filter-data\"},/*#__PURE__*/React.createElement(Row,null,\" \",/*#__PURE__*/React.createElement(Col,{md:\"3\"},/*#__PURE__*/React.createElement(\"label\",null,\"Select Agent\"),/*#__PURE__*/React.createElement(Select,{name:\"agentinfo\",id:\"agentinfo\",options:this.state.sourceList,value:this.state.agentinfo,onChange:function onChange(data){return _this6.selectType(data,'agentinfo');}})),/*#__PURE__*/React.createElement(Col,{md:\"2\"},/*#__PURE__*/React.createElement(BTN,{color:\"success\",title:\"Search\",onClick:function onClick(){return _this6.filterData();}},\" Search \")))))))),/*#__PURE__*/React.createElement(\"div\",{className:\"table-custom\"},/*#__PURE__*/React.createElement(DataTable,{ref:function ref(el){return _this6.dt=el;},value:this.state.arr,first:this.state.selectedPage,onPage:function onPage(e){return _this6.getPageString(e);},paginator:true,rows:this.state.rowsPerPage,header:header,totalRecords:this.state.arr.length,exportFilename:\"Sub Agent Payment Report\",currentPageReportTemplate:this.state.str,scrollable:true,paginatorTemplate:\"CurrentPageReport FirstPageLink PrevPageLink PageLinks NextPageLink LastPageLink RowsPerPageDropdown\",rowsPerPageOptions:this.state.rowsPerPageOptions,globalFilter:this.state.globalFilter,emptyMessage:\"No records found\",responsive:true,resizableColumns:true,columnResizeMode:\"expand\"},columns)));}}]);return SubAgentPaymentReport;}(Component);export default withTranslation()(SubAgentPaymentReport);","map":{"version":3,"sources":["/Users/bhavik/Downloads/Cognisun/Evolution/Evolution_React/evolution_new/src/views/Reports/SubAgentPaymentReport.js"],"names":["React","Component","Select","api","moment","DatePicker","withTranslation","DataTable","Column","CommonConfig","Button","MultiSelect","Collapse","BTN","Input","Card","CardHeader","InputGroup","CardBody","Row","Col","APIConstant","Modal","ModalBody","ModalHeader","ModalFooter","toast","SearchBox","SubAgentPaymentReport","props","getPageString","e","firstPage","first","l","rows","page","lastPage","state","arr","length","str","setState","selectedPage","rowsPerPage","handleChange","target","name","value","tillDate","tillDateError","show","isEmpty","newEntryDateError","newEntryDate","columns","field","header","sortable","filter","id","style","LanguageId","i18n","language","cols","showcol2","rowsPerPageOptions","dataTableConfig","globalFilter","searchCollapse","selected","selectedPolicy","selectedAgent","selectAll","paymentMode","paymentModearr","paymentModeError","note","DebtorType","DebtorTypeError","agentinfo","agentinfoError","format","colOptions","col","push","label","export","bind","getOrganazationData","newSelected","Object","assign","rowData","column","toggleRow","forEach","x","RenewalDate","InceptionDate","stringMapType","setStateName","orderBy","data","stringmaptype","orderby","post","path","dropdownbycode","then","res","success","catch","err","error","formattedData","dataLength","AmountPaid","ClientDue","Commission","NetDue","TotalAmountPaidInBatch","i","tempData","ClientName","PaymentMode","PolicyAccountReferenceId","PolicyNumber","TransactionDate","UniqueReferenceId","parseFloat","toFixed","dt","exportCSV","radioSelected","checked","type","ContactType","OrganizationName","OrganizationId","sourceList","console","log","condition","errorField","message","document","getElementById","className","innerHTML","t","map","body","filterMatchMode","columnToggleIcon","position","onColumnToggle","width","marginRight","custom","float","selectType","filterData","el"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\r\nimport Select from 'react-select';\r\nimport api from '../../utils/apiClient';\r\nimport moment from 'moment';\r\nimport DatePicker from 'react-date-picker';\r\nimport { withTranslation } from 'react-i18next';\r\nimport { DataTable } from 'primereact/datatable';\r\nimport { Column } from 'primereact/column';\r\nimport { CommonConfig } from '../../utils/constants';\r\nimport { Button } from 'primereact/button';\r\nimport { MultiSelect } from 'primereact/multiselect';\r\nimport { Collapse, Button as BTN, Input, Card, CardHeader, InputGroup, CardBody, Row, Col } from 'reactstrap';\r\nimport APIConstant from '../../utils/constants';\r\nimport 'primereact/resources/themes/nova-light/theme.css';\r\nimport 'primereact/resources/primereact.min.css';\r\nimport 'primeicons/primeicons.css';\r\nimport { Modal, ModalBody, ModalHeader, ModalFooter } from 'reactstrap';\r\nimport { toast } from 'react-toastify';\r\nimport SearchBox from 'react-google-maps/lib/components/places/SearchBox';\r\n\r\nclass SubAgentPaymentReport extends Component {\r\n\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        let columns = [\r\n            { field: \"TransactionDate\", header: \"TransactionDate\", sortable: true, filter: true, id: 0, style: { 'width': '100px' } },\r\n            { field: \"UniqueReferenceId\", header: \"UniqueReferenceId\", sortable: true, filter: true, id: 1, style: { 'width': '60px' } },\r\n            { field: \"TotalAmountPaidInBatch\", header: \"TotalAmountPaidInBatch\", sortable: true, filter: true, id: 2, style: { 'width': '80px' } },\r\n            { field: \"PaymentMode\", header: \"PaymentMode\", sortable: true, filter: true, id: 3, style: { 'width': '80px' } },\r\n            { field: \"PolicyNumber\", header: \"PolicyNumber\", sortable: true, filter: true, id: 4, style: { 'width': '80px' } },\r\n            { field: \"ClientName\", header: \"ClientName\", sortable: true, filter: true, id: 5, style: { 'width': '100px' } },\r\n            { field: \"ClientDue\", header: \"ClientDue\", sortable: true, filter: true, id: 6, style: { 'width': '60px', 'textAlign': 'right' } },\r\n            { field: \"Commission\", header: \"Commission\", sortable: true, filter: true, id: 7, style: { 'width': '60px', 'textAlign': 'right' } },\r\n            { field: \"NetDue\", header: \"NetDue\", sortable: true, filter: true, id: 8, style: { 'width': '60px', 'textAlign': 'right' } },\r\n            { field: \"AmountPaid\", header: \"AmountPaid\", sortable: true, filter: true, id: 9, style: { 'width': '60px', 'textAlign': 'right' } },\r\n            { field: \"PolicyAccountReferenceId\", header: \"PolicyAccountReferenceId\", sortable: true, filter: true, id: 12, style: { 'width': '60px', 'textAlign': 'right' } },\r\n        ];\r\n     \r\n        this.state = {\r\n            LanguageId: (props.i18n.language === 'en') ? 'en-GB' : (props.i18n.language === 'es') ? 'es-ES' : (props.i18n.language === 'ie') ? 'en-IE' : props.i18n.language,\r\n            cols: columns,\r\n            showcol2: false,\r\n            arr: [],\r\n            selectedPage: 0,\r\n            rowsPerPageOptions: CommonConfig.dataTableConfig.rowsPerPageOptions,\r\n            str: '',\r\n            rowsPerPage: CommonConfig.dataTableConfig.rowsPerPage,\r\n            globalFilter: null,\r\n            searchCollapse: false,\r\n            selected: {},\r\n            selectedPolicy: 0,\r\n            selectedAgent: '',\r\n            selectAll: 0,\r\n            newEntryDate: '',\r\n            newEntryDateError: false,\r\n            paymentMode: '',\r\n            paymentModearr: [],\r\n            paymentModeError: false,\r\n            note: '',\r\n            DebtorType: 'SubAgent',\r\n            DebtorTypeError: false,\r\n            agentinfo: '',\r\n            agentinfoError: false,\r\n            tillDate: moment().format(\"YYYY-MM\"),\r\n            tillDateError: false,\r\n        };\r\n\r\n        this.colOptions = [];\r\n        for (let col of columns) {\r\n            this.colOptions.push({ label: col.header, value: col });\r\n        }\r\n\r\n        this.export = this.export.bind(this);\r\n    }\r\n\r\n    componentDidMount() {\r\n        this.getOrganazationData('SubAgent');\r\n    }\r\n\r\n\r\n    toggleRow(id) {\r\n        const newSelected = Object.assign({}, this.state.selected);\r\n        newSelected[id] = !this.state.selected[id];\r\n        this.setState({\r\n            selected: newSelected,\r\n            selectAll: 2\r\n        });\r\n    }\r\n\r\n    actionTemplate(rowData, column) {\r\n        return <div>\r\n            <input\r\n                type=\"checkbox\"\r\n                className=\"checkbox\"\r\n                checked={this.state.selected[rowData.id] === true}\r\n                onChange={() => this.toggleRow(rowData.id)} />\r\n        </div>;\r\n    }\r\n\r\n    toggleSelectAll() {\r\n        let newSelected = {};\r\n        if (this.state.selectAll === 0) {\r\n            this.state.arr.forEach(x => {\r\n                newSelected[x.id] = true;\r\n            });\r\n        }\r\n        this.setState({\r\n            selected: newSelected,\r\n            selectAll: this.state.selectAll === 0 ? 1 : 0\r\n        });\r\n    }\r\n\r\n\r\n    DateDetails(rowData) {\r\n        return (\r\n            <div className=\"policy-list-data\">\r\n                <p>{rowData.RenewalDate}</p>\r\n                <p>{rowData.InceptionDate}</p>\r\n            </div>\r\n        )\r\n    }\r\n\r\n\r\n    getDropDownValues(stringMapType, setStateName, orderBy) {\r\n        try {\r\n            const data = {\r\n                stringmaptype: stringMapType,\r\n                orderby: orderBy\r\n            };\r\n            api.post(APIConstant.path.dropdownbycode, data).then(res => {\r\n                if (res.success) {\r\n                    this.setState({ [setStateName]: res.data });\r\n                } else {\r\n                }\r\n            }).catch(err => {\r\n            });\r\n        } catch (error) {\r\n        }\r\n    }\r\n\r\n    SubAgentPaymentReport() {\r\n        var data = {\r\n            DebtorType: this.state.DebtorType ? this.state.DebtorType : '',\r\n            agentinfo: this.state.agentinfo ? this.state.agentinfo : '',\r\n            tillDate: this.state.tillDate ? this.state.tillDate : ''\r\n        };\r\n        api.post('api/SubAgentPaymentReport', data).then(res => {\r\n            if (res.success) {\r\n                var formattedData = [];\r\n                this.setState({\r\n                    selectedPage: 0\r\n                });\r\n                var dataLength = res.data[0].length;\r\n                if (dataLength > 0) {\r\n\r\n                    var AmountPaid = 0;\r\n                    var ClientDue = 0;\r\n                    var Commission = 0;\r\n                    var NetDue = 0;\r\n                    var TotalAmountPaidInBatch = 0;\r\n\r\n                    for (let i = 0; i < dataLength; i++) {\r\n                        var tempData = res.data[0][i];\r\n                        formattedData.push({\r\n                            id: i,\r\n                            AmountPaid: tempData.AmountPaid,\r\n                            ClientDue: tempData.ClientDue,\r\n                            ClientName: tempData.ClientName,\r\n                            Commission: tempData.Commission,\r\n                            NetDue: tempData.NetDue,\r\n                            PaymentMode: tempData.PaymentMode,\r\n                            PolicyAccountReferenceId: tempData.PolicyAccountReferenceId,\r\n                            PolicyNumber: tempData.PolicyNumber,\r\n                            TotalAmountPaidInBatch: tempData.TotalAmountPaidInBatch,\r\n                            TransactionDate: moment(tempData.TransactionDate).format('DD/MM/YYYY'),\r\n                            UniqueReferenceId: tempData.UniqueReferenceId,\r\n                        });\r\n                        AmountPaid = AmountPaid + tempData.AmountPaid;\r\n                        Commission = Commission + tempData.Commission;\r\n                        ClientDue = ClientDue + tempData.ClientDue;\r\n                        NetDue = NetDue + tempData.NetDue;\r\n                        TotalAmountPaidInBatch = TotalAmountPaidInBatch + tempData.TotalAmountPaidInBatch;\r\n                    }\r\n                    formattedData.push({\r\n                        TransactionDate: 'Total',\r\n                        AmountPaid: parseFloat(AmountPaid).toFixed(2),\r\n                        ClientDue: parseFloat(ClientDue).toFixed(2),\r\n                        Commission: parseFloat(Commission).toFixed(2),\r\n                        NetDue: parseFloat(NetDue).toFixed(2),\r\n                        TotalAmountPaidInBatch: parseFloat(TotalAmountPaidInBatch).toFixed(2)\r\n                    });\r\n                }\r\n\r\n                let firstPage = (formattedData.length) ? '1' : '0';\r\n                let lastPage = (this.state.rowsPerPage < formattedData.length) ? this.state.rowsPerPage : formattedData.length;\r\n                let str = firstPage + ' to ' + lastPage + ' out of ' + formattedData.length + ' records';\r\n                this.setState({ arr: formattedData, str: str });\r\n            }\r\n        });\r\n    }\r\n\r\n    getPageString = (e) => {\r\n        let firstPage = e.first + 1;\r\n        let l = e.rows * (e.page + 1);\r\n        let lastPage = (l < this.state.arr.length) ? l : this.state.arr.length\r\n        var str = firstPage + ' to ' + lastPage + ' out of ' + this.state.arr.length + ' records';\r\n        this.setState({ selectedPage: e.first, str: str, rowsPerPage: e.rows });\r\n    }\r\n\r\n    export() {\r\n        this.dt.exportCSV();\r\n    }\r\n\r\n    filterData() {\r\n        if (this.state.radioSelected || this.state.DebtorType == '' || this.state.agentinfo == '') {\r\n            toast.error(\"Select Sub Agent First\");\r\n        } else {\r\n            this.SubAgentPaymentReport();\r\n        }\r\n    }\r\n    onRadioBtnClick(e) {\r\n        this.setState({\r\n            radioSelected: e.target.checked,\r\n            agentinfo: ''\r\n        });\r\n        this.state.agentinfo = '';\r\n        this.SubAgentPaymentReport();\r\n    }\r\n\r\n    handleChange = (e) => {\r\n\r\n        this.setState({ [e.target.name]: e.target.value });\r\n\r\n        if (e.target.name === 'tillDate') {\r\n            this.setState({ tillDate: e.target.value, tillDateError: false });\r\n            this.show('tillDate', false, 'tillDateError', '');\r\n\r\n        }\r\n        if (e.target.name === 'newEntryDate') {\r\n            if (CommonConfig.isEmpty(e.target.value)) {\r\n                this.setState({ newEntryDateError: true });\r\n                this.show(\"newEntryDate\", true, \"newEntryDateError\", \"Please enter date\");\r\n            } else {\r\n                this.setState({ newEntryDateError: false, newEntryDate: e.target.value });\r\n                this.show(\"newEntryDate\", false, \"newEntryDateError\", \"\");\r\n            }\r\n        }\r\n    }\r\n\r\n    selectType(value, type) {\r\n\r\n        if (type === 'DebtorType') {\r\n\r\n            this.setState({ DebtorTypeError: false, DebtorType: value });\r\n            this.show('DebtorType', false, \"DebtorTypeError\", \"\");\r\n            this.getOrganazationData(value)\r\n\r\n        }\r\n        if (type === 'paymentMode') {\r\n            if (CommonConfig.isEmpty(value)) {\r\n                this.setState({ paymentModeError: true, paymentMode: value });\r\n                this.show('paymentMode', true, \"paymentModeError\", \"Select payment mode\");\r\n            } else {\r\n                this.setState({ paymentModeError: false, paymentMode: value });\r\n                this.show('paymentMode', false, \"paymentModeError\", \"\");\r\n\r\n            }\r\n        }\r\n        if (type === 'agentinfo') {\r\n\r\n            this.setState({ agentinfo: value, radioSelected: false, DebtorType: 'SubAgent' });\r\n\r\n        }\r\n    }\r\n\r\n    getOrganazationData(ContactType) {\r\n        try {\r\n            let data = { ContactType: ContactType };\r\n            api.post('api/getOrganazationData', data).then(res => {\r\n                if (res.success) {\r\n                    var formattedData = [];\r\n                    for (let i = 0; i < res.data.length; i++) {\r\n                        formattedData.push({\r\n                            label: res.data[i].OrganizationName,\r\n                            value: res.data[i].OrganizationId,\r\n                        })\r\n                    }\r\n                    this.setState({ sourceList: formattedData });\r\n                } else {\r\n                    console.log('getOrganazationData_error');\r\n                }\r\n            }).catch(err => {\r\n                console.log('getOrganazationData', err);\r\n            });\r\n        } catch (error) {\r\n            console.log('getOrganazationData', error);\r\n        }\r\n    }\r\n\r\n    show(field, condition, errorField, message) {\r\n        if (condition) {\r\n            if (document.getElementById(field))\r\n                document.getElementById(field).className = \"form-control is-invalid\";\r\n\r\n            if (document.getElementById(errorField))\r\n                document.getElementById(errorField).innerHTML = '<p>' + message + ' </p>';\r\n        } else {\r\n            if (document.getElementById(field))\r\n                document.getElementById(field).className = \"form-control\";\r\n\r\n            if (document.getElementById(errorField))\r\n                document.getElementById(errorField).innerHTML = null;\r\n        }\r\n    }\r\n\r\n\r\n    render() {\r\n        const { t } = this.props;\r\n        var header = null;\r\n        let columns = '';\r\n      \r\n            columns = this.state.cols.map((col, i) => {\r\n                return <Column key={i} field={col.field} header={col.header} body={col.body} sortable={col.sortable} filter={col.filter} filterMatchMode={col.filterMatchMode} style={col.style}\r\n                />;\r\n            });\r\n            return (\r\n                <div>\r\n                    <div className=\"basic-header\">\r\n                        <h1>Sub Agent Payment Report</h1>\r\n                        <div md=\"3\" className=\"header-right-option\" >\r\n                            <MultiSelect value={this.state.cols} options={this.colOptions}\r\n                                fixedPlaceholder={true} placeholder={CommonConfig.dataTableConfig.columnToggleIcon} tooltip=\"Show / Hide Column\" tooltipOptions={{ position: 'bottom' }}\r\n                                onChange={this.onColumnToggle} style={{ width: '50px' }}\r\n                            />\r\n\r\n                            <Button type=\"button\" icon=\"pi pi-external-link\" tooltip=\"Export as CSV\" tooltipOptions={{ position: 'bottom' }} onClick={this.export} style={{ marginRight: 10 }}></Button>\r\n                        </div>\r\n                    </div>\r\n                    <div className=\"input-box\" id=\"accordion\">\r\n                        <Card className=\"mb-0\">\r\n                            <CardHeader id=\"headingOne\">\r\n                                <BTN block color=\"link\" className=\"text-left m-0 p-0\" onClick={() => this.setState({ custom: !this.state.custom })} aria-expanded={this.state.custom} aria-controls=\"collapseOne\">\r\n                                    <h5 className=\"m-0 p-0\">\r\n                                        Search Sub Agent\r\n                        <i style={{ float: 'right' }} className={this.state.custom ? \"fa fa-chevron-down\" : \"fa fa-chevron-up\"}></i>\r\n                                    </h5>\r\n                                </BTN>\r\n                            </CardHeader>\r\n                            <Collapse isOpen={this.state.custom} data-parent=\"#accordion\" id=\"collapseOne\" aria-labelledby=\"headingOne\">\r\n                                <CardBody>\r\n                                    <div className=\"filter-data\">\r\n                                        <Row> <Col md=\"3\">\r\n                                            <label>Select Agent</label>\r\n                                            <Select name=\"agentinfo\" id=\"agentinfo\" options={this.state.sourceList}\r\n                                                value={this.state.agentinfo} onChange={(data) => this.selectType(data, 'agentinfo')}\r\n                                            />\r\n                                        </Col>\r\n                                         {/* <Col md=\"3\">\r\n                                                <label>\r\n                                                    <Input type=\"checkbox\" name=\"radioSelected\"\r\n                                                        checked={this.state.radioSelected}\r\n                                                        value={this.state.radioSelected}\r\n                                                        onChange={(e) => this.onRadioBtnClick(e)}\r\n                                                    /> All Agent</label>\r\n                                            </Col> */}\r\n                                            <Col md=\"2\">\r\n                                                <BTN color=\"success\" title=\"Search\" onClick={() => this.filterData()}> Search </BTN>\r\n                                            </Col>\r\n\r\n                                        </Row>\r\n                                    </div>\r\n                                </CardBody>\r\n                            </Collapse>\r\n                        </Card>\r\n                    </div>\r\n                    <div className=\"table-custom\">\r\n                        <DataTable ref={(el) => this.dt = el} value={this.state.arr} first={this.state.selectedPage} onPage={(e) => this.getPageString(e)}\r\n                            paginator={true} rows={this.state.rowsPerPage} header={header} totalRecords={this.state.arr.length} exportFilename=\"Sub Agent Payment Report\"\r\n                            currentPageReportTemplate={this.state.str}\r\n                            scrollable={true}\r\n                            paginatorTemplate=\"CurrentPageReport FirstPageLink PrevPageLink PageLinks NextPageLink LastPageLink RowsPerPageDropdown\"\r\n                            rowsPerPageOptions={this.state.rowsPerPageOptions} globalFilter={this.state.globalFilter} emptyMessage=\"No records found\"\r\n                            responsive={true} resizableColumns={true} columnResizeMode=\"expand\">\r\n                            {columns}\r\n                        </DataTable>\r\n                    </div>\r\n                </div>\r\n            )\r\n        }\r\n    }\r\n\r\n    export default withTranslation()(SubAgentPaymentReport);\r\n"]},"metadata":{},"sourceType":"module"}