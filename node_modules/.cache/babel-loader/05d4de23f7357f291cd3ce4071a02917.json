{"ast":null,"code":"import _regeneratorRuntime from\"/Users/bhavik/Downloads/Cognisun/Evolution/Evolution_React/evolution_new/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/bhavik/Downloads/Cognisun/Evolution/Evolution_React/evolution_new/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _defineProperty from\"/Users/bhavik/Downloads/Cognisun/Evolution/Evolution_React/evolution_new/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _classCallCheck from\"/Users/bhavik/Downloads/Cognisun/Evolution/Evolution_React/evolution_new/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/bhavik/Downloads/Cognisun/Evolution/Evolution_React/evolution_new/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _assertThisInitialized from\"/Users/bhavik/Downloads/Cognisun/Evolution/Evolution_React/evolution_new/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";import _inherits from\"/Users/bhavik/Downloads/Cognisun/Evolution/Evolution_React/evolution_new/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/bhavik/Downloads/Cognisun/Evolution/Evolution_React/evolution_new/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component}from'react';import Select from'react-select';import api from'../../utils/apiClient';import moment from'moment';import DatePicker from'react-date-picker';import{withTranslation}from'react-i18next';import{DataTable}from'primereact/datatable';import{Column}from'primereact/column';import{CommonConfig}from'../../utils/constants';import{Button}from'primereact/button';import{MultiSelect}from'primereact/multiselect';import{Collapse,Button as BTN,Input,Card,CardHeader,CardBody,Row,Col}from'reactstrap';import{toast}from'react-toastify';import APIConstant from'../../utils/constants';var BulkRenewals=/*#__PURE__*/function(_Component){_inherits(BulkRenewals,_Component);var _super=_createSuper(BulkRenewals);function BulkRenewals(props){var _this;_classCallCheck(this,BulkRenewals);_this=_super.call(this,props);_this.getPageString=function(e){var firstPage=e.first+1;var l=e.rows*(e.page+1);var lastPage=l<_this.state.arr.length?l:_this.state.arr.length;var str=firstPage+' to '+lastPage+' out of '+_this.state.arr.length+' records';_this.setState({selectedPage:e.first,str:str,rowsPerPage:e.rows});};_this.handleChange=function(e){_this.setState(_defineProperty({},e.target.name,e.target.value));if(e.target.name==='fromDate'){_this.setState({fromDate:e.target.value});}if(e.target.name==='toDate'){_this.setState({toDate:e.target.value});}};var columns=[{body:_this.actionTemplate.bind(_assertThisInitialized(_this)),field:\"Select\",header:\"Select\",sortable:false,id:\"checkbox\",style:{'width':'45px'}},{field:\"PolicyId\",header:\"Policy Id\",sortable:true,filter:true,id:1,style:{'width':'100px'}},{field:\"PolicyNumber\",header:\"Policy Number\",sortable:true,filter:true,id:2,style:{'width':'60px'}},{field:\"ClientName\",header:\"Client\",sortable:true,filter:true,id:3,style:{'width':'100px'}},{field:\"InceptionDate\",header:\"InceptionDate\",sortable:true,filter:true,id:4,style:{'width':'80px'}},{field:\"RenewalDate\",header:\"RenewalDate    \",sortable:true,filter:true,id:5,style:{'width':'80px'}},{field:\"Status\",header:\"Status\",sortable:true,filter:true,id:6,style:{'width':'80px'}},{field:\"ComputationStatus\",header:\"Computation Status\",sortable:true,filter:true,id:7,style:{'width':'70px'}},{field:\"ComputationError\",header:\"Computation Error\",sortable:true,filter:true,id:8,style:{'width':'100px'}},{field:\"AccChargeStatus\",header:\"Acc Charge Status\",sortable:true,filter:true,id:9,style:{'width':'70px'}},{field:\"AccChargeError\",header:\"Acc Charge Error\",sortable:true,filter:true,id:10,style:{'width':'100px'}},{field:\"DocumentStatus\",header:\"Document Status\",sortable:true,filter:true,id:11,style:{'width':'70px'}},{field:\"DocumentError\",header:\"Document Error\",sortable:true,filter:true,id:12,style:{'width':'100px'}},{field:\"OverallStatus\",header:\"Overall Status\",sortable:true,filter:true,id:13,style:{'width':'100px'}}// { field: \"PaidAmount\", header: \"Paid Amt\", sortable: true, filter: true, id: 14,style: { 'width': '100px' } },\n// { field: \"Outstanding\", header: \"Outstanding Amt\", sortable: true, filter: true, id: 15,style: { 'width': '100px' } },\n// { field: \"DueDate\", header: \"Outstanding Since\", sortable: true, filter: true, id: 16,style: { 'width': '100px' } },\n// { field: \"DayAfterDueDate\", header: \"No of Days\", sortable: true, filter: true, id: 17 }\n];_this.state={LanguageId:props.i18n.language==='en'?'en-GB':props.i18n.language==='es'?'es-ES':props.i18n.language==='ie'?'en-IE':props.i18n.language,cols:columns,arr:[],selectedPage:0,rowsPerPageOptions:CommonConfig.dataTableConfig.rowsPerPageOptions,str:'',rowsPerPage:CommonConfig.dataTableConfig.rowsPerPage,globalFilter:null,searchCollapse:false,fromDate:'',toDate:'',selected:{},selectAll:0};_this.colOptions=[];for(var _i=0,_columns=columns;_i<_columns.length;_i++){var col=_columns[_i];_this.colOptions.push({label:col.header,value:col});}_this.toggleRow=_this.toggleRow.bind(_assertThisInitialized(_this));_this.export=_this.export.bind(_assertThisInitialized(_this));return _this;}_createClass(BulkRenewals,[{key:\"componentDidMount\",value:function componentDidMount(){}},{key:\"getDropDownValues\",value:function getDropDownValues(stringMapType,setStateName,orderBy){var _this2=this;try{var data={stringmaptype:stringMapType,orderby:orderBy};api.post(APIConstant.path.dropdownbycode,data).then(function(res){if(res.success){_this2.setState(_defineProperty({},setStateName,res.data));}else{}}).catch(function(err){});}catch(error){}}},{key:\"actionTemplate\",value:function actionTemplate(rowData,column){var _this3=this;return/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"input\",{type:\"checkbox\",className:\"checkbox\",checked:this.state.selected[rowData.id]===true,onChange:function onChange(){return _this3.toggleRow(rowData.id);}}));}},{key:\"GetBulkRenewalList\",value:function GetBulkRenewalList(){var _this4=this;var data={fromDate:this.state.fromDate?this.state.fromDate:'',toDate:this.state.toDate?this.state.toDate:''};api.post('api/GetBulkRenewalList',data).then(function(res){if(res.success){var formattedData=[];_this4.setState({selectedPage:0});var dataLength=res.data[0].length;if(dataLength>0){for(var i=0;i<dataLength;i++){var tempData=res.data[0][i];console.log(\"tempData\",tempData);formattedData.push({id:i,PolicyId:tempData.PolicyId,PolicyNumber:tempData.PolicyNumber,ClientName:tempData.ClientName,InceptionDate:moment(tempData.InceptionDate).format('DD/MM/YYYY'),RenewalDate:moment(tempData.RenewalDate).format('DD/MM/YYYY'),Status:tempData.Status,ComputationStatus:tempData.ComputationStatus,ComputationError:tempData.ComputationError,AccChargeStatus:tempData.AccChargeStatus,AccChargeError:tempData.AccChargeError,DocumentStatus:tempData.DocumentStatus,DocumentError:tempData.DocumentError,OverallStatus:tempData.OverallStatus});}}var firstPage=formattedData.length?'1':'0';var lastPage=_this4.state.rowsPerPage<formattedData.length?_this4.state.rowsPerPage:formattedData.length;var str=firstPage+' to '+lastPage+' out of '+formattedData.length+' records';_this4.setState({arr:formattedData,str:str});}});}},{key:\"toggleRow\",value:function toggleRow(id){var newSelected=Object.assign({},this.state.selected);newSelected[id]=!this.state.selected[id];this.setState({selected:newSelected,selectAll:2});}},{key:\"toggleSelectAll\",value:function toggleSelectAll(){var newSelected={};if(this.state.selectAll===0){this.state.arr.forEach(function(x){newSelected[x.id]=true;});}this.setState({selected:newSelected,selectAll:this.state.selectAll===0?1:0});}},{key:\"GenerateRenewal\",value:function GenerateRenewal(){var _this5=this;debugger;console.log(\"this.state.arr\",this.state.arr);console.log(\"this.state.selected\",this.state.selected);console.log(\"this.state.selectAll\",this.state.selectAll);if(this.state.selectAll==0){}else{var newdata={mainarr:this.state.arr,selectedindex:this.state.selected,selectindexall:this.state.selectAll,loggedInUserId:CommonConfig.loggedInUserId()};api.post('api/newGenerateRenewal',newdata).then(function(res){console.log(\"res\",res);if(res.success){_this5.getDocumentList();}});}}},{key:\"GenerateRenewalDocumnet\",value:function GenerateRenewalDocumnet(){// debugger;\n// console.log(\"this.state.arr\", this.state.arr);\n// console.log(\"this.state.selected\", this.state.selected);\n// console.log(\"this.state.selectAll\", this.state.selectAll);\n// if (this.state.selectAll == 0) {\n// }\n// else {\n//     var newdata = {\n//         mainarr: this.state.arr,\n//         selectedindex: this.state.selected,\n//         selectindexall: this.state.selectAll,\n//         loggedInUserId: CommonConfig.loggedInUserId()\n//     }\n//     api.post('api/newGenerateDocumentRenewal', newdata).then(async res => {\n//  await   \napi.post('api/getGenerateDocumentRenewal','').then(/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(res1){var i;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:i=0;case 1:if(!(i<res1.data.length)){_context.next=8;break;}console.log(\"res1.data\",res1.data[i]);_context.next=5;return api.post(\"api/generatebulkDocument2\",res1.data[i]).then(function(res2){// debugger;\nif(res2.data.success){toast.success('Policy Number: '+res1.data[i].PolicyNumber+': '+res2.data.message);}else{toast.error('Policy Number: '+res1.data[i].PolicyNumber+': '+res2.data.message);}}).catch(function(err){console.log('err',err);});case 5:i++;_context.next=1;break;case 8:case\"end\":return _context.stop();}}},_callee);}));return function(_x){return _ref.apply(this,arguments);};}());// });\n// }\n}},{key:\"getDocumentList\",value:function getDocumentList(){var _this6=this;try{api.post(\"api/getgeneratebulkDocument\",'').then(/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(res){var i;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:console.log(\"res\",res);// toast.success(res.data.message);\nif(!res.success){_context2.next=14;break;}i=0;case 3:if(!(i<res.data.length)){_context2.next=11;break;}console.log(\"res.data\",res.data[i]);res.data[i].isDocumentGenerateAllow=1;_context2.next=8;return api.post(\"api/generatebulkDocument\",res.data[i],true).then(function(res1){// debugger;\nif(res1.data.success){toast.success('Policy Number: '+res.data[i].PolicyNumber+': '+res1.data.message);}else{toast.error('Policy Number: '+res.data[i].PolicyNumber+': '+res1.data.message);}}).catch(function(err){console.log('err',err);});case 8:i++;_context2.next=3;break;case 11:_this6.GetBulkRenewalList();_context2.next=14;break;case 14:case\"end\":return _context2.stop();}}},_callee2);}));return function(_x2){return _ref2.apply(this,arguments);};}()).catch(function(err){});}catch(error){}}},{key:\"export\",value:function _export(){this.dt.exportCSV();}},{key:\"filterData\",value:function filterData(){this.GetBulkRenewalList();}},{key:\"show\",value:function show(field,condition,errorField,message){if(condition){if(document.getElementById(field))document.getElementById(field).className=\"form-control is-invalid\";if(document.getElementById(errorField))document.getElementById(errorField).innerHTML='<p>'+message+' </p>';}else{if(document.getElementById(field))document.getElementById(field).className=\"form-control\";if(document.getElementById(errorField))document.getElementById(errorField).innerHTML=null;}}},{key:\"render\",value:function render(){var _this7=this;var t=this.props.t;var header=null;var columns=this.state.cols.map(function(col,i){return/*#__PURE__*/React.createElement(Column,{key:i,field:col.field,header:col.header,body:col.body,sortable:col.sortable,filter:col.filter,filterMatchMode:col.filterMatchMode,style:col.style});});return/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"div\",{className:\"basic-header\"},/*#__PURE__*/React.createElement(\"h1\",null,\"Bulk Renewals\"),/*#__PURE__*/React.createElement(\"div\",{className:\"header-right-option\"},/*#__PURE__*/React.createElement(MultiSelect,{value:this.state.cols,options:this.colOptions,fixedPlaceholder:true,placeholder:CommonConfig.dataTableConfig.columnToggleIcon,tooltip:\"Show / Hide Column\",tooltipOptions:{position:'bottom'},onChange:this.onColumnToggle,style:{width:'50px'}}),/*#__PURE__*/React.createElement(Button,{type:\"button\",icon:\"pi pi-external-link\",tooltip:\"Export as CSV\",tooltipOptions:{position:'bottom'},onClick:this.export,style:{marginRight:10}}))),/*#__PURE__*/React.createElement(\"div\",{className:\"input-box\",id:\"accordion\"},/*#__PURE__*/React.createElement(Card,{className:\"mb-0\"},/*#__PURE__*/React.createElement(CardBody,null,/*#__PURE__*/React.createElement(\"div\",{className:\"filter-data\"},/*#__PURE__*/React.createElement(Row,null,/*#__PURE__*/React.createElement(Col,{md:\"1\"},/*#__PURE__*/React.createElement(\"label\",null,/*#__PURE__*/React.createElement(\"input\",{type:\"checkbox\",className:\"checkbox\",checked:this.state.selectAll===1,ref:function ref(input){if(input){input.indeterminate=_this7.state.selectAll===2;}},onChange:function onChange(){return _this7.toggleSelectAll();}}),\"  Select All\")),/*#__PURE__*/React.createElement(Col,{md:\"4\"},/*#__PURE__*/React.createElement(Row,null,/*#__PURE__*/React.createElement(Col,{md:\"6\"},/*#__PURE__*/React.createElement(\"div\",{className:\"input-box\"},/*#__PURE__*/React.createElement(\"label\",null,\"From Date\"),/*#__PURE__*/React.createElement(Input,{type:\"date\",id:\"fromDate\",name:\"fromDate\",value:this.state.fromDate,onChange:function onChange(e){return _this7.handleChange(e,'fromDate');}}))),/*#__PURE__*/React.createElement(Col,{md:\"6\"},/*#__PURE__*/React.createElement(\"div\",{className:\"input-box\"},/*#__PURE__*/React.createElement(\"label\",null,\"To Date\"),/*#__PURE__*/React.createElement(Input,{type:\"date\",id:\"toDate\",name:\"toDate\",value:this.state.toDate,onChange:function onChange(e){return _this7.handleChange(e,'toDate');}}))))),/*#__PURE__*/React.createElement(Col,{md:\"2\"},/*#__PURE__*/React.createElement(\"div\",null,\"\\xA0\"),/*#__PURE__*/React.createElement(BTN,{color:\"success\",title:\"Search\",onClick:function onClick(){return _this7.filterData();}},\" Search \")),/*#__PURE__*/React.createElement(Col,{md:\"2\"},/*#__PURE__*/React.createElement(\"div\",null,\"\\xA0\"),/*#__PURE__*/React.createElement(BTN,{color:\"success\",title:\"GenerateRenewal\",onClick:function onClick(){return _this7.GenerateRenewal();}},\"Generate Renewal\")),/*#__PURE__*/React.createElement(Col,{md:\"2\"},/*#__PURE__*/React.createElement(\"div\",null,\"\\xA0\"),/*#__PURE__*/React.createElement(BTN,{color:\"success\",title:\"GenerateRenewalDocumnet\",onClick:function onClick(){return _this7.GenerateRenewalDocumnet();}},\"Generate Renewal Document\"))))))),/*#__PURE__*/React.createElement(\"div\",{className:\"table-custom\"},/*#__PURE__*/React.createElement(DataTable,{ref:function ref(el){return _this7.dt=el;},value:this.state.arr,first:this.state.selectedPage,onPage:function onPage(e){return _this7.getPageString(e);},paginator:true,rows:this.state.rowsPerPage,header:header,totalRecords:this.state.arr.length,exportFilename:\"Bulk Renewals\",currentPageReportTemplate:this.state.str,scrollable:true,paginatorTemplate:\"CurrentPageReport FirstPageLink PrevPageLink PageLinks NextPageLink LastPageLink RowsPerPageDropdown\",rowsPerPageOptions:this.state.rowsPerPageOptions,globalFilter:this.state.globalFilter,emptyMessage:\"No records found\",responsive:true,resizableColumns:true,columnResizeMode:\"expand\"},columns)));}}]);return BulkRenewals;}(Component);export default withTranslation()(BulkRenewals);","map":{"version":3,"sources":["/Users/bhavik/Downloads/Cognisun/Evolution/Evolution_React/evolution_new/src/views/Reports/BulkRenewals.js"],"names":["React","Component","Select","api","moment","DatePicker","withTranslation","DataTable","Column","CommonConfig","Button","MultiSelect","Collapse","BTN","Input","Card","CardHeader","CardBody","Row","Col","toast","APIConstant","BulkRenewals","props","getPageString","e","firstPage","first","l","rows","page","lastPage","state","arr","length","str","setState","selectedPage","rowsPerPage","handleChange","target","name","value","fromDate","toDate","columns","body","actionTemplate","bind","field","header","sortable","id","style","filter","LanguageId","i18n","language","cols","rowsPerPageOptions","dataTableConfig","globalFilter","searchCollapse","selected","selectAll","colOptions","col","push","label","toggleRow","export","stringMapType","setStateName","orderBy","data","stringmaptype","orderby","post","path","dropdownbycode","then","res","success","catch","err","error","rowData","column","formattedData","dataLength","i","tempData","console","log","PolicyId","PolicyNumber","ClientName","InceptionDate","format","RenewalDate","Status","ComputationStatus","ComputationError","AccChargeStatus","AccChargeError","DocumentStatus","DocumentError","OverallStatus","newSelected","Object","assign","forEach","x","newdata","mainarr","selectedindex","selectindexall","loggedInUserId","getDocumentList","res1","res2","message","isDocumentGenerateAllow","GetBulkRenewalList","dt","exportCSV","condition","errorField","document","getElementById","className","innerHTML","t","map","filterMatchMode","columnToggleIcon","position","onColumnToggle","width","marginRight","input","indeterminate","toggleSelectAll","filterData","GenerateRenewal","GenerateRenewalDocumnet","el"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\r\nimport Select from 'react-select';\r\nimport api from '../../utils/apiClient';\r\nimport moment from 'moment';\r\nimport DatePicker from 'react-date-picker';\r\nimport { withTranslation } from 'react-i18next';\r\nimport { DataTable } from 'primereact/datatable';\r\nimport { Column } from 'primereact/column';\r\nimport { CommonConfig } from '../../utils/constants';\r\nimport { Button } from 'primereact/button';\r\nimport { MultiSelect } from 'primereact/multiselect';\r\nimport { Collapse, Button as BTN, Input, Card, CardHeader, CardBody, Row, Col } from 'reactstrap';\r\nimport { toast } from 'react-toastify';\r\nimport APIConstant from '../../utils/constants';\r\n\r\n\r\nclass BulkRenewals extends Component {\r\n\r\n    constructor(props) {\r\n        super(props);\r\n\r\n\r\n        let columns = [\r\n\r\n            { body: this.actionTemplate.bind(this), field: \"Select\", header: \"Select\", sortable: false, id: \"checkbox\", style: { 'width': '45px' } },\r\n            { field: \"PolicyId\", header: \"Policy Id\", sortable: true, filter: true, id: 1, style: { 'width': '100px' } },\r\n            { field: \"PolicyNumber\", header: \"Policy Number\", sortable: true, filter: true, id: 2, style: { 'width': '60px' } },\r\n            { field: \"ClientName\", header: \"Client\", sortable: true, filter: true, id: 3, style: { 'width': '100px' } },\r\n            { field: \"InceptionDate\", header: \"InceptionDate\", sortable: true, filter: true, id: 4, style: { 'width': '80px' } },\r\n            { field: \"RenewalDate\", header: \"RenewalDate    \", sortable: true, filter: true, id: 5, style: { 'width': '80px' } },\r\n            { field: \"Status\", header: \"Status\", sortable: true, filter: true, id: 6, style: { 'width': '80px' } },\r\n            { field: \"ComputationStatus\", header: \"Computation Status\", sortable: true, filter: true, id: 7, style: { 'width': '70px' } },\r\n            { field: \"ComputationError\", header: \"Computation Error\", sortable: true, filter: true, id: 8, style: { 'width': '100px' } },\r\n            { field: \"AccChargeStatus\", header: \"Acc Charge Status\", sortable: true, filter: true, id: 9, style: { 'width': '70px' } },\r\n            { field: \"AccChargeError\", header: \"Acc Charge Error\", sortable: true, filter: true, id: 10, style: { 'width': '100px' } },\r\n            { field: \"DocumentStatus\", header: \"Document Status\", sortable: true, filter: true, id: 11, style: { 'width': '70px' } },\r\n            { field: \"DocumentError\", header: \"Document Error\", sortable: true, filter: true, id: 12, style: { 'width': '100px' } },\r\n            { field: \"OverallStatus\", header: \"Overall Status\", sortable: true, filter: true, id: 13, style: { 'width': '100px' } },\r\n            // { field: \"PaidAmount\", header: \"Paid Amt\", sortable: true, filter: true, id: 14,style: { 'width': '100px' } },\r\n            // { field: \"Outstanding\", header: \"Outstanding Amt\", sortable: true, filter: true, id: 15,style: { 'width': '100px' } },\r\n            // { field: \"DueDate\", header: \"Outstanding Since\", sortable: true, filter: true, id: 16,style: { 'width': '100px' } },\r\n            // { field: \"DayAfterDueDate\", header: \"No of Days\", sortable: true, filter: true, id: 17 }\r\n        ];\r\n\r\n        this.state = {\r\n            LanguageId: (props.i18n.language === 'en') ? 'en-GB' : (props.i18n.language === 'es') ? 'es-ES' : (props.i18n.language === 'ie') ? 'en-IE' : props.i18n.language,\r\n            cols: columns,\r\n            arr: [],\r\n            selectedPage: 0,\r\n            rowsPerPageOptions: CommonConfig.dataTableConfig.rowsPerPageOptions,\r\n            str: '',\r\n            rowsPerPage: CommonConfig.dataTableConfig.rowsPerPage,\r\n            globalFilter: null,\r\n            searchCollapse: false,\r\n            fromDate: '',\r\n            toDate: '',\r\n            selected: {},\r\n            selectAll: 0\r\n        };\r\n\r\n        this.colOptions = [];\r\n        for (let col of columns) {\r\n            this.colOptions.push({ label: col.header, value: col });\r\n        }\r\n        this.toggleRow = this.toggleRow.bind(this);\r\n        this.export = this.export.bind(this);\r\n    }\r\n\r\n    componentDidMount() {\r\n\r\n    }\r\n\r\n    getDropDownValues(stringMapType, setStateName, orderBy) {\r\n        try {\r\n            const data = {\r\n                stringmaptype: stringMapType,\r\n                orderby: orderBy\r\n            };\r\n            api.post(APIConstant.path.dropdownbycode, data).then(res => {\r\n                if (res.success) {\r\n                    this.setState({ [setStateName]: res.data });\r\n                } else {\r\n                }\r\n            }).catch(err => {\r\n            });\r\n        } catch (error) {\r\n        }\r\n    }\r\n\r\n    actionTemplate(rowData, column) {\r\n        return <div>\r\n            <input\r\n                type=\"checkbox\"\r\n                className=\"checkbox\"\r\n                checked={this.state.selected[rowData.id] === true}\r\n                onChange={() => this.toggleRow(rowData.id)} />\r\n        </div>;\r\n    }\r\n\r\n    GetBulkRenewalList() {\r\n        var data = {\r\n            fromDate: this.state.fromDate ? this.state.fromDate : '',\r\n            toDate: this.state.toDate ? this.state.toDate : ''\r\n        };\r\n        api.post('api/GetBulkRenewalList', data).then(res => {\r\n            if (res.success) {\r\n                var formattedData = [];\r\n                this.setState({\r\n                    selectedPage: 0\r\n                });\r\n                var dataLength = res.data[0].length;\r\n                if (dataLength > 0) {\r\n                    for (let i = 0; i < dataLength; i++) {\r\n                        var tempData = res.data[0][i];\r\n                        console.log(\"tempData\", tempData);\r\n                        formattedData.push({\r\n                            id: i,\r\n                            PolicyId: tempData.PolicyId,\r\n                            PolicyNumber: tempData.PolicyNumber,\r\n                            ClientName: tempData.ClientName,\r\n                            InceptionDate: moment(tempData.InceptionDate).format('DD/MM/YYYY'),\r\n                            RenewalDate: moment(tempData.RenewalDate).format('DD/MM/YYYY'),\r\n                            Status: tempData.Status,\r\n                            ComputationStatus: tempData.ComputationStatus,\r\n                            ComputationError: tempData.ComputationError,\r\n                            AccChargeStatus: tempData.AccChargeStatus,\r\n                            AccChargeError: tempData.AccChargeError,\r\n                            DocumentStatus: tempData.DocumentStatus,\r\n                            DocumentError: tempData.DocumentError,\r\n                            OverallStatus: tempData.OverallStatus\r\n                        });\r\n                    }\r\n                }\r\n\r\n                let firstPage = (formattedData.length) ? '1' : '0';\r\n                let lastPage = (this.state.rowsPerPage < formattedData.length) ? this.state.rowsPerPage : formattedData.length;\r\n                let str = firstPage + ' to ' + lastPage + ' out of ' + formattedData.length + ' records';\r\n                this.setState({ arr: formattedData, str: str });\r\n            }\r\n        });\r\n    }\r\n\r\n    toggleRow(id) {\r\n        const newSelected = Object.assign({}, this.state.selected);\r\n        newSelected[id] = !this.state.selected[id];\r\n        this.setState({\r\n            selected: newSelected,\r\n            selectAll: 2\r\n        });\r\n    }\r\n\r\n    toggleSelectAll() {\r\n        let newSelected = {};\r\n\r\n        if (this.state.selectAll === 0) {\r\n            this.state.arr.forEach(x => {\r\n                newSelected[x.id] = true;\r\n            });\r\n        }\r\n\r\n        this.setState({\r\n            selected: newSelected,\r\n            selectAll: this.state.selectAll === 0 ? 1 : 0\r\n        });\r\n    }\r\n\r\n    GenerateRenewal() {\r\n        debugger;\r\n        console.log(\"this.state.arr\", this.state.arr);\r\n        console.log(\"this.state.selected\", this.state.selected);\r\n        console.log(\"this.state.selectAll\", this.state.selectAll);\r\n        if (this.state.selectAll == 0) {\r\n\r\n        }\r\n        else {\r\n            var newdata = {\r\n                mainarr: this.state.arr,\r\n                selectedindex: this.state.selected,\r\n                selectindexall: this.state.selectAll,\r\n                loggedInUserId: CommonConfig.loggedInUserId()\r\n            }\r\n            api.post('api/newGenerateRenewal', newdata).then(res => {\r\n                console.log(\"res\", res);\r\n\r\n                if (res.success) {\r\n                    this.getDocumentList();\r\n                }\r\n            });\r\n        }\r\n    }\r\n\r\n     GenerateRenewalDocumnet() {\r\n        // debugger;\r\n        // console.log(\"this.state.arr\", this.state.arr);\r\n        // console.log(\"this.state.selected\", this.state.selected);\r\n        // console.log(\"this.state.selectAll\", this.state.selectAll);\r\n        // if (this.state.selectAll == 0) {\r\n\r\n        // }\r\n        // else {\r\n        //     var newdata = {\r\n        //         mainarr: this.state.arr,\r\n        //         selectedindex: this.state.selected,\r\n        //         selectindexall: this.state.selectAll,\r\n        //         loggedInUserId: CommonConfig.loggedInUserId()\r\n        //     }\r\n        //     api.post('api/newGenerateDocumentRenewal', newdata).then(async res => {\r\n            //  await   \r\n             api.post('api/getGenerateDocumentRenewal', '').then(async res1 => {\r\n                for (var i = 0; i < res1.data.length; i++) {\r\n                    console.log(\"res1.data\", res1.data[i]);\r\n\r\n                    await api.post(\"api/generatebulkDocument2\", res1.data[i]).then(res2 => {\r\n                        // debugger;\r\n                        if (res2.data.success) {\r\n                            toast.success('Policy Number: ' + res1.data[i].PolicyNumber + ': ' + res2.data.message);\r\n                        }\r\n                        else {\r\n                            toast.error('Policy Number: ' + res1.data[i].PolicyNumber + ': ' + res2.data.message)\r\n                        }\r\n\r\n                    }).catch(err => {\r\n                        console.log('err', err);\r\n                    });\r\n\r\n                }\r\n                });\r\n            // });\r\n        // }\r\n    }\r\n\r\n    getDocumentList() {\r\n        try {\r\n\r\n            api.post(\"api/getgeneratebulkDocument\", '').then(async res => {\r\n                console.log(\"res\", res);\r\n                // toast.success(res.data.message);\r\n                if (res.success) {\r\n                    for (var i = 0; i < res.data.length; i++) {\r\n                        console.log(\"res.data\", res.data[i]);\r\n                        res.data[i]. isDocumentGenerateAllow=1;\r\n                        await api.post(\"api/generatebulkDocument\", res.data[i],true).then(res1 => {\r\n                            // debugger;\r\n                            if (res1.data.success) {\r\n                                toast.success('Policy Number: ' + res.data[i].PolicyNumber + ': ' + res1.data.message);\r\n                            }\r\n                            else {\r\n                                toast.error('Policy Number: ' + res.data[i].PolicyNumber + ': ' + res1.data.message)\r\n                            }\r\n\r\n                        }).catch(err => {\r\n                            console.log('err', err);\r\n                        });\r\n\r\n                    }\r\n                    this.GetBulkRenewalList();\r\n                } else {\r\n\r\n                }\r\n            }).catch(err => {\r\n\r\n            });\r\n        } catch (error) {\r\n\r\n        }\r\n    }\r\n\r\n    getPageString = (e) => {\r\n        let firstPage = e.first + 1;\r\n        let l = e.rows * (e.page + 1);\r\n        let lastPage = (l < this.state.arr.length) ? l : this.state.arr.length\r\n        var str = firstPage + ' to ' + lastPage + ' out of ' + this.state.arr.length + ' records';\r\n        this.setState({ selectedPage: e.first, str: str, rowsPerPage: e.rows });\r\n    }\r\n\r\n    export() {\r\n        this.dt.exportCSV();\r\n    }\r\n\r\n    filterData() {\r\n        this.GetBulkRenewalList();\r\n    }\r\n\r\n    handleChange = (e) => {\r\n\r\n        this.setState({ [e.target.name]: e.target.value });\r\n\r\n        if (e.target.name === 'fromDate') {\r\n            this.setState({ fromDate: e.target.value });\r\n        }\r\n\r\n        if (e.target.name === 'toDate') {\r\n            this.setState({ toDate: e.target.value });\r\n        }\r\n    }\r\n\r\n\r\n    show(field, condition, errorField, message) {\r\n        if (condition) {\r\n            if (document.getElementById(field))\r\n                document.getElementById(field).className = \"form-control is-invalid\";\r\n\r\n            if (document.getElementById(errorField))\r\n                document.getElementById(errorField).innerHTML = '<p>' + message + ' </p>';\r\n        } else {\r\n            if (document.getElementById(field))\r\n                document.getElementById(field).className = \"form-control\";\r\n\r\n            if (document.getElementById(errorField))\r\n                document.getElementById(errorField).innerHTML = null;\r\n        }\r\n    }\r\n\r\n\r\n    render() {\r\n        const { t } = this.props;\r\n        var header = null;\r\n\r\n        let columns = this.state.cols.map((col, i) => {\r\n            return <Column key={i} field={col.field} header={col.header} body={col.body} sortable={col.sortable} filter={col.filter} filterMatchMode={col.filterMatchMode} style={col.style}\r\n            />;\r\n        });\r\n\r\n        return (\r\n            <div>\r\n                <div className=\"basic-header\">\r\n                    <h1>Bulk Renewals</h1>\r\n                    <div className=\"header-right-option\">\r\n                        <MultiSelect value={this.state.cols} options={this.colOptions}\r\n                            fixedPlaceholder={true} placeholder={CommonConfig.dataTableConfig.columnToggleIcon} tooltip=\"Show / Hide Column\" tooltipOptions={{ position: 'bottom' }}\r\n                            onChange={this.onColumnToggle} style={{ width: '50px' }}\r\n                        />\r\n\r\n                        <Button type=\"button\" icon=\"pi pi-external-link\" tooltip=\"Export as CSV\" tooltipOptions={{ position: 'bottom' }} onClick={this.export} style={{ marginRight: 10 }}></Button>\r\n                    </div>\r\n                </div>\r\n\r\n                <div className=\"input-box\" id=\"accordion\">\r\n                    <Card className=\"mb-0\">\r\n                        {/* <CardHeader id=\"headingOne\">\r\n                            <BTN block color=\"link\" className=\"text-left m-0 p-0\" onClick={() => this.setState({ custom: !this.state.custom })} aria-expanded={this.state.custom} aria-controls=\"collapseOne\">\r\n                                <h5 className=\"m-0 p-0\">\r\n                                    Bulk Renewals\r\n                                 </h5>\r\n                            </BTN>\r\n                        </CardHeader> */}\r\n                        <CardBody>\r\n                            <div className=\"filter-data\">\r\n                                <Row>\r\n                                    <Col md='1'>\r\n                                        <label>\r\n                                            <input\r\n                                                type=\"checkbox\"\r\n                                                className=\"checkbox\"\r\n                                                checked={this.state.selectAll === 1}\r\n                                                ref={input => {\r\n                                                    if (input) {\r\n                                                        input.indeterminate = this.state.selectAll === 2;\r\n                                                    }\r\n                                                }}\r\n                                                onChange={() => this.toggleSelectAll()}\r\n                                            />  Select All</label>\r\n                                    </Col>\r\n                                    <Col md='4'>\r\n                                        <Row>\r\n                                            <Col md='6'>\r\n                                                <div className=\"input-box\">\r\n                                                    <label>From Date</label>\r\n                                                    <Input type=\"date\" id=\"fromDate\" name=\"fromDate\"\r\n                                                        value={this.state.fromDate}\r\n                                                        onChange={(e) => this.handleChange(e, 'fromDate')}\r\n                                                    ></Input>\r\n                                                </div>\r\n                                            </Col>\r\n                                            <Col md='6'>\r\n                                                <div className=\"input-box\">\r\n                                                    <label>To Date</label>\r\n                                                    <Input type=\"date\" id=\"toDate\" name=\"toDate\"\r\n                                                        value={this.state.toDate}\r\n                                                        onChange={(e) => this.handleChange(e, 'toDate')}\r\n                                                    ></Input>\r\n                                                </div>\r\n                                            </Col>\r\n                                        </Row>\r\n                                    </Col>\r\n                                    <Col md='2'>\r\n                                        <div>&nbsp;</div>\r\n                                        <BTN color=\"success\" title=\"Search\" onClick={() => this.filterData()}> Search </BTN>\r\n                                    </Col>\r\n                                    <Col md='2'>\r\n                                        <div>&nbsp;</div>\r\n                                        <BTN color=\"success\" title=\"GenerateRenewal\" onClick={() => this.GenerateRenewal()}>Generate Renewal</BTN>\r\n                                    </Col>\r\n                                    <Col md='2'>\r\n                                        <div>&nbsp;</div>\r\n                                        <BTN color=\"success\" title=\"GenerateRenewalDocumnet\" onClick={() => this.GenerateRenewalDocumnet()}>Generate Renewal Document</BTN>\r\n                                    </Col>\r\n                                </Row>\r\n                            </div>\r\n                        </CardBody>\r\n\r\n                    </Card>\r\n                </div>\r\n\r\n                <div className=\"table-custom\">\r\n                    <DataTable ref={(el) => this.dt = el} value={this.state.arr} first={this.state.selectedPage} onPage={(e) => this.getPageString(e)}\r\n                        paginator={true} rows={this.state.rowsPerPage} header={header} totalRecords={this.state.arr.length} exportFilename=\"Bulk Renewals\"\r\n                        currentPageReportTemplate={this.state.str}\r\n                        scrollable={true}\r\n                        paginatorTemplate=\"CurrentPageReport FirstPageLink PrevPageLink PageLinks NextPageLink LastPageLink RowsPerPageDropdown\"\r\n                        rowsPerPageOptions={this.state.rowsPerPageOptions} globalFilter={this.state.globalFilter} emptyMessage=\"No records found\"\r\n                        responsive={true} resizableColumns={true} columnResizeMode=\"expand\">\r\n                        {columns}\r\n                    </DataTable>\r\n                </div>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\n\r\n\r\nexport default withTranslation()(BulkRenewals);\r\n"]},"metadata":{},"sourceType":"module"}