{"ast":null,"code":"import _defineProperty from\"/Users/bhavik/Downloads/Cognisun/Evolution/Evolution_React/evolution_new/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _classCallCheck from\"/Users/bhavik/Downloads/Cognisun/Evolution/Evolution_React/evolution_new/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/bhavik/Downloads/Cognisun/Evolution/Evolution_React/evolution_new/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _assertThisInitialized from\"/Users/bhavik/Downloads/Cognisun/Evolution/Evolution_React/evolution_new/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";import _inherits from\"/Users/bhavik/Downloads/Cognisun/Evolution/Evolution_React/evolution_new/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/bhavik/Downloads/Cognisun/Evolution/Evolution_React/evolution_new/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component}from'react';import{DataTable}from'primereact/datatable';import{Column}from'primereact/column';import'primereact/resources/themes/nova-light/theme.css';import'primereact/resources/primereact.min.css';import'primeicons/primeicons.css';import moment from'moment';import{MultiSelect}from'primereact/multiselect';import{InputText}from'primereact/inputtext';import{Modal,ModalHeader,ModalBody,Nav,NavItem,NavLink,ButtonDropdown,Button as BTN,DropdownToggle,DropdownMenu,DropdownItem,Badge,Button,ButtonGroup,Form,FormGroup,Label,Input,Row,Col}from'reactstrap';import{AutoComplete}from'primereact/autocomplete';import APIConstant from'../../../../utils/constants';import{CommonConfig}from'../../../../utils/constants';import api from'../../../../utils/apiClient';import{toast}from'react-toastify';import axios from'axios';import CKEditor from'ckeditor4-react';import{apiBase}from'../../../../utils/config';var Compose=/*#__PURE__*/function(_Component){_inherits(Compose,_Component);var _super=_createSuper(Compose);function Compose(props){var _this;_classCallCheck(this,Compose);_this=_super.call(this,props);_this.selectDocument=function(event){var docuCustom=[];if(event.target.files&&event.target.files){for(var i=0;i<event.target.files.length;i++){docuCustom.push(event.target.files[i]);}_this.setState({customDoc:_this.state.customDoc.concat(docuCustom)});}else{}};_this.downloadData=function(rowdata){var path=apiBase+rowdata.URL;axios({url:path,method:'GET',responseType:'blob'// important\n}).then(function(response){var url=window.URL.createObjectURL(new Blob([response.data]));var link=document.createElement('a');link.href=url;link.setAttribute('download',rowdata.Filename);//or any other extension\ndocument.body.appendChild(link);link.click();});};_this.handleChange=function(e){_this.setState(_defineProperty({},e.target.name,e.target.value));if(e.target.name==='emailTo'){if(e.target.value===''||e.target.value===null){_this.setState({emailTo:''});}else{_this.setState({emailTo:e.target.value});}}if(e.target.name==='emailFrom'){if(e.target.value===''||e.target.value===null){_this.setState({emailFrom:''});}else{_this.setState({emailFrom:e.target.value});}}if(e.target.name==='emailCC'){if(e.target.value===''||e.target.value===null){_this.setState({emailCC:''});}else{_this.setState({emailCC:e.target.value});}}if(e.target.name==='emailBCC'){if(e.target.value===''||e.target.value===null){_this.setState({emailBCC:''});}else{_this.setState({emailBCC:e.target.value});}}if(e.target.name==='emailSubject'){if(e.target.value===''||e.target.value===null){_this.setState({emailSubject:''});}else{_this.setState({emailSubject:e.target.value});}}};_this.mulSelect=function(e){_this.setState({selectedDocuments:e});};_this.getPageString=function(e){var firstPage=e.first+1;var l=e.rows*(e.page+1);var lastPage=l<_this.state.documentList.length?l:_this.state.documentList.length;var str=firstPage+' to '+lastPage+' out of '+_this.state.documentList.length+' records';_this.setState({selectedPage:e.first,str:str,rowsPerPage:e.rows});};var columns=[{selectionMode:\"multiple\",style:{width:'3em'},id:0},{field:\"Filename\",header:\"Name\",sortable:true,filter:true,id:1},{body:_this.formatCreatedDate.bind(_assertThisInitialized(_this)),field:\"CreatedOn\",header:\"Created\",sortable:true,filter:true,id:2},{field:\"forename\",header:\"CreatedBy\",sortable:true,filter:true,id:3},{field:\"Directory\",header:\"Directory\",sortable:true,filter:true,id:4}];_this.toggle=_this.toggle.bind(_assertThisInitialized(_this));_this.state={documentType:'',dropdownOpen:false,emailBodyError:false,filteredPolicysSingle:null,selectedPolicy:null,selectedPolicyId:null,customDoc:[],policysData:[],emailTemplateList:[],selectedTemplate:null,emailTemplate:'',documentList:[],rowsPerPage:CommonConfig.dataTableConfig.rowsPerPage,rowsPerPageOptions:CommonConfig.dataTableConfig.rowsPerPageOptions,selectedPage:0,selectedDocuments:[],cols:columns,str:'',openAttachmentPopup:false,emailFrom:'',emailFromName:'',emailTo:'',emailCC:'',emailBCC:'',emailSubject:'',emailBody:'',attachmentURL:[],totalDocument:[],InboxCount:''};_this.colOptions=[];for(var _i=0,_columns=columns;_i<_columns.length;_i++){var col=_columns[_i];_this.colOptions.push({label:col.header,value:col});}_this.onColumnToggle=_this.onColumnToggle.bind(_assertThisInitialized(_this));_this.handleDetailsChange=_this.handleDetailsChange.bind(_assertThisInitialized(_this));return _this;}_createClass(Compose,[{key:\"onColumnToggle\",value:function onColumnToggle(event){var valueInOrder=event.value.sort(function(x,y){return x.id-y.id;});this.setState({cols:valueInOrder});}},{key:\"componentDidMount\",value:function componentDidMount(){this.getInbox();this.getEmailTemplate();}},{key:\"getDocumentList\",value:function getDocumentList(){var _this2=this;try{var data={\"pPolicyId\":this.state.policysData[0].policyId,'CurrentUser':CommonConfig.loggedInUserData().EntityId};api.post(\"api/getDocumentList\",data).then(function(res){console.log(\"res\",res);if(res.success){var lastPage=_this2.state.rowsPerPage<res.data.length?_this2.state.rowsPerPage:res.data.length;var str='1 to '+lastPage+' out of '+res.data.length+' records';_this2.setState({documentList:res.data,str:str,openAttachmentPopup:true});}else{}}).catch(function(err){});}catch(error){}}},{key:\"formatCreatedDate\",value:function formatCreatedDate(rowData){return moment(rowData.CreatedOn).format(CommonConfig.dateFormat.dateTime);}},{key:\"selectType\",value:function selectType(value,type){//need to select template\nif(type==='emailTemplate'){if(value===''||value===undefined||value===null){this.setState({emailTemplate:''});}else{debugger;this.setState({emailTemplate:value.value});this.getEmailBodyData();}}if(type==='selectPolicy'){if(value===''||value===undefined||value===null){this.setState({selectedPolicy:'',selectedPolicyId:''});}else{this.setState({selectedPolicy:value});}}if(type==='documentType'){if(value===''||value===undefined||value===null){this.setState({documentType:''});}else{this.setState({documentType:value});if(value==\"1\"){this.setState({openAttachmentPopup:true});}else{document.getElementById(\"customDoc\").click();}}}}},{key:\"getEmailBodyData\",value:function getEmailBodyData(){var _this3=this;var data={\"pPolicyId\":this.state.policysData[0].policyId,\"pEntityType\":'Policy',\"pEntityId\":this.state.policysData[0].policyId,\"pTemplateKey\":this.state.emailTemplate,\"pCurrentUser\":CommonConfig.loggedInUserData().EntityId};api.post(APIConstant.path.getEmailBodyData,data).then(function(res){if(res.success){_this3.setState({emailFrom:res.data[0].emailFrom,emailFromName:res.data[0].emailFromName,emailCC:res.data[0].emailCC,emailBCC:res.data[0].emailBCC,emailSubject:res.data[0].emailSubject,emailBody:res.data[0].emailBody,attachmentURL:JSON.parse(res.data[0].attachmentURL)});}}).catch(function(err){console.log(err);});}},{key:\"removeDocument\",value:function removeDocument(type,index){if(type==\"policy\"){this.state.selectedDocuments.splice(index,1);}else{this.state.customDoc.splice(index,1);}}},{key:\"getEmailTemplate\",value:function getEmailTemplate(){var _this4=this;var data={\"Type\":\"Email\"};api.post(APIConstant.path.getEmailTemplate,data).then(function(res){if(res.success){_this4.setState({emailTemplateList:res.data});}}).catch(function(err){console.log(err);});}},{key:\"sendMail\",value:function sendMail(){var _this5=this;var emailDataForm=new FormData();emailDataForm.append(\"to\",this.state.emailTo);emailDataForm.append(\"from\",this.state.emailFrom);emailDataForm.append(\"cc\",this.state.emailCC);emailDataForm.append(\"bcc\",this.state.emailBCC);emailDataForm.append(\"subject\",this.state.emailSubject);emailDataForm.append(\"mail\",'RenewalMail');emailDataForm.append(\"EmailSenderId\",CommonConfig.loggedInUserData().EntityId);emailDataForm.append(\"html\",this.state.emailBody);emailDataForm.append(\"selectedDocuments\",JSON.stringify(this.state.selectedDocuments));emailDataForm.append(\"attachmentURL\",this.state.attachmentURL);for(var i=0;i<this.state.customDoc.length;i++){emailDataForm.append(\"File\",this.state.customDoc[i],this.state.customDoc[i].name);}api.post(APIConstant.path.sendMailBulk,emailDataForm).then(function(res){if(res.success){toast.success('Mail Send Successful!');_this5.props.history.push({pathname:'/apps/email/inbox'});}else{toast.error('Mail Send Failed!');}}).catch(function(err){console.log(err);});}},{key:\"getInbox\",value:function getInbox(){var _this6=this;var data={\"boxName\":\"INBOX\",\"searchType\":\"ALL\"};api.post(APIConstant.path.allEmail,data).then(function(res){if(res.success){var count=res.data.filter(function(item){if(item.attributes.flags[0]!='\\\\Seen'){return true;}else{return false;}}).length;_this6.setState({InboxCount:count});}}).catch(function(err){console.log(err);});}},{key:\"handleDetailsChange\",value:function handleDetailsChange(evt){var data=evt.editor.getData();if(CommonConfig.isEmpty(data)){this.setState({emailBodyError:true,emailBody:''});// this.show(\"customEndorsementDetails\", true);\n}else{this.setState({emailBodyError:false,emailBody:data});// this.show(\"customEndorsementDetails\", false);\n}}},{key:\"filterPolicySingle\",value:function filterPolicySingle(){var _this7=this;var data={\"pPolicyId\":'',\"pPolicyNumber\":this.state.selectedPolicy,\"CurrentUser\":CommonConfig.loggedInUserData().EntityId};api.post(APIConstant.path.getPolicyAutoComplete,data).then(function(res){if(res.success){_this7.setState({policysData:res.data,emailTo:res.data[0].email});_this7.getDocumentList();}else{_this7.setState({policysData:[]});toast.error(res.data[0].returnValue);}}).catch(function(err){console.log(err);});}},{key:\"toggle\",value:function toggle(){this.setState({dropdownOpen:!this.state.dropdownOpen});}},{key:\"render\",value:function render(){var _this8=this;var header=/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"div\",{style:{'textAlign':'Right',marginTop:10}},/*#__PURE__*/React.createElement(Row,null,/*#__PURE__*/React.createElement(Col,null,/*#__PURE__*/React.createElement(\"div\",{className:\"basic-header\"},/*#__PURE__*/React.createElement(\"div\",{className:\"header-right-option\"},/*#__PURE__*/React.createElement(\"div\",{style:{textAlign:'right'}},/*#__PURE__*/React.createElement(\"i\",{className:\"pi pi-search\",style:{margin:'4px 4px 0 0'}}),/*#__PURE__*/React.createElement(InputText,{type:\"search\",onInput:function onInput(e){return _this8.setState({globalFilter:e.target.value});},placeholder:\"Global Search\",size:\"30\",style:{marginRight:10}})),/*#__PURE__*/React.createElement(MultiSelect,{value:this.state.cols,options:this.colOptions,fixedPlaceholder:true,placeholder:CommonConfig.dataTableConfig.columnToggleIcon,tooltip:\"Show / Hide Column\",onChange:this.onColumnToggle,style:{width:'50px'}})))))));var columns=this.state.cols.map(function(col,i){return/*#__PURE__*/React.createElement(Column,{field:col.field,header:col.header,body:col.body,sortable:col.sortable,filter:col.filter,selectionMode:col.selectionMode,style:col.style});});return/*#__PURE__*/React.createElement(\"div\",{className:\"animated fadeIn\"},/*#__PURE__*/React.createElement(\"div\",{className:\"email-app\"},/*#__PURE__*/React.createElement(\"nav\",null,/*#__PURE__*/React.createElement(\"a\",{href:\"#/apps/email/compose\",className:\"btn btn-danger btn-block\"},\"New Email\"),/*#__PURE__*/React.createElement(Nav,null,/*#__PURE__*/React.createElement(NavItem,null,/*#__PURE__*/React.createElement(NavLink,{href:\"#/apps/email/inbox\"},/*#__PURE__*/React.createElement(\"i\",{className:\"fa fa-inbox\"}),\" Inbox \",/*#__PURE__*/React.createElement(Badge,{color:\"danger\"},this.state.InboxCount))),/*#__PURE__*/React.createElement(NavItem,null,/*#__PURE__*/React.createElement(NavLink,{href:\"#/apps/email/sent\"},/*#__PURE__*/React.createElement(\"i\",{className:\"fa fa-inbox\"}),\" Sent \")))),/*#__PURE__*/React.createElement(\"main\",null,/*#__PURE__*/React.createElement(\"form\",{method:\"post\",action:\"\"},/*#__PURE__*/React.createElement(\"p\",{className:\"text-center\"},\"New Message\"),/*#__PURE__*/React.createElement(Form,null,/*#__PURE__*/React.createElement(FormGroup,{row:true,className:\"mb-3\"},/*#__PURE__*/React.createElement(Label,{for:\"to\",xs:2,sm:1},\"To:\"),/*#__PURE__*/React.createElement(Col,{xs:10,sm:11},/*#__PURE__*/React.createElement(Input,{type:\"email\",value:this.state.emailTo,name:\"emailTo\",id:\"emailTo\",onChange:function onChange(e){return _this8.handleChange(e);},placeholder:\"Type Email\"}))),/*#__PURE__*/React.createElement(FormGroup,{row:true,className:\"mb-3\"},/*#__PURE__*/React.createElement(Label,{for:\"cc\",xs:2,sm:1},\"CC:\"),/*#__PURE__*/React.createElement(Col,{xs:10,sm:11},/*#__PURE__*/React.createElement(Input,{type:\"email\",value:this.state.emailCC,id:\"emailCC\",name:\"emailCC\",onChange:function onChange(e){return _this8.handleChange(e);},placeholder:\"Type CC\"}))),/*#__PURE__*/React.createElement(FormGroup,{row:true,className:\"mb-3\"},/*#__PURE__*/React.createElement(Label,{for:\"bcc\",xs:2,sm:1},\"BCC:\"),/*#__PURE__*/React.createElement(Col,{xs:10,sm:11},/*#__PURE__*/React.createElement(Input,{type:\"email\",value:this.state.emailBCC,id:\"emailBCC\",name:\"emailBCC\",onChange:function onChange(e){return _this8.handleChange(e);},placeholder:\"Type BCC\"}))),/*#__PURE__*/React.createElement(FormGroup,{row:true,className:\"mb-3\"},/*#__PURE__*/React.createElement(Label,{for:\"bcc\",xs:2,sm:1},\"Subject:\"),/*#__PURE__*/React.createElement(Col,{xs:10,sm:11},/*#__PURE__*/React.createElement(Input,{type:\"text\",value:this.state.emailSubject,id:\"emailSubject\",name:\"emailSubject\",onChange:function onChange(e){return _this8.handleChange(e);},placeholder:\"Type Subject\"})))),/*#__PURE__*/React.createElement(Row,null,/*#__PURE__*/React.createElement(Col,{sm:11,className:\"ml-auto\"},/*#__PURE__*/React.createElement(FormGroup,null,/*#__PURE__*/React.createElement(Row,null,/*#__PURE__*/React.createElement(Col,{md:\"4\"},/*#__PURE__*/React.createElement(\"div\",{className:\"input-box\"},/*#__PURE__*/React.createElement(Input,{type:\"select\",name:\"documentType\",id:\"documentType\",onChange:function onChange(e){return _this8.selectType(e.target.value,'documentType');},value:this.state.documentType},/*#__PURE__*/React.createElement(\"option\",{value:\"\"},\"Select Attachment\"),/*#__PURE__*/React.createElement(\"option\",{value:\"1\",key:\"Policy Doc\"},\"Policy Doc\"),/*#__PURE__*/React.createElement(\"option\",{value:\"2\",key:\"Custom\"},\"Custom\")))),/*#__PURE__*/React.createElement(Col,{md:\"4\"},this.state.documentType==\"1\"?/*#__PURE__*/React.createElement(BTN,{color:\"success\",onClick:function onClick(){return _this8.selectType(\"1\",'documentType');}},\"Select Doc\"):null,this.state.documentType==\"2\"?/*#__PURE__*/React.createElement(BTN,{color:\"success\",onClick:function onClick(){return _this8.selectType(\"2\",'documentType');}},\"Select Doc\"):null,/*#__PURE__*/React.createElement(Input,{type:\"file\",name:\"customDoc\",id:\"customDoc\",style:{display:\"none\"},multiple:\"multiple\",onChange:this.selectDocument}))),/*#__PURE__*/React.createElement(Row,null,/*#__PURE__*/React.createElement(Col,{md:\"4\"},this.state.policysData.length>0?/*#__PURE__*/React.createElement(\"div\",{className:\"input-box\"},/*#__PURE__*/React.createElement(Input,{type:\"select\",name:\"emailTemplate\",id:\"emailTemplate\",value:this.state.emailTemplate,onChange:function onChange(e){return _this8.selectType(e.target,'emailTemplate');}},/*#__PURE__*/React.createElement(\"option\",{value:\"\"},\"Select EmailTemplate\"),this.state.emailTemplateList.map(function(emailTemplate,i){return/*#__PURE__*/React.createElement(\"option\",{value:emailTemplate.MessageTemplateId,key:i},emailTemplate.TamplateName);}))):null))),/*#__PURE__*/React.createElement(FormGroup,{className:\"mt-4\"},/*#__PURE__*/React.createElement(CKEditor,{name:\"emailBody\",id:\"emailBody\",data:this.state.emailBody,onChange:this.handleDetailsChange}),/*#__PURE__*/React.createElement(\"em\",{id:\"emailBodyError\",className:\"error invalid-feedback\"})),/*#__PURE__*/React.createElement(FormGroup,null,/*#__PURE__*/React.createElement(Col,{xs:10,sm:11},this.state.attachmentURL.length>0?/*#__PURE__*/React.createElement(\"div\",{className:\"attachments\"},/*#__PURE__*/React.createElement(\"span\",null,\"Policy Templete Doc\"),this.state.attachmentURL.map(function(attach,i){return/*#__PURE__*/React.createElement(\"div\",{className:\"attachment\"},/*#__PURE__*/React.createElement(Badge,{color:\"danger\"},attach.Type),\" \",/*#__PURE__*/React.createElement(\"b\",null,attach.FileName),\" \",/*#__PURE__*/React.createElement(\"i\",null,\"(\",attach.FileSize,\")\"),/*#__PURE__*/React.createElement(\"span\",{className:\"menu\"},/*#__PURE__*/React.createElement(\"a\",{onClick:function onClick(){return _this8.downloadData(attach);},className:\"fa fa-cloud-download\"},null)));})):null,this.state.selectedDocuments.length>0?/*#__PURE__*/React.createElement(\"div\",{className:\"attachments\"},/*#__PURE__*/React.createElement(\"span\",null,\"Policy Doc : \"),/*#__PURE__*/React.createElement(\"span\",null,\"Policy#: \",this.state.policysData.length>0?this.state.policysData[0].policyNumber:'NA'),/*#__PURE__*/React.createElement(\"span\",{style:{marginLeft:'10px'}},\"RenewalDate: \",this.state.policysData.length>0?moment(this.state.policysData[0].renewalDate).format(CommonConfig.dateFormat.forDatePicker):'NA'),/*#__PURE__*/React.createElement(\"span\",{style:{marginLeft:'10px'}},\"InsuredName: \",this.state.policysData.length>0?this.state.policysData[0].insuredName:'NA'),/*#__PURE__*/React.createElement(\"span\",{style:{marginLeft:'10px'}},\"PolicyType: \",this.state.policysData.length>0?this.state.policysData[0].policyType:'NA'),this.state.selectedDocuments.map(function(attach,i){return/*#__PURE__*/React.createElement(\"div\",{className:\"attachment\"},/*#__PURE__*/React.createElement(Badge,{color:\"danger\"},attach.Type),\" \",/*#__PURE__*/React.createElement(\"b\",null,attach.Filename),\" \",/*#__PURE__*/React.createElement(\"i\",null,\"(\",attach.FileSize,\")\"),/*#__PURE__*/React.createElement(\"span\",{className:\"menu\"},/*#__PURE__*/React.createElement(\"a\",{onClick:function onClick(){return _this8.removeDocument(\"custom\",i);},className:\"fa fa-remove\"},null),/*#__PURE__*/React.createElement(\"a\",{onClick:function onClick(){return _this8.downloadData(attach);},className:\"fa fa-cloud-download\"},null)));})):null,this.state.customDoc.length>0?/*#__PURE__*/React.createElement(\"div\",{className:\"attachments\"},/*#__PURE__*/React.createElement(\"span\",null,\"Custom Doc\"),this.state.customDoc.map(function(attach,i){return/*#__PURE__*/React.createElement(\"div\",{className:\"attachment\"},/*#__PURE__*/React.createElement(Badge,{color:\"danger\"},attach.type),\" \",/*#__PURE__*/React.createElement(\"b\",null,attach.name),\" \",/*#__PURE__*/React.createElement(\"i\",null,\"(\",Math.round(attach.size/1024),\" KB)\"),/*#__PURE__*/React.createElement(\"span\",{className:\"menu\"},/*#__PURE__*/React.createElement(\"a\",{onClick:function onClick(){return _this8.removeDocument(\"custom\",i);},className:\"fa fa-remove\"},null),/*#__PURE__*/React.createElement(\"a\",{onClick:function onClick(){return _this8.downloadData(attach);},className:\"fa fa-cloud-download\"},null)));})):null)),/*#__PURE__*/React.createElement(FormGroup,null,/*#__PURE__*/React.createElement(BTN,{color:\"success\",onClick:function onClick(){return _this8.sendMail();}},/*#__PURE__*/React.createElement(\"i\",{class:\"fa fa-check\"}),\"Send\"))))))),/*#__PURE__*/React.createElement(Modal,{isOpen:this.state.openAttachmentPopup,className:'modal-lg',style:{maxWidth:'70%'}},/*#__PURE__*/React.createElement(ModalHeader,{toggle:function toggle(){return _this8.setState({openAttachmentPopup:false});}},\" Attachement \"),/*#__PURE__*/React.createElement(ModalBody,null,/*#__PURE__*/React.createElement(Row,null,/*#__PURE__*/React.createElement(Col,{md:\"3\"},/*#__PURE__*/React.createElement(AutoComplete,{value:this.state.selectedPolicy,field:\"policyNumber\",placeholder:\"Search By Policy And Email\",minLength:1,onChange:function onChange(e){return _this8.selectType(e.value,'selectPolicy');}})),/*#__PURE__*/React.createElement(Col,{md:\"1\",style:{marginLeft:'2px'}},/*#__PURE__*/React.createElement(BTN,{color:\"success\",onClick:function onClick(){return _this8.filterPolicySingle();}},\"Search\")),/*#__PURE__*/React.createElement(Col,{md:\"7\"},/*#__PURE__*/React.createElement(\"span\",null,\"Policy#: \",this.state.policysData.length>0?this.state.policysData[0].policyNumber:'NA'),/*#__PURE__*/React.createElement(\"span\",{style:{marginLeft:'10px'}},\"RenewalDate: \",this.state.policysData.length>0?moment(this.state.policysData[0].renewalDate).format(CommonConfig.dateFormat.forDatePicker):'NA'),/*#__PURE__*/React.createElement(\"span\",{style:{marginLeft:'10px'}},\"InsuredName: \",this.state.policysData.length>0?this.state.policysData[0].insuredName:'NA'),/*#__PURE__*/React.createElement(\"span\",{style:{marginLeft:'10px'}},\"PolicyType: \",this.state.policysData.length>0?this.state.policysData[0].policyType:'NA'))),/*#__PURE__*/React.createElement(\"div\",{className:\"table-custom\"},/*#__PURE__*/React.createElement(DataTable,{style:{},ref:function ref(el){return _this8.dt=el;},value:this.state.documentList,currentPageReportTemplate:this.state.str,first:this.state.selectedPage,onPage:function onPage(e){return _this8.getPageString(e);},paginator:true,rows:this.state.rowsPerPage,header:header,exportFilename:\"Documents\",paginatorTemplate:\"CurrentPageReport FirstPageLink PrevPageLink PageLinks NextPageLink LastPageLink RowsPerPageDropdown \",rowsPerPageOptions:this.state.rowsPerPageOptions,globalFilter:this.state.globalFilter,emptyMessage:\"No records found\",responsive:true,resizableColumns:true,columnResizeMode:\"fit\",scrollable:true,scrollHeight:\"265px\",selection:this.state.selectedDocuments,onSelectionChange:function onSelectionChange(e){return _this8.mulSelect(e.value);}},columns)))));}}]);return Compose;}(Component);export default Compose;","map":{"version":3,"sources":["/Users/bhavik/Downloads/Cognisun/Evolution/Evolution_React/evolution_new/src/views/Apps/Email/Compose/Compose.js"],"names":["React","Component","DataTable","Column","moment","MultiSelect","InputText","Modal","ModalHeader","ModalBody","Nav","NavItem","NavLink","ButtonDropdown","Button","BTN","DropdownToggle","DropdownMenu","DropdownItem","Badge","ButtonGroup","Form","FormGroup","Label","Input","Row","Col","AutoComplete","APIConstant","CommonConfig","api","toast","axios","CKEditor","apiBase","Compose","props","selectDocument","event","docuCustom","target","files","i","length","push","setState","customDoc","state","concat","downloadData","rowdata","path","URL","url","method","responseType","then","response","window","createObjectURL","Blob","data","link","document","createElement","href","setAttribute","Filename","body","appendChild","click","handleChange","e","name","value","emailTo","emailFrom","emailCC","emailBCC","emailSubject","mulSelect","selectedDocuments","getPageString","firstPage","first","l","rows","page","lastPage","documentList","str","selectedPage","rowsPerPage","columns","selectionMode","style","width","id","field","header","sortable","filter","formatCreatedDate","bind","toggle","documentType","dropdownOpen","emailBodyError","filteredPolicysSingle","selectedPolicy","selectedPolicyId","policysData","emailTemplateList","selectedTemplate","emailTemplate","dataTableConfig","rowsPerPageOptions","cols","openAttachmentPopup","emailFromName","emailBody","attachmentURL","totalDocument","InboxCount","colOptions","col","label","onColumnToggle","handleDetailsChange","valueInOrder","sort","x","y","getInbox","getEmailTemplate","policyId","loggedInUserData","EntityId","post","res","console","log","success","catch","err","error","rowData","CreatedOn","format","dateFormat","dateTime","type","undefined","getEmailBodyData","getElementById","JSON","parse","index","splice","emailDataForm","FormData","append","stringify","sendMailBulk","history","pathname","allEmail","count","item","attributes","flags","evt","editor","getData","isEmpty","getPolicyAutoComplete","email","getDocumentList","returnValue","marginTop","textAlign","margin","globalFilter","marginRight","columnToggleIcon","map","selectType","display","MessageTemplateId","TamplateName","attach","Type","FileName","FileSize","policyNumber","marginLeft","renewalDate","forDatePicker","insuredName","policyType","removeDocument","Math","round","size","sendMail","maxWidth","filterPolicySingle","el","dt"],"mappings":"4nCAAA,MAAOA,CAAAA,KAAP,EAAgBC,SAAhB,KAAiC,OAAjC,CACA,OAASC,SAAT,KAA0B,sBAA1B,CACA,OAASC,MAAT,KAAuB,mBAAvB,CACA,MAAO,kDAAP,CACA,MAAO,yCAAP,CACA,MAAO,2BAAP,CACA,MAAOC,CAAAA,MAAP,KAAmB,QAAnB,CACA,OAASC,WAAT,KAA4B,wBAA5B,CACA,OAASC,SAAT,KAA0B,sBAA1B,CACA,OAASC,KAAT,CAAgBC,WAAhB,CAA6BC,SAA7B,CAAwCC,GAAxC,CAA6CC,OAA7C,CAAsDC,OAAtD,CAA+DC,cAA/D,CAA+EC,MAAM,GAAIC,CAAAA,GAAzF,CAA8FC,cAA9F,CAA8GC,YAA9G,CAA4HC,YAA5H,CAA0IC,KAA1I,CAAiJL,MAAjJ,CAAyJM,WAAzJ,CAAsKC,IAAtK,CAA4KC,SAA5K,CAAuLC,KAAvL,CAA8LC,KAA9L,CAAqMC,GAArM,CAA0MC,GAA1M,KAAqN,YAArN,CACA,OAASC,YAAT,KAA6B,yBAA7B,CACA,MAAOC,CAAAA,WAAP,KAAwB,6BAAxB,CACA,OAASC,YAAT,KAA6B,6BAA7B,CACA,MAAOC,CAAAA,GAAP,KAAgB,6BAAhB,CACA,OAASC,KAAT,KAAsB,gBAAtB,CACA,MAAOC,CAAAA,KAAP,KAAkB,OAAlB,CACA,MAAOC,CAAAA,QAAP,KAAqB,iBAArB,CACA,OAASC,OAAT,KAAwB,0BAAxB,C,GAEMC,CAAAA,O,kGAEJ,iBAAYC,KAAZ,CAAmB,yCACjB,uBAAMA,KAAN,EADiB,MAqDnBC,cArDmB,CAqDF,SAACC,KAAD,CAAW,CAC1B,GAAIC,CAAAA,UAAU,CAAG,EAAjB,CACA,GAAID,KAAK,CAACE,MAAN,CAAaC,KAAb,EAAsBH,KAAK,CAACE,MAAN,CAAaC,KAAvC,CAA8C,CAC5C,IAAK,GAAIC,CAAAA,CAAC,CAAG,CAAb,CAAgBA,CAAC,CAAGJ,KAAK,CAACE,MAAN,CAAaC,KAAb,CAAmBE,MAAvC,CAA+CD,CAAC,EAAhD,CAAoD,CAClDH,UAAU,CAACK,IAAX,CAAgBN,KAAK,CAACE,MAAN,CAAaC,KAAb,CAAmBC,CAAnB,CAAhB,EACD,CACD,MAAKG,QAAL,CAAc,CAAEC,SAAS,CAAE,MAAKC,KAAL,CAAWD,SAAX,CAAqBE,MAArB,CAA4BT,UAA5B,CAAb,CAAd,EACD,CALD,IAKO,CAEN,CACF,CA/DkB,OA4KnBU,YA5KmB,CA4KJ,SAACC,OAAD,CAAa,CAC1B,GAAIC,CAAAA,IAAI,CAAGjB,OAAO,CAAGgB,OAAO,CAACE,GAA7B,CAEApB,KAAK,CAAC,CACJqB,GAAG,CAAEF,IADD,CAEJG,MAAM,CAAE,KAFJ,CAGJC,YAAY,CAAE,MAAQ;AAHlB,CAAD,CAAL,CAIGC,IAJH,CAIQ,SAACC,QAAD,CAAc,CACpB,GAAMJ,CAAAA,GAAG,CAAGK,MAAM,CAACN,GAAP,CAAWO,eAAX,CAA2B,GAAIC,CAAAA,IAAJ,CAAS,CAACH,QAAQ,CAACI,IAAV,CAAT,CAA3B,CAAZ,CACA,GAAMC,CAAAA,IAAI,CAAGC,QAAQ,CAACC,aAAT,CAAuB,GAAvB,CAAb,CACAF,IAAI,CAACG,IAAL,CAAYZ,GAAZ,CACAS,IAAI,CAACI,YAAL,CAAkB,UAAlB,CAA8BhB,OAAO,CAACiB,QAAtC,EAAiD;AACjDJ,QAAQ,CAACK,IAAT,CAAcC,WAAd,CAA0BP,IAA1B,EACAA,IAAI,CAACQ,KAAL,GACD,CAXD,EAYD,CA3LkB,OA4QnBC,YA5QmB,CA4QJ,SAACC,CAAD,CAAO,CACpB,MAAK3B,QAAL,oBAAiB2B,CAAC,CAAChC,MAAF,CAASiC,IAA1B,CAAiCD,CAAC,CAAChC,MAAF,CAASkC,KAA1C,GACA,GAAIF,CAAC,CAAChC,MAAF,CAASiC,IAAT,GAAkB,SAAtB,CAAiC,CAC/B,GAAID,CAAC,CAAChC,MAAF,CAASkC,KAAT,GAAmB,EAAnB,EAAyBF,CAAC,CAAChC,MAAF,CAASkC,KAAT,GAAmB,IAAhD,CAAsD,CACpD,MAAK7B,QAAL,CAAc,CAAE8B,OAAO,CAAE,EAAX,CAAd,EACD,CAFD,IAEO,CACL,MAAK9B,QAAL,CAAc,CAAE8B,OAAO,CAAEH,CAAC,CAAChC,MAAF,CAASkC,KAApB,CAAd,EACD,CACF,CAED,GAAIF,CAAC,CAAChC,MAAF,CAASiC,IAAT,GAAkB,WAAtB,CAAmC,CACjC,GAAID,CAAC,CAAChC,MAAF,CAASkC,KAAT,GAAmB,EAAnB,EAAyBF,CAAC,CAAChC,MAAF,CAASkC,KAAT,GAAmB,IAAhD,CAAsD,CACpD,MAAK7B,QAAL,CAAc,CAAE+B,SAAS,CAAE,EAAb,CAAd,EACD,CAFD,IAEO,CACL,MAAK/B,QAAL,CAAc,CAAE+B,SAAS,CAAEJ,CAAC,CAAChC,MAAF,CAASkC,KAAtB,CAAd,EACD,CACF,CAED,GAAIF,CAAC,CAAChC,MAAF,CAASiC,IAAT,GAAkB,SAAtB,CAAiC,CAC/B,GAAID,CAAC,CAAChC,MAAF,CAASkC,KAAT,GAAmB,EAAnB,EAAyBF,CAAC,CAAChC,MAAF,CAASkC,KAAT,GAAmB,IAAhD,CAAsD,CACpD,MAAK7B,QAAL,CAAc,CAAEgC,OAAO,CAAE,EAAX,CAAd,EACD,CAFD,IAEO,CACL,MAAKhC,QAAL,CAAc,CAAEgC,OAAO,CAAEL,CAAC,CAAChC,MAAF,CAASkC,KAApB,CAAd,EACD,CACF,CAED,GAAIF,CAAC,CAAChC,MAAF,CAASiC,IAAT,GAAkB,UAAtB,CAAkC,CAChC,GAAID,CAAC,CAAChC,MAAF,CAASkC,KAAT,GAAmB,EAAnB,EAAyBF,CAAC,CAAChC,MAAF,CAASkC,KAAT,GAAmB,IAAhD,CAAsD,CACpD,MAAK7B,QAAL,CAAc,CAAEiC,QAAQ,CAAE,EAAZ,CAAd,EACD,CAFD,IAEO,CACL,MAAKjC,QAAL,CAAc,CAAEiC,QAAQ,CAAEN,CAAC,CAAChC,MAAF,CAASkC,KAArB,CAAd,EACD,CACF,CAED,GAAIF,CAAC,CAAChC,MAAF,CAASiC,IAAT,GAAkB,cAAtB,CAAsC,CACpC,GAAID,CAAC,CAAChC,MAAF,CAASkC,KAAT,GAAmB,EAAnB,EAAyBF,CAAC,CAAChC,MAAF,CAASkC,KAAT,GAAmB,IAAhD,CAAsD,CACpD,MAAK7B,QAAL,CAAc,CAAEkC,YAAY,CAAE,EAAhB,CAAd,EACD,CAFD,IAEO,CACL,MAAKlC,QAAL,CAAc,CAAEkC,YAAY,CAAEP,CAAC,CAAChC,MAAF,CAASkC,KAAzB,CAAd,EACD,CACF,CACF,CArTkB,OAgVnBM,SAhVmB,CAgVP,SAACR,CAAD,CAAO,CACjB,MAAK3B,QAAL,CAAc,CAAEoC,iBAAiB,CAAET,CAArB,CAAd,EACD,CAlVkB,OAoVnBU,aApVmB,CAoVH,SAACV,CAAD,CAAO,CACrB,GAAIW,CAAAA,SAAS,CAAGX,CAAC,CAACY,KAAF,CAAU,CAA1B,CACA,GAAIC,CAAAA,CAAC,CAAGb,CAAC,CAACc,IAAF,EAAUd,CAAC,CAACe,IAAF,CAAS,CAAnB,CAAR,CACA,GAAIC,CAAAA,QAAQ,CAAIH,CAAC,CAAG,MAAKtC,KAAL,CAAW0C,YAAX,CAAwB9C,MAA7B,CAAuC0C,CAAvC,CAA2C,MAAKtC,KAAL,CAAW0C,YAAX,CAAwB9C,MAAlF,CACA,GAAI+C,CAAAA,GAAG,CAAGP,SAAS,CAAG,MAAZ,CAAqBK,QAArB,CAAgC,UAAhC,CAA6C,MAAKzC,KAAL,CAAW0C,YAAX,CAAwB9C,MAArE,CAA8E,UAAxF,CACA,MAAKE,QAAL,CAAc,CAAE8C,YAAY,CAAEnB,CAAC,CAACY,KAAlB,CAAyBM,GAAG,CAAEA,GAA9B,CAAmCE,WAAW,CAAEpB,CAAC,CAACc,IAAlD,CAAd,EACD,CA1VkB,CAGjB,GAAIO,CAAAA,OAAO,CAAG,CACZ,CAAEC,aAAa,CAAE,UAAjB,CAA6BC,KAAK,CAAE,CAAEC,KAAK,CAAE,KAAT,CAApC,CAAsDC,EAAE,CAAE,CAA1D,CADY,CAEZ,CAAEC,KAAK,CAAE,UAAT,CAAqBC,MAAM,CAAE,MAA7B,CAAqCC,QAAQ,CAAE,IAA/C,CAAqDC,MAAM,CAAE,IAA7D,CAAmEJ,EAAE,CAAE,CAAvE,CAFY,CAGZ,CAAE7B,IAAI,CAAE,MAAKkC,iBAAL,CAAuBC,IAAvB,+BAAR,CAA2CL,KAAK,CAAE,WAAlD,CAA+DC,MAAM,CAAE,SAAvE,CAAkFC,QAAQ,CAAE,IAA5F,CAAkGC,MAAM,CAAE,IAA1G,CAAgHJ,EAAE,CAAE,CAApH,CAHY,CAIZ,CAAEC,KAAK,CAAE,UAAT,CAAqBC,MAAM,CAAE,WAA7B,CAA0CC,QAAQ,CAAE,IAApD,CAA0DC,MAAM,CAAE,IAAlE,CAAwEJ,EAAE,CAAE,CAA5E,CAJY,CAKZ,CAAEC,KAAK,CAAE,WAAT,CAAsBC,MAAM,CAAE,WAA9B,CAA2CC,QAAQ,CAAE,IAArD,CAA2DC,MAAM,CAAE,IAAnE,CAAyEJ,EAAE,CAAE,CAA7E,CALY,CAAd,CAQA,MAAKO,MAAL,CAAc,MAAKA,MAAL,CAAYD,IAAZ,+BAAd,CACA,MAAKxD,KAAL,CAAa,CACX0D,YAAY,CAAE,EADH,CAEXC,YAAY,CAAE,KAFH,CAGXC,cAAc,CAAE,KAHL,CAIXC,qBAAqB,CAAE,IAJZ,CAKXC,cAAc,CAAE,IALL,CAMXC,gBAAgB,CAAE,IANP,CAOXhE,SAAS,CAAE,EAPA,CAQXiE,WAAW,CAAE,EARF,CASXC,iBAAiB,CAAE,EATR,CAUXC,gBAAgB,CAAE,IAVP,CAWXC,aAAa,CAAE,EAXJ,CAYXzB,YAAY,CAAE,EAZH,CAaXG,WAAW,CAAE/D,YAAY,CAACsF,eAAb,CAA6BvB,WAb/B,CAcXwB,kBAAkB,CAAEvF,YAAY,CAACsF,eAAb,CAA6BC,kBAdtC,CAeXzB,YAAY,CAAE,CAfH,CAgBXV,iBAAiB,CAAE,EAhBR,CAiBXoC,IAAI,CAAExB,OAjBK,CAkBXH,GAAG,CAAE,EAlBM,CAmBX4B,mBAAmB,CAAE,KAnBV,CAoBX1C,SAAS,CAAE,EApBA,CAqBX2C,aAAa,CAAE,EArBJ,CAsBX5C,OAAO,CAAE,EAtBE,CAuBXE,OAAO,CAAE,EAvBE,CAwBXC,QAAQ,CAAE,EAxBC,CAyBXC,YAAY,CAAE,EAzBH,CA0BXyC,SAAS,CAAE,EA1BA,CA2BXC,aAAa,CAAE,EA3BJ,CA4BXC,aAAa,CAAE,EA5BJ,CA6BXC,UAAU,CAAE,EA7BD,CAAb,CAgCA,MAAKC,UAAL,CAAkB,EAAlB,CACA,sBAAgB/B,OAAhB,yBAAyB,CAApB,GAAIgC,CAAAA,GAAG,aAAP,CACH,MAAKD,UAAL,CAAgBhF,IAAhB,CAAqB,CAAEkF,KAAK,CAAED,GAAG,CAAC1B,MAAb,CAAqBzB,KAAK,CAAEmD,GAA5B,CAArB,EACD,CAED,MAAKE,cAAL,CAAsB,MAAKA,cAAL,CAAoBxB,IAApB,+BAAtB,CACA,MAAKyB,mBAAL,CAA2B,MAAKA,mBAAL,CAAyBzB,IAAzB,+BAA3B,CAlDiB,aAmDlB,C,0EAccjE,K,CAAO,CACpB,GAAI2F,CAAAA,YAAY,CAAG3F,KAAK,CAACoC,KAAN,CAAYwD,IAAZ,CAAiB,SAACC,CAAD,CAAIC,CAAJ,CAAU,CAAE,MAAOD,CAAAA,CAAC,CAAClC,EAAF,CAAOmC,CAAC,CAACnC,EAAhB,CAAoB,CAAjD,CAAnB,CACA,KAAKpD,QAAL,CAAc,CAAEwE,IAAI,CAAEY,YAAR,CAAd,EACD,C,6DAEmB,CAClB,KAAKI,QAAL,GACA,KAAKC,gBAAL,GACD,C,yDAEiB,iBAChB,GAAI,CACF,GAAMzE,CAAAA,IAAI,CAAG,CACX,YAAa,KAAKd,KAAL,CAAWgE,WAAX,CAAuB,CAAvB,EAA0BwB,QAD5B,CAEX,cAAe1G,YAAY,CAAC2G,gBAAb,GAAgCC,QAFpC,CAAb,CAIA3G,GAAG,CAAC4G,IAAJ,CAAS,qBAAT,CAAgC7E,IAAhC,EAAsCL,IAAtC,CAA2C,SAAAmF,GAAG,CAAI,CAChDC,OAAO,CAACC,GAAR,CAAY,KAAZ,CAAmBF,GAAnB,EACA,GAAIA,GAAG,CAACG,OAAR,CAAiB,CACf,GAAItD,CAAAA,QAAQ,CAAI,MAAI,CAACzC,KAAL,CAAW6C,WAAX,CAAyB+C,GAAG,CAAC9E,IAAJ,CAASlB,MAAnC,CAA6C,MAAI,CAACI,KAAL,CAAW6C,WAAxD,CAAsE+C,GAAG,CAAC9E,IAAJ,CAASlB,MAA9F,CACA,GAAI+C,CAAAA,GAAG,CAAG,QAAUF,QAAV,CAAqB,UAArB,CAAkCmD,GAAG,CAAC9E,IAAJ,CAASlB,MAA3C,CAAoD,UAA9D,CACA,MAAI,CAACE,QAAL,CAAc,CAAE4C,YAAY,CAAEkD,GAAG,CAAC9E,IAApB,CAA0B6B,GAAG,CAAEA,GAA/B,CAAoC4B,mBAAmB,CAAE,IAAzD,CAAd,EACD,CAJD,IAIO,CAEN,CACF,CATD,EASGyB,KATH,CASS,SAAAC,GAAG,CAAI,CAEf,CAXD,EAYD,CAAC,MAAOC,KAAP,CAAc,CAEf,CACF,C,4DAEiBC,O,CAAS,CACzB,MACE9I,CAAAA,MAAM,CAAC8I,OAAO,CAACC,SAAT,CAAN,CAA0BC,MAA1B,CAAiCvH,YAAY,CAACwH,UAAb,CAAwBC,QAAzD,CADF,CAGD,C,8CAEU5E,K,CAAO6E,I,CAAM,CACtB;AACA,GAAIA,IAAI,GAAK,eAAb,CAA8B,CAC5B,GAAI7E,KAAK,GAAK,EAAV,EAAgBA,KAAK,GAAK8E,SAA1B,EAAuC9E,KAAK,GAAK,IAArD,CAA2D,CACzD,KAAK7B,QAAL,CAAc,CAAEqE,aAAa,CAAE,EAAjB,CAAd,EACD,CAFD,IAEO,CACL,SACA,KAAKrE,QAAL,CAAc,CAAEqE,aAAa,CAAExC,KAAK,CAACA,KAAvB,CAAd,EACA,KAAK+E,gBAAL,GACD,CACF,CAED,GAAIF,IAAI,GAAK,cAAb,CAA6B,CAC3B,GAAI7E,KAAK,GAAK,EAAV,EAAgBA,KAAK,GAAK8E,SAA1B,EAAuC9E,KAAK,GAAK,IAArD,CAA2D,CACzD,KAAK7B,QAAL,CAAc,CAAEgE,cAAc,CAAE,EAAlB,CAAsBC,gBAAgB,CAAE,EAAxC,CAAd,EACD,CAFD,IAEO,CACL,KAAKjE,QAAL,CAAc,CAAEgE,cAAc,CAAEnC,KAAlB,CAAd,EACD,CACF,CAED,GAAI6E,IAAI,GAAK,cAAb,CAA6B,CAC3B,GAAI7E,KAAK,GAAK,EAAV,EAAgBA,KAAK,GAAK8E,SAA1B,EAAuC9E,KAAK,GAAK,IAArD,CAA2D,CACzD,KAAK7B,QAAL,CAAc,CAAE4D,YAAY,CAAE,EAAhB,CAAd,EACD,CAFD,IAEO,CACL,KAAK5D,QAAL,CAAc,CAAE4D,YAAY,CAAE/B,KAAhB,CAAd,EACA,GAAIA,KAAK,EAAI,GAAb,CAAkB,CAChB,KAAK7B,QAAL,CAAc,CAAEyE,mBAAmB,CAAE,IAAvB,CAAd,EACD,CAFD,IAEO,CACLvD,QAAQ,CAAC2F,cAAT,CAAwB,WAAxB,EAAqCpF,KAArC,GACD,CACF,CACF,CAEF,C,2DAEkB,iBACjB,GAAIT,CAAAA,IAAI,CAAG,CACT,YAAa,KAAKd,KAAL,CAAWgE,WAAX,CAAuB,CAAvB,EAA0BwB,QAD9B,CAET,cAAe,QAFN,CAGT,YAAa,KAAKxF,KAAL,CAAWgE,WAAX,CAAuB,CAAvB,EAA0BwB,QAH9B,CAIT,eAAgB,KAAKxF,KAAL,CAAWmE,aAJlB,CAKT,eAAgBrF,YAAY,CAAC2G,gBAAb,GAAgCC,QALvC,CAAX,CAOA3G,GAAG,CAAC4G,IAAJ,CAAS9G,WAAW,CAACuB,IAAZ,CAAiBsG,gBAA1B,CAA4C5F,IAA5C,EAAkDL,IAAlD,CAAuD,SAAAmF,GAAG,CAAI,CAC5D,GAAIA,GAAG,CAACG,OAAR,CAAiB,CACf,MAAI,CAACjG,QAAL,CAAc,CACZ+B,SAAS,CAAE+D,GAAG,CAAC9E,IAAJ,CAAS,CAAT,EAAYe,SADX,CAEZ2C,aAAa,CAAEoB,GAAG,CAAC9E,IAAJ,CAAS,CAAT,EAAY0D,aAFf,CAGZ1C,OAAO,CAAE8D,GAAG,CAAC9E,IAAJ,CAAS,CAAT,EAAYgB,OAHT,CAIZC,QAAQ,CAAE6D,GAAG,CAAC9E,IAAJ,CAAS,CAAT,EAAYiB,QAJV,CAKZC,YAAY,CAAE4D,GAAG,CAAC9E,IAAJ,CAAS,CAAT,EAAYkB,YALd,CAMZyC,SAAS,CAAEmB,GAAG,CAAC9E,IAAJ,CAAS,CAAT,EAAY2D,SANX,CAOZC,aAAa,CAAEkC,IAAI,CAACC,KAAL,CAAWjB,GAAG,CAAC9E,IAAJ,CAAS,CAAT,EAAY4D,aAAvB,CAPH,CAAd,EASD,CACF,CAZD,EAYGsB,KAZH,CAYS,SAAAC,GAAG,CAAI,CACdJ,OAAO,CAACC,GAAR,CAAYG,GAAZ,EACD,CAdD,EAeD,C,sDAEcO,I,CAAMM,K,CAAO,CAC1B,GAAIN,IAAI,EAAI,QAAZ,CAAsB,CACpB,KAAKxG,KAAL,CAAWkC,iBAAX,CAA6B6E,MAA7B,CAAoCD,KAApC,CAA2C,CAA3C,EACD,CAFD,IAEO,CACL,KAAK9G,KAAL,CAAWD,SAAX,CAAqBgH,MAArB,CAA4BD,KAA5B,CAAmC,CAAnC,EACD,CACF,C,2DAmBkB,iBACjB,GAAIhG,CAAAA,IAAI,CAAG,CACT,OAAQ,OADC,CAAX,CAGA/B,GAAG,CAAC4G,IAAJ,CAAS9G,WAAW,CAACuB,IAAZ,CAAiBmF,gBAA1B,CAA4CzE,IAA5C,EAAkDL,IAAlD,CAAuD,SAAAmF,GAAG,CAAI,CAC5D,GAAIA,GAAG,CAACG,OAAR,CAAiB,CACf,MAAI,CAACjG,QAAL,CAAc,CAAEmE,iBAAiB,CAAE2B,GAAG,CAAC9E,IAAzB,CAAd,EACD,CAEF,CALD,EAKGkF,KALH,CAKS,SAAAC,GAAG,CAAI,CACdJ,OAAO,CAACC,GAAR,CAAYG,GAAZ,EACD,CAPD,EAQD,C,2CAEU,iBACT,GAAMe,CAAAA,aAAa,CAAG,GAAIC,CAAAA,QAAJ,EAAtB,CACAD,aAAa,CAACE,MAAd,CAAqB,IAArB,CAA2B,KAAKlH,KAAL,CAAW4B,OAAtC,EACAoF,aAAa,CAACE,MAAd,CAAqB,MAArB,CAA6B,KAAKlH,KAAL,CAAW6B,SAAxC,EACAmF,aAAa,CAACE,MAAd,CAAqB,IAArB,CAA2B,KAAKlH,KAAL,CAAW8B,OAAtC,EACAkF,aAAa,CAACE,MAAd,CAAqB,KAArB,CAA4B,KAAKlH,KAAL,CAAW+B,QAAvC,EACAiF,aAAa,CAACE,MAAd,CAAqB,SAArB,CAAgC,KAAKlH,KAAL,CAAWgC,YAA3C,EACAgF,aAAa,CAACE,MAAd,CAAqB,MAArB,CAA6B,aAA7B,EACAF,aAAa,CAACE,MAAd,CAAqB,eAArB,CAAsCpI,YAAY,CAAC2G,gBAAb,GAAgCC,QAAtE,EACAsB,aAAa,CAACE,MAAd,CAAqB,MAArB,CAA6B,KAAKlH,KAAL,CAAWyE,SAAxC,EACAuC,aAAa,CAACE,MAAd,CAAqB,mBAArB,CAA0CN,IAAI,CAACO,SAAL,CAAe,KAAKnH,KAAL,CAAWkC,iBAA1B,CAA1C,EACA8E,aAAa,CAACE,MAAd,CAAqB,eAArB,CAAsC,KAAKlH,KAAL,CAAW0E,aAAjD,EAEA,IAAK,GAAI/E,CAAAA,CAAC,CAAG,CAAb,CAAgBA,CAAC,CAAG,KAAKK,KAAL,CAAWD,SAAX,CAAqBH,MAAzC,CAAiDD,CAAC,EAAlD,CAAsD,CACpDqH,aAAa,CAACE,MAAd,CAAqB,MAArB,CAA6B,KAAKlH,KAAL,CAAWD,SAAX,CAAqBJ,CAArB,CAA7B,CAAsD,KAAKK,KAAL,CAAWD,SAAX,CAAqBJ,CAArB,EAAwB+B,IAA9E,EACD,CAED3C,GAAG,CAAC4G,IAAJ,CAAS9G,WAAW,CAACuB,IAAZ,CAAiBgH,YAA1B,CAAwCJ,aAAxC,EAAuDvG,IAAvD,CAA4D,SAAAmF,GAAG,CAAI,CACjE,GAAIA,GAAG,CAACG,OAAR,CAAiB,CACf/G,KAAK,CAAC+G,OAAN,CAAc,uBAAd,EACA,MAAI,CAAC1G,KAAL,CAAWgI,OAAX,CAAmBxH,IAAnB,CAAwB,CACtByH,QAAQ,CAAE,mBADY,CAAxB,EAGD,CALD,IAKO,CACLtI,KAAK,CAACkH,KAAN,CAAY,mBAAZ,EACD,CACF,CATD,EASGF,KATH,CASS,SAAAC,GAAG,CAAI,CACdJ,OAAO,CAACC,GAAR,CAAYG,GAAZ,EACD,CAXD,EAaD,C,2CAEU,iBACT,GAAInF,CAAAA,IAAI,CAAG,CACT,UAAW,OADF,CAET,aAAc,KAFL,CAAX,CAIA/B,GAAG,CAAC4G,IAAJ,CAAS9G,WAAW,CAACuB,IAAZ,CAAiBmH,QAA1B,CAAoCzG,IAApC,EAA0CL,IAA1C,CAA+C,SAAAmF,GAAG,CAAI,CACpD,GAAIA,GAAG,CAACG,OAAR,CAAiB,CACf,GAAIyB,CAAAA,KAAK,CAAG5B,GAAG,CAAC9E,IAAJ,CAASwC,MAAT,CAAgB,SAACmE,IAAD,CAAU,CACpC,GAAIA,IAAI,CAACC,UAAL,CAAgBC,KAAhB,CAAsB,CAAtB,GAA4B,QAAhC,CAA0C,CACxC,MAAO,KAAP,CACD,CAFD,IAEO,CACL,MAAO,MAAP,CACD,CACF,CANW,EAMT/H,MANH,CAOA,MAAI,CAACE,QAAL,CAAc,CAAE8E,UAAU,CAAE4C,KAAd,CAAd,EACD,CAEF,CAZD,EAYGxB,KAZH,CAYS,SAAAC,GAAG,CAAI,CACdJ,OAAO,CAACC,GAAR,CAAYG,GAAZ,EACD,CAdD,EAeD,C,gEAEmB2B,G,CAAK,CACvB,GAAM9G,CAAAA,IAAI,CAAG8G,GAAG,CAACC,MAAJ,CAAWC,OAAX,EAAb,CACA,GAAIhJ,YAAY,CAACiJ,OAAb,CAAqBjH,IAArB,CAAJ,CAAgC,CAC9B,KAAKhB,QAAL,CAAc,CAAE8D,cAAc,CAAE,IAAlB,CAAwBa,SAAS,CAAE,EAAnC,CAAd,EACA;AACD,CAHD,IAGO,CACL,KAAK3E,QAAL,CAAc,CAAE8D,cAAc,CAAE,KAAlB,CAAyBa,SAAS,CAAE3D,IAApC,CAAd,EACA;AACD,CACF,C,+DA6CoB,iBACnB,GAAIA,CAAAA,IAAI,CAAG,CACT,YAAa,EADJ,CAET,gBAAiB,KAAKd,KAAL,CAAW8D,cAFnB,CAGT,cAAehF,YAAY,CAAC2G,gBAAb,GAAgCC,QAHtC,CAAX,CAKA3G,GAAG,CAAC4G,IAAJ,CAAS9G,WAAW,CAACuB,IAAZ,CAAiB4H,qBAA1B,CAAiDlH,IAAjD,EAAuDL,IAAvD,CAA4D,SAAAmF,GAAG,CAAI,CACjE,GAAIA,GAAG,CAACG,OAAR,CAAiB,CACf,MAAI,CAACjG,QAAL,CAAc,CAAEkE,WAAW,CAAE4B,GAAG,CAAC9E,IAAnB,CAAyBc,OAAO,CAAEgE,GAAG,CAAC9E,IAAJ,CAAS,CAAT,EAAYmH,KAA9C,CAAd,EACA,MAAI,CAACC,eAAL,GACD,CAHD,IAGO,CACL,MAAI,CAACpI,QAAL,CAAc,CAAEkE,WAAW,CAAE,EAAf,CAAd,EACAhF,KAAK,CAACkH,KAAN,CAAYN,GAAG,CAAC9E,IAAJ,CAAS,CAAT,EAAYqH,WAAxB,EACD,CACF,CARD,EAQGnC,KARH,CAQS,SAAAC,GAAG,CAAI,CACdJ,OAAO,CAACC,GAAR,CAAYG,GAAZ,EACD,CAVD,EAWD,C,uCAEQ,CACP,KAAKnG,QAAL,CAAc,CACZ6D,YAAY,CAAE,CAAC,KAAK3D,KAAL,CAAW2D,YADd,CAAd,EAGD,C,uCAcQ,iBACP,GAAIP,CAAAA,MAAM,cACR,4CACE,2BAAK,KAAK,CAAE,CAAE,YAAa,OAAf,CAAwBgF,SAAS,CAAE,EAAnC,CAAZ,eACE,oBAAC,GAAD,mBACE,oBAAC,GAAD,mBACE,2BAAK,SAAS,CAAC,cAAf,eACE,2BAAK,SAAS,CAAC,qBAAf,eACE,2BAAK,KAAK,CAAE,CAAEC,SAAS,CAAE,OAAb,CAAZ,eACE,yBAAG,SAAS,CAAC,cAAb,CAA4B,KAAK,CAAE,CAAEC,MAAM,CAAE,aAAV,CAAnC,EADF,cAEE,oBAAC,SAAD,EAAW,IAAI,CAAC,QAAhB,CAAyB,OAAO,CAAE,iBAAC7G,CAAD,QAAO,CAAA,MAAI,CAAC3B,QAAL,CAAc,CAAEyI,YAAY,CAAE9G,CAAC,CAAChC,MAAF,CAASkC,KAAzB,CAAd,CAAP,EAAlC,CAA0F,WAAW,CAAC,eAAtG,CAAsH,IAAI,CAAC,IAA3H,CAAgI,KAAK,CAAE,CAAE6G,WAAW,CAAE,EAAf,CAAvI,EAFF,CADF,cAKE,oBAAC,WAAD,EAAa,KAAK,CAAE,KAAKxI,KAAL,CAAWsE,IAA/B,CAAqC,OAAO,CAAE,KAAKO,UAAnD,CACE,gBAAgB,CAAE,IADpB,CAC0B,WAAW,CAAE/F,YAAY,CAACsF,eAAb,CAA6BqE,gBADpE,CACsF,OAAO,CAAC,oBAD9F,CAEE,QAAQ,CAAE,KAAKzD,cAFjB,CAEiC,KAAK,CAAE,CAAE/B,KAAK,CAAE,MAAT,CAFxC,EALF,CADF,CADF,CADF,CADF,CADF,CADF,CAsBA,GAAIH,CAAAA,OAAO,CAAG,KAAK9C,KAAL,CAAWsE,IAAX,CAAgBoE,GAAhB,CAAoB,SAAC5D,GAAD,CAAMnF,CAAN,CAAY,CAC5C,mBAAO,oBAAC,MAAD,EAAQ,KAAK,CAAEmF,GAAG,CAAC3B,KAAnB,CAA0B,MAAM,CAAE2B,GAAG,CAAC1B,MAAtC,CAA8C,IAAI,CAAE0B,GAAG,CAACzD,IAAxD,CAA8D,QAAQ,CAAEyD,GAAG,CAACzB,QAA5E,CAAsF,MAAM,CAAEyB,GAAG,CAACxB,MAAlG,CAA0G,aAAa,CAAEwB,GAAG,CAAC/B,aAA7H,CAA4I,KAAK,CAAE+B,GAAG,CAAC9B,KAAvJ,EAAP,CACD,CAFa,CAAd,CAGA,mBACE,2BAAK,SAAS,CAAC,iBAAf,eACE,2BAAK,SAAS,CAAC,WAAf,eACE,4CACE,yBAAG,IAAI,CAAC,sBAAR,CAA+B,SAAS,CAAC,0BAAzC,cADF,cAEE,oBAAC,GAAD,mBACE,oBAAC,OAAD,mBACE,oBAAC,OAAD,EAAS,IAAI,CAAC,oBAAd,eAAmC,yBAAG,SAAS,CAAC,aAAb,EAAnC,wBAAyE,oBAAC,KAAD,EAAO,KAAK,CAAC,QAAb,EAAuB,KAAKhD,KAAL,CAAW4E,UAAlC,CAAzE,CADF,CADF,cAIE,oBAAC,OAAD,mBACE,oBAAC,OAAD,EAAS,IAAI,CAAC,mBAAd,eAAkC,yBAAG,SAAS,CAAC,aAAb,EAAlC,UADF,CAJF,CAFF,CADF,cAYE,6CACE,4BAAM,MAAM,CAAC,MAAb,CAAoB,MAAM,CAAC,EAA3B,eACE,yBAAG,SAAS,CAAC,aAAb,gBADF,cAEE,oBAAC,IAAD,mBACE,oBAAC,SAAD,EAAW,GAAG,KAAd,CAAe,SAAS,CAAC,MAAzB,eACE,oBAAC,KAAD,EAAO,GAAG,CAAC,IAAX,CAAgB,EAAE,CAAE,CAApB,CAAuB,EAAE,CAAE,CAA3B,QADF,cAEE,oBAAC,GAAD,EAAK,EAAE,CAAE,EAAT,CAAa,EAAE,CAAE,EAAjB,eACE,oBAAC,KAAD,EAAO,IAAI,CAAC,OAAZ,CAAoB,KAAK,CAAE,KAAK5E,KAAL,CAAW4B,OAAtC,CAA+C,IAAI,CAAC,SAApD,CAA8D,EAAE,CAAC,SAAjE,CAA2E,QAAQ,CAAE,kBAACH,CAAD,QAAO,CAAA,MAAI,CAACD,YAAL,CAAkBC,CAAlB,CAAP,EAArF,CAAkH,WAAW,CAAC,YAA9H,EADF,CAFF,CADF,cAOE,oBAAC,SAAD,EAAW,GAAG,KAAd,CAAe,SAAS,CAAC,MAAzB,eACE,oBAAC,KAAD,EAAO,GAAG,CAAC,IAAX,CAAgB,EAAE,CAAE,CAApB,CAAuB,EAAE,CAAE,CAA3B,QADF,cAEE,oBAAC,GAAD,EAAK,EAAE,CAAE,EAAT,CAAa,EAAE,CAAE,EAAjB,eACE,oBAAC,KAAD,EAAO,IAAI,CAAC,OAAZ,CAAoB,KAAK,CAAE,KAAKzB,KAAL,CAAW8B,OAAtC,CAA+C,EAAE,CAAC,SAAlD,CAA4D,IAAI,CAAC,SAAjE,CAA2E,QAAQ,CAAE,kBAACL,CAAD,QAAO,CAAA,MAAI,CAACD,YAAL,CAAkBC,CAAlB,CAAP,EAArF,CAAkH,WAAW,CAAC,SAA9H,EADF,CAFF,CAPF,cAaE,oBAAC,SAAD,EAAW,GAAG,KAAd,CAAe,SAAS,CAAC,MAAzB,eACE,oBAAC,KAAD,EAAO,GAAG,CAAC,KAAX,CAAiB,EAAE,CAAE,CAArB,CAAwB,EAAE,CAAE,CAA5B,SADF,cAEE,oBAAC,GAAD,EAAK,EAAE,CAAE,EAAT,CAAa,EAAE,CAAE,EAAjB,eACE,oBAAC,KAAD,EAAO,IAAI,CAAC,OAAZ,CAAoB,KAAK,CAAE,KAAKzB,KAAL,CAAW+B,QAAtC,CAAgD,EAAE,CAAC,UAAnD,CAA8D,IAAI,CAAC,UAAnE,CAA8E,QAAQ,CAAE,kBAACN,CAAD,QAAO,CAAA,MAAI,CAACD,YAAL,CAAkBC,CAAlB,CAAP,EAAxF,CAAqH,WAAW,CAAC,UAAjI,EADF,CAFF,CAbF,cAmBE,oBAAC,SAAD,EAAW,GAAG,KAAd,CAAe,SAAS,CAAC,MAAzB,eACE,oBAAC,KAAD,EAAO,GAAG,CAAC,KAAX,CAAiB,EAAE,CAAE,CAArB,CAAwB,EAAE,CAAE,CAA5B,aADF,cAEE,oBAAC,GAAD,EAAK,EAAE,CAAE,EAAT,CAAa,EAAE,CAAE,EAAjB,eACE,oBAAC,KAAD,EAAO,IAAI,CAAC,MAAZ,CAAmB,KAAK,CAAE,KAAKzB,KAAL,CAAWgC,YAArC,CAAmD,EAAE,CAAC,cAAtD,CAAqE,IAAI,CAAC,cAA1E,CAAyF,QAAQ,CAAE,kBAACP,CAAD,QAAO,CAAA,MAAI,CAACD,YAAL,CAAkBC,CAAlB,CAAP,EAAnG,CAAgI,WAAW,CAAC,cAA5I,EADF,CAFF,CAnBF,CAFF,cA4BE,oBAAC,GAAD,mBACE,oBAAC,GAAD,EAAK,EAAE,CAAE,EAAT,CAAa,SAAS,CAAC,SAAvB,eACE,oBAAC,SAAD,mBACE,oBAAC,GAAD,mBACE,oBAAC,GAAD,EAAK,EAAE,CAAC,GAAR,eACE,2BAAK,SAAS,CAAC,WAAf,eACE,oBAAC,KAAD,EAAO,IAAI,CAAC,QAAZ,CAAqB,IAAI,CAAC,cAA1B,CAAyC,EAAE,CAAC,cAA5C,CAA2D,QAAQ,CAAE,kBAACA,CAAD,QAAO,CAAA,MAAI,CAACkH,UAAL,CAAgBlH,CAAC,CAAChC,MAAF,CAASkC,KAAzB,CAAgC,cAAhC,CAAP,EAArE,CAA6H,KAAK,CAAE,KAAK3B,KAAL,CAAW0D,YAA/I,eACE,8BAAQ,KAAK,CAAC,EAAd,sBADF,cAEE,8BAAQ,KAAK,CAAC,GAAd,CAAkB,GAAG,CAAC,YAAtB,eAFF,cAGE,8BAAQ,KAAK,CAAC,GAAd,CAAkB,GAAG,CAAC,QAAtB,WAHF,CADF,CADF,CADF,cAUE,oBAAC,GAAD,EAAK,EAAE,CAAC,GAAR,EACG,KAAK1D,KAAL,CAAW0D,YAAX,EAA2B,GAA3B,cAAkC,oBAAC,GAAD,EAAK,KAAK,CAAC,SAAX,CAAqB,OAAO,CAAE,yBAAM,CAAA,MAAI,CAACiF,UAAL,CAAgB,GAAhB,CAAqB,cAArB,CAAN,EAA9B,eAAlC,CAAiI,IADpI,CAEG,KAAK3I,KAAL,CAAW0D,YAAX,EAA2B,GAA3B,cAAkC,oBAAC,GAAD,EAAK,KAAK,CAAC,SAAX,CAAqB,OAAO,CAAE,yBAAM,CAAA,MAAI,CAACiF,UAAL,CAAgB,GAAhB,CAAqB,cAArB,CAAN,EAA9B,eAAlC,CAAiI,IAFpI,cAGE,oBAAC,KAAD,EAAO,IAAI,CAAC,MAAZ,CAAmB,IAAI,CAAC,WAAxB,CAAoC,EAAE,CAAC,WAAvC,CAAmD,KAAK,CAAE,CAAEC,OAAO,CAAE,MAAX,CAA1D,CAA+E,QAAQ,CAAC,UAAxF,CAAmG,QAAQ,CAAE,KAAKtJ,cAAlH,EAHF,CAVF,CADF,cAiBE,oBAAC,GAAD,mBACE,oBAAC,GAAD,EAAK,EAAE,CAAC,GAAR,EACG,KAAKU,KAAL,CAAWgE,WAAX,CAAuBpE,MAAvB,CAAgC,CAAhC,cAAqC,2BAAK,SAAS,CAAC,WAAf,eACpC,oBAAC,KAAD,EAAO,IAAI,CAAC,QAAZ,CAAqB,IAAI,CAAC,eAA1B,CAA0C,EAAE,CAAC,eAA7C,CAA6D,KAAK,CAAE,KAAKI,KAAL,CAAWmE,aAA/E,CAA8F,QAAQ,CAAE,kBAAC1C,CAAD,QAAO,CAAA,MAAI,CAACkH,UAAL,CAAgBlH,CAAC,CAAChC,MAAlB,CAA0B,eAA1B,CAAP,EAAxG,eACE,8BAAQ,KAAK,CAAC,EAAd,yBADF,CAEG,KAAKO,KAAL,CAAWiE,iBAAX,CAA6ByE,GAA7B,CAAiC,SAACvE,aAAD,CAAgBxE,CAAhB,CAAsB,CACtD,mBAAQ,8BAAQ,KAAK,CAAEwE,aAAa,CAAC0E,iBAA7B,CAAgD,GAAG,CAAElJ,CAArD,EAAyDwE,aAAa,CAAC2E,YAAvE,CAAR,CACD,CAFA,CAFH,CADoC,CAArC,CAQU,IATb,CADF,CAjBF,CADF,cAgCE,oBAAC,SAAD,EAAW,SAAS,CAAC,MAArB,eACE,oBAAC,QAAD,EAAU,IAAI,CAAC,WAAf,CAA2B,EAAE,CAAC,WAA9B,CAA0C,IAAI,CAAE,KAAK9I,KAAL,CAAWyE,SAA3D,CAAsE,QAAQ,CAAE,KAAKQ,mBAArF,EADF,cAEE,0BAAI,EAAE,CAAC,gBAAP,CAAwB,SAAS,CAAC,wBAAlC,EAFF,CAhCF,cAoCE,oBAAC,SAAD,mBACE,oBAAC,GAAD,EAAK,EAAE,CAAE,EAAT,CAAa,EAAE,CAAE,EAAjB,EACG,KAAKjF,KAAL,CAAW0E,aAAX,CAAyB9E,MAAzB,CAAkC,CAAlC,cAAuC,2BAAK,SAAS,CAAC,aAAf,eACtC,sDADsC,CAErC,KAAKI,KAAL,CAAW0E,aAAX,CAAyBgE,GAAzB,CAA6B,SAACK,MAAD,CAASpJ,CAAT,CAAe,CAC3C,mBACE,2BAAK,SAAS,CAAC,YAAf,eACE,oBAAC,KAAD,EAAO,KAAK,CAAC,QAAb,EAAuBoJ,MAAM,CAACC,IAA9B,CADF,kBAC8C,6BAAID,MAAM,CAACE,QAAX,CAD9C,kBACuE,iCAAKF,MAAM,CAACG,QAAZ,KADvE,cAEE,4BAAM,SAAS,CAAC,MAAhB,eACE,yBAAG,OAAO,CAAE,yBAAM,CAAA,MAAI,CAAChJ,YAAL,CAAkB6I,MAAlB,CAAN,EAAZ,CAA6C,SAAS,CAAC,sBAAvD,EAA+E,IAA/E,CADF,CAFF,CADF,CAOD,CARA,CAFqC,CAAvC,CAYU,IAbb,CAeG,KAAK/I,KAAL,CAAWkC,iBAAX,CAA6BtC,MAA7B,CAAsC,CAAtC,cAA2C,2BAAK,SAAS,CAAC,aAAf,eAC1C,gDAD0C,cAE1C,4CAAgB,KAAKI,KAAL,CAAWgE,WAAX,CAAuBpE,MAAvB,CAAgC,CAAhC,CAAoC,KAAKI,KAAL,CAAWgE,WAAX,CAAuB,CAAvB,EAA0BmF,YAA9D,CAA6E,IAA7F,CAF0C,cAG1C,4BAAM,KAAK,CAAE,CAAEC,UAAU,CAAE,MAAd,CAAb,kBAAmD,KAAKpJ,KAAL,CAAWgE,WAAX,CAAuBpE,MAAvB,CAAgC,CAAhC,CAAoCvC,MAAM,CAAC,KAAK2C,KAAL,CAAWgE,WAAX,CAAuB,CAAvB,EAA0BqF,WAA3B,CAAN,CAA8ChD,MAA9C,CAAqDvH,YAAY,CAACwH,UAAb,CAAwBgD,aAA7E,CAApC,CAAkI,IAArL,CAH0C,cAI1C,4BAAM,KAAK,CAAE,CAAEF,UAAU,CAAE,MAAd,CAAb,kBAAmD,KAAKpJ,KAAL,CAAWgE,WAAX,CAAuBpE,MAAvB,CAAgC,CAAhC,CAAoC,KAAKI,KAAL,CAAWgE,WAAX,CAAuB,CAAvB,EAA0BuF,WAA9D,CAA4E,IAA/H,CAJ0C,cAK1C,4BAAM,KAAK,CAAE,CAAEH,UAAU,CAAE,MAAd,CAAb,iBAAkD,KAAKpJ,KAAL,CAAWgE,WAAX,CAAuBpE,MAAvB,CAAgC,CAAhC,CAAoC,KAAKI,KAAL,CAAWgE,WAAX,CAAuB,CAAvB,EAA0BwF,UAA9D,CAA2E,IAA7H,CAL0C,CAMzC,KAAKxJ,KAAL,CAAWkC,iBAAX,CAA6BwG,GAA7B,CAAiC,SAACK,MAAD,CAASpJ,CAAT,CAAe,CAC/C,mBACE,2BAAK,SAAS,CAAC,YAAf,eACE,oBAAC,KAAD,EAAO,KAAK,CAAC,QAAb,EAAuBoJ,MAAM,CAACC,IAA9B,CADF,kBAC8C,6BAAID,MAAM,CAAC3H,QAAX,CAD9C,kBACuE,iCAAK2H,MAAM,CAACG,QAAZ,KADvE,cAEE,4BAAM,SAAS,CAAC,MAAhB,eACE,yBAAG,OAAO,CAAE,yBAAM,CAAA,MAAI,CAACO,cAAL,CAAoB,QAApB,CAA8B9J,CAA9B,CAAN,EAAZ,CAAoD,SAAS,CAAC,cAA9D,EAA8E,IAA9E,CADF,cAEE,yBAAG,OAAO,CAAE,yBAAM,CAAA,MAAI,CAACO,YAAL,CAAkB6I,MAAlB,CAAN,EAAZ,CAA6C,SAAS,CAAC,sBAAvD,EAA+E,IAA/E,CAFF,CAFF,CADF,CAQD,CATA,CANyC,CAA3C,CAiBU,IAhCb,CAkCG,KAAK/I,KAAL,CAAWD,SAAX,CAAqBH,MAArB,CAA8B,CAA9B,cAAmC,2BAAK,SAAS,CAAC,aAAf,eAClC,6CADkC,CAEjC,KAAKI,KAAL,CAAWD,SAAX,CAAqB2I,GAArB,CAAyB,SAACK,MAAD,CAASpJ,CAAT,CAAe,CACvC,mBACE,2BAAK,SAAS,CAAC,YAAf,eACE,oBAAC,KAAD,EAAO,KAAK,CAAC,QAAb,EAAuBoJ,MAAM,CAACvC,IAA9B,CADF,kBAC8C,6BAAIuC,MAAM,CAACrH,IAAX,CAD9C,kBACmE,iCAAKgI,IAAI,CAACC,KAAL,CAAWZ,MAAM,CAACa,IAAP,CAAc,IAAzB,CAAL,QADnE,cAEE,4BAAM,SAAS,CAAC,MAAhB,eACE,yBAAG,OAAO,CAAE,yBAAM,CAAA,MAAI,CAACH,cAAL,CAAoB,QAApB,CAA8B9J,CAA9B,CAAN,EAAZ,CAAoD,SAAS,CAAC,cAA9D,EAA8E,IAA9E,CADF,cAEE,yBAAG,OAAO,CAAE,yBAAM,CAAA,MAAI,CAACO,YAAL,CAAkB6I,MAAlB,CAAN,EAAZ,CAA6C,SAAS,CAAC,sBAAvD,EAA+E,IAA/E,CAFF,CAFF,CADF,CAQD,CATA,CAFiC,CAAnC,CAaU,IA/Cb,CADF,CApCF,cAuFE,oBAAC,SAAD,mBACE,oBAAC,GAAD,EAAK,KAAK,CAAC,SAAX,CAAqB,OAAO,CAAE,yBAAM,CAAA,MAAI,CAACc,QAAL,EAAN,EAA9B,eAAqD,yBAAG,KAAK,CAAC,aAAT,EAArD,QADF,CAvFF,CADF,CA5BF,CADF,CAZF,CADF,cA0IE,oBAAC,KAAD,EAAO,MAAM,CAAE,KAAK7J,KAAL,CAAWuE,mBAA1B,CAA+C,SAAS,CAAE,UAA1D,CAAsE,KAAK,CAAE,CAAEuF,QAAQ,CAAE,KAAZ,CAA7E,eACE,oBAAC,WAAD,EAAa,MAAM,CAAE,wBAAM,CAAA,MAAI,CAAChK,QAAL,CAAc,CAAEyE,mBAAmB,CAAE,KAAvB,CAAd,CAAN,EAArB,kBADF,cAEE,oBAAC,SAAD,mBACE,oBAAC,GAAD,mBACE,oBAAC,GAAD,EAAK,EAAE,CAAC,GAAR,eACE,oBAAC,YAAD,EAAc,KAAK,CAAE,KAAKvE,KAAL,CAAW8D,cAAhC,CAAgD,KAAK,CAAC,cAAtD,CAAqE,WAAW,CAAC,4BAAjF,CAA8G,SAAS,CAAE,CAAzH,CAA4H,QAAQ,CAAE,kBAACrC,CAAD,QAAO,CAAA,MAAI,CAACkH,UAAL,CAAgBlH,CAAC,CAACE,KAAlB,CAAyB,cAAzB,CAAP,EAAtI,EADF,CADF,cAIE,oBAAC,GAAD,EAAK,EAAE,CAAC,GAAR,CAAY,KAAK,CAAE,CAAEyH,UAAU,CAAE,KAAd,CAAnB,eACE,oBAAC,GAAD,EAAK,KAAK,CAAC,SAAX,CAAqB,OAAO,CAAE,yBAAM,CAAA,MAAI,CAACW,kBAAL,EAAN,EAA9B,WADF,CAJF,cAOE,oBAAC,GAAD,EAAK,EAAE,CAAC,GAAR,eACE,4CAAgB,KAAK/J,KAAL,CAAWgE,WAAX,CAAuBpE,MAAvB,CAAgC,CAAhC,CAAoC,KAAKI,KAAL,CAAWgE,WAAX,CAAuB,CAAvB,EAA0BmF,YAA9D,CAA6E,IAA7F,CADF,cAEE,4BAAM,KAAK,CAAE,CAAEC,UAAU,CAAE,MAAd,CAAb,kBAAmD,KAAKpJ,KAAL,CAAWgE,WAAX,CAAuBpE,MAAvB,CAAgC,CAAhC,CAAoCvC,MAAM,CAAC,KAAK2C,KAAL,CAAWgE,WAAX,CAAuB,CAAvB,EAA0BqF,WAA3B,CAAN,CAA8ChD,MAA9C,CAAqDvH,YAAY,CAACwH,UAAb,CAAwBgD,aAA7E,CAApC,CAAkI,IAArL,CAFF,cAGE,4BAAM,KAAK,CAAE,CAAEF,UAAU,CAAE,MAAd,CAAb,kBAAmD,KAAKpJ,KAAL,CAAWgE,WAAX,CAAuBpE,MAAvB,CAAgC,CAAhC,CAAoC,KAAKI,KAAL,CAAWgE,WAAX,CAAuB,CAAvB,EAA0BuF,WAA9D,CAA4E,IAA/H,CAHF,cAIE,4BAAM,KAAK,CAAE,CAAEH,UAAU,CAAE,MAAd,CAAb,iBAAkD,KAAKpJ,KAAL,CAAWgE,WAAX,CAAuBpE,MAAvB,CAAgC,CAAhC,CAAoC,KAAKI,KAAL,CAAWgE,WAAX,CAAuB,CAAvB,EAA0BwF,UAA9D,CAA2E,IAA7H,CAJF,CAPF,CADF,cAeE,2BAAK,SAAS,CAAC,cAAf,eACE,oBAAC,SAAD,EAAW,KAAK,CAAE,EAAlB,CAAsB,GAAG,CAAE,aAACQ,EAAD,QAAQ,CAAA,MAAI,CAACC,EAAL,CAAUD,EAAlB,EAA3B,CAAiD,KAAK,CAAE,KAAKhK,KAAL,CAAW0C,YAAnE,CACE,yBAAyB,CAAE,KAAK1C,KAAL,CAAW2C,GADxC,CAC6C,KAAK,CAAE,KAAK3C,KAAL,CAAW4C,YAD/D,CAC6E,MAAM,CAAE,gBAACnB,CAAD,QAAO,CAAA,MAAI,CAACU,aAAL,CAAmBV,CAAnB,CAAP,EADrF,CAEE,SAAS,CAAE,IAFb,CAEmB,IAAI,CAAE,KAAKzB,KAAL,CAAW6C,WAFpC,CAEiD,MAAM,CAAEO,MAFzD,CAEiE,cAAc,CAAC,WAFhF,CAGE,iBAAiB,CAAC,uGAHpB,CAIE,kBAAkB,CAAE,KAAKpD,KAAL,CAAWqE,kBAJjC,CAIqD,YAAY,CAAE,KAAKrE,KAAL,CAAWuI,YAJ9E,CAI4F,YAAY,CAAC,kBAJzG,CAKE,UAAU,CAAE,IALd,CAKoB,gBAAgB,CAAE,IALtC,CAK4C,gBAAgB,CAAC,KAL7D,CAME,UAAU,CAAE,IANd,CAMoB,YAAY,CAAC,OANjC,CAOE,SAAS,CAAE,KAAKvI,KAAL,CAAWkC,iBAPxB,CAQE,iBAAiB,CAAE,2BAACT,CAAD,QAAO,CAAA,MAAI,CAACQ,SAAL,CAAeR,CAAC,CAACE,KAAjB,CAAP,EARrB,EAUGmB,OAVH,CADF,CAfF,CAFF,CA1IF,CADF,CA8KD,C,qBAtiBmB5F,S,EAyiBtB,cAAekC,CAAAA,OAAf","sourcesContent":["import React, { Component } from 'react';\nimport { DataTable } from 'primereact/datatable';\nimport { Column } from 'primereact/column';\nimport 'primereact/resources/themes/nova-light/theme.css';\nimport 'primereact/resources/primereact.min.css';\nimport 'primeicons/primeicons.css';\nimport moment from 'moment';\nimport { MultiSelect } from 'primereact/multiselect';\nimport { InputText } from 'primereact/inputtext';\nimport { Modal, ModalHeader, ModalBody, Nav, NavItem, NavLink, ButtonDropdown, Button as BTN, DropdownToggle, DropdownMenu, DropdownItem, Badge, Button, ButtonGroup, Form, FormGroup, Label, Input, Row, Col } from 'reactstrap';\nimport { AutoComplete } from 'primereact/autocomplete';\nimport APIConstant from '../../../../utils/constants';\nimport { CommonConfig } from '../../../../utils/constants';\nimport api from '../../../../utils/apiClient';\nimport { toast } from 'react-toastify';\nimport axios from 'axios';\nimport CKEditor from 'ckeditor4-react';\nimport { apiBase } from '../../../../utils/config';\n\nclass Compose extends Component {\n\n  constructor(props) {\n    super(props);\n\n    let columns = [\n      { selectionMode: \"multiple\", style: { width: '3em' }, id: 0 },\n      { field: \"Filename\", header: \"Name\", sortable: true, filter: true, id: 1 },\n      { body: this.formatCreatedDate.bind(this), field: \"CreatedOn\", header: \"Created\", sortable: true, filter: true, id: 2 },\n      { field: \"forename\", header: \"CreatedBy\", sortable: true, filter: true, id: 3 },\n      { field: \"Directory\", header: \"Directory\", sortable: true, filter: true, id: 4 },\n    ];\n\n    this.toggle = this.toggle.bind(this);\n    this.state = {\n      documentType: '',\n      dropdownOpen: false,\n      emailBodyError: false,\n      filteredPolicysSingle: null,\n      selectedPolicy: null,\n      selectedPolicyId: null,\n      customDoc: [],\n      policysData: [],\n      emailTemplateList: [],\n      selectedTemplate: null,\n      emailTemplate: '',\n      documentList: [],\n      rowsPerPage: CommonConfig.dataTableConfig.rowsPerPage,\n      rowsPerPageOptions: CommonConfig.dataTableConfig.rowsPerPageOptions,\n      selectedPage: 0,\n      selectedDocuments: [],\n      cols: columns,\n      str: '',\n      openAttachmentPopup: false,\n      emailFrom: '',\n      emailFromName: '',\n      emailTo: '',\n      emailCC: '',\n      emailBCC: '',\n      emailSubject: '',\n      emailBody: '',\n      attachmentURL: [],\n      totalDocument: [],\n      InboxCount: ''\n    };\n\n    this.colOptions = [];\n    for (let col of columns) {\n      this.colOptions.push({ label: col.header, value: col });\n    }\n\n    this.onColumnToggle = this.onColumnToggle.bind(this);\n    this.handleDetailsChange = this.handleDetailsChange.bind(this);\n  }\n\n  selectDocument = (event) => {\n    var docuCustom = []\n    if (event.target.files && event.target.files) {\n      for (let i = 0; i < event.target.files.length; i++) {\n        docuCustom.push(event.target.files[i])\n      }\n      this.setState({ customDoc: this.state.customDoc.concat(docuCustom) });\n    } else {\n\n    }\n  }\n\n  onColumnToggle(event) {\n    let valueInOrder = event.value.sort((x, y) => { return x.id - y.id });\n    this.setState({ cols: valueInOrder });\n  }\n\n  componentDidMount() {\n    this.getInbox()\n    this.getEmailTemplate()\n  }\n\n  getDocumentList() {\n    try {\n      const data = {\n        \"pPolicyId\": this.state.policysData[0].policyId,\n        'CurrentUser': CommonConfig.loggedInUserData().EntityId\n      };\n      api.post(\"api/getDocumentList\", data).then(res => {\n        console.log(\"res\", res);\n        if (res.success) {\n          let lastPage = (this.state.rowsPerPage < res.data.length) ? this.state.rowsPerPage : res.data.length;\n          let str = '1 to ' + lastPage + ' out of ' + res.data.length + ' records';\n          this.setState({ documentList: res.data, str: str, openAttachmentPopup: true });\n        } else {\n\n        }\n      }).catch(err => {\n\n      });\n    } catch (error) {\n\n    }\n  }\n\n  formatCreatedDate(rowData) {\n    return (\n      moment(rowData.CreatedOn).format(CommonConfig.dateFormat.dateTime)\n    )\n  }\n\n  selectType(value, type) {\n    //need to select template\n    if (type === 'emailTemplate') {\n      if (value === '' || value === undefined || value === null) {\n        this.setState({ emailTemplate: '' });\n      } else {\n        debugger\n        this.setState({ emailTemplate: value.value });\n        this.getEmailBodyData()\n      }\n    }\n\n    if (type === 'selectPolicy') {\n      if (value === '' || value === undefined || value === null) {\n        this.setState({ selectedPolicy: '', selectedPolicyId: '' });\n      } else {\n        this.setState({ selectedPolicy: value });\n      }\n    }\n\n    if (type === 'documentType') {\n      if (value === '' || value === undefined || value === null) {\n        this.setState({ documentType: '' });\n      } else {\n        this.setState({ documentType: value });\n        if (value == \"1\") {\n          this.setState({ openAttachmentPopup: true });\n        } else {\n          document.getElementById(\"customDoc\").click()\n        }\n      }\n    }\n\n  }\n\n  getEmailBodyData() {\n    let data = {\n      \"pPolicyId\": this.state.policysData[0].policyId,\n      \"pEntityType\": 'Policy',\n      \"pEntityId\": this.state.policysData[0].policyId,\n      \"pTemplateKey\": this.state.emailTemplate,\n      \"pCurrentUser\": CommonConfig.loggedInUserData().EntityId\n    }\n    api.post(APIConstant.path.getEmailBodyData, data).then(res => {\n      if (res.success) {\n        this.setState({\n          emailFrom: res.data[0].emailFrom,\n          emailFromName: res.data[0].emailFromName,\n          emailCC: res.data[0].emailCC,\n          emailBCC: res.data[0].emailBCC,\n          emailSubject: res.data[0].emailSubject,\n          emailBody: res.data[0].emailBody,\n          attachmentURL: JSON.parse(res.data[0].attachmentURL)\n        })\n      }\n    }).catch(err => {\n      console.log(err)\n    });\n  }\n\n  removeDocument(type, index) {\n    if (type == \"policy\") {\n      this.state.selectedDocuments.splice(index, 1)\n    } else {\n      this.state.customDoc.splice(index, 1)\n    }\n  }\n\n  downloadData = (rowdata) => {\n    var path = apiBase + rowdata.URL;\n\n    axios({\n      url: path,\n      method: 'GET',\n      responseType: 'blob', // important\n    }).then((response) => {\n      const url = window.URL.createObjectURL(new Blob([response.data]));\n      const link = document.createElement('a');\n      link.href = url;\n      link.setAttribute('download', rowdata.Filename); //or any other extension\n      document.body.appendChild(link);\n      link.click();\n    });\n  }\n\n  getEmailTemplate() {\n    let data = {\n      \"Type\": \"Email\"\n    }\n    api.post(APIConstant.path.getEmailTemplate, data).then(res => {\n      if (res.success) {\n        this.setState({ emailTemplateList: res.data })\n      }\n\n    }).catch(err => {\n      console.log(err)\n    });\n  }\n\n  sendMail() {\n    const emailDataForm = new FormData();\n    emailDataForm.append(\"to\", this.state.emailTo)\n    emailDataForm.append(\"from\", this.state.emailFrom)\n    emailDataForm.append(\"cc\", this.state.emailCC)\n    emailDataForm.append(\"bcc\", this.state.emailBCC)\n    emailDataForm.append(\"subject\", this.state.emailSubject)\n    emailDataForm.append(\"mail\", 'RenewalMail')\n    emailDataForm.append(\"EmailSenderId\", CommonConfig.loggedInUserData().EntityId)\n    emailDataForm.append(\"html\", this.state.emailBody)\n    emailDataForm.append(\"selectedDocuments\", JSON.stringify(this.state.selectedDocuments))\n    emailDataForm.append(\"attachmentURL\", this.state.attachmentURL)\n\n    for (let i = 0; i < this.state.customDoc.length; i++) {\n      emailDataForm.append(\"File\", this.state.customDoc[i], this.state.customDoc[i].name);\n    }\n\n    api.post(APIConstant.path.sendMailBulk, emailDataForm).then(res => {\n      if (res.success) {\n        toast.success('Mail Send Successful!');\n        this.props.history.push({\n          pathname: '/apps/email/inbox'\n        });\n      } else {\n        toast.error('Mail Send Failed!');\n      }\n    }).catch(err => {\n      console.log(err)\n    });\n\n  }\n\n  getInbox() {\n    let data = {\n      \"boxName\": \"INBOX\",\n      \"searchType\": \"ALL\"\n    }\n    api.post(APIConstant.path.allEmail, data).then(res => {\n      if (res.success) {\n        let count = res.data.filter((item) => {\n          if (item.attributes.flags[0] != '\\\\Seen') {\n            return true\n          } else {\n            return false\n          }\n        }).length\n        this.setState({ InboxCount: count })\n      }\n\n    }).catch(err => {\n      console.log(err)\n    });\n  }\n\n  handleDetailsChange(evt) {\n    const data = evt.editor.getData();\n    if (CommonConfig.isEmpty(data)) {\n      this.setState({ emailBodyError: true, emailBody: '' });\n      // this.show(\"customEndorsementDetails\", true);\n    } else {\n      this.setState({ emailBodyError: false, emailBody: data });\n      // this.show(\"customEndorsementDetails\", false);\n    }\n  }\n\n  handleChange = (e) => {\n    this.setState({ [e.target.name]: e.target.value });\n    if (e.target.name === 'emailTo') {\n      if (e.target.value === '' || e.target.value === null) {\n        this.setState({ emailTo: '' });\n      } else {\n        this.setState({ emailTo: e.target.value });\n      }\n    }\n\n    if (e.target.name === 'emailFrom') {\n      if (e.target.value === '' || e.target.value === null) {\n        this.setState({ emailFrom: '' });\n      } else {\n        this.setState({ emailFrom: e.target.value });\n      }\n    }\n\n    if (e.target.name === 'emailCC') {\n      if (e.target.value === '' || e.target.value === null) {\n        this.setState({ emailCC: '' });\n      } else {\n        this.setState({ emailCC: e.target.value });\n      }\n    }\n\n    if (e.target.name === 'emailBCC') {\n      if (e.target.value === '' || e.target.value === null) {\n        this.setState({ emailBCC: '' });\n      } else {\n        this.setState({ emailBCC: e.target.value });\n      }\n    }\n\n    if (e.target.name === 'emailSubject') {\n      if (e.target.value === '' || e.target.value === null) {\n        this.setState({ emailSubject: '' });\n      } else {\n        this.setState({ emailSubject: e.target.value });\n      }\n    }\n  }\n\n  filterPolicySingle() {\n    let data = {\n      \"pPolicyId\": '',\n      \"pPolicyNumber\": this.state.selectedPolicy,\n      \"CurrentUser\": CommonConfig.loggedInUserData().EntityId\n    }\n    api.post(APIConstant.path.getPolicyAutoComplete, data).then(res => {\n      if (res.success) {\n        this.setState({ policysData: res.data, emailTo: res.data[0].email })\n        this.getDocumentList()\n      } else {\n        this.setState({ policysData: [] })\n        toast.error(res.data[0].returnValue);\n      }\n    }).catch(err => {\n      console.log(err)\n    });\n  }\n\n  toggle() {\n    this.setState({\n      dropdownOpen: !this.state.dropdownOpen\n    });\n  }\n\n  mulSelect = (e) => {\n    this.setState({ selectedDocuments: e })\n  }\n\n  getPageString = (e) => {\n    let firstPage = e.first + 1;\n    let l = e.rows * (e.page + 1);\n    let lastPage = (l < this.state.documentList.length) ? l : this.state.documentList.length\n    var str = firstPage + ' to ' + lastPage + ' out of ' + this.state.documentList.length + ' records';\n    this.setState({ selectedPage: e.first, str: str, rowsPerPage: e.rows });\n  }\n\n  render() {\n    var header =\n      <div>\n        <div style={{ 'textAlign': 'Right', marginTop: 10 }}>\n          <Row>\n            <Col>\n              <div className=\"basic-header\">\n                <div className=\"header-right-option\">\n                  <div style={{ textAlign: 'right' }}>\n                    <i className=\"pi pi-search\" style={{ margin: '4px 4px 0 0' }}></i>\n                    <InputText type=\"search\" onInput={(e) => this.setState({ globalFilter: e.target.value })} placeholder=\"Global Search\" size=\"30\" style={{ marginRight: 10 }} />\n                  </div>\n                  <MultiSelect value={this.state.cols} options={this.colOptions}\n                    fixedPlaceholder={true} placeholder={CommonConfig.dataTableConfig.columnToggleIcon} tooltip=\"Show / Hide Column\"\n                    onChange={this.onColumnToggle} style={{ width: '50px' }}\n                  />\n                </div>\n              </div>\n            </Col>\n          </Row>\n        </div>\n      </div>;\n\n    let columns = this.state.cols.map((col, i) => {\n      return <Column field={col.field} header={col.header} body={col.body} sortable={col.sortable} filter={col.filter} selectionMode={col.selectionMode} style={col.style} />;\n    });\n    return (\n      <div className=\"animated fadeIn\">\n        <div className=\"email-app\">\n          <nav>\n            <a href=\"#/apps/email/compose\" className=\"btn btn-danger btn-block\">New Email</a>\n            <Nav>\n              <NavItem>\n                <NavLink href=\"#/apps/email/inbox\"><i className=\"fa fa-inbox\"></i> Inbox <Badge color=\"danger\">{this.state.InboxCount}</Badge></NavLink>\n              </NavItem>\n              <NavItem>\n                <NavLink href=\"#/apps/email/sent\"><i className=\"fa fa-inbox\"></i> Sent </NavLink>\n              </NavItem>\n            </Nav>\n          </nav>\n          <main>\n            <form method=\"post\" action=\"\">\n              <p className=\"text-center\">New Message</p>\n              <Form>\n                <FormGroup row className=\"mb-3\">\n                  <Label for=\"to\" xs={2} sm={1}>To:</Label>\n                  <Col xs={10} sm={11}>\n                    <Input type=\"email\" value={this.state.emailTo} name=\"emailTo\" id=\"emailTo\" onChange={(e) => this.handleChange(e)} placeholder=\"Type Email\" />\n                  </Col>\n                </FormGroup>\n                <FormGroup row className=\"mb-3\">\n                  <Label for=\"cc\" xs={2} sm={1}>CC:</Label>\n                  <Col xs={10} sm={11}>\n                    <Input type=\"email\" value={this.state.emailCC} id=\"emailCC\" name=\"emailCC\" onChange={(e) => this.handleChange(e)} placeholder=\"Type CC\" />\n                  </Col>\n                </FormGroup>\n                <FormGroup row className=\"mb-3\">\n                  <Label for=\"bcc\" xs={2} sm={1}>BCC:</Label>\n                  <Col xs={10} sm={11}>\n                    <Input type=\"email\" value={this.state.emailBCC} id=\"emailBCC\" name=\"emailBCC\" onChange={(e) => this.handleChange(e)} placeholder=\"Type BCC\" />\n                  </Col>\n                </FormGroup>\n                <FormGroup row className=\"mb-3\">\n                  <Label for=\"bcc\" xs={2} sm={1}>Subject:</Label>\n                  <Col xs={10} sm={11}>\n                    <Input type=\"text\" value={this.state.emailSubject} id=\"emailSubject\" name=\"emailSubject\" onChange={(e) => this.handleChange(e)} placeholder=\"Type Subject\" />\n                  </Col>\n                </FormGroup>\n              </Form>\n              <Row>\n                <Col sm={11} className=\"ml-auto\">\n                  <FormGroup>\n                    <Row>\n                      <Col md=\"4\">\n                        <div className=\"input-box\">\n                          <Input type=\"select\" name=\"documentType\" id=\"documentType\" onChange={(e) => this.selectType(e.target.value, 'documentType')} value={this.state.documentType}>\n                            <option value=''>Select Attachment</option>\n                            <option value=\"1\" key=\"Policy Doc\">Policy Doc</option>\n                            <option value=\"2\" key=\"Custom\">Custom</option>\n                          </Input>\n                        </div>\n                      </Col>\n                      <Col md=\"4\">\n                        {this.state.documentType == \"1\" ? (<BTN color=\"success\" onClick={() => this.selectType(\"1\", 'documentType')}>Select Doc</BTN>) : (null)}\n                        {this.state.documentType == \"2\" ? (<BTN color=\"success\" onClick={() => this.selectType(\"2\", 'documentType')}>Select Doc</BTN>) : (null)}\n                        <Input type=\"file\" name=\"customDoc\" id=\"customDoc\" style={{ display: \"none\" }} multiple=\"multiple\" onChange={this.selectDocument} />\n                      </Col>\n                    </Row>\n                    <Row>\n                      <Col md=\"4\">\n                        {this.state.policysData.length > 0 ? (<div className=\"input-box\">\n                          <Input type=\"select\" name=\"emailTemplate\" id=\"emailTemplate\" value={this.state.emailTemplate} onChange={(e) => this.selectType(e.target, 'emailTemplate')}>\n                            <option value=\"\">Select EmailTemplate</option>\n                            {this.state.emailTemplateList.map((emailTemplate, i) => {\n                              return (<option value={emailTemplate.MessageTemplateId} key={i}>{emailTemplate.TamplateName}</option>)\n                            })\n                            }\n                          </Input>\n                        </div>) : (null)}\n                      </Col>\n                    </Row>\n                  </FormGroup>\n                  <FormGroup className=\"mt-4\">\n                    <CKEditor name=\"emailBody\" id=\"emailBody\" data={this.state.emailBody} onChange={this.handleDetailsChange} />\n                    <em id=\"emailBodyError\" className=\"error invalid-feedback\"></em>\n                  </FormGroup>\n                  <FormGroup>\n                    <Col xs={10} sm={11}>\n                      {this.state.attachmentURL.length > 0 ? (<div className=\"attachments\">\n                        <span>Policy Templete Doc</span>\n                        {this.state.attachmentURL.map((attach, i) => {\n                          return (\n                            <div className=\"attachment\">\n                              <Badge color=\"danger\">{attach.Type}</Badge> <b>{attach.FileName}</b> <i>({attach.FileSize})</i>\n                              <span className=\"menu\">\n                                <a onClick={() => this.downloadData(attach)} className=\"fa fa-cloud-download\">{null}</a>\n                              </span>\n                            </div>)\n                        })\n                        }\n                      </div>) : (null)}\n\n                      {this.state.selectedDocuments.length > 0 ? (<div className=\"attachments\">\n                        <span>Policy Doc : </span>\n                        <span>Policy#: {this.state.policysData.length > 0 ? this.state.policysData[0].policyNumber : 'NA'}</span>\n                        <span style={{ marginLeft: '10px' }}>RenewalDate: {this.state.policysData.length > 0 ? moment(this.state.policysData[0].renewalDate).format(CommonConfig.dateFormat.forDatePicker) : 'NA'}</span>\n                        <span style={{ marginLeft: '10px' }}>InsuredName: {this.state.policysData.length > 0 ? this.state.policysData[0].insuredName : 'NA'}</span>\n                        <span style={{ marginLeft: '10px' }}>PolicyType: {this.state.policysData.length > 0 ? this.state.policysData[0].policyType : 'NA'}</span>\n                        {this.state.selectedDocuments.map((attach, i) => {\n                          return (\n                            <div className=\"attachment\">\n                              <Badge color=\"danger\">{attach.Type}</Badge> <b>{attach.Filename}</b> <i>({attach.FileSize})</i>\n                              <span className=\"menu\">\n                                <a onClick={() => this.removeDocument(\"custom\", i)} className=\"fa fa-remove\">{null}</a>\n                                <a onClick={() => this.downloadData(attach)} className=\"fa fa-cloud-download\">{null}</a>\n                              </span>\n                            </div>)\n                        })\n                        }\n                      </div>) : (null)}\n\n                      {this.state.customDoc.length > 0 ? (<div className=\"attachments\">\n                        <span>Custom Doc</span>\n                        {this.state.customDoc.map((attach, i) => {\n                          return (\n                            <div className=\"attachment\">\n                              <Badge color=\"danger\">{attach.type}</Badge> <b>{attach.name}</b> <i>({Math.round(attach.size / 1024)} KB)</i>\n                              <span className=\"menu\">\n                                <a onClick={() => this.removeDocument(\"custom\", i)} className=\"fa fa-remove\">{null}</a>\n                                <a onClick={() => this.downloadData(attach)} className=\"fa fa-cloud-download\">{null}</a>\n                              </span>\n                            </div>)\n                        })\n                        }\n                      </div>) : (null)}\n                    </Col>\n                  </FormGroup>\n                  <FormGroup>\n                    <BTN color=\"success\" onClick={() => this.sendMail()}><i class=\"fa fa-check\"></i>Send</BTN>\n                  </FormGroup>\n                </Col>\n              </Row>\n            </form>\n          </main>\n        </div>\n        <Modal isOpen={this.state.openAttachmentPopup} className={'modal-lg'} style={{ maxWidth: '70%' }}>\n          <ModalHeader toggle={() => this.setState({ openAttachmentPopup: false })}> Attachement </ModalHeader>\n          <ModalBody>\n            <Row>\n              <Col md=\"3\">\n                <AutoComplete value={this.state.selectedPolicy} field=\"policyNumber\" placeholder=\"Search By Policy And Email\" minLength={1} onChange={(e) => this.selectType(e.value, 'selectPolicy')} />\n              </Col>\n              <Col md=\"1\" style={{ marginLeft: '2px' }}>\n                <BTN color=\"success\" onClick={() => this.filterPolicySingle()}>Search</BTN>\n              </Col>\n              <Col md=\"7\">\n                <span>Policy#: {this.state.policysData.length > 0 ? this.state.policysData[0].policyNumber : 'NA'}</span>\n                <span style={{ marginLeft: '10px' }}>RenewalDate: {this.state.policysData.length > 0 ? moment(this.state.policysData[0].renewalDate).format(CommonConfig.dateFormat.forDatePicker) : 'NA'}</span>\n                <span style={{ marginLeft: '10px' }}>InsuredName: {this.state.policysData.length > 0 ? this.state.policysData[0].insuredName : 'NA'}</span>\n                <span style={{ marginLeft: '10px' }}>PolicyType: {this.state.policysData.length > 0 ? this.state.policysData[0].policyType : 'NA'}</span>\n              </Col>\n            </Row>\n            <div className=\"table-custom\">\n              <DataTable style={{}} ref={(el) => this.dt = el} value={this.state.documentList}\n                currentPageReportTemplate={this.state.str} first={this.state.selectedPage} onPage={(e) => this.getPageString(e)}\n                paginator={true} rows={this.state.rowsPerPage} header={header} exportFilename=\"Documents\"\n                paginatorTemplate=\"CurrentPageReport FirstPageLink PrevPageLink PageLinks NextPageLink LastPageLink RowsPerPageDropdown \"\n                rowsPerPageOptions={this.state.rowsPerPageOptions} globalFilter={this.state.globalFilter} emptyMessage=\"No records found\"\n                responsive={true} resizableColumns={true} columnResizeMode=\"fit\"\n                scrollable={true} scrollHeight=\"265px\"\n                selection={this.state.selectedDocuments}\n                onSelectionChange={(e) => this.mulSelect(e.value)}\n              >\n                {columns}\n              </DataTable>\n            </div>\n          </ModalBody>\n        </Modal>\n      </div >\n    )\n  }\n}\n\nexport default Compose;\n"]},"metadata":{},"sourceType":"module"}