{"ast":null,"code":"var _jsxFileName = \"/Users/bhavik/Downloads/Cognisun/Evolution/Evolution_React/evolution_new/src/Layout.js\";\nimport React from 'react';\nimport { Switch, Route } from 'react-router-dom';\nimport './App.scss';\nimport IdleTimer from 'react-idle-timer';\nimport { IdleTimeOutModal } from './modal/IdleModal';\nimport Cookies from 'js-cookie';\nimport { UnauthenticatedRoute, AuthenticatedRoute } from './utils/authenticate';\nimport PropTypes from 'prop-types';\nimport api from '../src/utils/apiClient';\nconst ResetPassword = React.lazy(() => import('./views/Pages/ResetPassword/ResetPassword'));\nconst Register = React.lazy(() => import('./views/Pages/Register/Register'));\nconst ForgotPassword = React.lazy(() => import('./views/Pages/ForgotPassword/ForgotPassword'));\nconst DefaultLayout = React.lazy(() => import('./containers/DefaultLayout'));\nconst GetQuote = React.lazy(() => import('./views/Pages/GetQuote/GetQuote'));\n\nclass Layout extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      timeout: 1000 * 3600 * 1 * 8,\n      //(60*60*8 secound) for 8 hour for showing alert\n      showModal: false,\n      userLoggedIn: false,\n      isTimedOut: false,\n      sessiondisable: false\n    };\n    this.idleTimer = null;\n    this.onAction = this._onAction.bind(this);\n    this.onActive = this._onActive.bind(this);\n    this.onIdle = this._onIdle.bind(this);\n    this.handleClose = this.handleClose.bind(this);\n    this.handleLogout = this.handleLogout.bind(this);\n    this.releaseLock = this.releaseLock.bind(this);\n  }\n\n  _onAction(e) {\n    // console.log('user did something', e)\n    this.setState({\n      isTimedOut: false\n    });\n  }\n\n  _onActive(e) {\n    // console.log('user is active', e)\n    this.setState({\n      isTimedOut: false\n    });\n  }\n\n  _onIdle(e) {\n    // console.log('user is idle', e)\n    const isTimedOut = this.state.isTimedOut;\n\n    if (isTimedOut) {\n      localStorage.clear();\n      this.props.history.push('/login');\n    } else {\n      this.setState({\n        showModal: true\n      });\n      this.idleTimer.reset();\n      this.setState({\n        isTimedOut: true\n      });\n      this.setState({\n        sessiondisable: true\n      });\n      setTimeout(() => {\n        if (this.state.sessiondisable) {\n          localStorage.clear();\n          this.props.history.push('/login');\n        }\n      }, 900000); //15 min alert logout\n    }\n  }\n\n  handleClose() {\n    this.setState({\n      sessiondisable: false\n    });\n    this.setState({\n      showModal: false\n    });\n  }\n\n  handleLogout() {\n    this.setState({\n      showModal: false\n    });\n    this.releaseLock();\n    localStorage.clear();\n    this.props.history.push('/login');\n  }\n\n  async releaseLock() {\n    let data = {\n      'PolicyId': '',\n      'ReleaseAll': 1\n    };\n    await api.post('api/releaseLock', data).then(res => {\n      if (res.success) {\n        console.log(\"sucess......\");\n      } else {\n        console.log(\"SomeThing went wrong.\");\n      }\n    }).catch(err => {\n      console.log(\"setLock err\", err);\n    });\n  }\n\n  render() {\n    const {\n      match\n    } = this.props;\n    return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(IdleTimer, {\n      ref: ref => {\n        this.idleTimer = ref;\n      },\n      element: document,\n      onActive: this.onActive,\n      onIdle: this.onIdle,\n      onAction: this.onAction,\n      debounce: 250,\n      timeout: this.state.timeout,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 103,\n        columnNumber: 11\n      }\n    }), /*#__PURE__*/React.createElement(\"script\", {\n      src: \"http://fb.me/react-js-fiddle-integration.js\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 111,\n        columnNumber: 13\n      }\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 112,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(Switch, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 113,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(UnauthenticatedRoute, {\n      exact: true,\n      path: \"/resetpassword/:token?\",\n      name: \"Reset Password\",\n      component: ResetPassword,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 114,\n        columnNumber: 19\n      }\n    }), /*#__PURE__*/React.createElement(UnauthenticatedRoute, {\n      exact: true,\n      path: \"/register\",\n      name: \"Register\",\n      component: Register,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 115,\n        columnNumber: 19\n      }\n    }), /*#__PURE__*/React.createElement(UnauthenticatedRoute, {\n      exact: true,\n      path: \"/forgotpassword\",\n      name: \"Forgot Password\",\n      component: ForgotPassword,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 116,\n        columnNumber: 19\n      }\n    }), /*#__PURE__*/React.createElement(UnauthenticatedRoute, {\n      exact: true,\n      path: \"/getQuote/:country\",\n      name: \"Get Quote\",\n      component: GetQuote,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 117,\n        columnNumber: 19\n      }\n    }), /*#__PURE__*/React.createElement(AuthenticatedRoute, {\n      path: \"/\",\n      name: \"Home\",\n      component: DefaultLayout,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 118,\n        columnNumber: 19\n      }\n    })), /*#__PURE__*/React.createElement(IdleTimeOutModal, {\n      showModal: this.state.showModal,\n      handleClose: this.handleClose,\n      handleLogout: this.handleLogout,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 121,\n        columnNumber: 17\n      }\n    })));\n  }\n\n}\n\nLayout.propTypes = {\n  match: PropTypes.any.isRequired,\n  history: PropTypes.func.isRequired\n};\nexport default Layout;","map":{"version":3,"sources":["/Users/bhavik/Downloads/Cognisun/Evolution/Evolution_React/evolution_new/src/Layout.js"],"names":["React","Switch","Route","IdleTimer","IdleTimeOutModal","Cookies","UnauthenticatedRoute","AuthenticatedRoute","PropTypes","api","ResetPassword","lazy","Register","ForgotPassword","DefaultLayout","GetQuote","Layout","Component","constructor","props","state","timeout","showModal","userLoggedIn","isTimedOut","sessiondisable","idleTimer","onAction","_onAction","bind","onActive","_onActive","onIdle","_onIdle","handleClose","handleLogout","releaseLock","e","setState","localStorage","clear","history","push","reset","setTimeout","data","post","then","res","success","console","log","catch","err","render","match","ref","document","propTypes","any","isRequired","func"],"mappings":";AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,SAASC,MAAT,EAAiBC,KAAjB,QAA8B,kBAA9B;AACA,OAAO,YAAP;AACA,OAAOC,SAAP,MAAsB,kBAAtB;AACA,SAASC,gBAAT,QAAiC,mBAAjC;AACA,OAAOC,OAAP,MAAoB,WAApB;AACA,SAAQC,oBAAR,EAA8BC,kBAA9B,QAAuD,sBAAvD;AACA,OAAOC,SAAP,MAAsB,YAAtB;AACA,OAAOC,GAAP,MAAgB,wBAAhB;AAEA,MAAMC,aAAa,GAAGV,KAAK,CAACW,IAAN,CAAW,MAAM,OAAO,2CAAP,CAAjB,CAAtB;AACA,MAAMC,QAAQ,GAAGZ,KAAK,CAACW,IAAN,CAAW,MAAM,OAAO,iCAAP,CAAjB,CAAjB;AACA,MAAME,cAAc,GAAGb,KAAK,CAACW,IAAN,CAAW,MAAM,OAAO,6CAAP,CAAjB,CAAvB;AACA,MAAMG,aAAa,GAAGd,KAAK,CAACW,IAAN,CAAW,MAAM,OAAO,4BAAP,CAAjB,CAAtB;AACA,MAAMI,QAAQ,GAAGf,KAAK,CAACW,IAAN,CAAW,MAAM,OAAO,iCAAP,CAAjB,CAAjB;;AAEA,MAAMK,MAAN,SAAqBhB,KAAK,CAACiB,SAA3B,CAAqC;AAEjCC,EAAAA,WAAW,CAACC,KAAD,EAAO;AACd,UAAMA,KAAN;AAEA,SAAKC,KAAL,GAAa;AACTC,MAAAA,OAAO,EAAC,OAAO,IAAP,GAAc,CAAd,GAAkB,CADjB;AACoB;AAC7BC,MAAAA,SAAS,EAAE,KAFF;AAGTC,MAAAA,YAAY,EAAE,KAHL;AAITC,MAAAA,UAAU,EAAE,KAJH;AAKTC,MAAAA,cAAc,EAAC;AALN,KAAb;AAQA,SAAKC,SAAL,GAAiB,IAAjB;AACA,SAAKC,QAAL,GAAgB,KAAKC,SAAL,CAAeC,IAAf,CAAoB,IAApB,CAAhB;AACA,SAAKC,QAAL,GAAgB,KAAKC,SAAL,CAAeF,IAAf,CAAoB,IAApB,CAAhB;AACA,SAAKG,MAAL,GAAc,KAAKC,OAAL,CAAaJ,IAAb,CAAkB,IAAlB,CAAd;AACA,SAAKK,WAAL,GAAmB,KAAKA,WAAL,CAAiBL,IAAjB,CAAsB,IAAtB,CAAnB;AACA,SAAKM,YAAL,GAAoB,KAAKA,YAAL,CAAkBN,IAAlB,CAAuB,IAAvB,CAApB;AACA,SAAKO,WAAL,GAAmB,KAAKA,WAAL,CAAiBP,IAAjB,CAAsB,IAAtB,CAAnB;AACD;;AAEHD,EAAAA,SAAS,CAACS,CAAD,EAAI;AACX;AACA,SAAKC,QAAL,CAAc;AAACd,MAAAA,UAAU,EAAE;AAAb,KAAd;AACD;;AAEDO,EAAAA,SAAS,CAACM,CAAD,EAAI;AACX;AACA,SAAKC,QAAL,CAAc;AAACd,MAAAA,UAAU,EAAE;AAAb,KAAd;AACD;;AAEDS,EAAAA,OAAO,CAACI,CAAD,EAAI;AACT;AACA,UAAMb,UAAU,GAAG,KAAKJ,KAAL,CAAWI,UAA9B;;AACA,QAAIA,UAAJ,EAAgB;AACZe,MAAAA,YAAY,CAACC,KAAb;AACA,WAAKrB,KAAL,CAAWsB,OAAX,CAAmBC,IAAnB,CAAwB,QAAxB;AACH,KAHD,MAGO;AACL,WAAKJ,QAAL,CAAc;AAAChB,QAAAA,SAAS,EAAE;AAAZ,OAAd;AACA,WAAKI,SAAL,CAAeiB,KAAf;AACA,WAAKL,QAAL,CAAc;AAACd,QAAAA,UAAU,EAAE;AAAb,OAAd;AACA,WAAKc,QAAL,CAAc;AAACb,QAAAA,cAAc,EAAE;AAAjB,OAAd;AACAmB,MAAAA,UAAU,CAAC,MAAM;AACf,YAAG,KAAKxB,KAAL,CAAWK,cAAd,EAA6B;AAC3Bc,UAAAA,YAAY,CAACC,KAAb;AACA,eAAKrB,KAAL,CAAWsB,OAAX,CAAmBC,IAAnB,CAAwB,QAAxB;AACD;AACF,OALS,EAKP,MALO,CAAV,CALK,CAUM;AACZ;AAEF;;AAEDR,EAAAA,WAAW,GAAG;AACZ,SAAKI,QAAL,CAAc;AAACb,MAAAA,cAAc,EAAE;AAAjB,KAAd;AACA,SAAKa,QAAL,CAAc;AAAChB,MAAAA,SAAS,EAAE;AAAZ,KAAd;AACD;;AAEDa,EAAAA,YAAY,GAAG;AACb,SAAKG,QAAL,CAAc;AAAChB,MAAAA,SAAS,EAAE;AAAZ,KAAd;AACA,SAAKc,WAAL;AACAG,IAAAA,YAAY,CAACC,KAAb;AACA,SAAKrB,KAAL,CAAWsB,OAAX,CAAmBC,IAAnB,CAAwB,QAAxB;AACD;;AAED,QAAMN,WAAN,GAAmB;AACjB,QAAIS,IAAI,GAAG;AACT,kBAAa,EADJ;AAET,oBAAe;AAFN,KAAX;AAKF,UAAMpC,GAAG,CAACqC,IAAJ,CAAS,iBAAT,EAA4BD,IAA5B,EAAkCE,IAAlC,CAAuCC,GAAG,IAAI;AAChD,UAAIA,GAAG,CAACC,OAAR,EAAiB;AACbC,QAAAA,OAAO,CAACC,GAAR,CAAY,cAAZ;AACH,OAFD,MAEO;AACJD,QAAAA,OAAO,CAACC,GAAR,CAAY,uBAAZ;AACF;AACJ,KANK,EAMHC,KANG,CAMGC,GAAG,IAAI;AACZH,MAAAA,OAAO,CAACC,GAAR,CAAY,aAAZ,EAA2BE,GAA3B;AACH,KARK,CAAN;AASC;;AAEDC,EAAAA,MAAM,GAAE;AACN,UAAM;AAAEC,MAAAA;AAAF,QAAY,KAAKpC,KAAvB;AACA,wBACE,uDACE,oBAAC,SAAD;AACE,MAAA,GAAG,EAAEqC,GAAG,IAAI;AAAE,aAAK9B,SAAL,GAAiB8B,GAAjB;AAAsB,OADtC;AAEE,MAAA,OAAO,EAAEC,QAFX;AAGE,MAAA,QAAQ,EAAE,KAAK3B,QAHjB;AAIE,MAAA,MAAM,EAAE,KAAKE,MAJf;AAKE,MAAA,QAAQ,EAAE,KAAKL,QALjB;AAME,MAAA,QAAQ,EAAE,GANZ;AAOE,MAAA,OAAO,EAAE,KAAKP,KAAL,CAAWC,OAPtB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADF,eASI;AAAQ,MAAA,GAAG,EAAC,6CAAZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MATJ,eAUI;AAAK,MAAA,SAAS,EAAC,EAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACM,oBAAC,MAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACA,oBAAC,oBAAD;AAAsB,MAAA,KAAK,MAA3B;AAA4B,MAAA,IAAI,EAAC,wBAAjC;AAA0D,MAAA,IAAI,EAAC,gBAA/D;AAAgF,MAAA,SAAS,EAAEX,aAA3F;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADA,eAEA,oBAAC,oBAAD;AAAsB,MAAA,KAAK,MAA3B;AAA4B,MAAA,IAAI,EAAC,WAAjC;AAA6C,MAAA,IAAI,EAAC,UAAlD;AAA6D,MAAA,SAAS,EAAEE,QAAxE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAFA,eAGA,oBAAC,oBAAD;AAAsB,MAAA,KAAK,MAA3B;AAA4B,MAAA,IAAI,EAAC,iBAAjC;AAAmD,MAAA,IAAI,EAAC,iBAAxD;AAA0E,MAAA,SAAS,EAAEC,cAArF;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAHA,eAIA,oBAAC,oBAAD;AAAsB,MAAA,KAAK,MAA3B;AAA4B,MAAA,IAAI,EAAC,oBAAjC;AAAsD,MAAA,IAAI,EAAC,WAA3D;AAAuE,MAAA,SAAS,EAAEE,QAAlF;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAJA,eAKA,oBAAC,kBAAD;AAAoB,MAAA,IAAI,EAAC,GAAzB;AAA6B,MAAA,IAAI,EAAC,MAAlC;AAAyC,MAAA,SAAS,EAAED,aAApD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MALA,CADN,eASI,oBAAC,gBAAD;AACI,MAAA,SAAS,EAAE,KAAKM,KAAL,CAAWE,SAD1B;AAEI,MAAA,WAAW,EAAE,KAAKY,WAFtB;AAGI,MAAA,YAAY,EAAE,KAAKC,YAHvB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MATJ,CAVJ,CADF;AA4BF;;AAhHiC;;AAoHpCnB,MAAM,CAAC0C,SAAP,GAAmB;AACfH,EAAAA,KAAK,EAAE/C,SAAS,CAACmD,GAAV,CAAcC,UADN;AAEfnB,EAAAA,OAAO,EAAEjC,SAAS,CAACqD,IAAV,CAAeD;AAFT,CAAnB;AAKD,eAAe5C,MAAf","sourcesContent":["import React from 'react'\r\nimport { Switch, Route } from 'react-router-dom'\r\nimport './App.scss';\r\nimport IdleTimer from 'react-idle-timer';\r\nimport { IdleTimeOutModal } from './modal/IdleModal'\r\nimport Cookies from 'js-cookie';\r\nimport {UnauthenticatedRoute, AuthenticatedRoute} from './utils/authenticate'\r\nimport PropTypes from 'prop-types';\r\nimport api from '../src/utils/apiClient';\r\n\r\nconst ResetPassword = React.lazy(() => import('./views/Pages/ResetPassword/ResetPassword'));\r\nconst Register = React.lazy(() => import('./views/Pages/Register/Register'));\r\nconst ForgotPassword = React.lazy(() => import('./views/Pages/ForgotPassword/ForgotPassword'));\r\nconst DefaultLayout = React.lazy(() => import('./containers/DefaultLayout'));\r\nconst GetQuote = React.lazy(() => import('./views/Pages/GetQuote/GetQuote'));\r\n\r\nclass Layout extends React.Component {\r\n\r\n    constructor(props){\r\n        super(props)\r\n\r\n        this.state = {\r\n            timeout:1000 * 3600 * 1 * 8, //(60*60*8 secound) for 8 hour for showing alert\r\n            showModal: false,\r\n            userLoggedIn: false,\r\n            isTimedOut: false,\r\n            sessiondisable:false\r\n        }\r\n\r\n        this.idleTimer = null\r\n        this.onAction = this._onAction.bind(this)\r\n        this.onActive = this._onActive.bind(this)\r\n        this.onIdle = this._onIdle.bind(this)\r\n        this.handleClose = this.handleClose.bind(this)\r\n        this.handleLogout = this.handleLogout.bind(this)\r\n        this.releaseLock = this.releaseLock.bind(this)\r\n      }\r\n\r\n    _onAction(e) {\r\n      // console.log('user did something', e)\r\n      this.setState({isTimedOut: false})\r\n    }\r\n   \r\n    _onActive(e) {\r\n      // console.log('user is active', e)\r\n      this.setState({isTimedOut: false})\r\n    }\r\n   \r\n    _onIdle(e) {\r\n      // console.log('user is idle', e)\r\n      const isTimedOut = this.state.isTimedOut\r\n      if (isTimedOut) {\r\n          localStorage.clear()\r\n          this.props.history.push('/login')\r\n      } else {\r\n        this.setState({showModal: true})\r\n        this.idleTimer.reset();\r\n        this.setState({isTimedOut: true})\r\n        this.setState({sessiondisable: true})\r\n        setTimeout(() => {\r\n          if(this.state.sessiondisable){\r\n            localStorage.clear()\r\n            this.props.history.push('/login')\r\n          }\r\n        }, 900000);//15 min alert logout\r\n      }\r\n      \r\n    }\r\n\r\n    handleClose() {\r\n      this.setState({sessiondisable: false})\r\n      this.setState({showModal: false})\r\n    }\r\n\r\n    handleLogout() {\r\n      this.setState({showModal: false})\r\n      this.releaseLock();\r\n      localStorage.clear()\r\n      this.props.history.push('/login')\r\n    }\r\n\r\n    async releaseLock(){\r\n      let data = {\r\n        'PolicyId' : '',\r\n        'ReleaseAll' : 1\r\n    };\r\n    \r\n    await api.post('api/releaseLock', data).then(res => {\r\n        if (res.success) {\r\n            console.log(\"sucess......\")\r\n        } else {\r\n           console.log(\"SomeThing went wrong.\");\r\n        }\r\n    }).catch(err => {\r\n        console.log(\"setLock err\", err);\r\n    });\r\n    }\r\n\r\n    render(){\r\n      const { match } = this.props\r\n      return(\r\n        <>\r\n          <IdleTimer\r\n            ref={ref => { this.idleTimer = ref }}\r\n            element={document}\r\n            onActive={this.onActive}\r\n            onIdle={this.onIdle}\r\n            onAction={this.onAction}\r\n            debounce={250}\r\n            timeout={this.state.timeout} />\r\n            <script src=\"http://fb.me/react-js-fiddle-integration.js\"></script>\r\n            <div className=\"\">\r\n                  <Switch>\r\n                  <UnauthenticatedRoute exact path=\"/resetpassword/:token?\" name=\"Reset Password\" component={ResetPassword} />\r\n                  <UnauthenticatedRoute exact path=\"/register\" name=\"Register\" component={Register} />\r\n                  <UnauthenticatedRoute exact path=\"/forgotpassword\" name=\"Forgot Password\" component={ForgotPassword} />\r\n                  <UnauthenticatedRoute exact path=\"/getQuote/:country\" name=\"Get Quote\" component={GetQuote} />\r\n                  <AuthenticatedRoute path=\"/\" name=\"Home\" component={DefaultLayout} />\r\n                  </Switch>\r\n                \r\n                <IdleTimeOutModal \r\n                    showModal={this.state.showModal} \r\n                    handleClose={this.handleClose}\r\n                    handleLogout={this.handleLogout}\r\n                />\r\n            </div>\r\n        </>\r\n      )\r\n   }\r\n\r\n }\r\n\r\n Layout.propTypes = {\r\n     match: PropTypes.any.isRequired,\r\n     history: PropTypes.func.isRequired\r\n }\r\n\r\nexport default Layout"]},"metadata":{},"sourceType":"module"}