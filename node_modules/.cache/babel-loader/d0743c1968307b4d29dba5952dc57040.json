{"ast":null,"code":"import _classCallCheck from\"/Users/bhavik/Downloads/Cognisun/Evolution/Evolution_React/evolution_new/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/bhavik/Downloads/Cognisun/Evolution/Evolution_React/evolution_new/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _assertThisInitialized from\"/Users/bhavik/Downloads/Cognisun/Evolution/Evolution_React/evolution_new/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";import _inherits from\"/Users/bhavik/Downloads/Cognisun/Evolution/Evolution_React/evolution_new/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/bhavik/Downloads/Cognisun/Evolution/Evolution_React/evolution_new/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component}from'react';import{DataTable}from'primereact/datatable';import{Column}from'primereact/column';import{toast}from'react-toastify';import'primereact/resources/themes/nova-light/theme.css';import'primereact/resources/primereact.min.css';import'primeicons/primeicons.css';import{Button}from'primereact/button';import{Modal,ModalBody,ModalFooter,ModalHeader,Col,Row,Input,Button as BTN,InputGroup}from'reactstrap';import api from'../../../utils/apiClient';import{CommonConfig}from'../../../utils/constants';import moment from'moment';import{useTranslation,withTranslation,Trans}from'react-i18next';import APIConstant from'../../../utils/constants';var LevyHistory=/*#__PURE__*/function(_Component){_inherits(LevyHistory,_Component);var _super=_createSuper(LevyHistory);function LevyHistory(props){var _this;_classCallCheck(this,LevyHistory);_this=_super.call(this,props);var t=props.t;var columns=[{field:\"country\",header:\"Country\",sortable:true,filter:true,filterMatchMode:'contains',id:0},{field:\"type\",header:\"Type\",sortable:true,filter:true,filterMatchMode:'contains',id:1},{field:\"rate1\",header:\"Rate1\",sortable:true,filter:true,filterMatchMode:'contains',id:2},{field:\"rateBasis1\",header:\"RateBasis1\",sortable:true,filter:true,filterMatchMode:'contains',id:3},{field:\"rate2\",header:\"Rate2\",sortable:true,filter:true,filterMatchMode:'contains',id:4},{field:\"rateBasis2\",header:\"RateBasis2\",sortable:true,filter:true,filterMatchMode:'contains',id:5},{field:\"amountInEUR\",header:\"AmountInEUR\",sortable:true,filter:true,filterMatchMode:'contains',id:6},{field:\"amountInGBP\",header:\"AmountInGBP\",sortable:true,filter:true,filterMatchMode:'contains',id:7},{field:\"effectiveDate\",header:\"Effective Date\",sortable:true,filter:true,filterMatchMode:'contains',id:6}];_this.state={LevyId:'',country:'',countryarr:[],countryError:true,type:'',typeError:true,typearr:[],rate1:'',rate1Error:true,rateBasis1:'',rateBasis1arr:[],rateBasis1Error:true,rate2:'',rate2Error:true,rateBasis2:'',rateBasis2arr:[],rateBasis2Error:true,amountInEUR:'',amountInEURError:true,amountInGBP:'',amountInGBPError:true,effectivedate:'Effective Date',effectiveDate:moment().format('YYYY-MM-DD'),effectiveDateError:true,heading:'Add',buttonName:'Save',toastName:'Saved',toggleModal:false,cols:columns,LevyList:[],rowData:'',LanguageId:props.i18n.language==='en'?'en-GB':props.i18n.language==='es'?'es-ES':props.i18n.language==='ie'?'en-IE':props.i18n.language,selectedPage:0,rowsPerPageOptions:CommonConfig.dataTableConfig.rowsPerPageOptions,str:'',rowsPerPage:CommonConfig.dataTableConfig.rowsPerPage,globalFilter:null,primary:false};_this.colOptions=[];for(var _i=0,_columns=columns;_i<_columns.length;_i++){var col=_columns[_i];_this.colOptions.push({label:col.header,value:col});}_this.onColumnToggle=_this.onColumnToggle.bind(_assertThisInitialized(_this));// this.actionTemplate = this.actionTemplate.bind(this);\nreturn _this;}_createClass(LevyHistory,[{key:\"componentDidMount\",value:function componentDidMount(){console.log('this.props',this.props);if(this.props.match.params.constructor===Object&&Object.keys(this.props.match.params).length!==0){this.getLevyHistory(this.props.match.params.Id);}}},{key:\"getLevyHistory\",value:function getLevyHistory(Id){var _this2=this;var dataToSent={LevyId:Id};api.post('api/getLevyHistory',dataToSent).then(function(res){console.log('getLevyHistory',res);var formattedArr=[];for(var i=0;i<res.data.length;i++){formattedArr.push({LevyId:res.data[i].LevyId,country:res.data[i].Country,type:res.data[i].Type,rate1:res.data[i].Rate1,rateBasis1:res.data[i].RateBasis1,rate2:res.data[i].Rate2,rateBasis2:res.data[i].RateBasis2,amountInEUR:res.data[i].AmountEUR,amountInGBP:res.data[i].AmountGBP,effectiveDate:CommonConfig.isEmpty(res.data[i].StartDate)?'':moment(res.data[i].StartDate).format(CommonConfig.dateFormat.forDatePicker)});}console.log('formattedArr',formattedArr);_this2.setState({LevyList:formattedArr});});}},{key:\"onColumnToggle\",value:function onColumnToggle(event){var valueInOrder=event.value.sort(function(x,y){return x.id-y.id;});this.setState({cols:valueInOrder});}},{key:\"show\",value:function show(field,condition){if(condition){document.getElementById(field).className=\"form-control is-invalid\";}else{document.getElementById(field).className=\"form-control\";}}},{key:\"render\",value:function render(){var _this3=this;var t=this.props.t;var columns=this.state.cols.map(function(col,i){return/*#__PURE__*/React.createElement(Column,{field:col.field,header:col.header,body:col.body,sortable:col.sortable,filter:col.filter,filterMatchMode:\"contains\"});});return/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"div\",{className:\"basic-header\"},/*#__PURE__*/React.createElement(\"h1\",null,\"Vessel Class History\")),/*#__PURE__*/React.createElement(\"div\",{className:\"table-custom\"},/*#__PURE__*/React.createElement(DataTable,{ref:function ref(el){return _this3.dt=el;},value:this.state.LevyList,first:this.state.selectedPage,onPage:function onPage(e){return _this3.getPageString(e);},paginator:true,rows:this.state.rowsPerPage,totalRecords:this.state.LevyList.length,exportFilename:t(\"masterLevy:LevyList\"),currentPageReportTemplate:this.state.str// scrollable={true} scrollHeight=\"250px\"\n,paginatorTemplate:\"CurrentPageReport FirstPageLink PrevPageLink PageLinks NextPageLink LastPageLink RowsPerPageDropdown\",rowsPerPageOptions:this.state.rowsPerPageOptions,globalFilter:this.state.globalFilter,emptyMessage:t(\"translation:NoRecordsMsg\"),responsive:true,resizableColumns:true,columnResizeMode:\"fit\",scrollable:true,scrollHeight:\"340px\"},columns)));}}]);return LevyHistory;}(Component);export default withTranslation()(LevyHistory);","map":{"version":3,"sources":["/Users/bhavik/Downloads/Cognisun/Evolution/Evolution_React/evolution_new/src/views/Master/Levy/LevyHistory.js"],"names":["React","Component","DataTable","Column","toast","Button","Modal","ModalBody","ModalFooter","ModalHeader","Col","Row","Input","BTN","InputGroup","api","CommonConfig","moment","useTranslation","withTranslation","Trans","APIConstant","LevyHistory","props","t","columns","field","header","sortable","filter","filterMatchMode","id","state","LevyId","country","countryarr","countryError","type","typeError","typearr","rate1","rate1Error","rateBasis1","rateBasis1arr","rateBasis1Error","rate2","rate2Error","rateBasis2","rateBasis2arr","rateBasis2Error","amountInEUR","amountInEURError","amountInGBP","amountInGBPError","effectivedate","effectiveDate","format","effectiveDateError","heading","buttonName","toastName","toggleModal","cols","LevyList","rowData","LanguageId","i18n","language","selectedPage","rowsPerPageOptions","dataTableConfig","str","rowsPerPage","globalFilter","primary","colOptions","col","push","label","value","onColumnToggle","bind","console","log","match","params","constructor","Object","keys","length","getLevyHistory","Id","dataToSent","post","then","res","formattedArr","i","data","Country","Type","Rate1","RateBasis1","Rate2","RateBasis2","AmountEUR","AmountGBP","isEmpty","StartDate","dateFormat","forDatePicker","setState","event","valueInOrder","sort","x","y","condition","document","getElementById","className","map","body","el","dt","e","getPageString"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\r\nimport { DataTable } from 'primereact/datatable';\r\nimport { Column } from 'primereact/column';\r\nimport { toast } from 'react-toastify';\r\nimport 'primereact/resources/themes/nova-light/theme.css';\r\nimport 'primereact/resources/primereact.min.css';\r\nimport 'primeicons/primeicons.css';\r\nimport { Button } from 'primereact/button';\r\nimport { Modal, ModalBody, ModalFooter, ModalHeader, Col, Row, Input, Button as BTN, InputGroup } from 'reactstrap';\r\nimport api from '../../../utils/apiClient';\r\nimport { CommonConfig } from '../../../utils/constants';\r\nimport moment from 'moment';\r\nimport { useTranslation, withTranslation, Trans } from 'react-i18next';\r\nimport APIConstant from '../../../utils/constants';\r\n\r\nclass LevyHistory extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        const { t } = props;\r\n        let columns = [\r\n            { field: \"country\", header: \"Country\", sortable: true, filter: true, filterMatchMode: 'contains', id: 0 },\r\n            { field: \"type\", header: \"Type\", sortable: true, filter: true, filterMatchMode: 'contains', id: 1 },\r\n            { field: \"rate1\", header: \"Rate1\", sortable: true, filter: true, filterMatchMode: 'contains', id: 2 },\r\n            { field: \"rateBasis1\", header: \"RateBasis1\", sortable: true, filter: true, filterMatchMode: 'contains', id: 3 },\r\n            { field: \"rate2\", header: \"Rate2\", sortable: true, filter: true, filterMatchMode: 'contains', id: 4 },\r\n            { field: \"rateBasis2\", header: \"RateBasis2\", sortable: true, filter: true, filterMatchMode: 'contains', id: 5 },\r\n            { field: \"amountInEUR\", header: \"AmountInEUR\", sortable: true, filter: true, filterMatchMode: 'contains', id: 6 },\r\n            { field: \"amountInGBP\", header: \"AmountInGBP\", sortable: true, filter: true, filterMatchMode: 'contains', id: 7 },\r\n            { field: \"effectiveDate\", header: \"Effective Date\", sortable: true, filter: true, filterMatchMode: 'contains', id: 6 },\r\n        ];\r\n\r\n        this.state = {\r\n            LevyId: '',\r\n            country: '',\r\n            countryarr: [],\r\n            countryError: true,\r\n            type: '',\r\n            typeError: true,\r\n            typearr: [],\r\n            rate1: '',\r\n            rate1Error: true,\r\n            rateBasis1: '',\r\n            rateBasis1arr: [],\r\n            rateBasis1Error: true,\r\n            rate2: '',\r\n            rate2Error: true,\r\n            rateBasis2: '',\r\n            rateBasis2arr: [],\r\n            rateBasis2Error: true,\r\n            amountInEUR: '',\r\n            amountInEURError: true,\r\n            amountInGBP: '',\r\n            amountInGBPError: true,\r\n            effectivedate: 'Effective Date',\r\n            effectiveDate: moment().format('YYYY-MM-DD'),\r\n            effectiveDateError: true,\r\n            heading: 'Add',\r\n            buttonName: 'Save',\r\n            toastName: 'Saved',\r\n            toggleModal: false,\r\n            cols: columns,\r\n            LevyList: [],\r\n            rowData: '',\r\n            LanguageId: (props.i18n.language === 'en') ? 'en-GB' : (props.i18n.language === 'es') ? 'es-ES' : (props.i18n.language === 'ie') ? 'en-IE' : props.i18n.language,\r\n            selectedPage: 0,\r\n            rowsPerPageOptions: CommonConfig.dataTableConfig.rowsPerPageOptions,\r\n            str: '',\r\n            rowsPerPage: CommonConfig.dataTableConfig.rowsPerPage,\r\n            globalFilter: null,\r\n            primary: false,\r\n        };\r\n\r\n        this.colOptions = [];\r\n        for (let col of columns) {\r\n            this.colOptions.push({ label: col.header, value: col });\r\n        }\r\n        this.onColumnToggle = this.onColumnToggle.bind(this);\r\n        // this.actionTemplate = this.actionTemplate.bind(this);\r\n    }\r\n\r\n    componentDidMount() {\r\n        console.log('this.props',this.props);\r\n        \r\n        if (this.props.match.params.constructor === Object && Object.keys(this.props.match.params).length !== 0) {\r\n            this.getLevyHistory(this.props.match.params.Id)\r\n        }\r\n    }\r\n\r\n    getLevyHistory(Id) {\r\n        var dataToSent = {\r\n            LevyId: Id,\r\n        }\r\n        api.post('api/getLevyHistory', dataToSent).then(res => {\r\n            console.log('getLevyHistory', res);\r\n            var formattedArr = [];\r\n            for (var i = 0; i < res.data.length; i++) {\r\n                formattedArr.push({\r\n                    LevyId: res.data[i].LevyId,\r\n                    country: res.data[i].Country,\r\n                    type: res.data[i].Type,\r\n                    rate1: res.data[i].Rate1,\r\n                    rateBasis1: res.data[i].RateBasis1,\r\n                    rate2: res.data[i].Rate2,\r\n                    rateBasis2: res.data[i].RateBasis2,\r\n                    amountInEUR: res.data[i].AmountEUR,\r\n                    amountInGBP: res.data[i].AmountGBP,\r\n                    effectiveDate: CommonConfig.isEmpty(res.data[i].StartDate) ? '' : moment(res.data[i].StartDate).format(CommonConfig.dateFormat.forDatePicker),\r\n                });\r\n            }\r\n            console.log('formattedArr',formattedArr);            \r\n            this.setState({ LevyList: formattedArr })\r\n        })\r\n    }\r\n\r\n    onColumnToggle(event) {\r\n        let valueInOrder = event.value.sort((x, y) => { return x.id - y.id });\r\n        this.setState({ cols: valueInOrder });\r\n    }\r\n\r\n    show(field, condition) {\r\n        if (condition) {\r\n            document.getElementById(field).className = \"form-control is-invalid\";\r\n        } else {\r\n            document.getElementById(field).className = \"form-control\";\r\n        }\r\n    }\r\n\r\n    render() {\r\n        const { t } = this.props;\r\n        let columns = this.state.cols.map((col, i) => {\r\n            return <Column field={col.field} header={col.header} body={col.body} sortable={col.sortable} filter={col.filter} filterMatchMode=\"contains\" />;\r\n        });\r\n        return (\r\n            <div>\r\n                <div className=\"basic-header\">\r\n                    <h1>Vessel Class History</h1>\r\n                </div>\r\n\r\n                <div className=\"table-custom\">\r\n                    <DataTable\r\n                        ref={(el) => this.dt = el}\r\n                        value={this.state.LevyList}\r\n                        first={this.state.selectedPage}\r\n                        onPage={(e) => this.getPageString(e)}\r\n                        paginator={true}\r\n                        rows={this.state.rowsPerPage}\r\n                        totalRecords={this.state.LevyList.length}\r\n                        exportFilename={t(\"masterLevy:LevyList\")}\r\n                        currentPageReportTemplate={this.state.str}\r\n                        // scrollable={true} scrollHeight=\"250px\"\r\n                        paginatorTemplate=\"CurrentPageReport FirstPageLink PrevPageLink PageLinks NextPageLink LastPageLink RowsPerPageDropdown\"\r\n                        rowsPerPageOptions={this.state.rowsPerPageOptions}\r\n                        globalFilter={this.state.globalFilter}\r\n                        emptyMessage={t(\"translation:NoRecordsMsg\")}\r\n                        responsive={true}\r\n                        resizableColumns={true}\r\n                        columnResizeMode=\"fit\"\r\n                        scrollable={true}\r\n                        scrollHeight=\"340px\">\r\n                        {columns}\r\n                    </DataTable>\r\n                </div>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nexport default withTranslation()(LevyHistory);"]},"metadata":{},"sourceType":"module"}