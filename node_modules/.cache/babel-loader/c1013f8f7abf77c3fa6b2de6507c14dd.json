{"ast":null,"code":"import _classCallCheck from\"/Users/bhavik/Downloads/Cognisun/Evolution/Evolution_React/evolution_new/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/bhavik/Downloads/Cognisun/Evolution/Evolution_React/evolution_new/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _assertThisInitialized from\"/Users/bhavik/Downloads/Cognisun/Evolution/Evolution_React/evolution_new/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";import _inherits from\"/Users/bhavik/Downloads/Cognisun/Evolution/Evolution_React/evolution_new/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/bhavik/Downloads/Cognisun/Evolution/Evolution_React/evolution_new/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component}from'react';import{DataTable}from'primereact/datatable';import{Column}from'primereact/column';import{MultiSelect}from'primereact/multiselect';import{InputText}from'primereact/inputtext';import{toast}from'react-toastify';import'primereact/resources/themes/nova-light/theme.css';import'primereact/resources/primereact.min.css';import'primeicons/primeicons.css';import{Button}from'primereact/button';import{Modal,ModalBody,ModalFooter,ModalHeader,Col,Row,Input,InputGroup,Button as BTN,Card,CardHeader,CardBody,Collapse,Form}from'reactstrap';import api from'../../utils/apiClient';import APIConstant from'../../utils/constants';import{CommonConfig}from'../../utils/constants';import{apiBase}from'../../utils/config';import{useTranslation,withTranslation,Trans}from'react-i18next';import{registerHelper}from'codemirror';import{relativeTimeThreshold}from'moment';import moment from'moment';var DashboardPolicyList=/*#__PURE__*/function(_Component){_inherits(DashboardPolicyList,_Component);var _super=_createSuper(DashboardPolicyList);function DashboardPolicyList(props){var _this;_classCallCheck(this,DashboardPolicyList);_this=_super.call(this,props);_this.getPageString=function(e){var firstPage=e.first+1;var l=e.rows*(e.page+1);var lastPage=l<_this.state.policyList.length?l:_this.state.policyList.length;var str=firstPage+' to '+lastPage+' out of '+_this.state.policyList.length+' records';_this.setState({selectedPage:e.first,str:str,rowsPerPage:e.rows});};var columns=[{body:_this.actionTemplate.bind(_assertThisInitialized(_this)),header:\"Action\",sortable:false,filter:false,id:0},{body:_this.formatPolicyDetail.bind(_assertThisInitialized(_this)),field:\"PolicyData\",header:\"Policy No/Type\",sortable:true,filter:true,filterMatchMode:'contains',id:1},{body:_this.formatContactDetail.bind(_assertThisInitialized(_this)),field:\"ClientDetails\",header:\"Client/Contacts\",sortable:true,filter:true,filterMatchMode:'contains',id:2},{body:_this.formatVesselData.bind(_assertThisInitialized(_this)),field:\"VesselDetails\",header:\"Vessel Class/Type\",sortable:true,filter:true,filterMatchMode:'contains',id:3},{field:\"InsuranceCompanyName\",header:\"Insurer\",sortable:true,filter:true,filterMatchMode:'contains',id:4},{body:_this.formatPremiun.bind(_assertThisInitialized(_this)),header:\"Sum Insured/Premium\",sortable:true,filter:true,filterMatchMode:'contains',id:5},{body:_this.formatDate.bind(_assertThisInitialized(_this)),field:\"InceptionDate\",header:\"Inception/Renewal\",sortable:true,filter:true,filterMatchMode:'contains',id:6},{field:\"Department\",header:\"Department\",sortable:true,filter:true,filterMatchMode:'contains',id:7},{field:\"Status\",header:\"Status\",sortable:true,filter:true,filterMatchMode:'contains',id:8}];_this.state={cols:columns,rowsPerPageOptions:CommonConfig.dataTableConfig.rowsPerPageOptions,rowsPerPage:CommonConfig.dataTableConfig.rowsPerPage,policyStage:_this.props.match.params.mode,referredPolicyCount:'',policyList:[]};_this.colOptions=[];for(var _i=0,_columns=columns;_i<_columns.length;_i++){var col=_columns[_i];_this.colOptions.push({label:col.header,value:col});}return _this;}_createClass(DashboardPolicyList,[{key:\"componentDidMount\",value:function componentDidMount(){this.getPolicyList(this.props.match.params.mode);}},{key:\"getPolicyList\",value:function getPolicyList(stage){var _this2=this;var data={PolicyStage:stage,TeamType:'Renewal',CurrentUser:CommonConfig.loggedInUserData().ContactType};api.post('api/getPolicyListByStage',data).then(function(res){if(res.success){console.log(\"getPolicyListByStage\",res.data);var firstPage=res.data.length?'1':'0';var lastPage=_this2.state.rowsPerPage<res.data.length?_this2.state.rowsPerPage:res.data.length;var str=firstPage+' to '+lastPage+' out of '+res.data.length+' records';_this2.setState({policyList:res.data,policyCount:res.data.length,str:str,policyStage:stage});}else{console.log(\"Else\");}}).catch(function(err){console.log(\"errr\",err);});}},{key:\"actionTemplate\",value:function actionTemplate(rowData,column){var _this3=this;return/*#__PURE__*/React.createElement(\"div\",{className:\"policy-list-data\"},/*#__PURE__*/React.createElement(Button,{type:\"button\",icon:\"pi pi-eye\",className:\"p-button-warning\",onClick:function onClick(){return _this3.edit(rowData);},style:{marginRight:'.5em'},tooltip:\"View\",tooltipOptions:{position:'bottom'}}));}},{key:\"edit\",value:function edit(rowData){this.props.history.push({pathname:'/PolicyDetailsMerged/'+rowData.PolicyId+'/1/1',state:{PolicyId:rowData.PolicyId,tab:1}});}},{key:\"formatPolicyDetail\",value:function formatPolicyDetail(rowData){return/*#__PURE__*/React.createElement(\"div\",{className:\"policy-list-data\"},/*#__PURE__*/React.createElement(\"p\",null,rowData.PolicyType),/*#__PURE__*/React.createElement(\"p\",null,rowData.PolicyNumber));}},{key:\"formatContactDetail\",value:function formatContactDetail(rowData){return/*#__PURE__*/React.createElement(\"div\",{className:\"policy-list-data\"},/*#__PURE__*/React.createElement(\"p\",null,rowData.Name),/*#__PURE__*/React.createElement(\"p\",null,CommonConfig.formatPhoneNumber(rowData.CountryCode+rowData.PhoneNumber)),/*#__PURE__*/React.createElement(\"p\",null,rowData.Email));}},{key:\"formatVesselData\",value:function formatVesselData(rowData){return/*#__PURE__*/React.createElement(\"div\",{className:\"policy-list-data\"},/*#__PURE__*/React.createElement(\"p\",null,rowData.VesselClassName),/*#__PURE__*/React.createElement(\"p\",null,rowData.VesselTypeName));}},{key:\"formatPremiun\",value:function formatPremiun(rowData){return/*#__PURE__*/React.createElement(\"div\",{className:\"policy-list-data\"},/*#__PURE__*/React.createElement(\"p\",null,rowData.SumInsured),/*#__PURE__*/React.createElement(\"p\",null,rowData.CurrentPremium));}},{key:\"formatDate\",value:function formatDate(rowData){return/*#__PURE__*/React.createElement(\"div\",{className:\"policy-list-data\"},/*#__PURE__*/React.createElement(\"p\",null,moment(rowData.InceptionDate).format(CommonConfig.dateFormat.dateOnly)),/*#__PURE__*/React.createElement(\"p\",null,moment(rowData.RenewalDate).format(CommonConfig.dateFormat.dateOnly)));}},{key:\"render\",value:function render(){var _this4=this;var t=this.props.t;var columns=this.state.cols.map(function(col,i){return/*#__PURE__*/React.createElement(Column,{field:col.field,header:col.header,body:col.body,sortable:col.sortable,filter:col.filter,filterMatchMode:\"contains\"});});if(this.props.isIdleTimeOut){this.props.history.push('/');}return/*#__PURE__*/React.createElement(\"div\",{className:\"animated fadeIn\"},/*#__PURE__*/React.createElement(\"div\",{className:\"table-custom\"},/*#__PURE__*/React.createElement(Row,null,/*#__PURE__*/React.createElement(Col,{md:\"3\"},/*#__PURE__*/React.createElement(\"h2\",null,this.state.policyStage,\" (\",this.state.policyCount,\")\")),/*#__PURE__*/React.createElement(Col,{md:\"4\"}),/*#__PURE__*/React.createElement(Col,{md:\"5\",style:{textAlign:\"right\"}},/*#__PURE__*/React.createElement(\"span\",{className:this.state.policyStage=='Pending'?\"dashbordSelectorSelect\":'',style:{marginRight:15,textDecoration:\"underline\",cursor:\"pointer\"},onClick:function onClick(){return _this4.getPolicyList('Pending');}},/*#__PURE__*/React.createElement(\"b\",null,\"Pending\")),/*#__PURE__*/React.createElement(\"span\",{className:this.state.policyStage=='Referred'?\"dashbordSelectorSelect\":'',style:{marginRight:15,textDecoration:\"underline\",cursor:\"pointer\"},onClick:function onClick(){return _this4.getPolicyList('Referred');}},/*#__PURE__*/React.createElement(\"b\",null,\"Referred\")),/*#__PURE__*/React.createElement(\"span\",{className:this.state.policyStage=='In Progress'?\"dashbordSelectorSelect\":'',style:{marginRight:15,textDecoration:\"underline\",cursor:\"pointer\"},onClick:function onClick(){return _this4.getPolicyList('In Progress');}},/*#__PURE__*/React.createElement(\"b\",null,\"In Progress\")),/*#__PURE__*/React.createElement(\"span\",{className:this.state.policyStage=='Completed'?\"dashbordSelectorSelect\":'',style:{marginRight:15,textDecoration:\"underline\",cursor:\"pointer\"},onClick:function onClick(){return _this4.getPolicyList('Completed');}},/*#__PURE__*/React.createElement(\"b\",null,\"Completed\")),/*#__PURE__*/React.createElement(\"span\",{className:this.state.policyStage=='Lapsed Or Canceled'?\"dashbordSelectorSelect\":'',style:{marginRight:15,textDecoration:\"underline\",cursor:\"pointer\"},onClick:function onClick(){return _this4.getPolicyList('Lapsed Or Canceled');}},/*#__PURE__*/React.createElement(\"b\",null,\"Lapsed Or Canceled\")))),/*#__PURE__*/React.createElement(DataTable,{ref:function ref(el){return _this4.dt=el;},value:this.state.policyList,first:this.state.selectedPage,onPage:function onPage(e){return _this4.getPageString(e);},paginator:true,rows:this.state.rowsPerPage,totalRecords:this.state.policyList.length,exportFilename:\"StringMap List\",currentPageReportTemplate:this.state.str,paginatorTemplate:\"CurrentPageReport FirstPageLink PrevPageLink PageLinks NextPageLink LastPageLink RowsPerPageDropdown\",rowsPerPageOptions:this.state.rowsPerPageOptions,globalFilter:this.state.globalFilter,emptyMessage:\"No records found\",responsive:true,resizableColumns:true,columnResizeMode:\"fit\",scrollable:true,scrollHeight:\"340px\"},columns)));}}]);return DashboardPolicyList;}(Component);export default DashboardPolicyList;","map":{"version":3,"sources":["/Users/bhavik/Downloads/Cognisun/Evolution/Evolution_React/evolution_new/src/views/Dashboard/DashboardPolicyList.js"],"names":["React","Component","DataTable","Column","MultiSelect","InputText","toast","Button","Modal","ModalBody","ModalFooter","ModalHeader","Col","Row","Input","InputGroup","BTN","Card","CardHeader","CardBody","Collapse","Form","api","APIConstant","CommonConfig","apiBase","useTranslation","withTranslation","Trans","registerHelper","relativeTimeThreshold","moment","DashboardPolicyList","props","getPageString","e","firstPage","first","l","rows","page","lastPage","state","policyList","length","str","setState","selectedPage","rowsPerPage","columns","body","actionTemplate","bind","header","sortable","filter","id","formatPolicyDetail","field","filterMatchMode","formatContactDetail","formatVesselData","formatPremiun","formatDate","cols","rowsPerPageOptions","dataTableConfig","policyStage","match","params","mode","referredPolicyCount","colOptions","col","push","label","value","getPolicyList","stage","data","PolicyStage","TeamType","CurrentUser","loggedInUserData","ContactType","post","then","res","success","console","log","policyCount","catch","err","rowData","column","edit","marginRight","position","history","pathname","PolicyId","tab","PolicyType","PolicyNumber","Name","formatPhoneNumber","CountryCode","PhoneNumber","Email","VesselClassName","VesselTypeName","SumInsured","CurrentPremium","InceptionDate","format","dateFormat","dateOnly","RenewalDate","t","map","i","isIdleTimeOut","textAlign","textDecoration","cursor","el","dt","globalFilter"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\r\nimport { DataTable } from 'primereact/datatable';\r\nimport { Column } from 'primereact/column';\r\nimport { MultiSelect } from 'primereact/multiselect';\r\nimport { InputText } from 'primereact/inputtext';\r\nimport { toast } from 'react-toastify';\r\nimport 'primereact/resources/themes/nova-light/theme.css';\r\nimport 'primereact/resources/primereact.min.css';\r\nimport 'primeicons/primeicons.css';\r\nimport { Button } from 'primereact/button';\r\nimport { Modal, ModalBody, ModalFooter, ModalHeader, Col, Row, Input, InputGroup, Button as BTN, Card, CardHeader, CardBody, Collapse, Form } from 'reactstrap';\r\nimport api from '../../utils/apiClient';\r\nimport APIConstant from '../../utils/constants';\r\nimport { CommonConfig } from '../../utils/constants';\r\nimport { apiBase } from '../../utils/config';\r\nimport { useTranslation, withTranslation, Trans } from 'react-i18next';\r\nimport { registerHelper } from 'codemirror';\r\nimport { relativeTimeThreshold } from 'moment';\r\nimport moment from 'moment';\r\n\r\nclass DashboardPolicyList extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        let columns = [\r\n            { body: this.actionTemplate.bind(this), header: \"Action\", sortable: false, filter: false, id: 0 },\r\n            { body: this.formatPolicyDetail.bind(this), field: \"PolicyData\", header: \"Policy No/Type\", sortable: true, filter: true, filterMatchMode: 'contains', id: 1 },\r\n            { body: this.formatContactDetail.bind(this), field: \"ClientDetails\", header: \"Client/Contacts\", sortable: true, filter: true, filterMatchMode: 'contains', id: 2 },\r\n            { body: this.formatVesselData.bind(this), field: \"VesselDetails\", header: \"Vessel Class/Type\", sortable: true, filter: true, filterMatchMode: 'contains', id: 3 },\r\n            { field: \"InsuranceCompanyName\", header: \"Insurer\", sortable: true, filter: true, filterMatchMode: 'contains', id: 4 },\r\n            { body: this.formatPremiun.bind(this), header: \"Sum Insured/Premium\", sortable: true, filter: true, filterMatchMode: 'contains', id: 5 },\r\n            { body: this.formatDate.bind(this), field: \"InceptionDate\", header: \"Inception/Renewal\", sortable: true, filter: true, filterMatchMode: 'contains', id: 6 },\r\n            { field: \"Department\", header: \"Department\", sortable: true, filter: true, filterMatchMode: 'contains', id: 7 },\r\n            { field: \"Status\", header: \"Status\", sortable: true, filter: true, filterMatchMode: 'contains', id: 8 },\r\n        ];\r\n\r\n\r\n        this.state = {\r\n            cols: columns,\r\n            rowsPerPageOptions: CommonConfig.dataTableConfig.rowsPerPageOptions,\r\n            rowsPerPage: CommonConfig.dataTableConfig.rowsPerPage,\r\n            policyStage: this.props.match.params.mode,\r\n            referredPolicyCount: '',\r\n            policyList: [],\r\n        };\r\n        this.colOptions = [];\r\n        for (let col of columns) {\r\n            this.colOptions.push({ label: col.header, value: col });\r\n        }\r\n    }\r\n\r\n    componentDidMount() {\r\n        this.getPolicyList(this.props.match.params.mode);\r\n    }\r\n\r\n    getPolicyList(stage) {\r\n        let data = {\r\n            PolicyStage: stage,\r\n            TeamType: 'Renewal',\r\n            CurrentUser: CommonConfig.loggedInUserData().ContactType\r\n        }\r\n        api.post('api/getPolicyListByStage', data).then(res => {\r\n            if (res.success) {\r\n                console.log(\"getPolicyListByStage\", res.data);\r\n                let firstPage = (res.data.length) ? '1' : '0';\r\n                let lastPage = (this.state.rowsPerPage < res.data.length) ? this.state.rowsPerPage : res.data.length;\r\n                let str = firstPage + ' to ' + lastPage + ' out of ' + res.data.length + ' records';\r\n                this.setState({ policyList: res.data, policyCount: res.data.length, str: str, policyStage: stage });\r\n            } else {\r\n                console.log(\"Else\");\r\n            }\r\n        }).catch(err => {\r\n            console.log(\"errr\", err)\r\n        })\r\n    }\r\n\r\n    actionTemplate(rowData, column) {\r\n        return <div className=\"policy-list-data\">\r\n            <Button type=\"button\" icon=\"pi pi-eye\" className=\"p-button-warning\" onClick={() => this.edit(rowData)}\r\n                style={{ marginRight: '.5em' }} tooltip=\"View\" tooltipOptions={{ position: 'bottom' }}>\r\n            </Button>\r\n            {/* <Button type=\"button\" icon=\"pi pi-trash\" className=\"p-button-danger\" tooltip=\"Delete\" tooltipOptions={{ position: 'bottom' }}></Button> */}\r\n        </div>;\r\n    }\r\n\r\n    edit(rowData) {\r\n        this.props.history.push({\r\n            pathname: '/PolicyDetailsMerged/' + rowData.PolicyId + '/1/1',\r\n            state: {\r\n                PolicyId: rowData.PolicyId,\r\n                tab: 1\r\n            }\r\n        });\r\n    }\r\n\r\n    getPageString = (e) => {\r\n        let firstPage = e.first + 1;\r\n        let l = e.rows * (e.page + 1);\r\n        let lastPage = (l < this.state.policyList.length) ? l : this.state.policyList.length\r\n        var str = firstPage + ' to ' + lastPage + ' out of ' + this.state.policyList.length + ' records';\r\n        this.setState({ selectedPage: e.first, str: str, rowsPerPage: e.rows });\r\n    }\r\n\r\n    formatPolicyDetail(rowData) {\r\n        return (\r\n            <div className=\"policy-list-data\">\r\n                <p>{rowData.PolicyType}</p>\r\n                <p>{rowData.PolicyNumber}</p>\r\n            </div>\r\n        )\r\n    }\r\n\r\n    formatContactDetail(rowData) {\r\n        return (\r\n            <div className=\"policy-list-data\">\r\n                <p>{rowData.Name}</p>\r\n                <p>{CommonConfig.formatPhoneNumber(rowData.CountryCode + rowData.PhoneNumber)}</p>\r\n                <p>{rowData.Email}</p>\r\n            </div>\r\n        )\r\n    }\r\n\r\n    formatVesselData(rowData) {\r\n        return (\r\n            <div className=\"policy-list-data\">\r\n                <p>{rowData.VesselClassName}</p>\r\n                <p>{rowData.VesselTypeName}</p>\r\n            </div>\r\n        )\r\n    }\r\n\r\n    formatPremiun(rowData) {\r\n        return (\r\n            <div className=\"policy-list-data\">\r\n                <p>{rowData.SumInsured}</p>\r\n                <p>{rowData.CurrentPremium}</p>\r\n            </div>\r\n        )\r\n    }\r\n\r\n    formatDate(rowData) {\r\n        return (\r\n            <div className=\"policy-list-data\">\r\n                <p>{moment(rowData.InceptionDate).format(CommonConfig.dateFormat.dateOnly)}</p>\r\n                <p>{moment(rowData.RenewalDate).format(CommonConfig.dateFormat.dateOnly)}</p>\r\n            </div>\r\n        )\r\n    }\r\n\r\n    render() {\r\n\r\n        const { t } = this.props;\r\n\r\n        let columns = this.state.cols.map((col, i) => {\r\n            return <Column field={col.field} header={col.header} body={col.body} sortable={col.sortable} filter={col.filter} filterMatchMode=\"contains\" />;\r\n        });\r\n\r\n        if (this.props.isIdleTimeOut) {\r\n            this.props.history.push('/')\r\n        }\r\n        return (\r\n\r\n            <div className=\"animated fadeIn\">\r\n\r\n                <div className=\"table-custom\">\r\n                    <Row>\r\n                        <Col md='3'>\r\n                            <h2>{this.state.policyStage} ({this.state.policyCount})</h2>\r\n                        </Col>\r\n                        <Col md='4'></Col>\r\n                        <Col md= '5' style={{textAlign: \"right\"}}>\r\n                            <span className = {this.state.policyStage == 'Pending'?\"dashbordSelectorSelect\":''} style = {{marginRight:15, textDecoration: \"underline\", cursor: \"pointer\", }} onClick={() => this.getPolicyList('Pending')}><b>Pending</b></span>\r\n                            <span className = {this.state.policyStage == 'Referred'?\"dashbordSelectorSelect\":''} style = {{marginRight:15, textDecoration: \"underline\", cursor: \"pointer\"}} onClick={() => this.getPolicyList('Referred')}><b>Referred</b></span>\r\n                            <span className = {this.state.policyStage == 'In Progress'?\"dashbordSelectorSelect\":''} style = {{marginRight:15, textDecoration: \"underline\", cursor: \"pointer\"}} onClick={() => this.getPolicyList('In Progress')}><b>In Progress</b></span>\r\n                            <span className = {this.state.policyStage == 'Completed'?\"dashbordSelectorSelect\":''} style = {{marginRight:15, textDecoration: \"underline\", cursor: \"pointer\"}} onClick={() => this.getPolicyList('Completed')}><b>Completed</b></span>\r\n                            <span className = {this.state.policyStage == 'Lapsed Or Canceled'?\"dashbordSelectorSelect\":''} style = {{marginRight:15, textDecoration: \"underline\", cursor: \"pointer\"}} onClick={() => this.getPolicyList('Lapsed Or Canceled')}><b>Lapsed Or Canceled</b></span>\r\n                        </Col>\r\n                    </Row>\r\n                    <DataTable\r\n                        ref={(el) => this.dt = el}\r\n                        value={this.state.policyList}\r\n                        first={this.state.selectedPage}\r\n                        onPage={(e) => this.getPageString(e)}\r\n                        paginator={true}\r\n                        rows={this.state.rowsPerPage}\r\n                        totalRecords={this.state.policyList.length}\r\n                        exportFilename=\"StringMap List\"\r\n                        currentPageReportTemplate={this.state.str}\r\n                        paginatorTemplate=\"CurrentPageReport FirstPageLink PrevPageLink PageLinks NextPageLink LastPageLink RowsPerPageDropdown\"\r\n                        rowsPerPageOptions={this.state.rowsPerPageOptions}\r\n                        globalFilter={this.state.globalFilter}\r\n                        emptyMessage=\"No records found\"\r\n                        responsive={true}\r\n                        resizableColumns={true}\r\n                        columnResizeMode=\"fit\"\r\n                        scrollable={true}\r\n                        scrollHeight=\"340px\">\r\n                        {columns}\r\n                    </DataTable>\r\n                </div>\r\n\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nexport default DashboardPolicyList;\r\n"]},"metadata":{},"sourceType":"module"}