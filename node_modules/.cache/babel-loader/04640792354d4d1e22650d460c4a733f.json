{"ast":null,"code":"import _toConsumableArray from\"/Users/bhavik/Downloads/Cognisun/Evolution/Evolution_React/evolution_new/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _classCallCheck from\"/Users/bhavik/Downloads/Cognisun/Evolution/Evolution_React/evolution_new/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/bhavik/Downloads/Cognisun/Evolution/Evolution_React/evolution_new/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _assertThisInitialized from\"/Users/bhavik/Downloads/Cognisun/Evolution/Evolution_React/evolution_new/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";import _inherits from\"/Users/bhavik/Downloads/Cognisun/Evolution/Evolution_React/evolution_new/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/bhavik/Downloads/Cognisun/Evolution/Evolution_React/evolution_new/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component}from'react';import'primereact/resources/themes/nova-light/theme.css';import'primereact/resources/primereact.min.css';import'primeicons/primeicons.css';import'react-toastify/dist/ReactToastify.css';import{Col,Row,Modal,ModalBody,ModalHeader,ModalFooter,Button as BTN,Input}from'reactstrap';import{withTranslation}from'react-i18next';import{DataTable}from'primereact/datatable';import{Column}from'primereact/column';import{MultiSelect}from'primereact/multiselect';import{InputText}from'primereact/inputtext';import{Button}from'primereact/button';import{toast}from'react-toastify';import api from'../../../../utils/apiClient';import APIConstant,{CommonConfig}from'../../../../utils/constants';var BounderOfRisk=/*#__PURE__*/function(_Component){_inherits(BounderOfRisk,_Component);var _super=_createSuper(BounderOfRisk);function BounderOfRisk(props){var _this;_classCallCheck(this,BounderOfRisk);_this=_super.call(this,props);_this.selectType=function(value,type){if(type==\"country\"){_this.setState({country:value});}};_this.getPageString=function(e){var firstPage=e.first+1;var l=e.rows*(e.page+1);var lastPage=l<_this.state.bounderRiskArray.length?l:_this.state.bounderRiskArray.length;var str=firstPage+' to '+lastPage+' out of '+_this.state.bounderRiskArray.length+' records';_this.setState({selectedPage:e.first,str:str,rowsPerPage:e.rows});};_this.openDeleteModal=function(rowData){_this.setState({toggleModal:!_this.state.toggleModal,deleteRiskLocatorId:rowData.id,deletecountry:rowData.country});};_this.toggleLarge=function(){_this.setState({toggleModal:false,deleteRiskLocatorId:'',deletecountry:''});};var columns=[{field:\"country\",header:\"Country\",sortable:true,filter:true,filterMatchMode:'contains',id:0},{body:_this.actionTemplate.bind(_assertThisInitialized(_this)),header:\"Action\",sortable:false,filter:false,filterMatchMode:'contains',id:1}];var orginial=_this.setState;// this.state = JSON.parse(localStorage.getItem('bounderriskstate'))\n//     ? JSON.parse(localStorage.getItem('bounderriskstate'))\n//     : \n_this.state={toggleModal:false,selectedLanguage:props.i18n.language==='en'?'en-GB':props.i18n.language==='es'?'es-ES':props.i18n.language==='ie'?'en-IE':props.i18n.language,cols:columns,country:\"\",BinderId:\"\",RiskLocatorId:\"\",countryError:false,bounderRiskArray:[],countryarr:[],selectedPage:0,rowsPerPageOptions:CommonConfig.dataTableConfig.rowsPerPageOptions,rowsPerPage:CommonConfig.dataTableConfig.rowsPerPage,globalFilter:null,paginatorTemplate:\"CurrentPageReport FirstPageLink PrevPageLink PageLinks NextPageLink LastPageLink RowsPerPageDropdown\"};_this.colOptions=[];for(var _i=0,_columns=columns;_i<_columns.length;_i++){var col=_columns[_i];_this.colOptions.push({label:col.header,value:col});}_this.onColumnToggle=_this.onColumnToggle.bind(_assertThisInitialized(_this));_this.actionTemplate=_this.actionTemplate.bind(_assertThisInitialized(_this));_this.export=_this.export.bind(_assertThisInitialized(_this));return _this;}_createClass(BounderOfRisk,[{key:\"componentWillUnmount\",value:function componentWillUnmount(){localStorage.removeItem('bounderriskstate');}},{key:\"editBounderRisk\",value:function editBounderRisk(event){var index=this.state.bounderRiskArray.findIndex(function(x){return x.country===event.country;});if(index!==-1){var data=this.state.bounderRiskArray[index];this.setState({country:data.country,RiskLocatorId:data.id});}}},{key:\"deleteBounderRisk\",value:function deleteBounderRisk(){var _this2=this;var data={\"RiskLocatorId\":this.state.deleteRiskLocatorId,\"UserId\":CommonConfig.loggedInUserId(),\"BinderId\":this.state.BinderId};console.log(data);api.post(APIConstant.path.deleteBounder,data).then(function(res){if(res.success){// let index = this.state.bounderRiskArray.findIndex(x => x.country === this.state.country);\n// if (index !== -1) {\n//     this.state.bounderRiskArray.splice(index, 1);\n//     this.setState({ bounderRiskArray: this.state.bounderRiskArray });\n// }\nif(res.data[0][0].ErrorMsg!==\"\"){toast.error(res.data[0][0].ErrorMsg);}else{toast.success(\"Risk Locator successfully deleted\");}_this2.getBounderRisk(_this2.state.BinderId);_this2.toggleLarge();}}).catch(function(err){console.log(err);});}},{key:\"onColumnToggle\",value:function onColumnToggle(event){var valueInOrder=event.value.sort(function(x,y){return x.id-y.id;});this.setState({cols:valueInOrder});}},{key:\"export\",value:function _export(){this.dt.exportCSV();}},{key:\"actionTemplate\",value:function actionTemplate(rowData,column){var _this3=this;return/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(Button,{type:\"button\",icon:\"pi pi-trash\",className:\"p-button-danger\",tooltip:\"Delete\",onClick:function onClick(){return _this3.openDeleteModal(rowData);},tooltipOptions:{position:'bottom'}}));}},{key:\"componentWillMount\",value:function componentWillMount(){}},{key:\"componentDidMount\",value:function componentDidMount(){this.getCountry();// this.getBounderRisk();\n}},{key:\"addBounderRisk\",value:function addBounderRisk(){var _this4=this;if(this.state.BinderId==\"\"){toast.error('To add Risk Locator Please Create New binder or edit existing Binder');}else if(this.state.country==''){toast.error('Please Select Country');}else{var data={\"BinderId\":this.state.BinderId,\"CountryId\":this.state.country,\"RiskLocatorId\":this.state.RiskLocatorId,\"UserId\":CommonConfig.loggedInUserId()};api.post(APIConstant.path.addRiskLocator,data).then(function(res){if(res.success){console.log(\"===========Bounder Class Created\");toast.success(res.data.message);_this4.getBounderRisk(_this4.state.BinderId);// setTimeout(function () {\n//     window.location.reload();\n// }, 2000);\n}}).catch(function(err){console.log(err);});this.setState({RiskLocatorId:\"\",country:\"\"});}}},{key:\"getBounderRisk\",value:function getBounderRisk(BinderId){var _this5=this;debugger;var data={\"BinderId\":BinderId,\"UserId\":CommonConfig.loggedInUserId()};api.post(APIConstant.path.getRiskLocator,data).then(function(res){console.log(res);if(res.success){console.log(\"===========Bounder Class Data\");console.log(res.data);var countryarr=_toConsumableArray(_this5.state.allcountryarr);// make a separate copy of the array\nvar _loop=function _loop(i){var index=countryarr.findIndex(function(x){return x.value===res.data[i].Country;});if(index!==-1){countryarr.splice(index,1);}};for(var i=0;i<res.data.length;i++){_loop(i);}_this5.setState({bounderRiskArray:res.data.map(function(obj){return{country:obj.Country,id:obj.RiskLocatorId};}),countryarr:countryarr});}}).catch(function(err){console.log(err);});}},{key:\"getCountry\",value:function getCountry(){var _this6=this;try{var data={stringmaptype:'COUNTRY'};api.post(APIConstant.path.dropdownbycode,data).then(function(res){if(res.success){console.log(\"COUNTRY\",res.data);var country=[];for(var i=0;i<res.data.length;i++){country.push({label:res.data[i].StringMapName,value:res.data[i].Description});}_this6.setState({allcountryarr:country});// if (this.props.match.params.constructor === Object && Object.keys(this.props.match.params).length !== 0) {\n//     this.setState({ BinderId: this.props.match.params.Id })\n//     this.getBounderRisk(this.props.match.params.Id)\n// }\nvar splitData=_this6.props.location.pathname.split(\"/\");// if (splitData[3] !== undefined) {\nif(!CommonConfig.isEmpty(splitData[3])){_this6.setState({BinderId:splitData[3]});_this6.getBounderRisk(splitData[3]);}}else{}}).catch(function(err){console.log(\"error\",err);});}catch(error){console.log(\"error\",error);}}},{key:\"render\",value:function render(){var _this7=this;var columns=this.state.cols.map(function(col,i){return/*#__PURE__*/React.createElement(Column,{key:i,field:col.field,header:col.header,body:col.body,sortable:col.sortable,filter:col.filter,filterMatchMode:col.filterMatchMode});});return/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"div\",{className:\"basic-header\"},/*#__PURE__*/React.createElement(\"div\",{className:\"input-box\"},/*#__PURE__*/React.createElement(Row,null,/*#__PURE__*/React.createElement(Col,{md:\"1\"},/*#__PURE__*/React.createElement(\"label\",null,\"Country\")),/*#__PURE__*/React.createElement(Col,{md:\"3\"},/*#__PURE__*/React.createElement(Input,{type:\"select\",name:\"country\",id:\"country\",onChange:function onChange(e){return _this7.selectType(e.target.value,'country');},value:this.state.country},/*#__PURE__*/React.createElement(\"option\",{value:\"\",disabled:\"disabled\"},\"Select Country\"),this.state.countryarr.map(function(type,i){return/*#__PURE__*/React.createElement(\"option\",{value:type.key},type.label);})),/*#__PURE__*/React.createElement(\"em\",{className:\"error invalid-feedback\"},\"Please select Country\")),/*#__PURE__*/React.createElement(Button,{style:{height:\"fit-content\"},type:\"button\",icon:this.state.RiskLocatorId==\"\"?\"pi pi-plus\":\"pi pi-pencil\",tooltip:this.state.BinderAuthorisedClassId==\"\"?\"Add Bounder Risk\":\"Update Bounder Risk\",tooltipOptions:{position:'bottom'},onClick:function onClick(){return _this7.addBounderRisk();}}))),/*#__PURE__*/React.createElement(\"div\",{className:\"header-right-option\"},/*#__PURE__*/React.createElement(MultiSelect,{value:this.state.cols,options:this.colOptions,fixedPlaceholder:true,placeholder:CommonConfig.dataTableConfig.columnToggleIcon,tooltip:\"Show / Hide Column\",onChange:this.onColumnToggle,style:{width:'50px'}}),/*#__PURE__*/React.createElement(Button,{type:\"button\",icon:\"pi pi-external-link\",tooltip:\"Export as CSV\",tooltipOptions:{position:'bottom'},onClick:this.export,style:{marginRight:10}}))),/*#__PURE__*/React.createElement(\"div\",{className:\"table-custom\"},/*#__PURE__*/React.createElement(DataTable,{ref:function ref(el){return _this7.dt=el;},value:this.state.bounderRiskArray,first:this.state.selectedPage,onPage:function onPage(e){return _this7.getPageString(e);},paginator:true,rows:this.state.rowsPerPage,totalRecords:this.state.bounderRiskArray.length,exportFilename:\"Risk Locator List\",currentPageReportTemplate:this.state.str,scrollable:true,scrollHeight:\"340px\",paginatorTemplate:this.state.paginatorTemplate,rowsPerPageOptions:this.state.rowsPerPageOptions,globalFilter:this.state.globalFilter,emptyMessage:\"No records found\",responsive:true,resizableColumns:true,columnResizeMode:\"fit\"//stateKey=\"contactList\" stateStorage=\"local\" header={header} \n},columns)),/*#__PURE__*/React.createElement(Modal,{isOpen:this.state.toggleModal,toggle:this.toggleLarge,className:'modal-lg '+this.props.className},/*#__PURE__*/React.createElement(ModalHeader,{toggle:this.toggleLarge},\"Delete Risk Locator\"),/*#__PURE__*/React.createElement(ModalBody,null,\"Are you sure, You want to delete \",this.state.deletecountry,\" Risk Locator?\"),/*#__PURE__*/React.createElement(ModalFooter,null,/*#__PURE__*/React.createElement(BTN,{color:\"success\",onClick:function onClick(){return _this7.deleteBounderRisk();}},/*#__PURE__*/React.createElement(\"i\",{class:\"fa fa-check\"}),\" Delete\"),' ',/*#__PURE__*/React.createElement(BTN,{color:\"primary\",onClick:this.toggleLarge},/*#__PURE__*/React.createElement(\"i\",{class:\"fa fa-close\"}),\"Cancel\"))));}}]);return BounderOfRisk;}(Component);export default withTranslation()(BounderOfRisk);","map":{"version":3,"sources":["/Users/bhavik/Downloads/Cognisun/Evolution/Evolution_React/evolution_new/src/views/Binder/AddUdateBinder/Info/BounderOfRisk.js"],"names":["React","Component","Col","Row","Modal","ModalBody","ModalHeader","ModalFooter","Button","BTN","Input","withTranslation","DataTable","Column","MultiSelect","InputText","toast","api","APIConstant","CommonConfig","BounderOfRisk","props","selectType","value","type","setState","country","getPageString","e","firstPage","first","l","rows","page","lastPage","state","bounderRiskArray","length","str","selectedPage","rowsPerPage","openDeleteModal","rowData","toggleModal","deleteRiskLocatorId","id","deletecountry","toggleLarge","columns","field","header","sortable","filter","filterMatchMode","body","actionTemplate","bind","orginial","selectedLanguage","i18n","language","cols","BinderId","RiskLocatorId","countryError","countryarr","rowsPerPageOptions","dataTableConfig","globalFilter","paginatorTemplate","colOptions","col","push","label","onColumnToggle","export","localStorage","removeItem","event","index","findIndex","x","data","loggedInUserId","console","log","post","path","deleteBounder","then","res","success","ErrorMsg","error","getBounderRisk","catch","err","valueInOrder","sort","y","dt","exportCSV","column","position","getCountry","addRiskLocator","message","getRiskLocator","allcountryarr","i","Country","splice","map","obj","stringmaptype","dropdownbycode","StringMapName","Description","splitData","location","pathname","split","isEmpty","target","key","height","BinderAuthorisedClassId","addBounderRisk","columnToggleIcon","width","marginRight","el","className","deleteBounderRisk"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\r\nimport 'primereact/resources/themes/nova-light/theme.css';\r\nimport 'primereact/resources/primereact.min.css';\r\nimport 'primeicons/primeicons.css';\r\nimport 'react-toastify/dist/ReactToastify.css';\r\nimport { Col, Row, Modal, ModalBody, ModalHeader, ModalFooter, Button as BTN, Input } from 'reactstrap';\r\nimport { withTranslation } from 'react-i18next';\r\nimport { DataTable } from 'primereact/datatable';\r\nimport { Column } from 'primereact/column';\r\nimport { MultiSelect } from 'primereact/multiselect';\r\nimport { InputText } from 'primereact/inputtext';\r\nimport { Button } from 'primereact/button';\r\nimport { toast } from 'react-toastify';\r\n\r\nimport api from '../../../../utils/apiClient';\r\n\r\nimport APIConstant, { CommonConfig } from '../../../../utils/constants';\r\n\r\nclass BounderOfRisk extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        let columns = [\r\n            { field: \"country\", header: \"Country\", sortable: true, filter: true, filterMatchMode: 'contains',id: 0 },\r\n            { body: this.actionTemplate.bind(this), header: \"Action\", sortable: false, filter: false, filterMatchMode: 'contains',id: 1 }\r\n        ];\r\n\r\n        const orginial = this.setState;\r\n        // this.state = JSON.parse(localStorage.getItem('bounderriskstate'))\r\n        //     ? JSON.parse(localStorage.getItem('bounderriskstate'))\r\n        //     : \r\n            this.state = {\r\n                toggleModal: false,\r\n                selectedLanguage: (props.i18n.language === 'en') ? 'en-GB' : (props.i18n.language === 'es') ? 'es-ES' : (props.i18n.language === 'ie') ? 'en-IE' : props.i18n.language,\r\n                cols: columns,\r\n                country: \"\",\r\n                BinderId: \"\",\r\n                RiskLocatorId: \"\",\r\n                countryError: false,\r\n                bounderRiskArray: [],\r\n                countryarr: [],\r\n                selectedPage: 0,\r\n                rowsPerPageOptions: CommonConfig.dataTableConfig.rowsPerPageOptions,\r\n                rowsPerPage: CommonConfig.dataTableConfig.rowsPerPage,\r\n                globalFilter: null,\r\n                paginatorTemplate: \"CurrentPageReport FirstPageLink PrevPageLink PageLinks NextPageLink LastPageLink RowsPerPageDropdown\"\r\n            };\r\n\r\n        this.colOptions = [];\r\n        for (let col of columns) {\r\n            this.colOptions.push({ label: col.header, value: col });\r\n        }\r\n\r\n        this.onColumnToggle = this.onColumnToggle.bind(this);\r\n        this.actionTemplate = this.actionTemplate.bind(this);\r\n        this.export = this.export.bind(this);\r\n    }\r\n\r\n    componentWillUnmount() {\r\n        localStorage.removeItem('bounderriskstate')\r\n    }\r\n\r\n    selectType = (value, type) => {\r\n        if (type == \"country\") {\r\n            this.setState({ country: value })\r\n        }\r\n    }\r\n\r\n\r\n    editBounderRisk(event) {\r\n        \r\n        let index = this.state.bounderRiskArray.findIndex(x => x.country === event.country);\r\n        if (index !== -1) {\r\n            let data = this.state.bounderRiskArray[index]\r\n            this.setState({\r\n                country: data.country,\r\n                RiskLocatorId: data.id\r\n            })\r\n        }\r\n    }\r\n\r\n    deleteBounderRisk() {\r\n\r\n        let data = {\r\n            \"RiskLocatorId\": this.state.deleteRiskLocatorId,\r\n            \"UserId\": CommonConfig.loggedInUserId(),\r\n            \"BinderId\": this.state.BinderId\r\n        }\r\n        console.log(data)\r\n\r\n        api.post(APIConstant.path.deleteBounder, data).then(res => {\r\n            if (res.success) {\r\n                // let index = this.state.bounderRiskArray.findIndex(x => x.country === this.state.country);\r\n                // if (index !== -1) {\r\n                //     this.state.bounderRiskArray.splice(index, 1);\r\n                //     this.setState({ bounderRiskArray: this.state.bounderRiskArray });\r\n                // }\r\n                if(res.data[0][0].ErrorMsg !== \"\"){\r\n                    toast.error(res.data[0][0].ErrorMsg);\r\n                } else {\r\n                    toast.success(\"Risk Locator successfully deleted\");\r\n                }\r\n                this.getBounderRisk(this.state.BinderId);\r\n                this.toggleLarge();\r\n            }\r\n        }).catch(err => {\r\n            console.log(err)\r\n        })\r\n\r\n\r\n    }\r\n\r\n    getPageString = (e) => {\r\n        let firstPage = e.first + 1;\r\n        let l = e.rows * (e.page + 1);\r\n        let lastPage = (l < this.state.bounderRiskArray.length) ? l : this.state.bounderRiskArray.length\r\n        var str = firstPage + ' to ' + lastPage + ' out of ' + this.state.bounderRiskArray.length + ' records';\r\n        this.setState({ selectedPage: e.first, str: str, rowsPerPage: e.rows });\r\n    }\r\n\r\n    onColumnToggle(event) {\r\n        let valueInOrder = event.value.sort((x, y) => { return x.id - y.id });\r\n        this.setState({ cols: valueInOrder });\r\n    }\r\n\r\n    export() {\r\n        this.dt.exportCSV();\r\n    }\r\n\r\n    actionTemplate(rowData, column) {\r\n        return <div>\r\n            {/* <Button type=\"button\" icon=\"pi pi-eye\" className=\"p-button-warning\" onClick={() => this.editBounderRisk(rowData)}\r\n                style={{ marginRight: '.5em' }} tooltip=\"View\" tooltipOptions={{ position: 'bottom' }}>\r\n            </Button> */}\r\n            {/* <Button type=\"button\" icon=\"pi pi-trash\" className=\"p-button-danger\" onClick={() => this.deleteBounderRisk(rowData)} tooltip=\"Delete\" tooltipOptions={{ position: 'bottom' }}></Button> */}\r\n            <Button type=\"button\" icon=\"pi pi-trash\" className=\"p-button-danger\" tooltip=\"Delete\" onClick={() => this.openDeleteModal(rowData)} tooltipOptions={{ position: 'bottom' }}></Button>\r\n                    </div>;\r\n    }\r\n\r\n    openDeleteModal = (rowData) => {\r\n        this.setState({\r\n            toggleModal: !this.state.toggleModal,\r\n            deleteRiskLocatorId: rowData.id,\r\n            deletecountry: rowData.country,\r\n        });\r\n    }\r\n\r\n    toggleLarge = () => {\r\n        this.setState({\r\n            toggleModal: false,\r\n            deleteRiskLocatorId: '',\r\n            deletecountry: ''\r\n        });\r\n    }\r\n\r\n    componentWillMount() {\r\n\r\n    }\r\n\r\n    componentDidMount() {\r\n        this.getCountry();\r\n\r\n        // this.getBounderRisk();\r\n    }\r\n\r\n    addBounderRisk() {\r\n        if(this.state.BinderId == \"\") {\r\n            toast.error('To add Risk Locator Please Create New binder or edit existing Binder');\r\n        }\r\n        else if(this.state.country == '') {\r\n            toast.error('Please Select Country');\r\n        }\r\n        else {\r\n            let data = {\r\n            \"BinderId\": this.state.BinderId,\r\n            \"CountryId\": this.state.country,\r\n            \"RiskLocatorId\": this.state.RiskLocatorId,\r\n            \"UserId\": CommonConfig.loggedInUserId()\r\n            }\r\n            api.post(APIConstant.path.addRiskLocator, data).then(res => {\r\n                if (res.success) {\r\n                    console.log(\"===========Bounder Class Created\")\r\n                    toast.success(res.data.message);\r\n                    this.getBounderRisk(this.state.BinderId);\r\n                    // setTimeout(function () {\r\n                    //     window.location.reload();\r\n                    // }, 2000);\r\n                }\r\n            }).catch(err => {\r\n                console.log(err)\r\n            })\r\n            this.setState({\r\n                RiskLocatorId: \"\",\r\n                country: \"\"\r\n\r\n            })\r\n            }\r\n    }\r\n\r\n    getBounderRisk(BinderId) {\r\n        debugger;\r\n        let data = {\r\n            \"BinderId\": BinderId,\r\n            \"UserId\": CommonConfig.loggedInUserId()\r\n        }\r\n        api.post(APIConstant.path.getRiskLocator, data).then(res => {\r\n            console.log(res)\r\n            if (res.success) {\r\n                console.log(\"===========Bounder Class Data\")\r\n                console.log(res.data)\r\n                \r\n                var countryarr = [...this.state.allcountryarr]; // make a separate copy of the array\r\n\r\n                for (let i = 0; i < res.data.length; i++) {\r\n                    let index = countryarr.findIndex(x => x.value === res.data[i].Country);\r\n                    if (index !== -1) {\r\n                        countryarr.splice(index, 1);\r\n                    }\r\n                }\r\n                \r\n                \r\n                this.setState({\r\n                    bounderRiskArray: res.data.map((obj) => {\r\n                        return {\r\n                            country: obj.Country,\r\n                            id: obj.RiskLocatorId\r\n                        }\r\n                    }),\r\n                    countryarr: countryarr\r\n                })\r\n            }\r\n        }).catch(err => {\r\n            console.log(err)\r\n        });\r\n    }\r\n\r\n    getCountry() {\r\n        try {\r\n            const data = {\r\n                stringmaptype: 'COUNTRY',\r\n            };\r\n            api.post(APIConstant.path.dropdownbycode, data).then(res => {\r\n                if (res.success) {\r\n                    console.log(\"COUNTRY\", res.data);\r\n                    var country = [];\r\n                    for (let i = 0; i < res.data.length; i++) {\r\n                        country.push({\r\n                            label: res.data[i].StringMapName,\r\n                            value: res.data[i].Description\r\n                        })\r\n                    }\r\n                    this.setState({ allcountryarr: country });\r\n                    // if (this.props.match.params.constructor === Object && Object.keys(this.props.match.params).length !== 0) {\r\n                    //     this.setState({ BinderId: this.props.match.params.Id })\r\n                    //     this.getBounderRisk(this.props.match.params.Id)\r\n                        \r\n                    // }\r\n                    var splitData = this.props.location.pathname.split(\"/\");\r\n                    // if (splitData[3] !== undefined) {\r\n                    if (!CommonConfig.isEmpty(splitData[3])) {\r\n                        this.setState({ BinderId: splitData[3] })\r\n                        this.getBounderRisk(splitData[3])\r\n                    } \r\n                } else {\r\n\r\n                }\r\n            }).catch(err => {\r\n                console.log(\"error\", err);\r\n            });\r\n        } catch (error) {\r\n            console.log(\"error\", error);\r\n\r\n        }\r\n    }\r\n\r\n    render() {\r\n\r\n        let columns = this.state.cols.map((col, i) => {\r\n            return <Column key={i} field={col.field} header={col.header} body={col.body} sortable={col.sortable} filter={col.filter}  filterMatchMode={col.filterMatchMode}/>;\r\n        });\r\n\r\n        return (\r\n            <div>\r\n                <div className=\"basic-header\">\r\n                    <div className=\"input-box\">\r\n                        <Row>\r\n                            <Col md=\"1\">\r\n                                <label>Country</label>\r\n                            </Col>\r\n                            <Col md=\"3\">\r\n                                <Input type=\"select\" name=\"country\" id=\"country\" onChange={(e) => this.selectType(e.target.value, 'country')} value={this.state.country}>\r\n                                    <option value='' disabled={\"disabled\"}>Select Country</option>\r\n\r\n                                    {this.state.countryarr.map((type, i) => {\r\n                                        return (<option value={type.key}>{type.label}</option>)\r\n                                    })\r\n                                    }\r\n\r\n                                </Input>\r\n                                <em className=\"error invalid-feedback\" >Please select Country</em>\r\n                            </Col>\r\n                            <Button style={{ height: \"fit-content\" }} type=\"button\" icon={this.state.RiskLocatorId == \"\" ? \"pi pi-plus\" : \"pi pi-pencil\"} tooltip={this.state.BinderAuthorisedClassId == \"\" ? \"Add Bounder Risk\" : \"Update Bounder Risk\"} tooltipOptions={{ position: 'bottom' }} onClick={() => this.addBounderRisk()}></Button>\r\n                        </Row>\r\n                    </div>\r\n                    <div className=\"header-right-option\">\r\n                        <MultiSelect value={this.state.cols} options={this.colOptions}\r\n                            fixedPlaceholder={true} placeholder={CommonConfig.dataTableConfig.columnToggleIcon} tooltip=\"Show / Hide Column\"\r\n                            onChange={this.onColumnToggle} style={{ width: '50px' }}\r\n                        />\r\n                        <Button type=\"button\" icon=\"pi pi-external-link\" tooltip=\"Export as CSV\" tooltipOptions={{ position: 'bottom' }} onClick={this.export} style={{ marginRight: 10 }}></Button>\r\n                    </div>\r\n                </div>\r\n                <div className=\"table-custom\">\r\n                    <DataTable ref={(el) => this.dt = el} value={this.state.bounderRiskArray} first={this.state.selectedPage} onPage={(e) => this.getPageString(e)}\r\n                        paginator={true} rows={this.state.rowsPerPage} totalRecords={this.state.bounderRiskArray.length} exportFilename=\"Risk Locator List\"\r\n                        currentPageReportTemplate={this.state.str} scrollable={true} scrollHeight=\"340px\"\r\n                        paginatorTemplate={this.state.paginatorTemplate}\r\n                        rowsPerPageOptions={this.state.rowsPerPageOptions} globalFilter={this.state.globalFilter} emptyMessage=\"No records found\"\r\n                        responsive={true} resizableColumns={true} columnResizeMode=\"fit\" //stateKey=\"contactList\" stateStorage=\"local\" header={header} \r\n                    >{columns}</DataTable>\r\n                </div>\r\n\r\n                <Modal isOpen={this.state.toggleModal} toggle={this.toggleLarge}\r\n                    className={'modal-lg ' + this.props.className}>\r\n                    <ModalHeader toggle={this.toggleLarge}>Delete Risk Locator</ModalHeader>\r\n                    <ModalBody>\r\n                        Are you sure, You want to delete {this.state.deletecountry} Risk Locator?\r\n                    </ModalBody>\r\n                    <ModalFooter>\r\n                        <BTN color=\"success\" onClick={() => this.deleteBounderRisk()}><i class=\"fa fa-check\"></i> Delete</BTN>{' '}\r\n                        <BTN color=\"primary\" onClick={this.toggleLarge}><i class=\"fa fa-close\"></i>Cancel</BTN>\r\n                    </ModalFooter>\r\n                </Modal>\r\n\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nexport default withTranslation()(BounderOfRisk);"]},"metadata":{},"sourceType":"module"}