{"ast":null,"code":"import _defineProperty from\"/Users/bhavik/Downloads/Cognisun/Evolution/Evolution_React/evolution_new/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _classCallCheck from\"/Users/bhavik/Downloads/Cognisun/Evolution/Evolution_React/evolution_new/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/bhavik/Downloads/Cognisun/Evolution/Evolution_React/evolution_new/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _assertThisInitialized from\"/Users/bhavik/Downloads/Cognisun/Evolution/Evolution_React/evolution_new/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";import _inherits from\"/Users/bhavik/Downloads/Cognisun/Evolution/Evolution_React/evolution_new/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/bhavik/Downloads/Cognisun/Evolution/Evolution_React/evolution_new/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component}from'react';import Select from'react-select';import api from'../../utils/apiClient';import moment from'moment';import DatePicker from'react-date-picker';import{withTranslation}from'react-i18next';import{DataTable}from'primereact/datatable';import{Column}from'primereact/column';import{CommonConfig}from'../../utils/constants';import{Button}from'primereact/button';import{MultiSelect}from'primereact/multiselect';import{Collapse,Button as BTN,Input,Card,CardHeader,InputGroup,CardBody,Row,Col}from'reactstrap';import APIConstant from'../../utils/constants';import'primereact/resources/themes/nova-light/theme.css';import'primereact/resources/primereact.min.css';import'primeicons/primeicons.css';import{Modal,ModalBody,ModalHeader,ModalFooter}from'reactstrap';import{toast}from'react-toastify';import{apiBase}from'../../utils/config';import axios from'axios';import SearchBox from'react-google-maps/lib/components/places/SearchBox';var SubAgentAutoStatementSummary=/*#__PURE__*/function(_Component){_inherits(SubAgentAutoStatementSummary,_Component);var _super=_createSuper(SubAgentAutoStatementSummary);function SubAgentAutoStatementSummary(props){var _this;_classCallCheck(this,SubAgentAutoStatementSummary);_this=_super.call(this,props);_this.downloadData=function(rowdata){console.log(\"downloadData---rowdata\",rowdata);var path=apiBase+\"SubAgentStatement/\"+rowdata.StatementReferenceName;var filext=_this.getFileExtension(rowdata.StatementReferenceName);console.log(\"filext\",filext);var fileName=rowdata.StatementReferenceName;if(filext==undefined){fileName=rowdata.StatementReferenceName+\".\"+rowdata.type;}axios({url:path,method:'GET',responseType:'blob'// important\n}).then(function(response){var url=window.URL.createObjectURL(new Blob([response.data]));var link=document.createElement('a');link.href=url;link.setAttribute('download',fileName);//or any other extension\ndocument.body.appendChild(link);link.click();});};_this.getFileExtension=function(filename){return /[.]/.exec(filename)?/[^.]+$/.exec(filename)[0]:undefined;};_this.getPageString=function(e){var firstPage=e.first+1;var l=e.rows*(e.page+1);var lastPage=l<_this.state.arr.length?l:_this.state.arr.length;var str=firstPage+' to '+lastPage+' out of '+_this.state.arr.length+' records';_this.setState({selectedPage:e.first,str:str,rowsPerPage:e.rows});};_this.handleChange=function(e){_this.setState(_defineProperty({},e.target.name,e.target.value));if(e.target.name==='tillDate'){_this.setState({tillDate:e.target.value,tillDateError:false});_this.show('tillDate',false,'tillDateError','');}if(e.target.name==='newEntryDate'){if(CommonConfig.isEmpty(e.target.value)){_this.setState({newEntryDateError:true});_this.show(\"newEntryDate\",true,\"newEntryDateError\",\"Please enter date\");}else{_this.setState({newEntryDateError:false,newEntryDate:e.target.value});_this.show(\"newEntryDate\",false,\"newEntryDateError\",\"\");}}if(e.target.name==='policyFrom'){if(e.target.value===''||e.target.value===null){_this.setState({policyFrom:''});}else{_this.setState({policyFrom:e.target.value,policyTo:''});_this.show('policyTo',false,'policyToError','');}}if(e.target.name==='policyTo'){if(e.target.value===''||e.target.value===null){_this.setState({policyTo:''});}else{if(!CommonConfig.isEmpty(_this.state.policyFrom)){var isToDateGreater=moment(e.target.value).isSameOrAfter(_this.state.policyFrom);if(!isToDateGreater){_this.show('policyTo',true,'policyToError','To date must be greater then From date.');}else{_this.show('policyTo',false,'policyToError','');}}else{_this.show('policyTo',false,'policyToError','');}_this.setState({policyTo:e.target.value});}}};var columns=[{field:\"SubAgentName\",header:\"Sub Agent Name\",sortable:true,filter:true,id:0,style:{'width':'100px'}},{field:\"SubAgentCode\",header:\"Sub Agent Code\",sortable:true,filter:true,id:1,style:{'width':'60px'}},{field:\"ReportMonth\",header:\"Month\",sortable:true,filter:true,id:2,style:{'width':'60px'}},{field:\"ReportYear\",header:\"Year\",sortable:true,filter:true,id:3,style:{'width':'60px'}},{field:\"StatementReferenceName\",header:\"Referance Name\",sortable:true,filter:true,id:4,style:{'width':'100px'}},{field:\"CreatedOn\",header:\"Generated On\",sortable:true,filter:true,id:5,style:{'width':'60px'}},{field:\"SentDate\",header:\"Sent On\",sortable:true,filter:true,id:6,style:{'width':'60px'}},{field:\"Stage\",header:\"Stage\",sortable:true,filter:true,id:7,style:{'width':'60px'}},{body:_this.linkdata.bind(_assertThisInitialized(_this)),field:\"Action\",header:\"Action\",sortable:false,filterMatchMode:'contains',filter:false,style:{'width':'160px'},id:8}];var columns1=[{field:\"AgentName\",header:\"Agent Name\",sortable:true,filter:true,id:0,style:{'width':'100px'}},{field:\"ClientName\",header:\"Client\",sortable:true,filter:true,id:0,style:{'width':'100px'}},{field:\"PolicyNumber\",header:\"Policy Number\",sortable:true,filter:true,id:1,style:{'width':'60px'}},{field:\"RenewalDate\",header:\"Renewal Date\",sortable:true,filter:true,id:2,style:{'width':'80px'}},// { field: \"InceptionDate\", header: \"Inception Date\", sortable: true, filter: true, id: 3, style: { 'width': '80px' } },\n{field:\"TransactionDate\",header:\"Transaction Date\",sortable:true,filter:true,id:4,style:{'width':'80px'}},{field:\"TransactionType\",header:\"Transaction Type\",sortable:true,filter:true,id:5,style:{'width':'90px'}},{field:\"NetPremium\",header:\"Net Premium\",sortable:true,filter:true,id:6,style:{'width':'60px','textAlign':'right'}},{field:\"Levy\",header:\"Levy\",sortable:true,filter:true,id:7,style:{'width':'60px','textAlign':'right'}},{field:\"AdminFeeAmount\",header:\"Admin Fee\",sortable:true,filter:true,id:8,style:{'width':'60px','textAlign':'right'}},{field:\"Gross\",header:\"Gross Amount\",sortable:true,filter:true,id:9,style:{'width':'60px','textAlign':'right'}},{field:\"AgentCommissionAmount\",header:\"Agent Commission Amount\",sortable:true,filter:true,id:12,style:{'width':'60px','textAlign':'right'}},{field:\"YCommissionAmount\",header:\"Amount Due to Yachtsman\",sortable:true,filter:true,id:13,style:{'width':'60px','textAlign':'right'}},{field:\"DueDate\",header:\"Due Date\",sortable:true,filter:true,id:14,style:{'width':'80px'}}// { field: \"PaidAmount\", header: \"Paid Amount\", sortable: true, filter: true, id: 15, style: { 'width': '60px', 'textAlign': 'right' } },\n];_this.state={LanguageId:props.i18n.language==='en'?'en-GB':props.i18n.language==='es'?'es-ES':props.i18n.language==='ie'?'en-IE':props.i18n.language,cols:columns,cols1:columns1,showcol2:false,arr:[],arr1:[],selectedPage:0,rowsPerPageOptions:CommonConfig.dataTableConfig.rowsPerPageOptions,str:'',rowsPerPage:CommonConfig.dataTableConfig.rowsPerPage,globalFilter:null,searchCollapse:false,selected:{},selectedPolicy:0,selectedAgent:'',selectAll:0,isMonthYear:true,newEntryDate:moment().format('YYYY-MM-DD'),newEntryDateError:false,paymentMode:'',paymentModearr:[],paymentModeError:false,monthArray:[],policyMonth:moment().format('M'),policyMonthError:false,yearArray:[],policyYear:moment().format('YYYY'),policyYearError:false,policyFrom:'',policyFromError:false,policyTo:'',policyToError:false,note:'',DebtorType:'SubAgent',DebtorTypeError:false,agentinfo:'',agentinfoError:false,tillDate:moment().format(\"YYYY-MM\"),tillDateError:false,isFilterTableShow:false,custom:true,tab2Title:\"Sub Agent Statements\"};_this.colOptions=[];for(var _i=0,_columns=columns;_i<_columns.length;_i++){var col=_columns[_i];_this.colOptions.push({label:col.header,value:col});}_this.colOptions1=[];for(var _i2=0,_columns2=columns1;_i2<_columns2.length;_i2++){var _col=_columns2[_i2];_this.colOptions1.push({label:_col.header,value:_col});}return _this;}_createClass(SubAgentAutoStatementSummary,[{key:\"linkdata\",value:function linkdata(rowData){var _this2=this;var path=apiBase+\"SubAgentStatement/\"+rowData.StatementReferenceName;return/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(BTN,{color:\"warning\",title:\"Search\",onClick:function onClick(){return _this2.viewSubAgentDetail(rowData.id);},style:{marginRight:\"10px\"}},\" \",/*#__PURE__*/React.createElement(\"i\",{class:\"fa fa-eye\"}),\" \"),rowData.StatementReferenceName.substring(rowData.StatementReferenceName.length-4)=='xlsx'?/*#__PURE__*/React.createElement(BTN,{color:\"primary\",title:\"Search\",style:{marginRight:\"10px\"},onClick:function onClick(){return _this2.downloadData(rowData);}},\" \",/*#__PURE__*/React.createElement(\"i\",{class:\"fa fa-download\"}),\" \"):null,rowData.Stage==\"Review\"?/*#__PURE__*/React.createElement(BTN,{color:\"success\",title:\"change to Release\",onClick:function onClick(){return _this2.changeStage(rowData.id,\"ReleaseAuto\");}},\" change to Release Auto \"):rowData.Stage==\"ReleaseAuto\"?/*#__PURE__*/React.createElement(BTN,{color:\"secondary\",title:\"change to Review\",onClick:function onClick(){return _this2.changeStage(rowData.id,\"Review\");}},\" change to Review \"):null);}},{key:\"actionTemplate\",value:function actionTemplate(rowData,column){}},{key:\"componentDidMount\",value:function componentDidMount(){var loginPerson=CommonConfig.loggedInUserData().LoginId;this.setState({loggingUserId:loginPerson});this.getDropdown();}},{key:\"getDropdown\",value:function getDropdown(){// Get Month\nvar monthArray=[{label:'January',value:1},{label:'February',value:2},{label:'March',value:3},{label:'April',value:4},{label:'May',value:5},{label:'June',value:6},{label:'July',value:7},{label:'August',value:8},{label:'September',value:9},{label:'October',value:10},{label:'November',value:11},{label:'December',value:12}];this.setState({monthArray:monthArray});// Get Year - Get last 10 year from current year\nvar startYear=moment().format('YYYY');var yearArray=[];for(var index=startYear;index>=parseInt(startYear)-10;index--){yearArray.push({label:index,value:index});}this.setState({yearArray:yearArray});}},{key:\"customExport\",// export() {\n//     // this.dt.exportCSV();\n// }\nvalue:function customExport(){debugger;var data={id:this.state.selectedAgent};api.post('api/testExcel',data).then(function(res){console.log(\"testExcel\",res);if(res.success){}});}},{key:\"filterData\",value:function filterData(){console.log(\"this.state.policyMonth\",this.state.policyMonth);if(CommonConfig.isEmpty(this.state.policyMonth)||CommonConfig.isEmpty(this.state.policyYear)){toast.error('Please select Month and Year.');return false;}this.subagentstatement();}},{key:\"changeStage\",value:function changeStage(id,stage){var _this3=this;var data={id:id?id:'',stage:stage?stage:'',CurrentUserId:this.state.loggingUserId?this.state.loggingUserId:''};api.post('api/SubAgentAutoUpadateStage',data).then(function(res){console.log(\"autosubagentstatement\",res);if(res.success){_this3.filterData();toast.success('Stage changed successful');}});}},{key:\"subagentstatement\",value:function subagentstatement(){var _this4=this;var data={policyMonth:this.state.policyMonth?this.state.policyMonth:'',policyYear:this.state.policyYear?this.state.policyYear:''};api.post('api/autosubagentstatement',data).then(function(res){console.log(\"autosubagentstatement\",res);if(res.success){var formattedData=[];_this4.setState({selectedPage:0});debugger;var dataLength=res.data[0].length;if(dataLength>0){for(var i=0;i<dataLength;i++){var tempData=res.data[0][i];formattedData.push({id:tempData.SubAgentStatementHeaderId,SubAgentName:tempData.SubAgentName,SubAgentCode:tempData.AgentContactCode,ReportMonth:tempData.ReportMonth,ReportYear:tempData.ReportYear,StatementReferenceName:tempData.StatementReferenceName,CreatedOn:moment(tempData.CreatedOn).format('DD/MM/YYYY'),SentDate:CommonConfig.isEmpty(tempData.SentDate)?\"\":moment(tempData.SentDate).format('DD/MM/YYYY'),Stage:tempData.Stage});}}var firstPage=formattedData.length?'1':'0';var lastPage=_this4.state.rowsPerPage<formattedData.length?_this4.state.rowsPerPage:formattedData.length;var str=firstPage+' to '+lastPage+' out of '+formattedData.length+' records';_this4.setState({arr:formattedData,str:str,isFilterTableShow:true});}});}},{key:\"viewSubAgentDetail\",value:function viewSubAgentDetail(id){var _this5=this;var data={id:id};api.post('api/viewAutoSubAgentStatement',data).then(function(res){console.log(\"viewAutoSubAgentStatement\",res);if(res.success){var formattedData=[];_this5.setState({selectedPage:0});debugger;var dataLength=res.data[0].length;if(dataLength>0){var NetPremium=0;var Levy=0;var PaidAmount=0;var Gross=0;var AdminFeeAmount=0;var AgentCommissionAmount=0;var YCommissionAmount=0;for(var i=0;i<dataLength;i++){var tempData=res.data[0][i];formattedData.push({id:i,AgentName:tempData.AgentName,ClientName:tempData.ClientName,PolicyNumber:tempData.PolicyNumber,RenewalDate:moment(tempData.RenewalDate).format('DD/MM/YYYY'),TransactionDate:moment(tempData.TransactionDate).format('DD/MM/YYYY'),TransactionType:tempData.TransactionType,AgentCommissionAmount:parseFloat(tempData.AgentCommissionAmount?tempData.AgentCommissionAmount:0).toFixed(2),AdminFeeAmount:parseFloat(tempData.AdminFee?tempData.AdminFee:0).toFixed(2),YCommissionAmount:parseFloat(tempData.AmountDueToYachtsman?tempData.AmountDueToYachtsman:0).toFixed(2),DueDate:moment(tempData.DueDate).format('DD/MM/YYYY'),Gross:parseFloat(tempData.GrossAmount?tempData.GrossAmount:0).toFixed(2),NetPremium:parseFloat(tempData.NetPremium?tempData.NetPremium:0).toFixed(2),Levy:parseFloat(tempData.Levy?tempData.Levy:0).toFixed(2)});NetPremium=NetPremium+tempData.NetPremium;Levy=Levy+tempData.Levy;// PaidAmount = PaidAmount + tempData.PaymentAmount;\nGross=Gross+tempData.GrossAmount;AdminFeeAmount=AdminFeeAmount+tempData.AdminFee;AgentCommissionAmount=AgentCommissionAmount+tempData.AgentCommissionAmount;YCommissionAmount=YCommissionAmount+tempData.AmountDueToYachtsman;}formattedData.push({Gross:parseFloat(Gross).toFixed(2),NetPremium:parseFloat(NetPremium).toFixed(2),Levy:parseFloat(Levy).toFixed(2),// PaidAmount: parseFloat(PaidAmount).toFixed(2),\nAdminFeeAmount:parseFloat(AdminFeeAmount).toFixed(2),AgentCommissionAmount:parseFloat(AgentCommissionAmount).toFixed(2),YCommissionAmount:parseFloat(YCommissionAmount).toFixed(2)});}var firstPage=formattedData.length?'1':'0';var lastPage=_this5.state.rowsPerPage<formattedData.length?_this5.state.rowsPerPage:formattedData.length;var str=firstPage+' to '+lastPage+' out of '+formattedData.length+' records';_this5.setState({arr1:formattedData,str:str,isFilterTableShow:false,selectedAgent:id});}});}},{key:\"selectType\",value:function selectType(value,type){if(type==='DebtorType'){this.setState({DebtorTypeError:false,DebtorType:value});this.show('DebtorType',false,\"DebtorTypeError\",\"\");this.getOrganazationData(value);}if(type==='paymentMode'){if(CommonConfig.isEmpty(value)){this.setState({paymentModeError:true,paymentMode:value});this.show('paymentMode',true,\"paymentModeError\",\"Select payment mode\");}else{this.setState({paymentModeError:false,paymentMode:value});this.show('paymentMode',false,\"paymentModeError\",\"\");}}if(type==='agentinfo'){this.setState({agentinfo:value,DebtorType:'SubAgent'});}if(type==='policyMonth'){if(value===''||value===undefined||value===null){this.setState({policyMonth:''});}else{this.setState({policyMonth:value.value});}}if(type==='policyYear'){if(value===''||value===undefined||value===null){this.setState({policyYear:''});}else{this.setState({policyYear:value.value});}}}},{key:\"render\",value:function render(){var _this6=this;var t=this.props.t;var header=null;var columns='';var columns1='';// if (this.state.agentinfo == '') {\ncolumns=this.state.cols.map(function(col,i){return/*#__PURE__*/React.createElement(Column,{key:i,field:col.field,header:col.header,body:col.body,sortable:col.sortable,filter:col.filter,filterMatchMode:col.filterMatchMode,style:col.style});});if(this.state.arr1.length>0){columns1=this.state.cols1.map(function(col1,i){return/*#__PURE__*/React.createElement(Column,{key:i,field:col1.field,header:col1.header,body:col1.body,sortable:col1.sortable,filter:col1.filter,filterMatchMode:col1.filterMatchMode,style:col1.style});});}else{columns=this.state.cols.map(function(col,i){return/*#__PURE__*/React.createElement(Column,{key:i,field:col.field,header:col.header,body:col.body,sortable:col.sortable,filter:col.filter,filterMatchMode:col.filterMatchMode,style:col.style});});}return/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"div\",{className:\"basic-header\"},/*#__PURE__*/React.createElement(\"h1\",null,\"Auto Sub Agent Statement\"),/*#__PURE__*/React.createElement(\"div\",{md:\"3\",className:\"header-right-option\"},/*#__PURE__*/React.createElement(MultiSelect,{value:this.state.cols,options:this.colOptions,fixedPlaceholder:true,placeholder:CommonConfig.dataTableConfig.columnToggleIcon,tooltip:\"Show / Hide Column\",tooltipOptions:{position:'bottom'},onChange:this.onColumnToggle,style:{width:'50px'}}))),/*#__PURE__*/React.createElement(\"div\",{className:\"input-box\",id:\"accordion\"},/*#__PURE__*/React.createElement(Card,{className:\"mb-0\"},/*#__PURE__*/React.createElement(CardHeader,{id:\"headingOne\"},/*#__PURE__*/React.createElement(BTN,{block:true,color:\"link\",className:\"text-left m-0 p-0\",onClick:function onClick(){return _this6.setState({custom:!_this6.state.custom});},\"aria-expanded\":this.state.custom,\"aria-controls\":\"collapseOne\"},/*#__PURE__*/React.createElement(\"h5\",{className:\"m-0 p-0\"},\"Search Sub Agent\",/*#__PURE__*/React.createElement(\"i\",{style:{float:'right'},className:this.state.custom?\"fa fa-chevron-down\":\"fa fa-chevron-up\"})))),/*#__PURE__*/React.createElement(Collapse,{isOpen:this.state.custom,\"data-parent\":\"#accordion\",id:\"collapseOne\",\"aria-labelledby\":\"headingOne\"},/*#__PURE__*/React.createElement(CardBody,null,/*#__PURE__*/React.createElement(\"div\",{className:\"filter-data\"},/*#__PURE__*/React.createElement(Row,null,/*#__PURE__*/React.createElement(Col,{md:\"1.5\"},/*#__PURE__*/React.createElement(\"div\",{className:\"input-box\"},/*#__PURE__*/React.createElement(\"label\",null,\"Month\"),/*#__PURE__*/React.createElement(Input,{type:\"select\",name:\"policyMonth\",id:\"policyMonth\",value:this.state.policyMonth,onChange:function onChange(e){return _this6.selectType(e.target,'policyMonth');}},/*#__PURE__*/React.createElement(\"option\",{value:\"\"},\"Select Month\"),this.state.monthArray.map(function(month,i){return/*#__PURE__*/React.createElement(\"option\",{value:month.value,key:i},month.label);})),/*#__PURE__*/React.createElement(\"em\",{id:\"policyMonthError\",className:\"error invalid-feedback\"}))),/*#__PURE__*/React.createElement(Col,{md:\"2\"},/*#__PURE__*/React.createElement(\"div\",{className:\"input-box\"},/*#__PURE__*/React.createElement(\"label\",null,\"Year\"),/*#__PURE__*/React.createElement(Input,{type:\"select\",name:\"policyYear\",id:\"policyYear\",value:this.state.policyYear,onChange:function onChange(e){return _this6.selectType(e.target,'policyYear');}},/*#__PURE__*/React.createElement(\"option\",{value:\"\"},\"Select Year\"),this.state.yearArray.map(function(year,i){return/*#__PURE__*/React.createElement(\"option\",{value:year.value,key:i},year.label);})),/*#__PURE__*/React.createElement(\"em\",{id:\"policyYearError\",className:\"error invalid-feedback\"}))),/*#__PURE__*/React.createElement(Col,{md:\"2.5\",style:{marginTop:'20px'}},/*#__PURE__*/React.createElement(BTN,{color:\"success\",title:\"Search\",onClick:function onClick(){return _this6.filterData();}},\" Search \")))))))),/*#__PURE__*/React.createElement(\"div\",{className:\"input-box\",id:\"accordion\"},/*#__PURE__*/React.createElement(Card,{className:\"mb-0\"},/*#__PURE__*/React.createElement(CardHeader,{id:\"headingOne\"},/*#__PURE__*/React.createElement(BTN,{block:true,color:\"link\",className:\"text-left m-0 p-0\",onClick:function onClick(){return _this6.setState({isFilterTableShow:!_this6.state.isFilterTableShow});},\"aria-expanded\":this.state.isFilterTableShow,\"aria-controls\":\"collapseOne\"},/*#__PURE__*/React.createElement(\"h5\",{className:\"m-0 p-0\"},/*#__PURE__*/React.createElement(\"span\",null,this.state.tab2Title),/*#__PURE__*/React.createElement(\"i\",{style:{float:'right'},className:this.state.isFilterTableShow?\"fa fa-chevron-down\":\"fa fa-chevron-up\"})))),/*#__PURE__*/React.createElement(Collapse,{isOpen:this.state.isFilterTableShow,\"data-parent\":\"#accordion\",id:\"collapseOne\",\"aria-labelledby\":\"headingOne\"},/*#__PURE__*/React.createElement(CardBody,null,/*#__PURE__*/React.createElement(DataTable,{ref:function ref(el){return _this6.dt=el;},value:this.state.arr,first:this.state.selectedPage,onPage:function onPage(e){return _this6.getPageString(e);},paginator:true,rows:this.state.rowsPerPage,header:header,totalRecords:this.state.arr.length,exportFilename:\"Sub Agent Statement\",currentPageReportTemplate:this.state.str,scrollable:true,paginatorTemplate:\"CurrentPageReport FirstPageLink PrevPageLink PageLinks NextPageLink LastPageLink RowsPerPageDropdown\",rowsPerPageOptions:this.state.rowsPerPageOptions,globalFilter:this.state.globalFilter,emptyMessage:\"No records found\",responsive:true,resizableColumns:true,columnResizeMode:\"expand\"},columns))))),this.state.arr1.length>0?/*#__PURE__*/React.createElement(\"div\",{className:\"table-custom\"},/*#__PURE__*/React.createElement(DataTable,{ref:function ref(el){return _this6.dt=el;},value:this.state.arr1,first:this.state.selectedPage,onPage:function onPage(e){return _this6.getPageString(e);},paginator:true,rows:this.state.rowsPerPage,header:header,totalRecords:this.state.arr.length,exportFilename:\"Sub Agent Statement\",currentPageReportTemplate:this.state.str,scrollable:true,paginatorTemplate:\"CurrentPageReport FirstPageLink PrevPageLink PageLinks NextPageLink LastPageLink RowsPerPageDropdown\",rowsPerPageOptions:this.state.rowsPerPageOptions,globalFilter:this.state.globalFilter,emptyMessage:\"No records found\",responsive:true,resizableColumns:true,columnResizeMode:\"expand\"},columns1)):null);}}]);return SubAgentAutoStatementSummary;}(Component);export default withTranslation()(SubAgentAutoStatementSummary);","map":{"version":3,"sources":["/Users/bhavik/Downloads/Cognisun/Evolution/Evolution_React/evolution_new/src/views/Reports/subAgentAutoStatementSummary.js"],"names":["React","Component","Select","api","moment","DatePicker","withTranslation","DataTable","Column","CommonConfig","Button","MultiSelect","Collapse","BTN","Input","Card","CardHeader","InputGroup","CardBody","Row","Col","APIConstant","Modal","ModalBody","ModalHeader","ModalFooter","toast","apiBase","axios","SearchBox","SubAgentAutoStatementSummary","props","downloadData","rowdata","console","log","path","StatementReferenceName","filext","getFileExtension","fileName","undefined","type","url","method","responseType","then","response","window","URL","createObjectURL","Blob","data","link","document","createElement","href","setAttribute","body","appendChild","click","filename","exec","getPageString","e","firstPage","first","l","rows","page","lastPage","state","arr","length","str","setState","selectedPage","rowsPerPage","handleChange","target","name","value","tillDate","tillDateError","show","isEmpty","newEntryDateError","newEntryDate","policyFrom","policyTo","isToDateGreater","isSameOrAfter","columns","field","header","sortable","filter","id","style","linkdata","bind","filterMatchMode","columns1","LanguageId","i18n","language","cols","cols1","showcol2","arr1","rowsPerPageOptions","dataTableConfig","globalFilter","searchCollapse","selected","selectedPolicy","selectedAgent","selectAll","isMonthYear","format","paymentMode","paymentModearr","paymentModeError","monthArray","policyMonth","policyMonthError","yearArray","policyYear","policyYearError","policyFromError","policyToError","note","DebtorType","DebtorTypeError","agentinfo","agentinfoError","isFilterTableShow","custom","tab2Title","colOptions","col","push","label","colOptions1","rowData","viewSubAgentDetail","marginRight","substring","Stage","changeStage","column","loginPerson","loggedInUserData","LoginId","loggingUserId","getDropdown","startYear","index","parseInt","post","res","success","error","subagentstatement","stage","CurrentUserId","filterData","formattedData","dataLength","i","tempData","SubAgentStatementHeaderId","SubAgentName","SubAgentCode","AgentContactCode","ReportMonth","ReportYear","CreatedOn","SentDate","NetPremium","Levy","PaidAmount","Gross","AdminFeeAmount","AgentCommissionAmount","YCommissionAmount","AgentName","ClientName","PolicyNumber","RenewalDate","TransactionDate","TransactionType","parseFloat","toFixed","AdminFee","AmountDueToYachtsman","DueDate","GrossAmount","getOrganazationData","t","map","col1","columnToggleIcon","position","onColumnToggle","width","float","selectType","month","year","marginTop","el","dt"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\r\nimport Select from 'react-select';\r\nimport api from '../../utils/apiClient';\r\nimport moment from 'moment';\r\nimport DatePicker from 'react-date-picker';\r\nimport { withTranslation } from 'react-i18next';\r\nimport { DataTable } from 'primereact/datatable';\r\nimport { Column } from 'primereact/column';\r\nimport { CommonConfig } from '../../utils/constants';\r\nimport { Button } from 'primereact/button';\r\nimport { MultiSelect } from 'primereact/multiselect';\r\nimport { Collapse, Button as BTN, Input, Card, CardHeader, InputGroup, CardBody, Row, Col } from 'reactstrap';\r\nimport APIConstant from '../../utils/constants';\r\nimport 'primereact/resources/themes/nova-light/theme.css';\r\nimport 'primereact/resources/primereact.min.css';\r\nimport 'primeicons/primeicons.css';\r\nimport { Modal, ModalBody, ModalHeader, ModalFooter } from 'reactstrap';\r\nimport { toast } from 'react-toastify';\r\nimport { apiBase } from '../../utils/config';\r\nimport axios from 'axios';\r\nimport SearchBox from 'react-google-maps/lib/components/places/SearchBox';\r\n\r\nclass SubAgentAutoStatementSummary extends Component {\r\n\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        let columns = [\r\n            { field: \"SubAgentName\", header: \"Sub Agent Name\", sortable: true, filter: true, id: 0, style: { 'width': '100px' } },\r\n            { field: \"SubAgentCode\", header: \"Sub Agent Code\", sortable: true, filter: true, id: 1, style: { 'width': '60px' } },\r\n            { field: \"ReportMonth\", header: \"Month\", sortable: true, filter: true, id: 2, style: { 'width': '60px' } },\r\n            { field: \"ReportYear\", header: \"Year\", sortable: true, filter: true, id: 3, style: { 'width': '60px' } },\r\n            { field: \"StatementReferenceName\", header: \"Referance Name\", sortable: true, filter: true, id: 4, style: { 'width': '100px' } },\r\n            { field: \"CreatedOn\", header: \"Generated On\", sortable: true, filter: true, id: 5, style: { 'width': '60px' } },\r\n            { field: \"SentDate\", header: \"Sent On\", sortable: true, filter: true, id: 6, style: { 'width': '60px' } },\r\n            { field: \"Stage\", header: \"Stage\", sortable: true, filter: true, id: 7, style: { 'width': '60px' } },\r\n            { body: this.linkdata.bind(this), field:\"Action\", header: \"Action\", sortable: false,filterMatchMode: 'contains', filter: false, style: { 'width': '160px' }, id: 8 }\r\n        ]\r\n\r\n        let columns1 = [\r\n            { field: \"AgentName\", header: \"Agent Name\", sortable: true, filter: true, id: 0, style: { 'width': '100px' } },\r\n            { field: \"ClientName\", header: \"Client\", sortable: true, filter: true, id: 0, style: { 'width': '100px' } },\r\n            { field: \"PolicyNumber\", header: \"Policy Number\", sortable: true, filter: true, id: 1, style: { 'width': '60px' } },\r\n            { field: \"RenewalDate\", header: \"Renewal Date\", sortable: true, filter: true, id: 2, style: { 'width': '80px' } },\r\n            // { field: \"InceptionDate\", header: \"Inception Date\", sortable: true, filter: true, id: 3, style: { 'width': '80px' } },\r\n            { field: \"TransactionDate\", header: \"Transaction Date\", sortable: true, filter: true, id: 4, style: { 'width': '80px' } },\r\n            { field: \"TransactionType\", header: \"Transaction Type\", sortable: true, filter: true, id: 5, style: { 'width': '90px' } },\r\n            { field: \"NetPremium\", header: \"Net Premium\", sortable: true, filter: true, id: 6, style: { 'width': '60px', 'textAlign': 'right' } },\r\n            { field: \"Levy\", header: \"Levy\", sortable: true, filter: true, id: 7, style: { 'width': '60px', 'textAlign': 'right' } },\r\n            { field: \"AdminFeeAmount\", header: \"Admin Fee\", sortable: true, filter: true, id: 8, style: { 'width': '60px', 'textAlign': 'right' } },\r\n            { field: \"Gross\", header: \"Gross Amount\", sortable: true, filter: true, id: 9, style: { 'width': '60px', 'textAlign': 'right' } },\r\n            { field: \"AgentCommissionAmount\", header: \"Agent Commission Amount\", sortable: true, filter: true, id: 12, style: { 'width': '60px', 'textAlign': 'right' } },\r\n            { field: \"YCommissionAmount\", header: \"Amount Due to Yachtsman\", sortable: true, filter: true, id: 13, style: { 'width': '60px', 'textAlign': 'right' } },\r\n            { field: \"DueDate\", header: \"Due Date\", sortable: true, filter: true, id: 14, style: { 'width': '80px' } },\r\n            // { field: \"PaidAmount\", header: \"Paid Amount\", sortable: true, filter: true, id: 15, style: { 'width': '60px', 'textAlign': 'right' } },\r\n        ];\r\n\r\n\r\n\r\n        this.state = {\r\n            LanguageId: (props.i18n.language === 'en') ? 'en-GB' : (props.i18n.language === 'es') ? 'es-ES' : (props.i18n.language === 'ie') ? 'en-IE' : props.i18n.language,\r\n            cols: columns,\r\n            cols1: columns1,\r\n            showcol2: false,\r\n            arr: [],\r\n            arr1: [],\r\n            selectedPage: 0,\r\n            rowsPerPageOptions: CommonConfig.dataTableConfig.rowsPerPageOptions,\r\n            str: '',\r\n            rowsPerPage: CommonConfig.dataTableConfig.rowsPerPage,\r\n            globalFilter: null,\r\n            searchCollapse: false,\r\n            selected: {},\r\n            selectedPolicy: 0,\r\n            selectedAgent: '',\r\n            selectAll: 0,\r\n            isMonthYear: true,\r\n            newEntryDate: moment().format('YYYY-MM-DD'),\r\n            newEntryDateError: false,\r\n            paymentMode: '',\r\n            paymentModearr: [],\r\n            paymentModeError: false,\r\n            monthArray: [],\r\n            policyMonth: moment().format('M'),\r\n            policyMonthError: false,\r\n            yearArray: [],\r\n            policyYear: moment().format('YYYY'),\r\n            policyYearError: false,\r\n            policyFrom: '',\r\n            policyFromError: false,\r\n            policyTo: '',\r\n            policyToError: false,\r\n            note: '',\r\n            DebtorType: 'SubAgent',\r\n            DebtorTypeError: false,\r\n            agentinfo: '',\r\n            agentinfoError: false,\r\n            tillDate: moment().format(\"YYYY-MM\"),\r\n            tillDateError: false,\r\n            isFilterTableShow: false,\r\n            custom: true,\r\n            tab2Title: \"Sub Agent Statements\",\r\n        };\r\n\r\n        this.colOptions = [];\r\n        for (let col of columns) {\r\n            this.colOptions.push({ label: col.header, value: col });\r\n        }\r\n        this.colOptions1 = [];\r\n        for (let col of columns1) {\r\n            this.colOptions1.push({ label: col.header, value: col });\r\n        }\r\n    }\r\n\r\n    linkdata(rowData) {\r\n        var path = apiBase + \"SubAgentStatement/\" + rowData.StatementReferenceName;\r\n        return (\r\n            <>\r\n            <BTN color= \"warning\" title=\"Search\" onClick={() => this.viewSubAgentDetail(rowData.id)} style={{marginRight: \"10px\"}}> <i class=\"fa fa-eye\"></i> </BTN>\r\n            {(rowData.StatementReferenceName).substring((rowData.StatementReferenceName).length - 4) == 'xlsx'?\r\n            <BTN color= \"primary\" title=\"Search\" style={{marginRight: \"10px\"}} onClick={() => this.downloadData(rowData)}> <i class=\"fa fa-download\"></i> </BTN>\r\n            :(null) }\r\n          {rowData.Stage == \"Review\" ? \r\n            <BTN color=\"success\" title=\"change to Release\" onClick={() => this.changeStage(rowData.id,\"ReleaseAuto\")}> change to Release Auto </BTN>\r\n           : (rowData.Stage == \"ReleaseAuto\" ?\r\n                <BTN color=\"secondary\" title=\"change to Review\" onClick={() => this.changeStage(rowData.id,\"Review\")}> change to Review </BTN>\r\n           : null)}\r\n            </>\r\n            )\r\n    }\r\n\r\n    downloadData = (rowdata) => {\r\n        console.log(\"downloadData---rowdata\", rowdata);\r\n        var path = apiBase + \"SubAgentStatement/\" + rowdata.StatementReferenceName;\r\n        let filext = this.getFileExtension(rowdata.StatementReferenceName);\r\n        console.log(\"filext\", filext);\r\n        let fileName = rowdata.StatementReferenceName;\r\n        if (filext == undefined) {\r\n          fileName = rowdata.StatementReferenceName + \".\" + rowdata.type\r\n        }\r\n    \r\n        axios({\r\n          url: path,\r\n          method: 'GET',\r\n          responseType: 'blob', // important\r\n        }).then((response) => {\r\n          const url = window.URL.createObjectURL(new Blob([response.data]));\r\n          const link = document.createElement('a');\r\n          link.href = url;\r\n          link.setAttribute('download', fileName); //or any other extension\r\n          document.body.appendChild(link);\r\n          link.click();\r\n        });\r\n      }\r\n\r\n      getFileExtension = (filename) => {\r\n        return (/[.]/.exec(filename)) ? /[^.]+$/.exec(filename)[0] : undefined;\r\n      }\r\n\r\n    actionTemplate(rowData, column) {\r\n      }\r\n\r\n    componentDidMount() {\r\n        let loginPerson = CommonConfig.loggedInUserData().LoginId;\r\n        this.setState({loggingUserId: loginPerson})\r\n        this.getDropdown();\r\n    }\r\n\r\n    getDropdown() {\r\n\r\n        // Get Month\r\n        let monthArray = [\r\n            { label: 'January', value: 1 },\r\n            { label: 'February', value: 2 },\r\n            { label: 'March', value: 3 },\r\n            { label: 'April', value: 4 },\r\n            { label: 'May', value: 5 },\r\n            { label: 'June', value: 6 },\r\n            { label: 'July', value: 7 },\r\n            { label: 'August', value: 8 },\r\n            { label: 'September', value: 9 },\r\n            { label: 'October', value: 10 },\r\n            { label: 'November', value: 11 },\r\n            { label: 'December', value: 12 },\r\n        ];\r\n        this.setState({ monthArray: monthArray });\r\n\r\n        // Get Year - Get last 10 year from current year\r\n        let startYear = moment().format('YYYY');\r\n        let yearArray = [];\r\n        for (let index = startYear; index >= (parseInt(startYear) - 10); index--) {\r\n            yearArray.push({ label: index, value: index });\r\n        }\r\n        this.setState({ yearArray: yearArray });\r\n    }\r\n\r\n    getPageString = (e) => {\r\n        let firstPage = e.first + 1;\r\n        let l = e.rows * (e.page + 1);\r\n        let lastPage = (l < this.state.arr.length) ? l : this.state.arr.length\r\n        var str = firstPage + ' to ' + lastPage + ' out of ' + this.state.arr.length + ' records';\r\n        this.setState({ selectedPage: e.first, str: str, rowsPerPage: e.rows });\r\n    }\r\n\r\n    // export() {\r\n    //     // this.dt.exportCSV();\r\n    // }\r\n\r\n    customExport() {debugger\r\n        var data = {\r\n            id: this.state.selectedAgent\r\n        }\r\n        api.post('api/testExcel',data).then(res => {\r\n            console.log(\"testExcel\",res);\r\n            if (res.success) {\r\n\r\n            }\r\n        });\r\n    }\r\n\r\n    filterData() {\r\n        console.log(\"this.state.policyMonth\", this.state.policyMonth);\r\n        if (CommonConfig.isEmpty(this.state.policyMonth) || CommonConfig.isEmpty(this.state.policyYear)) {\r\n            toast.error('Please select Month and Year.');\r\n            return false;\r\n        }\r\n        this.subagentstatement();\r\n    }\r\n\r\n    changeStage(id, stage) {\r\n        \r\n        var data = {\r\n            id: id ? id : '',\r\n            stage: stage ? stage : '',\r\n            CurrentUserId: this.state.loggingUserId? this.state.loggingUserId : '',\r\n        };\r\n        api.post('api/SubAgentAutoUpadateStage', data).then(res => {\r\n            console.log(\"autosubagentstatement\",res);\r\n            if (res.success) {\r\n            this.filterData();\r\n            toast.success('Stage changed successful');\r\n            }\r\n        });        \r\n    }\r\n\r\n    subagentstatement() {\r\n        \r\n           var data = {\r\n               policyMonth: this.state.policyMonth ? this.state.policyMonth : '',\r\n               policyYear: this.state.policyYear ? this.state.policyYear : ''\r\n           };\r\n           api.post('api/autosubagentstatement', data).then(res => {\r\n               console.log(\"autosubagentstatement\",res);\r\n               if (res.success) {\r\n                   var formattedData = [];\r\n                   this.setState({\r\n                       selectedPage: 0\r\n                   });\r\n                   debugger\r\n                   var dataLength = res.data[0].length;\r\n                   if (dataLength > 0) {\r\n   \r\n                       for (let i = 0; i < dataLength; i++) {\r\n                           var tempData = res.data[0][i];\r\n                           formattedData.push({\r\n                               id: tempData.SubAgentStatementHeaderId,\r\n                               SubAgentName: tempData.SubAgentName,\r\n                               SubAgentCode: tempData.AgentContactCode,\r\n                               ReportMonth: tempData.ReportMonth,\r\n                               ReportYear: tempData.ReportYear,\r\n                               StatementReferenceName: tempData.StatementReferenceName,\r\n                               CreatedOn: moment(tempData.CreatedOn).format('DD/MM/YYYY'),\r\n                               SentDate: CommonConfig.isEmpty(tempData.SentDate)?\"\":moment(tempData.SentDate).format('DD/MM/YYYY'),\r\n                               Stage: tempData.Stage\r\n                           });\r\n                       }\r\n                   }\r\n   \r\n                   let firstPage = (formattedData.length) ? '1' : '0';\r\n                   let lastPage = (this.state.rowsPerPage < formattedData.length) ? this.state.rowsPerPage : formattedData.length;\r\n                   let str = firstPage + ' to ' + lastPage + ' out of ' + formattedData.length + ' records';\r\n                   this.setState({ arr: formattedData, str: str, isFilterTableShow: true });\r\n               }\r\n           });\r\n       }\r\n\r\n        viewSubAgentDetail(id) {\r\n            var data = {\r\n                id: id,\r\n            };\r\n            api.post('api/viewAutoSubAgentStatement', data).then(res => {\r\n                console.log(\"viewAutoSubAgentStatement\",res);\r\n                if (res.success) {\r\n                    var formattedData = [];\r\n                    this.setState({\r\n                        selectedPage: 0\r\n                    });\r\n                    debugger\r\n                    var dataLength = res.data[0].length;\r\n                    if (dataLength > 0) {\r\n                        var NetPremium = 0;\r\n                        var Levy = 0;\r\n                        var PaidAmount = 0;\r\n                        var Gross = 0;\r\n                        var AdminFeeAmount = 0;\r\n                        var AgentCommissionAmount = 0;\r\n                        var YCommissionAmount = 0;\r\n                        for (let i = 0; i < dataLength; i++) {\r\n                            var tempData = res.data[0][i];\r\n                            formattedData.push({\r\n                                id: i,\r\n                                AgentName: tempData.AgentName,\r\n                                ClientName: tempData.ClientName,\r\n                                PolicyNumber: tempData.PolicyNumber,\r\n                                RenewalDate: moment(tempData.RenewalDate).format('DD/MM/YYYY'),\r\n                                TransactionDate: moment(tempData.TransactionDate).format('DD/MM/YYYY'),\r\n                                TransactionType: tempData.TransactionType,\r\n                                AgentCommissionAmount: parseFloat(tempData.AgentCommissionAmount ? tempData.AgentCommissionAmount : 0).toFixed(2),\r\n                                AdminFeeAmount: parseFloat(tempData.AdminFee ? tempData.AdminFee : 0).toFixed(2),\r\n                                YCommissionAmount: parseFloat(tempData.AmountDueToYachtsman ? tempData.AmountDueToYachtsman : 0).toFixed(2),\r\n                                DueDate: moment(tempData.DueDate).format('DD/MM/YYYY'),\r\n                                Gross: parseFloat(tempData.GrossAmount ? tempData.GrossAmount : 0).toFixed(2),\r\n                                NetPremium: parseFloat(tempData.NetPremium ? tempData.NetPremium : 0).toFixed(2),\r\n                                Levy: parseFloat(tempData.Levy ? tempData.Levy : 0).toFixed(2),\r\n                                \r\n                            });\r\n                            NetPremium = NetPremium + tempData.NetPremium;\r\n                            Levy = Levy + tempData.Levy;\r\n                            // PaidAmount = PaidAmount + tempData.PaymentAmount;\r\n                            Gross = Gross + tempData.GrossAmount;\r\n                            AdminFeeAmount = AdminFeeAmount + tempData.AdminFee;\r\n                            AgentCommissionAmount = AgentCommissionAmount + tempData.AgentCommissionAmount;\r\n                            YCommissionAmount = YCommissionAmount + tempData.AmountDueToYachtsman;\r\n                        }\r\n                        formattedData.push({\r\n                            Gross: parseFloat(Gross).toFixed(2),\r\n                            NetPremium: parseFloat(NetPremium).toFixed(2),\r\n                            Levy: parseFloat(Levy).toFixed(2),\r\n                            // PaidAmount: parseFloat(PaidAmount).toFixed(2),\r\n                            AdminFeeAmount: parseFloat(AdminFeeAmount).toFixed(2),\r\n                            AgentCommissionAmount: parseFloat(AgentCommissionAmount).toFixed(2),\r\n                            YCommissionAmount: parseFloat(YCommissionAmount).toFixed(2)\r\n                        });\r\n                    }\r\n    \r\n                    let firstPage = (formattedData.length) ? '1' : '0';\r\n                    let lastPage = (this.state.rowsPerPage < formattedData.length) ? this.state.rowsPerPage : formattedData.length;\r\n                    let str = firstPage + ' to ' + lastPage + ' out of ' + formattedData.length + ' records';\r\n                    this.setState({ arr1: formattedData, str: str, isFilterTableShow: false, selectedAgent: id });\r\n                }\r\n            });\r\n        }\r\n\r\n    handleChange = (e) => {\r\n\r\n        this.setState({ [e.target.name]: e.target.value });\r\n\r\n        if (e.target.name === 'tillDate') {\r\n            this.setState({ tillDate: e.target.value, tillDateError: false });\r\n            this.show('tillDate', false, 'tillDateError', '');\r\n\r\n        }\r\n        if (e.target.name === 'newEntryDate') {\r\n            if (CommonConfig.isEmpty(e.target.value)) {\r\n                this.setState({ newEntryDateError: true });\r\n                this.show(\"newEntryDate\", true, \"newEntryDateError\", \"Please enter date\");\r\n            } else {\r\n                this.setState({ newEntryDateError: false, newEntryDate: e.target.value });\r\n                this.show(\"newEntryDate\", false, \"newEntryDateError\", \"\");\r\n            }\r\n        }\r\n        if (e.target.name === 'policyFrom') {\r\n            if (e.target.value === '' || e.target.value === null) {\r\n                this.setState({ policyFrom: '' });\r\n            } else {\r\n                this.setState({ policyFrom: e.target.value, policyTo: '' });\r\n                this.show('policyTo', false, 'policyToError', '');\r\n            }\r\n        }\r\n\r\n        if (e.target.name === 'policyTo') {\r\n            if (e.target.value === '' || e.target.value === null) {\r\n                this.setState({ policyTo: '' });\r\n            } else {\r\n                if (!CommonConfig.isEmpty(this.state.policyFrom)) {\r\n                    var isToDateGreater = moment(e.target.value).isSameOrAfter(this.state.policyFrom);\r\n                    if (!isToDateGreater) {\r\n                        this.show('policyTo', true, 'policyToError', 'To date must be greater then From date.');\r\n                    } else {\r\n                        this.show('policyTo', false, 'policyToError', '');\r\n                    }\r\n                } else {\r\n                    this.show('policyTo', false, 'policyToError', '');\r\n                }\r\n                this.setState({ policyTo: e.target.value });\r\n            }\r\n        }\r\n    }\r\n\r\n    selectType(value, type) {\r\n\r\n        if (type === 'DebtorType') {\r\n\r\n            this.setState({ DebtorTypeError: false, DebtorType: value });\r\n            this.show('DebtorType', false, \"DebtorTypeError\", \"\");\r\n            this.getOrganazationData(value)\r\n\r\n        }\r\n        if (type === 'paymentMode') {\r\n            if (CommonConfig.isEmpty(value)) {\r\n                this.setState({ paymentModeError: true, paymentMode: value });\r\n                this.show('paymentMode', true, \"paymentModeError\", \"Select payment mode\");\r\n            } else {\r\n                this.setState({ paymentModeError: false, paymentMode: value });\r\n                this.show('paymentMode', false, \"paymentModeError\", \"\");\r\n\r\n            }\r\n        }\r\n        if (type === 'agentinfo') {\r\n\r\n            this.setState({ agentinfo: value, DebtorType: 'SubAgent' });\r\n\r\n        }\r\n\r\n        if (type === 'policyMonth') {\r\n            if (value === '' || value === undefined || value === null) {\r\n                this.setState({ policyMonth: '' });\r\n            } else {\r\n                this.setState({ policyMonth: value.value });\r\n            }\r\n        }\r\n\r\n        if (type === 'policyYear') {\r\n            if (value === '' || value === undefined || value === null) {\r\n                this.setState({ policyYear: '' });\r\n            } else {\r\n                this.setState({ policyYear: value.value });\r\n            }\r\n        }\r\n\r\n    }\r\n\r\n\r\n    render() {\r\n        const { t } = this.props;\r\n        var header = null;\r\n        let columns = '';\r\n        let columns1 = '';\r\n        // if (this.state.agentinfo == '') {\r\n        columns = this.state.cols.map((col, i) => {\r\n            return <Column key={i} field={col.field} header={col.header} body={col.body} sortable={col.sortable} filter={col.filter} filterMatchMode={col.filterMatchMode} style={col.style}\r\n            />;\r\n        });\r\n        if (this.state.arr1.length > 0) {\r\n            columns1 = this.state.cols1.map((col1, i) => {\r\n                return <Column key={i} field={col1.field} header={col1.header} body={col1.body} sortable={col1.sortable} filter={col1.filter} filterMatchMode={col1.filterMatchMode} style={col1.style}\r\n                />;\r\n            });\r\n        }\r\n        else {\r\n            columns = this.state.cols.map((col, i) => {\r\n                return <Column key={i} field={col.field} header={col.header} body={col.body} sortable={col.sortable} filter={col.filter} filterMatchMode={col.filterMatchMode} style={col.style}\r\n                />;\r\n            });\r\n        }\r\n\r\n        return (\r\n            <div>\r\n                <div className=\"basic-header\">\r\n                    <h1>Auto Sub Agent Statement</h1>\r\n                    <div md=\"3\" className=\"header-right-option\" >\r\n                        <MultiSelect value={this.state.cols} options={this.colOptions}\r\n                            fixedPlaceholder={true} placeholder={CommonConfig.dataTableConfig.columnToggleIcon} tooltip=\"Show / Hide Column\" tooltipOptions={{ position: 'bottom' }}\r\n                            onChange={this.onColumnToggle} style={{ width: '50px' }}\r\n                        />\r\n\r\n                        {/* <Button type=\"button\" icon=\"pi pi-external-link\" tooltip=\"Export as CSV\" tooltipOptions={{ position: 'bottom' }} onClick={this.export} style={{ marginRight: 10 }}></Button> */}\r\n                    </div>\r\n                </div>\r\n                <div className=\"input-box\" id=\"accordion\">\r\n                    <Card className=\"mb-0\">\r\n                        <CardHeader id=\"headingOne\">\r\n                            <BTN block color=\"link\" className=\"text-left m-0 p-0\" onClick={() => this.setState({ custom: !this.state.custom })} aria-expanded={this.state.custom} aria-controls=\"collapseOne\">\r\n                                <h5 className=\"m-0 p-0\">\r\n                                    Search Sub Agent\r\n                            <i style={{ float: 'right' }} className={this.state.custom ? \"fa fa-chevron-down\" : \"fa fa-chevron-up\"}></i>\r\n                                </h5>\r\n                            </BTN>\r\n                        </CardHeader>\r\n                        <Collapse isOpen={this.state.custom} data-parent=\"#accordion\" id=\"collapseOne\" aria-labelledby=\"headingOne\">\r\n                            <CardBody>\r\n                                <div className=\"filter-data\">\r\n                                    <Row>\r\n                                        <Col md=\"1.5\">\r\n\r\n                                            <div className=\"input-box\">\r\n                                                <label>Month</label>\r\n                                                <Input type=\"select\" name=\"policyMonth\" id=\"policyMonth\" value={this.state.policyMonth} onChange={(e) => this.selectType(e.target, 'policyMonth')}>\r\n                                                    <option value=\"\">Select Month</option>\r\n                                                    {this.state.monthArray.map((month, i) => {\r\n                                                        return (<option value={month.value} key={i}>{month.label}</option>)\r\n                                                    })\r\n                                                    }\r\n                                                </Input>\r\n                                                <em id=\"policyMonthError\" className=\"error invalid-feedback\"></em>\r\n                                            </div>\r\n                                        </Col>\r\n                                        <Col md=\"2\">\r\n                                            <div className=\"input-box\">\r\n                                                <label>Year</label>\r\n                                                <Input type=\"select\" name=\"policyYear\" id=\"policyYear\" value={this.state.policyYear} onChange={(e) => this.selectType(e.target, 'policyYear')}>\r\n                                                    <option value=\"\">Select Year</option>\r\n                                                    {this.state.yearArray.map((year, i) => {\r\n                                                        return (<option value={year.value} key={i}>{year.label}</option>)\r\n                                                    })\r\n                                                    }\r\n                                                </Input>\r\n                                                <em id=\"policyYearError\" className=\"error invalid-feedback\"></em>\r\n                                            </div>\r\n                                        </Col>\r\n\r\n                                        <Col md=\"2.5\" style={{ marginTop: '20px' }}>\r\n                                            <BTN color=\"success\" title=\"Search\" onClick={() => this.filterData()}> Search </BTN>\r\n                                        </Col>\r\n                                    </Row>\r\n                                </div>\r\n                            </CardBody>\r\n                        </Collapse>\r\n                    </Card>\r\n                </div>\r\n                {/* {this.state.showcol2 != true ? (<div className=\"table-custom\"> */}\r\n                <div className=\"input-box\" id=\"accordion\">\r\n                    <Card className=\"mb-0\">\r\n                        <CardHeader id=\"headingOne\">\r\n                            <BTN block color=\"link\" className=\"text-left m-0 p-0\" onClick={() => this.setState({ isFilterTableShow: !this.state.isFilterTableShow })} aria-expanded={this.state.isFilterTableShow} aria-controls=\"collapseOne\">\r\n                                <h5 className=\"m-0 p-0\">\r\n                                    <span>{this.state.tab2Title}</span>\r\n                                    <i style={{ float: 'right' }} className={this.state.isFilterTableShow ? \"fa fa-chevron-down\" : \"fa fa-chevron-up\"}></i>\r\n                                </h5>\r\n                            </BTN>\r\n                        </CardHeader>\r\n                        <Collapse isOpen={this.state.isFilterTableShow} data-parent=\"#accordion\" id=\"collapseOne\" aria-labelledby=\"headingOne\">\r\n                            <CardBody>\r\n                                <DataTable ref={(el) => this.dt = el} value={this.state.arr} first={this.state.selectedPage} onPage={(e) => this.getPageString(e)}\r\n                                    paginator={true} rows={this.state.rowsPerPage} header={header} totalRecords={this.state.arr.length} exportFilename=\"Sub Agent Statement\"\r\n                                    currentPageReportTemplate={this.state.str}\r\n                                    scrollable={true}\r\n                                    paginatorTemplate=\"CurrentPageReport FirstPageLink PrevPageLink PageLinks NextPageLink LastPageLink RowsPerPageDropdown\"\r\n                                    rowsPerPageOptions={this.state.rowsPerPageOptions} globalFilter={this.state.globalFilter} emptyMessage=\"No records found\"\r\n                                    responsive={true} resizableColumns={true} columnResizeMode=\"expand\">\r\n                                    {columns}\r\n                                </DataTable>\r\n                            </CardBody>\r\n                        </Collapse>\r\n                    </Card>\r\n                </div>\r\n                {/* </div>\r\n                    ) : (<div className=\"table-custom\"> */}\r\n                {this.state.arr1.length > 0\r\n                    ? <div className=\"table-custom\">\r\n                        <DataTable ref={(el) => this.dt = el} value={this.state.arr1} first={this.state.selectedPage} onPage={(e) => this.getPageString(e)}\r\n                            paginator={true} rows={this.state.rowsPerPage} header={header} totalRecords={this.state.arr.length} exportFilename=\"Sub Agent Statement\"\r\n                            currentPageReportTemplate={this.state.str}\r\n                            scrollable={true}\r\n                            paginatorTemplate=\"CurrentPageReport FirstPageLink PrevPageLink PageLinks NextPageLink LastPageLink RowsPerPageDropdown\"\r\n                            rowsPerPageOptions={this.state.rowsPerPageOptions} globalFilter={this.state.globalFilter} emptyMessage=\"No records found\"\r\n                            responsive={true} resizableColumns={true} columnResizeMode=\"expand\">\r\n                            {columns1}\r\n                        </DataTable>\r\n                        {/* <BTN color=\"success\" title=\"Export as CSV\" onClick={() => this.customExport()}> Export as CSV </BTN> */}\r\n                    </div>\r\n                    : (null)}\r\n                {/* </div>)} */}\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\n\r\nexport default withTranslation()(SubAgentAutoStatementSummary);\r\n"]},"metadata":{},"sourceType":"module"}