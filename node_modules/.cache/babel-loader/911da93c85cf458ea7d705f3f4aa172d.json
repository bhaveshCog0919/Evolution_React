{"ast":null,"code":"import _classCallCheck from\"/Users/bhavik/Downloads/Cognisun/Evolution/Evolution_React/evolution_new/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/bhavik/Downloads/Cognisun/Evolution/Evolution_React/evolution_new/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _assertThisInitialized from\"/Users/bhavik/Downloads/Cognisun/Evolution/Evolution_React/evolution_new/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";import _inherits from\"/Users/bhavik/Downloads/Cognisun/Evolution/Evolution_React/evolution_new/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/bhavik/Downloads/Cognisun/Evolution/Evolution_React/evolution_new/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component}from'react';import'primereact/resources/themes/nova-light/theme.css';import'primereact/resources/primereact.min.css';import'primeicons/primeicons.css';import'react-toastify/dist/ReactToastify.css';import{Col,Row,Modal,ModalBody,ModalHeader,ModalFooter,Button as BTN,Input}from'reactstrap';import{withTranslation}from'react-i18next';import{DataTable}from'primereact/datatable';import{Column}from'primereact/column';import{MultiSelect}from'primereact/multiselect';import{InputText}from'primereact/inputtext';import{Button}from'primereact/button';import{CommonConfig}from'../../../utils/constants';import api from'../../../utils/apiClient';import APIConstant from'../../../utils/constants';var SubBinder=/*#__PURE__*/function(_Component){_inherits(SubBinder,_Component);var _super=_createSuper(SubBinder);function SubBinder(props){var _this;_classCallCheck(this,SubBinder);_this=_super.call(this,props);_this.getPageString=function(e){var firstPage=e.first+1;var l=e.rows*(e.page+1);var lastPage=l<_this.state.subBinderArray.length?l:_this.state.subBinderArray.length;var str=firstPage+' to '+lastPage+' out of '+_this.state.subBinderArray.length+' records';_this.setState({selectedPage:e.first,str:str,rowsPerPage:e.rows});};var columns=[{field:\"Id\",header:\"Id\",sortable:true,filter:true,id:0},{field:\"Type\",header:\"Type\",sortable:true,filter:true,id:1},{field:\"AgentName\",header:\"Agent Name\",sortable:true,filter:true,id:2},{field:\"Title\",header:\"Title\",sortable:true,filter:true,id:3},{field:\"RefID\",header:\"Ref ID\",sortable:true,filter:true,id:4},{field:\"ActiveFrom\",header:\"Active From\",sortable:true,filter:true,id:5},{field:\"ActiveTo\",header:\"Active To\",sortable:true,filter:true,id:6},{field:\"LastUpdated\",header:\"Last Updated\",sortable:true,filter:true,id:7},{field:\"UpdatedBy\",header:\"Updated By\",sortable:true,filter:true,id:8},{field:\"Status\",header:\"Status\",sortable:true,filter:true,id:9},{body:_this.actionTemplate.bind(_assertThisInitialized(_this)),header:\"Action\",sortable:false,filter:false,id:10}];_this.state={selectedLanguage:props.i18n.language==='en'?'en-GB':props.i18n.language==='es'?'es-ES':props.i18n.language==='ie'?'en-IE':props.i18n.language,cols:columns,subBinderArray:[],selectedPage:0,rowsPerPageOptions:CommonConfig.dataTableConfig.rowsPerPageOptions,rowsPerPage:CommonConfig.dataTableConfig.rowsPerPage,globalFilter:null,paginatorTemplate:\"CurrentPageReport FirstPageLink PrevPageLink PageLinks NextPageLink LastPageLink RowsPerPageDropdown\"};_this.colOptions=[];for(var _i=0,_columns=columns;_i<_columns.length;_i++){var col=_columns[_i];_this.colOptions.push({label:col.header,value:col});}_this.onColumnToggle=_this.onColumnToggle.bind(_assertThisInitialized(_this));_this.actionTemplate=_this.actionTemplate.bind(_assertThisInitialized(_this));_this.export=_this.export.bind(_assertThisInitialized(_this));return _this;}_createClass(SubBinder,[{key:\"onColumnToggle\",value:function onColumnToggle(event){var valueInOrder=event.value.sort(function(x,y){return x.id-y.id;});this.setState({cols:valueInOrder});}},{key:\"export\",value:function _export(){this.dt.exportCSV();}},{key:\"actionTemplate\",value:function actionTemplate(rowData,column){var _this2=this;return/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(Button,{type:\"button\",icon:\"pi pi-eye\",className:\"p-button-warning\",onClick:function onClick(){return _this2.edit(rowData);},style:{marginRight:'.5em'},tooltip:\"View\",tooltipOptions:{position:'bottom'}}),/*#__PURE__*/React.createElement(Button,{type:\"button\",icon:\"pi pi-trash\",className:\"p-button-danger\",tooltip:\"Delete\",tooltipOptions:{position:'bottom'}}));}},{key:\"componentWillMount\",value:function componentWillMount(){}},{key:\"componentDidMount\",value:function componentDidMount(){var splitData=this.props.location.pathname.split(\"/\");// if (splitData[3] !== undefined) {\nif(!CommonConfig.isEmpty(splitData[3])){this.setState({BinderId:splitData[3]});this.getSubBinders(splitData[3]);}// if (this.props.match.params.constructor === Object && Object.keys(this.props.match.params).length !== 0) {\n//     this.setState({ BinderId: this.props.match.params.Id })\n//     this.getSubBinders(this.props.match.params.Id)\n// }\n}},{key:\"getSubBinders\",value:function getSubBinders(BinderId){var _this3=this;var data={\"BinderId\":BinderId,\"UserId\":CommonConfig.loggedInUserId()};api.post(APIConstant.path.getSubBinders,data).then(function(res){console.log(res.data[0]);if(res.success){var getSubBinders=res.data[0];_this3.setState({subBinderArray:getSubBinders.map(function(obj){console.log(obj);return{\"Id\":obj.SubBinderId,\"Type\":obj.SubBinderType,\"AgentName\":obj.NAME,\"Title\":obj.SubBinderTitle,\"RefID\":obj.ContactCode,\"ActiveFrom\":obj.LiveStartDate,\"ActiveTo\":obj.LiveEndDate,\"LastUpdated\":obj.UpdatedOn,\"UpdatedBy\":obj.UpdatedByName,\"Status\":obj.Status};})});}}).catch(function(err){console.log(err);});}},{key:\"addBinder\",value:function addBinder(){this.props.history.push('/AddUpdateBinder');}},{key:\"render\",value:function render(){var _this4=this;var header=/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(Row,null,/*#__PURE__*/React.createElement(Col,{md:\"1\"},/*#__PURE__*/React.createElement(MultiSelect,{value:this.state.cols,options:this.colOptions,fixedPlaceholder:true,placeholder:CommonConfig.dataTableConfig.columnToggleIcon,tooltip:\"Show / Hide Column\",onChange:this.onColumnToggle,style:{width:'50px'}})),/*#__PURE__*/React.createElement(Col,{md:\"11\"},/*#__PURE__*/React.createElement(\"div\",{style:{textAlign:'right'}},/*#__PURE__*/React.createElement(\"i\",{className:\"pi pi-search\",style:{margin:'4px 4px 0 0'}}),/*#__PURE__*/React.createElement(InputText,{type:\"search\",onInput:function onInput(e){return _this4.setState({globalFilter:e.target.value});},placeholder:\"Global Search\",size:\"30\",style:{marginRight:10}}),/*#__PURE__*/React.createElement(Button,{type:\"button\",icon:\"pi pi-external-link\",iconPos:\"left\",tooltip:\"Export as CSV\",tooltipOptions:{position:'left'},onClick:this.export,style:{marginRight:10}})))));var columns=this.state.cols.map(function(col,i){return/*#__PURE__*/React.createElement(Column,{key:i,field:col.field,header:col.header,body:col.body,sortable:col.sortable,filter:col.filter});});return/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"div\",{className:\"basic-header\"},/*#__PURE__*/React.createElement(\"h1\",null,\"Sub Binders\"),\"/\",/*#__PURE__*/React.createElement(\"div\",{className:\"header-right-option\"},/*#__PURE__*/React.createElement(MultiSelect,{value:this.state.cols,options:this.colOptions,fixedPlaceholder:true,placeholder:CommonConfig.dataTableConfig.columnToggleIcon,tooltip:\"Show / Hide Column\",onChange:this.onColumnToggle,style:{width:'50px'}}),/*#__PURE__*/React.createElement(Button,{type:\"button\",icon:\"pi pi-plus\",tooltip:\"Add Contact\",tooltipOptions:{position:'bottom'},onClick:function onClick(){return _this4.addBinder();}}),/*#__PURE__*/React.createElement(Button,{type:\"button\",icon:\"pi pi-external-link\",tooltip:\"Export as CSV\",tooltipOptions:{position:'bottom'},onClick:this.export,style:{marginRight:10}}))),/*#__PURE__*/React.createElement(\"div\",{className:\"table-custom\"},/*#__PURE__*/React.createElement(DataTable,{ref:function ref(el){return _this4.dt=el;},value:this.state.subBinderArray,first:this.state.selectedPage,onPage:function onPage(e){return _this4.getPageString(e);},paginator:true,rows:this.state.rowsPerPage,totalRecords:this.state.subBinderArray.length,exportFilename:\"Contact List\",currentPageReportTemplate:this.state.str,scrollable:true,scrollHeight:\"340px\",paginatorTemplate:this.state.paginatorTemplate,rowsPerPageOptions:this.state.rowsPerPageOptions,globalFilter:this.state.globalFilter,emptyMessage:\"No records found\",responsive:true,resizableColumns:true,columnResizeMode:\"fit\"//stateKey=\"contactList\" stateStorage=\"local\" header={header} \n},columns)));}}]);return SubBinder;}(Component);export default withTranslation()(SubBinder);","map":{"version":3,"sources":["/Users/bhavik/Downloads/Cognisun/Evolution/Evolution_React/evolution_new/src/views/Binder/AddUdateBinder/SubBinder.js"],"names":["React","Component","Col","Row","Modal","ModalBody","ModalHeader","ModalFooter","Button","BTN","Input","withTranslation","DataTable","Column","MultiSelect","InputText","CommonConfig","api","APIConstant","SubBinder","props","getPageString","e","firstPage","first","l","rows","page","lastPage","state","subBinderArray","length","str","setState","selectedPage","rowsPerPage","columns","field","header","sortable","filter","id","body","actionTemplate","bind","selectedLanguage","i18n","language","cols","rowsPerPageOptions","dataTableConfig","globalFilter","paginatorTemplate","colOptions","col","push","label","value","onColumnToggle","export","event","valueInOrder","sort","x","y","dt","exportCSV","rowData","column","edit","marginRight","position","splitData","location","pathname","split","isEmpty","BinderId","getSubBinders","data","loggedInUserId","post","path","then","res","console","log","success","map","obj","SubBinderId","SubBinderType","NAME","SubBinderTitle","ContactCode","LiveStartDate","LiveEndDate","UpdatedOn","UpdatedByName","Status","catch","err","history","columnToggleIcon","width","textAlign","margin","target","i","addBinder","el"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\r\nimport 'primereact/resources/themes/nova-light/theme.css';\r\nimport 'primereact/resources/primereact.min.css';\r\nimport 'primeicons/primeicons.css';\r\nimport 'react-toastify/dist/ReactToastify.css';\r\nimport { Col, Row, Modal, ModalBody, ModalHeader, ModalFooter, Button as BTN, Input } from 'reactstrap';\r\nimport { withTranslation } from 'react-i18next';\r\nimport { DataTable } from 'primereact/datatable';\r\nimport { Column } from 'primereact/column';\r\nimport { MultiSelect } from 'primereact/multiselect';\r\nimport { InputText } from 'primereact/inputtext';\r\nimport { Button } from 'primereact/button';\r\nimport { CommonConfig } from '../../../utils/constants';\r\nimport api from '../../../utils/apiClient';\r\nimport APIConstant from '../../../utils/constants';\r\n\r\nclass SubBinder extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n        \r\n        let columns = [\r\n            { field: \"Id\", header: \"Id\", sortable: true, filter: true, id: 0 },\r\n            { field: \"Type\", header: \"Type\", sortable: true, filter: true, id: 1 },\r\n            { field: \"AgentName\", header: \"Agent Name\", sortable: true, filter: true, id: 2 },\r\n            { field: \"Title\", header: \"Title\", sortable: true, filter: true, id: 3 },\r\n            { field: \"RefID\", header: \"Ref ID\", sortable: true, filter: true, id: 4 },\r\n            { field: \"ActiveFrom\", header: \"Active From\", sortable: true, filter: true, id: 5 },\r\n            { field: \"ActiveTo\", header: \"Active To\", sortable: true, filter: true, id: 6 },\r\n            { field: \"LastUpdated\", header: \"Last Updated\", sortable: true, filter: true, id: 7 },\r\n            { field: \"UpdatedBy\", header: \"Updated By\", sortable: true, filter: true, id: 8 },\r\n            { field: \"Status\", header: \"Status\", sortable: true, filter: true, id: 9 },\r\n            { body: this.actionTemplate.bind(this), header: \"Action\", sortable: false, filter: false, id: 10 }\r\n        ];\r\n\r\n        this.state = {\r\n            selectedLanguage: (props.i18n.language === 'en') ? 'en-GB' : (props.i18n.language === 'es') ? 'es-ES' : (props.i18n.language === 'ie') ? 'en-IE' : props.i18n.language,\r\n            cols: columns,\r\n            subBinderArray: [],\r\n            selectedPage: 0,\r\n            rowsPerPageOptions: CommonConfig.dataTableConfig.rowsPerPageOptions,\r\n            rowsPerPage: CommonConfig.dataTableConfig.rowsPerPage,\r\n            globalFilter: null,\r\n            paginatorTemplate: \"CurrentPageReport FirstPageLink PrevPageLink PageLinks NextPageLink LastPageLink RowsPerPageDropdown\"\r\n        };\r\n\r\n        this.colOptions = [];\r\n        for (let col of columns) {\r\n            this.colOptions.push({ label: col.header, value: col });\r\n        }\r\n\r\n        this.onColumnToggle = this.onColumnToggle.bind(this);\r\n        this.actionTemplate = this.actionTemplate.bind(this);\r\n        this.export = this.export.bind(this);\r\n    }\r\n\r\n    getPageString = (e) => {\r\n        let firstPage = e.first + 1;\r\n        let l = e.rows * (e.page + 1);\r\n        let lastPage = (l < this.state.subBinderArray.length) ? l : this.state.subBinderArray.length\r\n        var str = firstPage + ' to ' + lastPage + ' out of ' + this.state.subBinderArray.length + ' records';\r\n        this.setState({ selectedPage: e.first, str: str, rowsPerPage: e.rows });\r\n    }\r\n\r\n    onColumnToggle(event) {\r\n        let valueInOrder = event.value.sort((x, y) => { return x.id - y.id });\r\n        this.setState({ cols: valueInOrder });\r\n    }\r\n\r\n    export() {\r\n        this.dt.exportCSV();\r\n    }\r\n\r\n    actionTemplate(rowData, column) {\r\n        return <div>\r\n            <Button type=\"button\" icon=\"pi pi-eye\" className=\"p-button-warning\" onClick={() => this.edit(rowData)}\r\n                style={{ marginRight: '.5em' }} tooltip=\"View\" tooltipOptions={{ position: 'bottom' }}>\r\n            </Button>\r\n            <Button type=\"button\" icon=\"pi pi-trash\" className=\"p-button-danger\" tooltip=\"Delete\" tooltipOptions={{ position: 'bottom' }}></Button>\r\n        </div>;\r\n    }\r\n\r\n    componentWillMount() {\r\n\r\n    }\r\n\r\n    componentDidMount() {\r\n        var splitData = this.props.location.pathname.split(\"/\");\r\n        // if (splitData[3] !== undefined) {\r\n        if (!CommonConfig.isEmpty(splitData[3])) {\r\n            this.setState({ BinderId: splitData[3] })\r\n            this.getSubBinders(splitData[3])\r\n        } \r\n        // if (this.props.match.params.constructor === Object && Object.keys(this.props.match.params).length !== 0) {\r\n        //     this.setState({ BinderId: this.props.match.params.Id })\r\n        //     this.getSubBinders(this.props.match.params.Id)\r\n        // }\r\n    }\r\n\r\n    getSubBinders(BinderId) {\r\n        \r\n        let data = {\r\n            \"BinderId\": BinderId,\r\n            \"UserId\": CommonConfig.loggedInUserId(),\r\n        }\r\n        api.post(APIConstant.path.getSubBinders, data).then(res => {\r\n            console.log(res.data[0]);\r\n\r\n            if (res.success) {\r\n                var getSubBinders = res.data[0]\r\n                this.setState({\r\n                    subBinderArray: getSubBinders.map((obj) => {\r\n                        console.log(obj);\r\n                        return {\r\n                            \"Id\": obj.SubBinderId,\r\n                            \"Type\": obj.SubBinderType,\r\n                            \"AgentName\": obj.NAME,\r\n                            \"Title\": obj.SubBinderTitle,\r\n                            \"RefID\": obj.ContactCode,\r\n                            \"ActiveFrom\": obj.LiveStartDate,\r\n                            \"ActiveTo\": obj.LiveEndDate,\r\n                            \"LastUpdated\": obj.UpdatedOn,\r\n                            \"UpdatedBy\": obj.UpdatedByName,\r\n                            \"Status\": obj.Status,\r\n                        }\r\n                    })\r\n                })\r\n            }\r\n        }).catch(err => {\r\n            console.log(err)\r\n        });\r\n    }\r\n\r\n    addBinder() {\r\n        this.props.history.push('/AddUpdateBinder');\r\n    }\r\n\r\n    render() {\r\n        var header = <div>\r\n            <Row>\r\n                <Col md=\"1\">\r\n                    <MultiSelect value={this.state.cols} options={this.colOptions}\r\n                        fixedPlaceholder={true} placeholder={CommonConfig.dataTableConfig.columnToggleIcon} tooltip=\"Show / Hide Column\"\r\n                        onChange={this.onColumnToggle} style={{ width: '50px' }} />\r\n                </Col>\r\n                <Col md=\"11\">\r\n                    <div style={{ textAlign: 'right' }}>\r\n                        <i className=\"pi pi-search\" style={{ margin: '4px 4px 0 0' }}></i>\r\n                        <InputText type=\"search\" onInput={(e) => this.setState({ globalFilter: e.target.value })} placeholder=\"Global Search\" size=\"30\" style={{ marginRight: 10 }} />\r\n\r\n                        <Button type=\"button\" icon=\"pi pi-external-link\" iconPos=\"left\" tooltip=\"Export as CSV\" tooltipOptions={{ position: 'left' }} onClick={this.export} style={{ marginRight: 10 }}></Button>\r\n                    </div>\r\n                </Col>\r\n            </Row>\r\n        </div>;\r\n\r\n        let columns = this.state.cols.map((col, i) => {\r\n            return <Column key={i} field={col.field} header={col.header} body={col.body} sortable={col.sortable} filter={col.filter} />;\r\n        });\r\n\r\n        return (\r\n            <div>\r\n                <div className=\"basic-header\">\r\n                    <h1>Sub Binders</h1>/\r\n                    <div className=\"header-right-option\">\r\n                        <MultiSelect value={this.state.cols} options={this.colOptions}\r\n                            fixedPlaceholder={true} placeholder={CommonConfig.dataTableConfig.columnToggleIcon} tooltip=\"Show / Hide Column\"\r\n                            onChange={this.onColumnToggle} style={{ width: '50px' }}\r\n                        />\r\n                        <Button type=\"button\" icon=\"pi pi-plus\" tooltip=\"Add Contact\" tooltipOptions={{ position: 'bottom' }} onClick={() => this.addBinder()}></Button>\r\n                        <Button type=\"button\" icon=\"pi pi-external-link\" tooltip=\"Export as CSV\" tooltipOptions={{ position: 'bottom' }} onClick={this.export} style={{ marginRight: 10 }}></Button>\r\n                    </div>\r\n                </div>\r\n\r\n                <div className=\"table-custom\">\r\n                    <DataTable ref={(el) => this.dt = el} value={this.state.subBinderArray} first={this.state.selectedPage} onPage={(e) => this.getPageString(e)}\r\n                        paginator={true} rows={this.state.rowsPerPage} totalRecords={this.state.subBinderArray.length} exportFilename=\"Contact List\"\r\n                        currentPageReportTemplate={this.state.str} scrollable={true} scrollHeight=\"340px\"\r\n                        paginatorTemplate={this.state.paginatorTemplate}\r\n                        rowsPerPageOptions={this.state.rowsPerPageOptions} globalFilter={this.state.globalFilter} emptyMessage=\"No records found\"\r\n                        responsive={true} resizableColumns={true} columnResizeMode=\"fit\" //stateKey=\"contactList\" stateStorage=\"local\" header={header} \r\n                    >\r\n                        {columns}\r\n                    </DataTable>\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nexport default withTranslation()(SubBinder);"]},"metadata":{},"sourceType":"module"}